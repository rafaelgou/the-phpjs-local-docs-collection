<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Working with Git | Kohana User Guide</title>

<script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok8v=02fcfa4f56/"},atok:"eee59e90a8282bcfc7cd8af99a42a3da",petok:"d8ada95eff82a91ab8ce50b842eae813011d0859-1394799559-1800",zone:"kohanaframework.org",rocket:"0",apps:{"ga_key":{"ua":"UA-27864271-1","ga_bs":"2"}}}];var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0;a.src="//ajax.cloudflare.com/cdn-cgi/nexp/dok8v=b064e16429/cloudflare.min.js";b.parentNode.insertBefore(a,b);}}catch(e){};
//]]>
</script>
<link type="text/css" href="../../../guide-media/css/print.css" rel="stylesheet" media="print" />
<link type="text/css" href="../../../guide-media/css/screen.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../../guide-media/css/kodoc.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../../guide-media/css/shCore.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../../guide-media/css/shThemeKodoc.css" rel="stylesheet" media="screen" />

<script type="text/javascript" src="../../../guide-media/js/jquery.min.js"></script>
<script type="text/javascript" src="../../../guide-media/js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../../guide-media/js/kodoc.js"></script>
<script type="text/javascript" src="../../../guide-media/js/shCore.js"></script>
<script type="text/javascript" src="../../../guide-media/js/shBrushPhp.js"></script>

<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]-->
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-27864271-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script>
</head>
<body>

	<div id="kodoc-header">
		<div class="container">
			<a href="http://kohanaframework.org/" id="kodoc-logo">
				<img src="../../../guide-media/img/kohana.png" />
			</a>
			<div id="kodoc-menu">
				<ul>
					<li class="guide first">
						<a href="../../../guide.1.html">User Guide</a>
					</li>
										<li class="api">
						<a href="../../../guide-api.html">API Browser</a>
					</li>
									</ul>
			</div>
		</div>
	</div>

	<div id="kodoc-content">
		<div class="wrapper">
			<div class="container">
				<div class="span-22 prefix-1 suffix-1">
					<ul id="kodoc-breadcrumb">
																				<li><a href="../../../guide.1.html">User Guide</a></li>
																											<li><a href="../../kohana.1.html">Kohana</a></li>
																											<li class="last">Working with Git</li>
																		</ul>
				</div>
				<div class="span-6 prefix-1">
					<div id="kodoc-topics">
						<h2 id="kohana"><a href="../index.html">Kohana</a></h2>

<ul>
<li><a href="../install.html">Installation</a></li>
<li><span>Getting Started</span>

<ul>
<li><a href="../conventions.html">Conventions and Style</a></li>
<li><a href="../mvc.1.html">Model View Controller</a>

<ul>
<li><a href="../mvc/controllers.html">Controllers</a></li>
<li><a href="../mvc/models.html">Models</a></li>
<li><a href="../mvc/views.html">Views</a></li>
</ul></li>
<li><a href="../files.1.html">Cascading Filesystem</a>

<ul>
<li><a href="../files/classes.html">Class Files</a></li>
<li><a href="../files/config.html">Config Files</a></li>
<li><a href="../files/i18n.html">Translation Files</a></li>
<li><a href="../files/messages.html">Message Files</a></li>
</ul></li>
<li><a href="../config.html">Configuration</a></li>
<li><a href="../flow.html">Request Flow</a></li>
<li><a href="../bootstrap.html">Bootstrap</a></li>
<li><a href="../modules.html">Modules</a></li>
<li><a href="../routing.html">Routing</a></li>
<li><a href="../errors.html">Error Handling</a></li>
<li><a href="../tips.html">Tips &amp; Common Mistakes</a></li>
<li><a href="../upgrading.html">Upgrading from v3.2</a></li>
</ul></li>
<li><span>Basic Usage</span>

<ul>
<li><a href="../debugging.html">Debugging</a></li>
<li><a href="../autoloading.html">Loading Classes</a></li>
<li><a href="../extension.html">Transparent Extension</a></li>
<li><a href="../helpers.html">Helpers</a></li>
<li><a href="../requests.html">Requests</a></li>
<li><a href="../sessions.html">Sessions</a></li>
<li><a href="../cookies.html">Cookies</a></li>
<li><a href="../fragments.html">Fragments</a></li>
<li><a href="../profiling.html">Profiling</a></li>
</ul></li>
<li><a href="../security.1.html">Security</a>

<ul>
<li><a href="../security/xss.html">XSS</a></li>
<li><a href="../security/validation.html">Validation</a></li>
<li><a href="../security/cookies.html">Cookies</a></li>
<li><a href="../security/database.html">Database</a></li>
<li><a href="../security/encryption.html">Encryption</a></li>
<li><a href="../security/deploying.html">Deploying</a></li>
</ul></li>
<li><span>Tutorials</span>

<ul>
<li><a href="hello-world.html">Hello World</a></li>
<li><a href="simple-mvc.html">Simple MVC</a></li>
<li><a href="error-pages.html">Custom Error Pages</a></li>
<li><a href="clean-urls.html">Clean URLs</a></li>
<li><a href="sharing-kohana.html">Sharing Kohana</a></li>
<li><a href="library-kohana.html">Kohana as a Library</a></li>
<li><a href="git.html">Working with Git</a></li>
</ul></li>
</ul>
					</div>
				</div>
				<div id="kodoc-body" class="span-16 suffix-1 last">
					<h1 id="creating-a-new-application">Creating a New Application</h1>

<p class="note">The following examples assume that your web server is already set up, and you are going to create a new application at <a href="http://localhost/gitorial/">http://localhost/gitorial/</a>.</p>

<div class="page-toc">
					<a href="git.html#creating-a-new-application">Creating a New Application</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="git.html#adding-submodules">Adding Submodules</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="git.html#updating-submodules">Updating Submodules</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="git.html#removing-submodules">Removing Submodules</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="git.html#updating-remote-repository-url">Updating Remote Repository URL</a><br />
	</div>
<p>Using your console, change to the empty directory <code>gitorial</code> and run <code>git init</code>. This will create the bare structure for a new git repository.</p>

<p>Next, we will create a <a href="http://www.kernel.org/pub/software/scm/git/docs/git-submodule.html">submodule</a> for the <code>system</code> directory. Go to <a href="http://github.com/kohana/core">http://github.com/kohana/core</a> and copy the "Clone URL":</p>

<p><img src="http://img.skitch.com/20091019-rud5mmqbf776jwua6hx9nm1n.png" alt="Github Clone URL" /></p>

<p>Now use the URL to create the submodule for <code>system</code>:</p>

<pre><code>git submodule add git://github.com/kohana/core.git system
</code></pre>

<p class="note">This will create a link to the current development version of the next stable release. The development version should almost always be safe to use, have the same API as the current stable download with bugfixes applied.</p>

<p>Now add whatever submodules you need. For example, if you need the <a href="../../../guide-api/Database.html">Database</a> module:</p>

<pre><code>git submodule add git://github.com/kohana/database.git modules/database
</code></pre>

<p>After submodules are added, they must be initialized:</p>

<pre><code>git submodule init
</code></pre>

<p>Now that the submodules are added, you can commit them:</p>

<pre><code>git commit -m 'Added initial submodules'
</code></pre>

<p>Next, create the application directory structure. This is the bare minimum required:</p>

<pre><code>mkdir -p application/classes/{Controller,Model}
mkdir -p application/{config,views}
mkdir -m 0777 -p application/{cache,logs}
</code></pre>

<p>If you run <code>find application</code> you should see this:</p>

<pre><code>application
application/cache
application/config
application/classes
application/classes/Controller
application/classes/Model
application/logs
application/views
</code></pre>

<p>We don't want git to track log or cache files, so add a <code>.gitignore</code> file to each of the directories. This will ignore all non-hidden files:</p>

<pre><code>echo '[^.]*' &gt; application/{logs,cache}/.gitignore
</code></pre>

<p class="note">Git ignores empty directories, so adding a <code>.gitignore</code> file also makes sure that git will track the directory, but not the files within it.</p>

<p>Now we need the <code>index.php</code> and <code>bootstrap.php</code> files:</p>

<pre><code>wget https://github.com/kohana/kohana/raw/3.3/master/index.php --no-check-certificate
wget https://github.com/kohana/kohana/raw/3.3/master/application/bootstrap.php --no-check-certificate -O application/bootstrap.php
</code></pre>

<p>Commit these changes too:</p>

<pre><code>git add application
git commit -m 'Added initial directory structure'
</code></pre>

<p>That's all there is to it. You now have an application that is using Git for versioning.</p>

<h2 id="adding-submodules">Adding Submodules</h2>

<p>To add a new submodule complete the following steps:</p>

<ol>
<li><p>run the following code - git submodule add repository path for each new submodule e.g.:</p>

<pre><code>git submodule add git://github.com/shadowhand/sprig.git modules/sprig
</code></pre></li>
<li><p>then init and update the submodules:</p>

<pre><code>git submodule init
git submodule update
</code></pre></li>
</ol>

<h2 id="updating-submodules">Updating Submodules</h2>

<p>At some point you will probably also want to upgrade your submodules. To update all of your submodules to the latest <code>HEAD</code> version:</p>

<pre><code>git submodule foreach 'git checkout 3.3/master &amp;&amp; git pull origin 3.3/master'
</code></pre>

<p>To update a single submodule, for example, <code>system</code>:</p>

<pre><code>cd system
git checkout 3.3/master
git pull origin 3.3/master
cd ..
git add system
git commit -m 'Updated system to latest version'
</code></pre>

<p>If you want to update a single submodule to a specific commit:</p>

<pre><code>cd modules/database
git pull origin 3.3/master
git checkout fbfdea919028b951c23c3d99d2bc1f5bbeda0c0b
cd ../..
git add database
git commit -m 'Updated database module'
</code></pre>

<p>Note that you can also check out the commit at a tagged official release point, for example:</p>

<pre><code>git checkout v3.3.0
</code></pre>

<p>Simply run <code>git tag</code> without arguments to get a list of all tags.</p>

<h2 id="removing-submodules">Removing Submodules</h2>

<p>To remove a submodule that is no longer needed complete the following steps:</p>

<ol>
<li><p>open .gitmodules and remove the reference to the to submodule
It will look something like this:</p>

<pre><code>[submodule "modules/auth"]
path = modules/auth
url = git://github.com/kohana/auth.git
</code></pre></li>
<li><p>open .git/config and remove the reference to the to submodule&#92;</p>

<pre><code>[submodule "modules/auth"]
url = git://github.com/kohana/auth.git
</code></pre></li>
<li><p>run git rm --cached path/to/submodule, e.g.</p>

<pre><code>git rm --cached modules/auth
</code></pre></li>
</ol>

<p><strong>Note:</strong> Do not put a trailing slash at the end of path. If you put a trailing slash at the end of the command, it will fail.</p>

<h2 id="updating-remote-repository-url">Updating Remote Repository URL</h2>

<p>During the development of a project, the source of a submodule may change for any reason (you've created your own fork, the server URL changed, the repository name or path changed, etc...) and you'll have to update those changes. To do so, you'll need to perform the following steps:</p>

<ol>
<li><p>edit the .gitmodules file, and change the URL for the submodules which changed.</p></li>
<li><p>in your source tree's root run:</p>

<pre><code>git submodule sync
</code></pre></li>
<li><p>run <code>git init</code> to update the project's repository configuration with the new URLs:</p>

<pre><code>git submodule init
</code></pre></li>
</ol>

<p>And it's done, now you can continue pushing and pulling your submodules with no problems.</p>

<p>Source: http://jtrancas.wordpress.com/2011/02/06/git-submodule-location/</p>

									</div>
			</div>
		</div>
	</div>

	<div id="kodoc-footer">
		<div class="container">
			<div class="span-12">
							<p>&copy; 2008â€“2012 Kohana Team</p>
						</div>
			<div class="span-12 last right">
			<p>Powered by <a href="http://kohanaframework.org/">Kohana</a> v3.3.1</p>
			</div>
		</div>
	</div>

</body>
</html>

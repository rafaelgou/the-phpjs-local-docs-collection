<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Envia um cookie</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.pfsockopen.html">pfsockopen</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.setrawcookie.html">setrawcookie</a></div>
 <div class="up"><a href="ref.network.html">Fun&ccedil;&otilde;es da Network</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.setcookie" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">setcookie</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">setcookie</span> &mdash; <span class="dc-title">Envia um cookie</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.setcookie-description">
  <h3 class="title">Descrição</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>setcookie</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$expire</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$path</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$domain</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$secure</code><span class="initializer"> = false</span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$httponly</code><span class="initializer"> = false</span></span>
  ]]]]]] )</div>

  <p class="para rdfs-comment">
   A função  <span class="function"><strong>setcookie()</strong></span> define um cookie para ser enviado
   juntamente com o resto dos cabeçalhos HTTP. Como outros cabeçalhos
   (headers), os cookies devem ser enviados <em class="emphasis">antes</em> de
   qualquer saída do seu script (isso é uma restrição do protocolo). O que
   quer dizer que você deve colocar chamadas a essa função antes de qualquer
   saída, incluindo as tags <em>&lt;html&gt;</em> e
   <em>&lt;head&gt;</em> e também espaços em branco.
  </p>
  <p class="para">
   Uma vez que o cookie foi setado, ele pode ser acessado na próxima página 
   através dos arrays <var class="varname"><var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE</a></var></var> e 
   <var class="varname"><var class="varname">$HTTP_COOKIE_VARS</var></var>. Note que as 
   <a href="language.variables.superglobals.html" class="link">superglobais</a>
   como <var class="varname"><var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE</a></var></var> estão disponíveis a partir do 
   PHP 4.1.0. Os valores dos cookies também existem na variável 
   <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.setcookie-parameters">
  <h3 class="title">Parâmetros</h3>
  <p class="para">
   Todos os argumentos, exceto o <em><code class="parameter">name</code></em>, são opcionais.
   Você pode também colocar como argumento uma string vazia 
   (<em class="emphasis">&quot;&quot;</em>) para pular o argumento. Como o
   argumento <em><code class="parameter">expire</code></em> é um inteiro, ele não pode ser
   escapado com uma string vazia, por isso utilize um zero
   (<em class="emphasis">0</em>) no lugar.
  </p>
  <p class="para">
   Veja a <a href="http://www.faqs.org/rfcs/rfc6265" class="link external">&raquo;&nbsp;RFC 6265</a> para ver como 
   cada parâmetro de  <span class="function"><strong>setcookie()</strong></span> 
   funciona.
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">name</code></em></span>
     <dd>

      <p class="para">
       O nome do cookie.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">value</code></em></span>
     <dd>

      <p class="para">
       O valor do cookie. Esse valor é guardado no computador do cliente; não
       guarde informação sensível. Supondo que o <em><code class="parameter">name</code></em> seja 
       <em>&#039;nomedocookie&#039;</em>, o valor pode ser lido través de
       <var class="varname"><var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE['nomedocookie']</a></var></var>
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">expire</code></em></span>
     <dd>

      <p class="para">
       O tempo para o cookie expirar. Esse valor é uma timestamp Unix,
       portanto é o número de segundos desde a época (epoch). Em outras
       palavras, você provavelmente irá utilizar isso com a função
        <span class="function"><a href="function.time.html" class="function">time()</a></span> mais o número de segundos que você quer que
       ele expire. Ou você pode utilizar a função  <span class="function"><a href="function.mktime.html" class="function">mktime()</a></span>.
       <em>time()+60*60*24*30</em> irá configurar o cookie para
       expirar em 30 dias. Se configurado para 0, ou omitido, o cookie irá
       expirar ao fim da sessao (quando o navegador fechar).
      </p>
      <p class="para">
       <blockquote class="note"><p><strong class="note">Nota</strong>: 
        <p class="para">
         Você pode ver que o parâmetro <em><code class="parameter">expire</code></em> recebe
         uma timestamp Unix, ao contrário do formato de data <em>Wdy,
          DD-Mon-YYYY HH:MM:SS GMT</em>, isso se dá porque o PHP faz essa
         conversão internamente.
        </p>
       </p></blockquote>
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">path</code></em></span>
     <dd>

      <p class="para">
       O caminho no servidor aonde o cookie estará disponível. Se configurado
       para <em>&#039;/&#039;</em>, o cookie estará dosponível para todo o
       <em><code class="parameter">domain</code></em>. Se configurado para o diretório 
       <em>&#039;/foo/&#039;</em>, o cookie estará disponível apenas dentro do 
       diretório <em>/foo/</em> e todos os subdiretórios como
       <em>/foo/bar</em> do <em><code class="parameter">domain</code></em>. O valor
       padrão é o diretório atual onde o cookie está sendo configurado.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">domain</code></em></span>
     <dd>

      <p class="para">
       O domínio para qual o cookie estará disponível. Configurando o domínio
       para <em>&#039;www.example.com&#039;</em> fará com que o cookie esteja
       disponível no subdomínio <em>www</em> e nos subdomínios superiores.
       Cookies disponíveis para um domínio inferior, como 
       <em>&#039;example.com&#039;</em> estarão disponíveis para subdomínios superiores,
       como <em>&#039;www.example.com&#039;</em>.
       
       Browsers antigos ainda implementam a 
       <a href="http://www.faqs.org/rfcs/rfc2109" class="link external">&raquo;&nbsp;RFC 2109</a> e podem requerer um
       <em>.</em> no início para funcionar com todos os 
       subdomínios.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">secure</code></em></span>
     <dd>

      <p class="para">
       Indica que o cookie só podera ser transimitido sob uma conexão segura HTTPS do
       cliente. Quando configurado para <strong><code>TRUE</code></strong>, o cookie será enviado somente
       se uma conexão segura existir. No lado do servidor, fica por conta do 
       programador enviar esse tipo de cookie somente sob uma conexão segura (ex 
       respeitando <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER["HTTPS"]</a></var></var>).
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">httponly</code></em></span>
     <dd>

      <p class="para">
       Quando for <strong><code>TRUE</code></strong> o cookie será acessível somente sob o protocolo HTTP.
       Isso significa que o cookie não será acessível por linguagens de
       script, como JavaScript. É dito que essa configuração pode ajudar a
       reduzir ou identificar roubos de identidade através de ataques do tipo XSS
       (entretanto ela não é suportada por todos os browsers), mas essa informação
       é constantemente discutida. Foi adicionada no PHP 5.2.0.
       <strong><code>TRUE</code></strong> ou <strong><code>FALSE</code></strong>
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.setcookie-returnvalues">
  <h3 class="title">Valor Retornado</h3>
  <p class="para">
   Se existe saída antes da chamada dessa função,
    <span class="function"><strong>setcookie()</strong></span> irá falhar e retornará <strong><code>FALSE</code></strong>. Se a função
    <span class="function"><strong>setcookie()</strong></span> for executada com sucesso, ela retornará <strong><code>TRUE</code></strong>.
   Isso não indica que o usuário aceitou o cookie.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.setcookie-examples">
  <h3 class="title">Exemplos</h3>
  <p class="para">
   Alguns exemplos para seguir de como enviar cookies:
   <div class="example" id="example-3936">
    <p><strong>Exemplo #1 Exemplo de  <span class="function"><strong>setcookie()</strong></span> para enviar cookies</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'alguma&nbsp;coisa&nbsp;de&nbsp;algum&nbsp;lugar'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;expira&nbsp;em&nbsp;1&nbsp;hora&nbsp;*/<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/~rasmus/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">".example.com"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   Note que a porção do valor do cookie será automaticamente codificada com
   urlencode quando você enviar o cookie, e quando ele for recebido, será
   automaticamente decodificado e atribuido a uma variável com o mesmo nome do
   cookie. Se você não quer que isso aconteça, você pode utilizar no lugar a
   função  <span class="function"><a href="function.setrawcookie.html" class="function">setrawcookie()</a></span> se você estiver utilizando o PHP
   5. Para ver o conteúdo do nosso cookie de teste em um script, simplesmente
   utilize um dos exemplos abaixo:
  </p>
  <p class="para">
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Mostra&nbsp;um&nbsp;cookie&nbsp;individual<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">];<br />echo&nbsp;</span><span style="color: #0000BB">$HTTP_COOKIE_VARS</span><span style="color: #007700">[</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;Outra&nbsp;maneira&nbsp;de&nbsp;depurar(debug)/testar&nbsp;é&nbsp;vendo&nbsp;todos&nbsp;os&nbsp;cookies<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-3937">
    <p><strong>Exemplo #2 Exemplo de  <span class="function"><strong>setcookie()</strong></span> para deletar cookies</strong></p>
    <div class="example-contents"><p>
     Quando estiver deletando um cookie, tenha certeza de que a data de
     expiração dele está no passado, para acionar o mecanismo de remoção do
     seu navegador.
     O exemplo a seguir mostra como deletar os cookies enviados no exemplo
     anterior:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Configura&nbsp;a&nbsp;data&nbsp;de&nbsp;expiração&nbsp;para&nbsp;uma&nbsp;hora&nbsp;atrás<br /></span><span style="color: #0000BB">setcookie&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">3600</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/~rasmus/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">".example.com"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-3938">
    <p><strong>Exemplo #3  <span class="function"><strong>setcookie()</strong></span> e arrays</strong></p>
    <div class="example-contents"><p>
     Você pode também enviar cookies de array, utilizando a notação de array
     no nome dele. Isso tem o efeito de enviar tantos cookies quantos
     elementos houverem no array, mas quando o cookie for recebido todos os
     valores serão colocados em um array com o nome do cookie:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;envia&nbsp;os&nbsp;cookies<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"cookie[tres]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cookietres"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"cookie[dois]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cookiedois);<br />setcookie("</span><span style="color: #0000BB">cookie</span><span style="color: #007700">[</span><span style="color: #0000BB">um</span><span style="color: #007700">]</span><span style="color: #DD0000">",&nbsp;"</span><span style="color: #0000BB">cookieum</span><span style="color: #DD0000">");<br /><br />//&nbsp;Depois&nbsp;que&nbsp;a&nbsp;página&nbsp;recarregar,&nbsp;mostra&nbsp;eles<br />if&nbsp;(isset(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'cookie']))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'cookie']&nbsp;as&nbsp;</span><span style="color: #0000BB">$nome</span><span style="color: #DD0000">&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$valor</span><span style="color: #DD0000">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"</span><span style="color: #0000BB">$nome&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$valor&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">br&nbsp;</span><span style="color: #007700">/&gt;\</span><span style="color: #0000BB">n</span><span style="color: #DD0000">";<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br />?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>O exemplo acima irá imprimir:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
tres : cookietres
dois : cookiedois
um : cookieum
</pre></div>
    </div>
   </div>
  </p>
 </div>



 
 <div class="refsect1 changelog" id="refsect1-function.setcookie-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Versão</th>
       <th>Descrição</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.0</td>
       <td>
        O parâmetro <em><code class="parameter">httponly</code></em> foi adicionado.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.setcookie-notes">
  <h3 class="title">Notas</h3>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Você pode utilizar o output buffering para enviar saída antes de chamar essa 
    função, com o custo de toda sua saída ser guardada em buffer até que você a 
    envie. Você pode fazer isso chamando  <span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> e 
     <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span> em seu script, ou configurando a diretiva
    <em>output_buffering</em> no seu <var class="filename">php.ini</var> ou arquivos de
    configuração do servidor.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Se a diretiva <a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
    estiver configurada como <em>on</em> então os valores dos
    cookies serão colocadas em variáveis. Em nossos exemplos acima, a variável 
    <var class="varname"><var class="varname">$CookieTeste</var></var> irá existir. É recomendado o uso de
    <var class="varname"><var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE</a></var></var>.
   </p>
  </p></blockquote>
  <p class="para">
   Problemas comuns:
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Os cookies não estarão disponíveis até o próximo carregamento da página
      a qual o cookie deverá estar visível. Para testar se um cookie foi
      enviado com sucesso, verifique o cookie no próximo carregamento da
      página antes que ele expire. O tempo para expirar é configurado via o
      parâmetro <em><code class="parameter">expira</code></em>. Uma maneira boa de depurar a
      existência dos cookies é chamando a função
      <em>print_r($_COOKIE);</em>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Os cookies devem ser deletados com os mesmos parâmetros com os quais
      foram configurados. Se o argumento valor for uma string vazia, ou
      <strong><code>FALSE</code></strong>, e todos os outros argumentos forem iguais a chamada anterior de
      setcookie, então o cookie com o nome especificado será deletado do
      cliente remoto.
      Internamente isso é feito colocando o valor do cookie para &#039;deleted&#039; e a
      data de expiração para um ano no passado.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Quando você configurar um cookie com o valor <strong><code>FALSE</code></strong> será tentando
      deletar o cookie. Portanto evite utilizar valores booleanos. No lugar,
      utilize <em class="emphasis">0</em> para <strong><code>FALSE</code></strong> e <em class="emphasis">1</em> for
      <strong><code>TRUE</code></strong>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Nomes de cookies podem ser configurados como arrays e estarão disponíves
      para seus scripts PHP como arrays mas cookies separados serão guardados
      no sistema do usuário. Considere utilizar  <span class="function"><a href="function.explode.html" class="function">explode()</a></span>
      para enviar um cookie com nomes e valores múltiplos. Não é recomendado o
      uso da função  <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span> para esse propósito, pois
      ele pode resultar em furos de segurança.
     </span>
    </li>
   </ul>
  </p>
  <p class="simpara">
   Várias chamadas para a função  <span class="function"><strong>setcookie()</strong></span> são feitas na
   ordem em que são chamadas.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.setcookie-seealso">
  <h3 class="title">Veja Também</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.header.html" class="function" rel="rdfs-seeAlso">header()</a> - Send a raw HTTP header</span></li>
    <li class="member"> <span class="function"><a href="function.setrawcookie.html" class="function" rel="rdfs-seeAlso">setrawcookie()</a> - Send a cookie without urlencoding the cookie value</span></li>
    <li class="member"><a href="features.cookies.html" class="link">Seção de cookies</a></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc2109" class="link external">&raquo;&nbsp;RFC 2109</a></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc2965" class="link external">&raquo;&nbsp;RFC 2965</a></li>
   </ul>
  </p>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.pfsockopen.html">pfsockopen</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.setrawcookie.html">setrawcookie</a></div>
 <div class="up"><a href="ref.network.html">Fun&ccedil;&otilde;es da Network</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>

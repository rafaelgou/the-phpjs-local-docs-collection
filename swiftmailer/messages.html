<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating Messages &mdash; Swiftmailer 5.2.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Swiftmailer 5.2.1 documentation" href="index.html" />
    <link rel="next" title="Message Headers" href="headers.html" />
    <link rel="prev" title="Including Swift Mailer (Autoloading)" href="including-the-files.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="headers.html" title="Message Headers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="including-the-files.html" title="Including Swift Mailer (Autoloading)"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Swiftmailer 5.2.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-messages">
<h1>Creating Messages<a class="headerlink" href="#creating-messages" title="Permalink to this headline">¶</a></h1>
<p>Creating messages in Swift Mailer is done by making use of the various MIME
entities provided with the library.  Complex messages can be quickly created
with very little effort.</p>
<div class="section" id="quick-reference-for-creating-a-message">
<h2>Quick Reference for Creating a Message<a class="headerlink" href="#quick-reference-for-creating-a-message" title="Permalink to this headline">¶</a></h2>
<p>You can think of creating a Message as being similar to the steps you perform
when you click the Compose button in your mail client.  You give it a subject,
specify some recipients, add any attachments and write your message.</p>
<p>To create a Message:</p>
<ul class="simple">
<li>Call the <tt class="docutils literal"><span class="pre">newInstance()</span></tt> method of <tt class="docutils literal"><span class="pre">Swift_Message</span></tt>.</li>
<li>Set your sender address (<tt class="docutils literal"><span class="pre">From:</span></tt>) with <tt class="docutils literal"><span class="pre">setFrom()</span></tt> or <tt class="docutils literal"><span class="pre">setSender()</span></tt>.</li>
<li>Set a subject line with <tt class="docutils literal"><span class="pre">setSubject()</span></tt>.</li>
<li>Set recipients with <tt class="docutils literal"><span class="pre">setTo()</span></tt>, <tt class="docutils literal"><span class="pre">setCc()</span></tt> and/or <tt class="docutils literal"><span class="pre">setBcc()</span></tt>.</li>
<li>Set a body with <tt class="docutils literal"><span class="pre">setBody()</span></tt>.</li>
<li>Add attachments with <tt class="docutils literal"><span class="pre">attach()</span></tt>.</li>
</ul>
<div class="highlight-php"><div class="highlight"><pre><span class="x">require_once &#39;lib/swift_required.php&#39;;</span>

<span class="x">// Create the message</span>
<span class="x">$message = Swift_Message::newInstance()</span>

<span class="x">  // Give the message a subject</span>
<span class="x">  -&gt;setSubject(&#39;Your subject&#39;)</span>

<span class="x">  // Set the From address with an associative array</span>
<span class="x">  -&gt;setFrom(array(&#39;john@doe.com&#39; =&gt; &#39;John Doe&#39;))</span>

<span class="x">  // Set the To addresses with an associative array</span>
<span class="x">  -&gt;setTo(array(&#39;receiver@domain.org&#39;, &#39;other@domain.org&#39; =&gt; &#39;A name&#39;))</span>

<span class="x">  // Give it a body</span>
<span class="x">  -&gt;setBody(&#39;Here is the message itself&#39;)</span>

<span class="x">  // And optionally an alternative body</span>
<span class="x">  -&gt;addPart(&#39;&lt;q&gt;Here is the message itself&lt;/q&gt;&#39;, &#39;text/html&#39;)</span>

<span class="x">  // Optionally add any attachments</span>
<span class="x">  -&gt;attach(Swift_Attachment::fromPath(&#39;my-document.pdf&#39;))</span>
<span class="x">  ;</span>
</pre></div>
</div>
</div>
<div class="section" id="message-basics">
<h2>Message Basics<a class="headerlink" href="#message-basics" title="Permalink to this headline">¶</a></h2>
<p>A message is a container for anything you want to send to somebody else. There
are several basic aspects of a message that you should know.</p>
<p>An e-mail message is made up of several relatively simple entities that are
combined in different ways to achieve different results. All of these entities
have the same fundamental outline but serve a different purpose. The Message
itself can be defined as a MIME entity, an Attachment is a MIME entity, all
MIME parts are MIME entities &#8211; and so on!</p>
<p>The basic units of each MIME entity &#8211; be it the Message itself, or an
Attachment &#8211; are its Headers and its body:</p>
<div class="highlight-text"><div class="highlight"><pre>Header-Name: A header value
Other-Header: Another value

The body content itself
</pre></div>
</div>
<p>The Headers of a MIME entity, and its body must conform to some strict
standards defined by various RFC documents. Swift Mailer ensures that these
specifications are followed by using various types of object, including
Encoders and different Header types to generate the entity.</p>
<div class="section" id="the-structure-of-a-message">
<h3>The Structure of a Message<a class="headerlink" href="#the-structure-of-a-message" title="Permalink to this headline">¶</a></h3>
<p>Of all of the MIME entities, a message &#8211; <tt class="docutils literal"><span class="pre">Swift_Message</span></tt>
is the largest and most complex. It has many properties that can be updated
and it can contain other MIME entities &#8211; attachments for example &#8211;
nested inside it.</p>
<p>A Message has a lot of different Headers which are there to present
information about the message to the recipients&#8217; mail client. Most of these
headers will be familiar to the majority of users, but we&#8217;ll list the basic
ones. Although it&#8217;s possible to work directly with the Headers of a Message
(or other MIME entity), the standard Headers have accessor methods provided to
abstract away the complex details for you. For example, although the Date on a
message is written with a strict format, you only need to pass a UNIX
timestamp to <tt class="docutils literal"><span class="pre">setDate()</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="63%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Header</th>
<th class="head">Description</th>
<th class="head">Accessors</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Message-ID</span></tt></td>
<td>Identifies this message with a unique ID, usually containing the domain name and time generated</td>
<td><tt class="docutils literal"><span class="pre">getId()</span></tt> / <tt class="docutils literal"><span class="pre">setId()</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Return-Path</span></tt></td>
<td>Specifies where bounces should go (Swift Mailer reads this for other uses)</td>
<td><tt class="docutils literal"><span class="pre">getReturnPath()</span></tt> / <tt class="docutils literal"><span class="pre">setReturnPath()</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">From</span></tt></td>
<td>Specifies the address of the person who the message is from. This can be multiple addresses if multiple people wrote the message.</td>
<td><tt class="docutils literal"><span class="pre">getFrom()</span></tt> / <tt class="docutils literal"><span class="pre">setFrom()</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Sender</span></tt></td>
<td>Specifies the address of the person who physically sent the message (higher precedence than <tt class="docutils literal"><span class="pre">From:</span></tt>)</td>
<td><tt class="docutils literal"><span class="pre">getSender()</span></tt> / <tt class="docutils literal"><span class="pre">setSender()</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">To</span></tt></td>
<td>Specifies the addresses of the intended recipients</td>
<td><tt class="docutils literal"><span class="pre">getTo()</span></tt> / <tt class="docutils literal"><span class="pre">setTo()</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Cc</span></tt></td>
<td>Specifies the addresses of recipients who will be copied in on the message</td>
<td><tt class="docutils literal"><span class="pre">getCc()</span></tt> / <tt class="docutils literal"><span class="pre">setCc()</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Bcc</span></tt></td>
<td>Specifies the addresses of recipients who the message will be blind-copied to. Other recipients will not be aware of these copies.</td>
<td><tt class="docutils literal"><span class="pre">getBcc()</span></tt> / <tt class="docutils literal"><span class="pre">setBcc()</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Reply-To</span></tt></td>
<td>Specifies the address where replies are sent to</td>
<td><tt class="docutils literal"><span class="pre">getReplyTo()</span></tt> / <tt class="docutils literal"><span class="pre">setReplyTo()</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Subject</span></tt></td>
<td>Specifies the subject line that is displayed in the recipients&#8217; mail client</td>
<td><tt class="docutils literal"><span class="pre">getSubject()</span></tt> / <tt class="docutils literal"><span class="pre">setSubject()</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Date</span></tt></td>
<td>Specifies the date at which the message was sent</td>
<td><tt class="docutils literal"><span class="pre">getDate()</span></tt> / <tt class="docutils literal"><span class="pre">setDate()</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Content-Type</span></tt></td>
<td>Specifies the format of the message (usually text/plain or text/html)</td>
<td><tt class="docutils literal"><span class="pre">getContentType()</span></tt> / <tt class="docutils literal"><span class="pre">setContentType()</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Content-Transfer-Encoding</span></tt></td>
<td>Specifies the encoding scheme in the message</td>
<td><tt class="docutils literal"><span class="pre">getEncoder()</span></tt> / <tt class="docutils literal"><span class="pre">setEncoder()</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="working-with-a-message-object">
<h3>Working with a Message Object<a class="headerlink" href="#working-with-a-message-object" title="Permalink to this headline">¶</a></h3>
<p>Although there are a lot of available methods on a message object, you only
need to make use of a small subset of them. Usually you&#8217;ll use
<tt class="docutils literal"><span class="pre">setSubject()</span></tt>, <tt class="docutils literal"><span class="pre">setTo()</span></tt> and
<tt class="docutils literal"><span class="pre">setFrom()</span></tt> before setting the body of your message with
<tt class="docutils literal"><span class="pre">setBody()</span></tt>.</p>
<p>Calling methods is simple. You just call them like functions, but using the
object operator &#8220;<tt class="docutils literal"><span class="pre">-&gt;</span></tt>&#8221; to do so. If you&#8217;ve created
a message object and called it <tt class="docutils literal"><span class="pre">$message</span></tt> then you&#8217;d set a
subject on it like so:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">require_once &#39;lib/swift_required.php&#39;;</span>

<span class="x">$message = Swift_Message::newInstance();</span>
<span class="x">$message-&gt;setSubject(&#39;My subject&#39;);</span>
</pre></div>
</div>
<p>All MIME entities (including a message) have a <tt class="docutils literal"><span class="pre">toString()</span></tt>
method that you can call if you want to take a look at what is going to be
sent. For example, if you <tt class="docutils literal"><span class="pre">echo</span>
<span class="pre">$message-&gt;toString();</span></tt> you would see something like this:</p>
<div class="highlight-bash"><div class="highlight"><pre>Message-ID: &lt;1230173678.4952f5eeb1432@swift.generated&gt;
Date: Thu, 25 Dec 2008 13:54:38 +1100
Subject: Example subject
From: Chris Corbyn &lt;chris@w3style.co.uk&gt;
To: Receiver Name &lt;recipient@example.org&gt;
MIME-Version: 1.0
Content-Type: text/plain; <span class="nv">charset</span><span class="o">=</span>utf-8
Content-Transfer-Encoding: quoted-printable

Here is the message
</pre></div>
</div>
<p>We&#8217;ll take a closer look at the methods you use to create your message in the
following sections.</p>
</div>
</div>
<div class="section" id="adding-content-to-your-message">
<h2>Adding Content to Your Message<a class="headerlink" href="#adding-content-to-your-message" title="Permalink to this headline">¶</a></h2>
<p>Rich content can be added to messages in Swift Mailer with relative ease by
calling methods such as <tt class="docutils literal"><span class="pre">setSubject()</span></tt>, <tt class="docutils literal"><span class="pre">setBody()</span></tt>, <tt class="docutils literal"><span class="pre">addPart()</span></tt> and
<tt class="docutils literal"><span class="pre">attach()</span></tt>.</p>
<div class="section" id="setting-the-subject-line">
<h3>Setting the Subject Line<a class="headerlink" href="#setting-the-subject-line" title="Permalink to this headline">¶</a></h3>
<p>The subject line, displayed in the recipients&#8217; mail client can be set with the
<tt class="docutils literal"><span class="pre">setSubject()</span></tt> method, or as a parameter to <tt class="docutils literal"><span class="pre">Swift_Message::newInstance()</span></tt>.</p>
<p>To set the subject of your Message:</p>
<ul>
<li><p class="first">Call the <tt class="docutils literal"><span class="pre">setSubject()</span></tt> method of the Message, or specify it at the time
you create the message.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Pass it as a parameter when you create the message</span>
<span class="x">$message = Swift_Message::newInstance(&#39;My amazing subject&#39;);</span>

<span class="x">// Or set it after like this</span>
<span class="x">$message-&gt;setSubject(&#39;My amazing subject&#39;);</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="setting-the-body-content">
<h3>Setting the Body Content<a class="headerlink" href="#setting-the-body-content" title="Permalink to this headline">¶</a></h3>
<p>The body of the message &#8211; seen when the user opens the message &#8211;
is specified by calling the <tt class="docutils literal"><span class="pre">setBody()</span></tt> method. If an alternative body is to
be included <tt class="docutils literal"><span class="pre">addPart()</span></tt> can be used.</p>
<p>The body of a message is the main part that is read by the user. Often people
want to send a message in HTML format (<tt class="docutils literal"><span class="pre">text/html</span></tt>), other
times people want to send in plain text (<tt class="docutils literal"><span class="pre">text/plain</span></tt>), or
sometimes people want to send both versions and allow the recipient to choose
how they view the message.</p>
<p>As a rule of thumb, if you&#8217;re going to send a HTML email, always include a
plain-text equivalent of the same content so that users who prefer to read
plain text can do so.</p>
<p>To set the body of your Message:</p>
<ul class="simple">
<li>Call the <tt class="docutils literal"><span class="pre">setBody()</span></tt> method of the Message, or specify it at the time you
create the message.</li>
<li>Add any alternative bodies with <tt class="docutils literal"><span class="pre">addPart()</span></tt>.</li>
</ul>
<p>If the recipient&#8217;s mail client offers preferences for displaying text vs. HTML
then the mail client will present that part to the user where available.  In
other cases the mail client will display the &#8220;best&#8221; part it can - usually HTML
if you&#8217;ve included HTML.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Pass it as a parameter when you create the message</span>
<span class="x">$message = Swift_Message::newInstance(&#39;Subject here&#39;, &#39;My amazing body&#39;);</span>

<span class="x">// Or set it after like this</span>
<span class="x">$message-&gt;setBody(&#39;My &lt;em&gt;amazing&lt;/em&gt; body&#39;, &#39;text/html&#39;);</span>

<span class="x">// Add alternative parts with addPart()</span>
<span class="x">$message-&gt;addPart(&#39;My amazing body in plain text&#39;, &#39;text/plain&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="attaching-files">
<h2>Attaching Files<a class="headerlink" href="#attaching-files" title="Permalink to this headline">¶</a></h2>
<p>Attachments are downloadable parts of a message and can be added by calling
the <tt class="docutils literal"><span class="pre">attach()</span></tt> method on the message. You can add attachments that exist on
disk, or you can create attachments on-the-fly.</p>
<p>Attachments are actually an interesting area of Swift Mailer and something
that could put a lot of power at your fingertips if you grasp the concept
behind the way a message is held together.</p>
<p>Although we refer to files sent over e-mails as &#8220;attachments&#8221; &#8211; because
they&#8217;re attached to the message &#8211; lots of other parts of the message are
actually &#8220;attached&#8221; even if we don&#8217;t refer to these parts as attachments.</p>
<p>File attachments are created by the <tt class="docutils literal"><span class="pre">Swift_Attachment</span></tt> class
and then attached to the message via the <tt class="docutils literal"><span class="pre">attach()</span></tt> method on
it. For all of the &#8220;every day&#8221; MIME types such as all image formats, word
documents, PDFs and spreadsheets you don&#8217;t need to explicitly set the
content-type of the attachment, though it would do no harm to do so. For less
common formats you should set the content-type &#8211; which we&#8217;ll cover in a
moment.</p>
<div class="section" id="attaching-existing-files">
<h3>Attaching Existing Files<a class="headerlink" href="#attaching-existing-files" title="Permalink to this headline">¶</a></h3>
<p>Files that already exist, either on disk or at a URL can be attached to a
message with just one line of code, using <tt class="docutils literal"><span class="pre">Swift_Attachment::fromPath()</span></tt>.</p>
<p>You can attach files that exist locally, or if your PHP installation has
<tt class="docutils literal"><span class="pre">allow_url_fopen</span></tt> turned on you can attach files from other
websites.</p>
<p>To attach an existing file:</p>
<ul class="simple">
<li>Create an attachment with <tt class="docutils literal"><span class="pre">Swift_Attachment::fromPath()</span></tt>.</li>
<li>Add the attachment to the message with <tt class="docutils literal"><span class="pre">attach()</span></tt>.</li>
</ul>
<p>The attachment will be presented to the recipient as a downloadable file with
the same filename as the one you attached.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Create the attachment</span>
<span class="x">// * Note that you can technically leave the content-type parameter out</span>
<span class="x">$attachment = Swift_Attachment::fromPath(&#39;/path/to/image.jpg&#39;, &#39;image/jpeg&#39;);</span>

<span class="x">// Attach it to the message</span>
<span class="x">$message-&gt;attach($attachment);</span>


<span class="x">// The two statements above could be written in one line instead</span>
<span class="x">$message-&gt;attach(Swift_Attachment::fromPath(&#39;/path/to/image.jpg&#39;));</span>


<span class="x">// You can attach files from a URL if allow_url_fopen is on in php.ini</span>
<span class="x">$message-&gt;attach(Swift_Attachment::fromPath(&#39;http://site.tld/logo.png&#39;));</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-the-filename">
<h3>Setting the Filename<a class="headerlink" href="#setting-the-filename" title="Permalink to this headline">¶</a></h3>
<p>Usually you don&#8217;t need to explicitly set the filename of an attachment because
the name of the attached file will be used by default, but if you want to set
the filename you use the <tt class="docutils literal"><span class="pre">setFilename()</span></tt> method of the Attachment.</p>
<p>To change the filename of an attachment:</p>
<ul class="simple">
<li>Call its <tt class="docutils literal"><span class="pre">setFilename()</span></tt> method.</li>
</ul>
<p>The attachment will be attached in the normal way, but meta-data sent inside
the email will rename the file to something else.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Create the attachment and call its setFilename() method</span>
<span class="x">$attachment = Swift_Attachment::fromPath(&#39;/path/to/image.jpg&#39;)</span>
<span class="x">  -&gt;setFilename(&#39;cool.jpg&#39;);</span>


<span class="x">// Because there&#39;s a fluid interface, you can do this in one statement</span>
<span class="x">$message-&gt;attach(</span>
<span class="x">  Swift_Attachment::fromPath(&#39;/path/to/image.jpg&#39;)-&gt;setFilename(&#39;cool.jpg&#39;)</span>
<span class="x">);</span>
</pre></div>
</div>
</div>
<div class="section" id="attaching-dynamic-content">
<h3>Attaching Dynamic Content<a class="headerlink" href="#attaching-dynamic-content" title="Permalink to this headline">¶</a></h3>
<p>Files that are generated at runtime, such as PDF documents or images created
via GD can be attached directly to a message without writing them out to disk.
Use the standard <tt class="docutils literal"><span class="pre">Swift_Attachment::newInstance()</span></tt> method.</p>
<p>To attach dynamically created content:</p>
<ul class="simple">
<li>Create your content as you normally would.</li>
<li>Create an attachment with <tt class="docutils literal"><span class="pre">Swift_Attachment::newInstance()</span></tt>, specifying
the source data of your content along with a name and the content-type.</li>
<li>Add the attachment to the message with <tt class="docutils literal"><span class="pre">attach()</span></tt>.</li>
</ul>
<p>The attachment will be presented to the recipient as a downloadable file
with the filename and content-type you specify.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you would usually write the file to disk anyway you should just attach
it with <tt class="docutils literal"><span class="pre">Swift_Attachment::fromPath()</span></tt> since this will use less memory:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Create your file contents in the normal way, but don&#39;t write them to disk</span>
<span class="x">$data = create_my_pdf_data();</span>

<span class="x">// Create the attachment with your data</span>
<span class="x">$attachment = Swift_Attachment::newInstance($data, &#39;my-file.pdf&#39;, &#39;application/pdf&#39;);</span>

<span class="x">// Attach it to the message</span>
<span class="x">$message-&gt;attach($attachment);</span>


<span class="x">// You can alternatively use method chaining to build the attachment</span>
<span class="x">$attachment = Swift_Attachment::newInstance()</span>
<span class="x">  -&gt;setFilename(&#39;my-file.pdf&#39;)</span>
<span class="x">  -&gt;setContentType(&#39;application/pdf&#39;)</span>
<span class="x">  -&gt;setBody($data)</span>
<span class="x">  ;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="changing-the-disposition">
<h3>Changing the Disposition<a class="headerlink" href="#changing-the-disposition" title="Permalink to this headline">¶</a></h3>
<p>Attachments just appear as files that can be saved to the Desktop if desired.
You can make attachment appear inline where possible by using the
<tt class="docutils literal"><span class="pre">setDisposition()</span></tt> method of an attachment.</p>
<p>To make an attachment appear inline:</p>
<ul class="simple">
<li>Call its <tt class="docutils literal"><span class="pre">setDisposition()</span></tt> method.</li>
</ul>
<p>The attachment will be displayed within the email viewing window if the mail
client knows how to display it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you try to create an inline attachment for a non-displayable file type
such as a ZIP file, the mail client should just present the attachment as
normal:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Create the attachment and call its setDisposition() method</span>
<span class="x">$attachment = Swift_Attachment::fromPath(&#39;/path/to/image.jpg&#39;)</span>
<span class="x">  -&gt;setDisposition(&#39;inline&#39;);</span>


<span class="x">// Because there&#39;s a fluid interface, you can do this in one statement</span>
<span class="x">$message-&gt;attach(</span>
<span class="x">  Swift_Attachment::fromPath(&#39;/path/to/image.jpg&#39;)-&gt;setDisposition(&#39;inline&#39;)</span>
<span class="x">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="embedding-inline-media-files">
<h3>Embedding Inline Media Files<a class="headerlink" href="#embedding-inline-media-files" title="Permalink to this headline">¶</a></h3>
<p>Often people want to include an image or other content inline with a HTML
message. It&#8217;s easy to do this with HTML linking to remote resources, but this
approach is usually blocked by mail clients. Swift Mailer allows you to embed
your media directly into the message.</p>
<p>Mail clients usually block downloads from remote resources because this
technique was often abused as a mean of tracking who opened an email. If
you&#8217;re sending a HTML email and you want to include an image in the message
another approach you can take is to embed the image directly.</p>
<p>Swift Mailer makes embedding files into messages extremely streamlined. You
embed a file by calling the <tt class="docutils literal"><span class="pre">embed()</span></tt> method of the message,
which returns a value you can use in a <tt class="docutils literal"><span class="pre">src</span></tt> or
<tt class="docutils literal"><span class="pre">href</span></tt> attribute in your HTML.</p>
<p>Just like with attachments, it&#8217;s possible to embed dynamically generated
content without having an existing file available.</p>
<p>The embedded files are sent in the email as a special type of attachment that
has a unique ID used to reference them within your HTML attributes. On mail
clients that do not support embedded files they may appear as attachments.</p>
<p>Although this is commonly done for images, in theory it will work for any
displayable (or playable) media type. Support for other media types (such as
video) is dependent on the mail client however.</p>
<div class="section" id="embedding-existing-files">
<h4>Embedding Existing Files<a class="headerlink" href="#embedding-existing-files" title="Permalink to this headline">¶</a></h4>
<p>Files that already exist, either on disk or at a URL can be embedded in a
message with just one line of code, using <tt class="docutils literal"><span class="pre">Swift_EmbeddedFile::fromPath()</span></tt>.</p>
<p>You can embed files that exist locally, or if your PHP installation has
<tt class="docutils literal"><span class="pre">allow_url_fopen</span></tt> turned on you can embed files from other websites.</p>
<p>To embed an existing file:</p>
<ul class="simple">
<li>Create a message object with <tt class="docutils literal"><span class="pre">Swift_Message::newInstance()</span></tt>.</li>
<li>Set the body as HTML, and embed a file at the correct point in the message with <tt class="docutils literal"><span class="pre">embed()</span></tt>.</li>
</ul>
<p>The file will be displayed with the message inline with the HTML wherever its ID
is used as a <tt class="docutils literal"><span class="pre">src</span></tt> attribute.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Swift_Image</span></tt> and <tt class="docutils literal"><span class="pre">Swift_EmbeddedFile</span></tt> are just aliases of one
another. <tt class="docutils literal"><span class="pre">Swift_Image</span></tt> exists for semantic purposes.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can embed files in two stages if you prefer. Just capture the return
value of <tt class="docutils literal"><span class="pre">embed()</span></tt> in a variable and use that as the <tt class="docutils literal"><span class="pre">src</span></tt> attribute.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Create the message</span>
<span class="x">$message = Swift_Message::newInstance(&#39;My subject&#39;);</span>

<span class="x">// Set the body</span>
<span class="x">$message-&gt;setBody(</span>
<span class="x">&#39;&lt;html&gt;&#39; .</span>
<span class="x">&#39; &lt;head&gt;&lt;/head&gt;&#39; .</span>
<span class="x">&#39; &lt;body&gt;&#39; .</span>
<span class="x">&#39;  Here is an image &lt;img src=&quot;&#39; . // Embed the file</span>
<span class="x">     $message-&gt;embed(Swift_Image::fromPath(&#39;image.png&#39;)) .</span>
<span class="x">   &#39;&quot; alt=&quot;Image&quot; /&gt;&#39; .</span>
<span class="x">&#39;  Rest of message&#39; .</span>
<span class="x">&#39; &lt;/body&gt;&#39; .</span>
<span class="x">&#39;&lt;/html&gt;&#39;,</span>
<span class="x">  &#39;text/html&#39; // Mark the content-type as HTML</span>
<span class="x">);</span>

<span class="x">// You can embed files from a URL if allow_url_fopen is on in php.ini</span>
<span class="x">$message-&gt;setBody(</span>
<span class="x">&#39;&lt;html&gt;&#39; .</span>
<span class="x">&#39; &lt;head&gt;&lt;/head&gt;&#39; .</span>
<span class="x">&#39; &lt;body&gt;&#39; .</span>
<span class="x">&#39;  Here is an image &lt;img src=&quot;&#39; .</span>
<span class="x">     $message-&gt;embed(Swift_Image::fromPath(&#39;http://site.tld/logo.png&#39;)) .</span>
<span class="x">   &#39;&quot; alt=&quot;Image&quot; /&gt;&#39; .</span>
<span class="x">&#39;  Rest of message&#39; .</span>
<span class="x">&#39; &lt;/body&gt;&#39; .</span>
<span class="x">&#39;&lt;/html&gt;&#39;,</span>
<span class="x">  &#39;text/html&#39;</span>
<span class="x">);</span>


<span class="x">// If placing the embed() code inline becomes cumbersome</span>
<span class="x">// it&#39;s easy to do this in two steps</span>
<span class="x">$cid = $message-&gt;embed(Swift_Image::fromPath(&#39;image.png&#39;));</span>

<span class="x">$message-&gt;setBody(</span>
<span class="x">&#39;&lt;html&gt;&#39; .</span>
<span class="x">&#39; &lt;head&gt;&lt;/head&gt;&#39; .</span>
<span class="x">&#39; &lt;body&gt;&#39; .</span>
<span class="x">&#39;  Here is an image &lt;img src=&quot;&#39; . $cid . &#39;&quot; alt=&quot;Image&quot; /&gt;&#39; .</span>
<span class="x">&#39;  Rest of message&#39; .</span>
<span class="x">&#39; &lt;/body&gt;&#39; .</span>
<span class="x">&#39;&lt;/html&gt;&#39;,</span>
<span class="x">  &#39;text/html&#39; // Mark the content-type as HTML</span>
<span class="x">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="embedding-dynamic-content">
<h4>Embedding Dynamic Content<a class="headerlink" href="#embedding-dynamic-content" title="Permalink to this headline">¶</a></h4>
<p>Images that are generated at runtime, such as images created via GD can be
embedded directly to a message without writing them out to disk. Use the
standard <tt class="docutils literal"><span class="pre">Swift_Image::newInstance()</span></tt> method.</p>
<p>To embed dynamically created content:</p>
<ul class="simple">
<li>Create a message object with <tt class="docutils literal"><span class="pre">Swift_Message::newInstance()</span></tt>.</li>
<li>Set the body as HTML, and embed a file at the correct point in the message
with <tt class="docutils literal"><span class="pre">embed()</span></tt>. You will need to specify a filename and a content-type.</li>
</ul>
<p>The file will be displayed with the message inline with the HTML wherever its ID
is used as a <tt class="docutils literal"><span class="pre">src</span></tt> attribute.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Swift_Image</span></tt> and <tt class="docutils literal"><span class="pre">Swift_EmbeddedFile</span></tt> are just aliases of one
another. <tt class="docutils literal"><span class="pre">Swift_Image</span></tt> exists for semantic purposes.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can embed files in two stages if you prefer. Just capture the return
value of <tt class="docutils literal"><span class="pre">embed()</span></tt> in a variable and use that as the <tt class="docutils literal"><span class="pre">src</span></tt> attribute.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Create your file contents in the normal way, but don&#39;t write them to disk</span>
<span class="x">$img_data = create_my_image_data();</span>

<span class="x">// Create the message</span>
<span class="x">$message = Swift_Message::newInstance(&#39;My subject&#39;);</span>

<span class="x">// Set the body</span>
<span class="x">$message-&gt;setBody(</span>
<span class="x">&#39;&lt;html&gt;&#39; .</span>
<span class="x">&#39; &lt;head&gt;&lt;/head&gt;&#39; .</span>
<span class="x">&#39; &lt;body&gt;&#39; .</span>
<span class="x">&#39;  Here is an image &lt;img src=&quot;&#39; . // Embed the file</span>
<span class="x">     $message-&gt;embed(Swift_Image::newInstance($img_data, &#39;image.jpg&#39;, &#39;image/jpeg&#39;)) .</span>
<span class="x">   &#39;&quot; alt=&quot;Image&quot; /&gt;&#39; .</span>
<span class="x">&#39;  Rest of message&#39; .</span>
<span class="x">&#39; &lt;/body&gt;&#39; .</span>
<span class="x">&#39;&lt;/html&gt;&#39;,</span>
<span class="x">  &#39;text/html&#39; // Mark the content-type as HTML</span>
<span class="x">);</span>


<span class="x">// If placing the embed() code inline becomes cumbersome</span>
<span class="x">// it&#39;s easy to do this in two steps</span>
<span class="x">$cid = $message-&gt;embed(Swift_Image::newInstance($img_data, &#39;image.jpg&#39;, &#39;image/jpeg&#39;));</span>

<span class="x">$message-&gt;setBody(</span>
<span class="x">&#39;&lt;html&gt;&#39; .</span>
<span class="x">&#39; &lt;head&gt;&lt;/head&gt;&#39; .</span>
<span class="x">&#39; &lt;body&gt;&#39; .</span>
<span class="x">&#39;  Here is an image &lt;img src=&quot;&#39; . $cid . &#39;&quot; alt=&quot;Image&quot; /&gt;&#39; .</span>
<span class="x">&#39;  Rest of message&#39; .</span>
<span class="x">&#39; &lt;/body&gt;&#39; .</span>
<span class="x">&#39;&lt;/html&gt;&#39;,</span>
<span class="x">  &#39;text/html&#39; // Mark the content-type as HTML</span>
<span class="x">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="adding-recipients-to-your-message">
<h2>Adding Recipients to Your Message<a class="headerlink" href="#adding-recipients-to-your-message" title="Permalink to this headline">¶</a></h2>
<p>Recipients are specified within the message itself via <tt class="docutils literal"><span class="pre">setTo()</span></tt>, <tt class="docutils literal"><span class="pre">setCc()</span></tt>
and <tt class="docutils literal"><span class="pre">setBcc()</span></tt>. Swift Mailer reads these recipients from the message when it
gets sent so that it knows where to send the message to.</p>
<p>Message recipients are one of three types:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">To:</span></tt> recipients &#8211; the primary recipients (required)</li>
<li><tt class="docutils literal"><span class="pre">Cc:</span></tt> recipients &#8211; receive a copy of the message (optional)</li>
<li><tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipients &#8211; hidden from other recipients (optional)</li>
</ul>
<p>Each type can contain one, or several addresses. It&#8217;s possible to list only
the addresses of the recipients, or you can personalize the address by
providing the real name of the recipient.</p>
<p>Make sure to add only valid email addresses as recipients. If you try to add an
invalid email address with <tt class="docutils literal"><span class="pre">setTo()</span></tt>, <tt class="docutils literal"><span class="pre">setCc()</span></tt> or <tt class="docutils literal"><span class="pre">setBcc()</span></tt>, Swift
Mailer will throw a <tt class="docutils literal"><span class="pre">Swift_RfcComplianceException</span></tt>.</p>
<p>If you add recipients automatically based on a data source that may contain
invalid email addresses, you can prevent possible exceptions by validating the
addresses using <tt class="docutils literal"><span class="pre">Swift_Validate::email($email)</span></tt> and only adding addresses
that validate. Another way would be to wrap your <tt class="docutils literal"><span class="pre">setTo()</span></tt>, <tt class="docutils literal"><span class="pre">setCc()</span></tt> and
<tt class="docutils literal"><span class="pre">setBcc()</span></tt> calls in a try-catch block and handle the
<tt class="docutils literal"><span class="pre">Swift_RfcComplianceException</span></tt> in the catch block.</p>
<div class="sidebar">
<p class="first sidebar-title">Syntax for Addresses</p>
<p>If you only wish to refer to a single email address (for example your
<tt class="docutils literal"><span class="pre">From:</span></tt> address) then you can just use a string.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setFrom(&#39;some@address.tld&#39;);</span>
</pre></div>
</div>
<p>If you want to include a name then you must use an associative array.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setFrom(array(&#39;some@address.tld&#39; =&gt; &#39;The Name&#39;));</span>
</pre></div>
</div>
<p>If you want to include multiple addresses then you must use an array.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setTo(array(&#39;some@address.tld&#39;, &#39;other@address.tld&#39;));</span>
</pre></div>
</div>
<p>You can mix personalized (addresses with a name) and non-personalized
addresses in the same list by mixing the use of associative and
non-associative array syntax.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setTo(array(</span>
<span class="x">  &#39;recipient-with-name@example.org&#39; =&gt; &#39;Recipient Name One&#39;,</span>
<span class="x">  &#39;no-name@example.org&#39;, // Note that this is not a key-value pair</span>
<span class="x">  &#39;named-recipient@example.org&#39; =&gt; &#39;Recipient Name Two&#39;</span>
<span class="x">));</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-to-recipients">
<h3>Setting <tt class="docutils literal"><span class="pre">To:</span></tt> Recipients<a class="headerlink" href="#setting-to-recipients" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">To:</span></tt> recipients are required in a message and are set with the
<tt class="docutils literal"><span class="pre">setTo()</span></tt> or <tt class="docutils literal"><span class="pre">addTo()</span></tt> methods of the message.</p>
<p>To set <tt class="docutils literal"><span class="pre">To:</span></tt> recipients, create the message object using either
<tt class="docutils literal"><span class="pre">new</span> <span class="pre">Swift_Message(</span> <span class="pre">...</span> <span class="pre">)</span></tt> or <tt class="docutils literal"><span class="pre">Swift_Message::newInstance(</span> <span class="pre">...</span> <span class="pre">)</span></tt>,
then call the <tt class="docutils literal"><span class="pre">setTo()</span></tt> method with a complete array of addresses, or use the
<tt class="docutils literal"><span class="pre">addTo()</span></tt> method to iteratively add recipients.</p>
<p>The <tt class="docutils literal"><span class="pre">setTo()</span></tt> method accepts input in various formats as described earlier in
this chapter. The <tt class="docutils literal"><span class="pre">addTo()</span></tt> method takes either one or two parameters. The
first being the email address and the second optional parameter being the name
of the recipient.</p>
<p><tt class="docutils literal"><span class="pre">To:</span></tt> recipients are visible in the message headers and will be
seen by the other recipients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Multiple calls to <tt class="docutils literal"><span class="pre">setTo()</span></tt> will not add new recipients &#8211; each
call overrides the previous calls. If you want to iteratively add
recipients, use the <tt class="docutils literal"><span class="pre">addTo()</span></tt> method.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Using setTo() to set all recipients in one go</span>
<span class="x">$message-&gt;setTo(array(</span>
<span class="x">  &#39;person1@example.org&#39;,</span>
<span class="x">  &#39;person2@otherdomain.org&#39; =&gt; &#39;Person 2 Name&#39;,</span>
<span class="x">  &#39;person3@example.org&#39;,</span>
<span class="x">  &#39;person4@example.org&#39;,</span>
<span class="x">  &#39;person5@example.org&#39; =&gt; &#39;Person 5 Name&#39;</span>
<span class="x">));</span>

<span class="x">// Using addTo() to add recipients iteratively</span>
<span class="x">$message-&gt;addTo(&#39;person1@example.org&#39;);</span>
<span class="x">$message-&gt;addTo(&#39;person2@example.org&#39;, &#39;Person 2 Name&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-cc-recipients">
<h3>Setting <tt class="docutils literal"><span class="pre">Cc:</span></tt> Recipients<a class="headerlink" href="#setting-cc-recipients" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Cc:</span></tt> recipients are set with the <tt class="docutils literal"><span class="pre">setCc()</span></tt> or <tt class="docutils literal"><span class="pre">addCc()</span></tt> methods of the
message.</p>
<p>To set <tt class="docutils literal"><span class="pre">Cc:</span></tt> recipients, create the message object using either
<tt class="docutils literal"><span class="pre">new</span> <span class="pre">Swift_Message(</span> <span class="pre">...</span> <span class="pre">)</span></tt> or <tt class="docutils literal"><span class="pre">Swift_Message::newInstance(</span> <span class="pre">...</span> <span class="pre">)</span></tt>, then call
the <tt class="docutils literal"><span class="pre">setCc()</span></tt> method with a complete array of addresses, or use the
<tt class="docutils literal"><span class="pre">addCc()</span></tt> method to iteratively add recipients.</p>
<p>The <tt class="docutils literal"><span class="pre">setCc()</span></tt> method accepts input in various formats as described earlier in
this chapter. The <tt class="docutils literal"><span class="pre">addCc()</span></tt> method takes either one or two parameters. The
first being the email address and the second optional parameter being the name
of the recipient.</p>
<p><tt class="docutils literal"><span class="pre">Cc:</span></tt> recipients are visible in the message headers and will be
seen by the other recipients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Multiple calls to <tt class="docutils literal"><span class="pre">setCc()</span></tt> will not add new recipients &#8211; each
call overrides the previous calls. If you want to iteratively add Cc:
recipients, use the <tt class="docutils literal"><span class="pre">addCc()</span></tt> method.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Using setCc() to set all recipients in one go</span>
<span class="x">$message-&gt;setCc(array(</span>
<span class="x">  &#39;person1@example.org&#39;,</span>
<span class="x">  &#39;person2@otherdomain.org&#39; =&gt; &#39;Person 2 Name&#39;,</span>
<span class="x">  &#39;person3@example.org&#39;,</span>
<span class="x">  &#39;person4@example.org&#39;,</span>
<span class="x">  &#39;person5@example.org&#39; =&gt; &#39;Person 5 Name&#39;</span>
<span class="x">));</span>

<span class="x">// Using addCc() to add recipients iteratively</span>
<span class="x">$message-&gt;addCc(&#39;person1@example.org&#39;);</span>
<span class="x">$message-&gt;addCc(&#39;person2@example.org&#39;, &#39;Person 2 Name&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-bcc-recipients">
<h3>Setting <tt class="docutils literal"><span class="pre">Bcc:</span></tt> Recipients<a class="headerlink" href="#setting-bcc-recipients" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipients receive a copy of the message without anybody else knowing
it, and are set with the <tt class="docutils literal"><span class="pre">setBcc()</span></tt> or <tt class="docutils literal"><span class="pre">addBcc()</span></tt> methods of the message.</p>
<p>To set <tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipients, create the message object using either <tt class="docutils literal"><span class="pre">new</span>
<span class="pre">Swift_Message(</span> <span class="pre">...</span> <span class="pre">)</span></tt> or <tt class="docutils literal"><span class="pre">Swift_Message::newInstance(</span> <span class="pre">...</span> <span class="pre">)</span></tt>, then call the
<tt class="docutils literal"><span class="pre">setBcc()</span></tt> method with a complete array of addresses, or use
the <tt class="docutils literal"><span class="pre">addBcc()</span></tt> method to iteratively add recipients.</p>
<p>The <tt class="docutils literal"><span class="pre">setBcc()</span></tt> method accepts input in various formats as described earlier in
this chapter. The <tt class="docutils literal"><span class="pre">addBcc()</span></tt> method takes either one or two parameters. The
first being the email address and the second optional parameter being the name
of the recipient.</p>
<p>Only the individual <tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipient will see their address in the message
headers. Other recipients (including other <tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipients) will not see the
address.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Multiple calls to <tt class="docutils literal"><span class="pre">setBcc()</span></tt> will not add new recipients &#8211; each
call overrides the previous calls. If you want to iteratively add Bcc:
recipients, use the <tt class="docutils literal"><span class="pre">addBcc()</span></tt> method.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Using setBcc() to set all recipients in one go</span>
<span class="x">$message-&gt;setBcc(array(</span>
<span class="x">  &#39;person1@example.org&#39;,</span>
<span class="x">  &#39;person2@otherdomain.org&#39; =&gt; &#39;Person 2 Name&#39;,</span>
<span class="x">  &#39;person3@example.org&#39;,</span>
<span class="x">  &#39;person4@example.org&#39;,</span>
<span class="x">  &#39;person5@example.org&#39; =&gt; &#39;Person 5 Name&#39;</span>
<span class="x">));</span>

<span class="x">// Using addBcc() to add recipients iteratively</span>
<span class="x">$message-&gt;addBcc(&#39;person1@example.org&#39;);</span>
<span class="x">$message-&gt;addBcc(&#39;person2@example.org&#39;, &#39;Person 2 Name&#39;);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="specifying-sender-details">
<h2>Specifying Sender Details<a class="headerlink" href="#specifying-sender-details" title="Permalink to this headline">¶</a></h2>
<p>An email must include information about who sent it. Usually this is managed
by the <tt class="docutils literal"><span class="pre">From:</span></tt> address, however there are other options.</p>
<p>The sender information is contained in three possible places:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">From:</span></tt> &#8211; the address(es) of who wrote the message (required)</li>
<li><tt class="docutils literal"><span class="pre">Sender:</span></tt> &#8211; the address of the single person who sent the message
(optional)</li>
<li><tt class="docutils literal"><span class="pre">Return-Path:</span></tt> &#8211; the address where bounces should go to (optional)</li>
</ul>
<p>You must always include a <tt class="docutils literal"><span class="pre">From:</span></tt> address by using <tt class="docutils literal"><span class="pre">setFrom()</span></tt> on the
message. Swift Mailer will use this as the default <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> unless
otherwise specified.</p>
<p>The <tt class="docutils literal"><span class="pre">Sender:</span></tt> address exists because the person who actually sent the email
may not be the person who wrote the email. It has a higher precedence than the
<tt class="docutils literal"><span class="pre">From:</span></tt> address and will be used as the <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> unless otherwise
specified.</p>
<div class="section" id="setting-the-from-address">
<h3>Setting the <tt class="docutils literal"><span class="pre">From:</span></tt> Address<a class="headerlink" href="#setting-the-from-address" title="Permalink to this headline">¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">From:</span></tt> address is required and is set with the <tt class="docutils literal"><span class="pre">setFrom()</span></tt> method of the
message. <tt class="docutils literal"><span class="pre">From:</span></tt> addresses specify who actually wrote the email, and usually who sent it.</p>
<p>What most people probably don&#8217;t realise is that you can have more than one
<tt class="docutils literal"><span class="pre">From:</span></tt> address if more than one person wrote the email &#8211; for example if an
email was put together by a committee.</p>
<p>To set the <tt class="docutils literal"><span class="pre">From:</span></tt> address(es):</p>
<ul class="simple">
<li>Call the <tt class="docutils literal"><span class="pre">setFrom()</span></tt> method on the Message.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">From:</span></tt> address(es) are visible in the message headers and
will be seen by the recipients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you set multiple <tt class="docutils literal"><span class="pre">From:</span></tt> addresses then you absolutely must set a
<tt class="docutils literal"><span class="pre">Sender:</span></tt> address to indicate who physically sent the message.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">// Set a single From: address</span>
<span class="x">$message-&gt;setFrom(&#39;your@address.tld&#39;);</span>

<span class="x">// Set a From: address including a name</span>
<span class="x">$message-&gt;setFrom(array(&#39;your@address.tld&#39; =&gt; &#39;Your Name&#39;));</span>

<span class="x">// Set multiple From: addresses if multiple people wrote the email</span>
<span class="x">$message-&gt;setFrom(array(</span>
<span class="x">  &#39;person1@example.org&#39; =&gt; &#39;Sender One&#39;,</span>
<span class="x">  &#39;person2@example.org&#39; =&gt; &#39;Sender Two&#39;</span>
<span class="x">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-the-sender-address">
<h3>Setting the <tt class="docutils literal"><span class="pre">Sender:</span></tt> Address<a class="headerlink" href="#setting-the-sender-address" title="Permalink to this headline">¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">Sender:</span></tt> address specifies who sent the message and is set with the
<tt class="docutils literal"><span class="pre">setSender()</span></tt> method of the message.</p>
<p>To set the <tt class="docutils literal"><span class="pre">Sender:</span></tt> address:</p>
<ul class="simple">
<li>Call the <tt class="docutils literal"><span class="pre">setSender()</span></tt> method on the Message.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">Sender:</span></tt> address is visible in the message headers and will be seen by
the recipients.</p>
<p>This address will be used as the <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> unless otherwise specified.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you set multiple <tt class="docutils literal"><span class="pre">From:</span></tt> addresses then you absolutely must set a
<tt class="docutils literal"><span class="pre">Sender:</span></tt> address to indicate who physically sent the message.</p>
</div>
<p>You must not set more than one sender address on a message because it&#8217;s not
possible for more than one person to send a single message.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setSender(&#39;your@address.tld&#39;);</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-the-return-path-bounce-address">
<h3>Setting the <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> (Bounce) Address<a class="headerlink" href="#setting-the-return-path-bounce-address" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> address specifies where bounce notifications should
be sent and is set with the <tt class="docutils literal"><span class="pre">setReturnPath()</span></tt> method of the message.</p>
<p>You can only have one <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> and it must not include
a personal name.</p>
<p>To set the <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> address:</p>
<ul class="simple">
<li>Call the <tt class="docutils literal"><span class="pre">setReturnPath()</span></tt> method on the Message.</li>
</ul>
<p>Bounce notifications will be sent to this address.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setReturnPath(&#39;bounces@address.tld&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="signed-encrypted-message">
<h2>Signed/Encrypted Message<a class="headerlink" href="#signed-encrypted-message" title="Permalink to this headline">¶</a></h2>
<p>To increase the integrity/security of a message it is possible to sign and/or
encrypt an message using one or multiple signers.</p>
<div class="section" id="s-mime">
<h3>S/MIME<a class="headerlink" href="#s-mime" title="Permalink to this headline">¶</a></h3>
<p>S/MIME can sign and/or encrypt a message using the OpenSSL extension.</p>
<p>When signing a message, the signer creates a signature of the entire content of the message (including attachments).</p>
<p>The certificate and private key must be PEM encoded, and can be either created using for example OpenSSL or
obtained at an official Certificate Authority (CA).</p>
<p><strong>The recipient must have the CA certificate in the list of trusted issuers in order to verify the signature.</strong></p>
<p><strong>Make sure the certificate supports emailProtection.</strong></p>
<p>When using OpenSSL this can done by the including the <em>-addtrust emailProtection</em> parameter when creating the certificate.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message = Swift_Message::newInstance();</span>

<span class="x">$smimeSigner = Swift_Signers_SMimeSigner::newInstance();</span>
<span class="x">$smimeSigner-&gt;setSignCertificate(&#39;/path/to/certificate.pem&#39;, &#39;/path/to/private-key.pem&#39;);</span>
<span class="x">$message-&gt;attachSigner($smimeSigner);</span>
</pre></div>
</div>
<p>When the private key is secured using a passphrase use the following instead.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message = Swift_Message::newInstance();</span>

<span class="x">$smimeSigner = Swift_Signers_SMimeSigner::newInstance();</span>
<span class="x">$smimeSigner-&gt;setSignCertificate(&#39;/path/to/certificate.pem&#39;, array(&#39;/path/to/private-key.pem&#39;, &#39;passphrase&#39;));</span>
<span class="x">$message-&gt;attachSigner($smimeSigner);</span>
</pre></div>
</div>
<p>By default the signature is added as attachment,
making the message still readable for mailing agents not supporting signed messages.</p>
<p>Storing the message as binary is also possible but not recommended.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$smimeSigner-&gt;setSignCertificate(&#39;/path/to/certificate.pem&#39;, &#39;/path/to/private-key.pem&#39;, PKCS7_BINARY);</span>
</pre></div>
</div>
<p>When encrypting the message (also known as enveloping), the entire message (including attachments)
is encrypted using a certificate, and the recipient can then decrypt the message using corresponding private key.</p>
<p>Encrypting ensures nobody can read the contents of the message without the private key.</p>
<p>Normally the recipient provides a certificate for encrypting and keeping the decryption key private.</p>
<p>Using both signing and encrypting is also possible.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$message = Swift_Message::newInstance();</span>

<span class="x">$smimeSigner = Swift_Signers_SMimeSigner::newInstance();</span>
<span class="x">$smimeSigner-&gt;setSignCertificate(&#39;/path/to/sign-certificate.pem&#39;, &#39;/path/to/private-key.pem&#39;);</span>
<span class="x">$smimeSigner-&gt;setEncryptCertificate(&#39;/path/to/encrypt-certificate.pem&#39;);</span>
<span class="x">$message-&gt;attachSigner($smimeSigner);</span>
</pre></div>
</div>
<p>The used encryption cipher can be set as the second parameter of setEncryptCertificate()</p>
<p>See <a class="reference external" href="http://php.net/manual/openssl.ciphers">http://php.net/manual/openssl.ciphers</a> for a list of supported ciphers.</p>
<p>By default the message is first signed and then encrypted, this can be changed by adding.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$smimeSigner-&gt;setSignThenEncrypt(false);</span>
</pre></div>
</div>
<p><strong>Changing this is not recommended as most mail agents don&#8217;t support this none-standard way.</strong></p>
<p>Only when having trouble with sign then encrypt method, this should be changed.</p>
</div>
</div>
<div class="section" id="requesting-a-read-receipt">
<h2>Requesting a Read Receipt<a class="headerlink" href="#requesting-a-read-receipt" title="Permalink to this headline">¶</a></h2>
<p>It is possible to request a read-receipt to be sent to an address when the
email is opened. To request a read receipt set the address with
<tt class="docutils literal"><span class="pre">setReadReceiptTo()</span></tt>.</p>
<p>To request a read receipt:</p>
<ul class="simple">
<li>Set the address you want the receipt to be sent to with the
<tt class="docutils literal"><span class="pre">setReadReceiptTo()</span></tt> method on the Message.</li>
</ul>
<p>When the email is opened, if the mail client supports it a notification will be sent to this address.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Read receipts won&#8217;t work for the majority of recipients since many mail
clients auto-disable them. Those clients that will send a read receipt
will make the user aware that one has been requested.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setReadReceiptTo(&#39;your@address.tld&#39;);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-the-character-set">
<h2>Setting the Character Set<a class="headerlink" href="#setting-the-character-set" title="Permalink to this headline">¶</a></h2>
<p>The character set of the message (and it&#8217;s MIME parts) is set with the
<tt class="docutils literal"><span class="pre">setCharset()</span></tt> method. You can also change the global default of UTF-8 by
working with the <tt class="docutils literal"><span class="pre">Swift_Preferences</span></tt> class.</p>
<p>Swift Mailer will default to the UTF-8 character set unless otherwise
overridden. UTF-8 will work in most instances since it includes all of the
standard US keyboard characters in addition to most international characters.</p>
<p>It is absolutely vital however that you know what character set your message
(or it&#8217;s MIME parts) are written in otherwise your message may be received
completely garbled.</p>
<p>There are two places in Swift Mailer where you can change the character set:</p>
<ul class="simple">
<li>In the <tt class="docutils literal"><span class="pre">Swift_Preferences</span></tt> class</li>
<li>On each individual message and/or MIME part</li>
</ul>
<p>To set the character set of your Message:</p>
<ul>
<li><p class="first">Change the global UTF-8 setting by calling
<tt class="docutils literal"><span class="pre">Swift_Preferences::setCharset()</span></tt>; or</p>
</li>
<li><p class="first">Call the <tt class="docutils literal"><span class="pre">setCharset()</span></tt> method on the message or the MIME part.</p>
<blockquote>
<div><div class="highlight-php"><div class="highlight"><pre><span class="x">// Approach 1: Change the global setting (suggested)</span>
<span class="x">Swift_Preferences::getInstance()-&gt;setCharset(&#39;iso-8859-2&#39;);</span>

<span class="x">// Approach 2: Call the setCharset() method of the message</span>
<span class="x">$message = Swift_Message::newInstance()</span>
<span class="x">  -&gt;setCharset(&#39;iso-8859-2&#39;);</span>

<span class="x">// Approach 3: Specify the charset when setting the body</span>
<span class="x">$message-&gt;setBody(&#39;My body&#39;, &#39;text/html&#39;, &#39;iso-8859-2&#39;);</span>

<span class="x">// Approach 4: Specify the charset for each part added</span>
<span class="x">$message-&gt;addPart(&#39;My part&#39;, &#39;text/plain&#39;, &#39;iso-8859-2&#39;);</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="setting-the-line-length">
<h2>Setting the Line Length<a class="headerlink" href="#setting-the-line-length" title="Permalink to this headline">¶</a></h2>
<p>The length of lines in a message can be changed by using the <tt class="docutils literal"><span class="pre">setMaxLineLength()</span></tt> method on the message. It should be kept to less than
1000 characters.</p>
<p>Swift Mailer defaults to using 78 characters per line in a message. This is
done for historical reasons and so that the message can be easily viewed in
plain-text terminals.</p>
<p>To change the maximum length of lines in your Message:</p>
<ul class="simple">
<li>Call the <tt class="docutils literal"><span class="pre">setMaxLineLength()</span></tt> method on the Message.</li>
</ul>
<p>Lines that are longer than the line length specified will be wrapped between
words.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You should never set a maximum length longer than 1000 characters
according to RFC 2822. Doing so could have unspecified side-effects such
as truncating parts of your message when it is transported between SMTP
servers.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">$message-&gt;setMaxLineLength(1000);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-the-message-priority">
<h2>Setting the Message Priority<a class="headerlink" href="#setting-the-message-priority" title="Permalink to this headline">¶</a></h2>
<p>You can change the priority of the message with <tt class="docutils literal"><span class="pre">setPriority()</span></tt>. Setting the
priority will not change the way your email is sent &#8211; it is purely an
indicative setting for the recipient.</p>
<p>The priority of a message is an indication to the recipient what significance
it has. Swift Mailer allows you to set the priority by calling the <tt class="docutils literal"><span class="pre">setPriority</span></tt> method. This method takes an integer value between 1 and 5:</p>
<ul class="simple">
<li>Highest</li>
<li>High</li>
<li>Normal</li>
<li>Low</li>
<li>Lowest</li>
</ul>
<p>To set the message priority:</p>
<ul class="simple">
<li>Set the priority as an integer between 1 and 5 with the <tt class="docutils literal"><span class="pre">setPriority()</span></tt>
method on the Message.</li>
</ul>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Indicate &quot;High&quot; priority</span>
<span class="x">$message-&gt;setPriority(2);</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creating Messages</a><ul>
<li><a class="reference internal" href="#quick-reference-for-creating-a-message">Quick Reference for Creating a Message</a></li>
<li><a class="reference internal" href="#message-basics">Message Basics</a><ul>
<li><a class="reference internal" href="#the-structure-of-a-message">The Structure of a Message</a></li>
<li><a class="reference internal" href="#working-with-a-message-object">Working with a Message Object</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-content-to-your-message">Adding Content to Your Message</a><ul>
<li><a class="reference internal" href="#setting-the-subject-line">Setting the Subject Line</a></li>
<li><a class="reference internal" href="#setting-the-body-content">Setting the Body Content</a></li>
</ul>
</li>
<li><a class="reference internal" href="#attaching-files">Attaching Files</a><ul>
<li><a class="reference internal" href="#attaching-existing-files">Attaching Existing Files</a></li>
<li><a class="reference internal" href="#setting-the-filename">Setting the Filename</a></li>
<li><a class="reference internal" href="#attaching-dynamic-content">Attaching Dynamic Content</a></li>
<li><a class="reference internal" href="#changing-the-disposition">Changing the Disposition</a></li>
<li><a class="reference internal" href="#embedding-inline-media-files">Embedding Inline Media Files</a><ul>
<li><a class="reference internal" href="#embedding-existing-files">Embedding Existing Files</a></li>
<li><a class="reference internal" href="#embedding-dynamic-content">Embedding Dynamic Content</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#adding-recipients-to-your-message">Adding Recipients to Your Message</a><ul>
<li><a class="reference internal" href="#setting-to-recipients">Setting <tt class="docutils literal"><span class="pre">To:</span></tt> Recipients</a></li>
<li><a class="reference internal" href="#setting-cc-recipients">Setting <tt class="docutils literal"><span class="pre">Cc:</span></tt> Recipients</a></li>
<li><a class="reference internal" href="#setting-bcc-recipients">Setting <tt class="docutils literal"><span class="pre">Bcc:</span></tt> Recipients</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specifying-sender-details">Specifying Sender Details</a><ul>
<li><a class="reference internal" href="#setting-the-from-address">Setting the <tt class="docutils literal"><span class="pre">From:</span></tt> Address</a></li>
<li><a class="reference internal" href="#setting-the-sender-address">Setting the <tt class="docutils literal"><span class="pre">Sender:</span></tt> Address</a></li>
<li><a class="reference internal" href="#setting-the-return-path-bounce-address">Setting the <tt class="docutils literal"><span class="pre">Return-Path:</span></tt> (Bounce) Address</a></li>
</ul>
</li>
<li><a class="reference internal" href="#signed-encrypted-message">Signed/Encrypted Message</a><ul>
<li><a class="reference internal" href="#s-mime">S/MIME</a></li>
</ul>
</li>
<li><a class="reference internal" href="#requesting-a-read-receipt">Requesting a Read Receipt</a></li>
<li><a class="reference internal" href="#setting-the-character-set">Setting the Character Set</a></li>
<li><a class="reference internal" href="#setting-the-line-length">Setting the Line Length</a></li>
<li><a class="reference internal" href="#setting-the-message-priority">Setting the Message Priority</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="including-the-files.html"
                        title="previous chapter">Including Swift Mailer (Autoloading)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="headers.html"
                        title="next chapter">Message Headers</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/messages.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="headers.html" title="Message Headers"
             >next</a> |</li>
        <li class="right" >
          <a href="including-the-files.html" title="Including Swift Mailer (Autoloading)"
             >previous</a> |</li>
        <li><a href="index.html">Swiftmailer 5.2.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Swiftmailer Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>
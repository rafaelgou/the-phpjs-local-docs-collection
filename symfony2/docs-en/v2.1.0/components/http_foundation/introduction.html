

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The HttpFoundation Component &mdash; Symfony2Docs v2.1.0 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs v2.1.0 2.1.0 documentation" href="../../index.html" />
    <link rel="up" title="HTTP Foundation" href="index.html" />
    <link rel="next" title="Session Management" href="sessions.html" />
    <link rel="prev" title="HTTP Foundation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sessions.html" title="Session Management"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="HTTP Foundation"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Symfony2Docs v2.1.0 2.1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >The Components</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">HTTP Foundation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-httpfoundation-component">
<span id="index-0"></span><h1>The HttpFoundation Component<a class="headerlink" href="#the-httpfoundation-component" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>The HttpFoundation Component defines an object-oriented layer for the HTTP
specification.</div></blockquote>
<p>In PHP, the request is represented by some global variables (<tt class="docutils literal"><span class="pre">$_GET</span></tt>,
<tt class="docutils literal"><span class="pre">$_POST</span></tt>, <tt class="docutils literal"><span class="pre">$_FILE</span></tt>, <tt class="docutils literal"><span class="pre">$_COOKIE</span></tt>, <tt class="docutils literal"><span class="pre">$_SESSION</span></tt>, ...) and the response is
generated by some functions (<tt class="docutils literal"><span class="pre">echo</span></tt>, <tt class="docutils literal"><span class="pre">header</span></tt>, <tt class="docutils literal"><span class="pre">setcookie</span></tt>, ...).</p>
<p>The Symfony2 HttpFoundation component replaces these default PHP global
variables and functions by an Object-Oriented layer.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>You can install the component in many different ways:</p>
<ul class="simple">
<li>Use the official Git repository (<a class="reference external" href="https://github.com/symfony/HttpFoundation">https://github.com/symfony/HttpFoundation</a>);</li>
<li>Install it via PEAR ( <cite>pear.symfony.com/HttpFoundation</cite>);</li>
<li>Install it via Composer (<cite>symfony/http-foundation</cite> on Packagist).</li>
</ul>
</div>
<div class="section" id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h2>
<p>The most common way to create request is to base it on the current PHP global
variables with
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_createFromGlobals" title="Symfony\Component\HttpFoundation\Request::createFromGlobals()"><span class="pre">createFromGlobals()</span></a></tt>:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\Request;

$request = Request::createFromGlobals();</pre>
</div>
<p>which is almost equivalent to the more verbose, but also more flexible,
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method___construct" title="Symfony\Component\HttpFoundation\Request::__construct()"><span class="pre">__construct()</span></a></tt> call:</p>
<div class="highlight-python"><pre>$request = new Request($_GET, $_POST, array(), $_COOKIE, $_FILES, $_SERVER);</pre>
</div>
<div class="section" id="accessing-request-data">
<h3>Accessing Request Data<a class="headerlink" href="#accessing-request-data" title="Permalink to this headline">¶</a></h3>
<p>A Request object holds information about the client request. This information
can be accessed via several public properties:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">request</span></tt>: equivalent of <tt class="docutils literal"><span class="pre">$_POST</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">query</span></tt>: equivalent of <tt class="docutils literal"><span class="pre">$_GET</span></tt> (<tt class="docutils literal"><span class="pre">$request-&gt;query-&gt;get('name')</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">cookies</span></tt>: equivalent of <tt class="docutils literal"><span class="pre">$_COOKIE</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">attributes</span></tt>: no equivalent - used by your app to store other data (see <a class="reference internal" href="#component-foundation-attributes"><em>below</em></a>)</li>
<li><tt class="docutils literal"><span class="pre">files</span></tt>: equivalent of <tt class="docutils literal"><span class="pre">$_FILE</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">server</span></tt>: equivalent of <tt class="docutils literal"><span class="pre">$_SERVER</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">headers</span></tt>: mostly equivalent to a sub-set of <tt class="docutils literal"><span class="pre">$_SERVER</span></tt>
(<tt class="docutils literal"><span class="pre">$request-&gt;headers-&gt;get('Content-Type')</span></tt>).</li>
</ul>
<p>Each property is a <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt>
instance (or a sub-class of), which is a data holder class:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">request</span></tt>: <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt>;</li>
<li><tt class="docutils literal"><span class="pre">query</span></tt>:   <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt>;</li>
<li><tt class="docutils literal"><span class="pre">cookies</span></tt>: <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt>;</li>
<li><tt class="docutils literal"><span class="pre">attributes</span></tt>: <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt>;</li>
<li><tt class="docutils literal"><span class="pre">files</span></tt>:   <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/FileBag.html" title="Symfony\Component\HttpFoundation\FileBag"><span class="pre">FileBag</span></a></tt>;</li>
<li><tt class="docutils literal"><span class="pre">server</span></tt>:  <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ServerBag.html" title="Symfony\Component\HttpFoundation\ServerBag"><span class="pre">ServerBag</span></a></tt>;</li>
<li><tt class="docutils literal"><span class="pre">headers</span></tt>: <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/HeaderBag.html" title="Symfony\Component\HttpFoundation\HeaderBag"><span class="pre">HeaderBag</span></a></tt>.</li>
</ul>
<p>All <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt> instances have
methods to retrieve and update its data:</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_all" title="Symfony\Component\HttpFoundation\ParameterBag::all()"><span class="pre">all()</span></a></tt>: Returns
the parameters;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_keys" title="Symfony\Component\HttpFoundation\ParameterBag::keys()"><span class="pre">keys()</span></a></tt>: Returns
the parameter keys;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_replace" title="Symfony\Component\HttpFoundation\ParameterBag::replace()"><span class="pre">replace()</span></a></tt>:
Replaces the current parameters by a new set;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_add" title="Symfony\Component\HttpFoundation\ParameterBag::add()"><span class="pre">add()</span></a></tt>: Adds
parameters;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_get" title="Symfony\Component\HttpFoundation\ParameterBag::get()"><span class="pre">get()</span></a></tt>: Returns a
parameter by name;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_set" title="Symfony\Component\HttpFoundation\ParameterBag::set()"><span class="pre">set()</span></a></tt>: Sets a
parameter by name;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_has" title="Symfony\Component\HttpFoundation\ParameterBag::has()"><span class="pre">has()</span></a></tt>: Returns
true if the parameter is defined;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html#method_remove" title="Symfony\Component\HttpFoundation\ParameterBag::remove()"><span class="pre">remove()</span></a></tt>: Removes
a parameter.</li>
</ul>
<p>The <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt> instance also
has some methods to filter the input values:</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getAlpha" title="Symfony\Component\HttpFoundation\Request::getAlpha()"><span class="pre">getAlpha()</span></a></tt>: Returns
the alphabetic characters of the parameter value;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getAlnum" title="Symfony\Component\HttpFoundation\Request::getAlnum()"><span class="pre">getAlnum()</span></a></tt>: Returns
the alphabetic characters and digits of the parameter value;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getDigits" title="Symfony\Component\HttpFoundation\Request::getDigits()"><span class="pre">getDigits()</span></a></tt>: Returns
the digits of the parameter value;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getInt" title="Symfony\Component\HttpFoundation\Request::getInt()"><span class="pre">getInt()</span></a></tt>: Returns the
parameter value converted to integer;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_filter" title="Symfony\Component\HttpFoundation\Request::filter()"><span class="pre">filter()</span></a></tt>: Filters the
parameter by using the PHP <tt class="docutils literal"><span class="pre">filter_var()</span></tt> function.</li>
</ul>
<p>All getters takes up to three arguments: the first one is the parameter name
and the second one is the default value to return if the parameter does not
exist:</p>
<div class="highlight-python"><pre>// the query string is '?foo=bar'

$request-&gt;query-&gt;get('foo');
// returns bar

$request-&gt;query-&gt;get('bar');
// returns null

$request-&gt;query-&gt;get('bar', 'bar');
// returns 'bar'</pre>
</div>
<p>When PHP imports the request query, it handles request parameters like
<tt class="docutils literal"><span class="pre">foo[bar]=bar</span></tt> in a special way as it creates an array. So you can get the
<tt class="docutils literal"><span class="pre">foo</span></tt> parameter and you will get back an array with a <tt class="docutils literal"><span class="pre">bar</span></tt> element. But
sometimes, you might want to get the value for the &#8220;original&#8221; parameter name:
<tt class="docutils literal"><span class="pre">foo[bar]</span></tt>. This is possible with all the <cite>ParameterBag</cite> getters like
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_get" title="Symfony\Component\HttpFoundation\Request::get()"><span class="pre">get()</span></a></tt> via the third
argument:</p>
<div class="highlight-python"><pre>// the query string is '?foo[bar]=bar'

$request-&gt;query-&gt;get('foo');
// returns array('bar' =&gt; 'bar')

$request-&gt;query-&gt;get('foo[bar]');
// returns null

$request-&gt;query-&gt;get('foo[bar]', null, true);
// returns 'bar'</pre>
</div>
<p id="component-foundation-attributes">Last, but not the least, you can also store additional data in the request,
thanks to the <tt class="docutils literal"><span class="pre">attributes</span></tt> public property, which is also an instance of
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ParameterBag.html" title="Symfony\Component\HttpFoundation\ParameterBag"><span class="pre">ParameterBag</span></a></tt>. This is mostly used
to attach information that belongs to the Request and that needs to be
accessed from many different points in your application. For information
on how this is used in the Symfony2 framework, see <a class="reference internal" href="../../book/http_fundamentals.html#book-fundamentals-attributes"><em>read more</em></a>.</p>
</div>
<div class="section" id="identifying-a-request">
<h3>Identifying a Request<a class="headerlink" href="#identifying-a-request" title="Permalink to this headline">¶</a></h3>
<p>In your application, you need a way to identify a request; most of the time,
this is done via the &#8220;path info&#8221; of the request, which can be accessed via the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getPathInfo" title="Symfony\Component\HttpFoundation\Request::getPathInfo()"><span class="pre">getPathInfo()</span></a></tt> method:</p>
<div class="highlight-python"><pre>// for a request to http://example.com/blog/index.php/post/hello-world
// the path info is "/post/hello-world"
$request-&gt;getPathInfo();</pre>
</div>
</div>
<div class="section" id="simulating-a-request">
<h3>Simulating a Request<a class="headerlink" href="#simulating-a-request" title="Permalink to this headline">¶</a></h3>
<p>Instead of creating a Request based on the PHP globals, you can also simulate
a Request:</p>
<div class="highlight-python"><pre>$request = Request::create('/hello-world', 'GET', array('name' =&gt; 'Fabien'));</pre>
</div>
<p>The <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_create" title="Symfony\Component\HttpFoundation\Request::create()"><span class="pre">create()</span></a></tt> method
creates a request based on a path info, a method and some parameters (the
query parameters or the request ones depending on the HTTP method); and of
course, you an also override all other variables as well (by default, Symfony
creates sensible defaults for all the PHP global variables).</p>
<p>Based on such a request, you can override the PHP global variables via
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_overrideGlobals" title="Symfony\Component\HttpFoundation\Request::overrideGlobals()"><span class="pre">overrideGlobals()</span></a></tt>:</p>
<div class="highlight-python"><pre>$request-&gt;overrideGlobals();</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can also duplicate an existing query via
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_duplicate" title="Symfony\Component\HttpFoundation\Request::duplicate()"><span class="pre">duplicate()</span></a></tt> or
change a bunch of parameters with a single call to
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_initialize" title="Symfony\Component\HttpFoundation\Request::initialize()"><span class="pre">initialize()</span></a></tt>.</p>
</div>
</div>
<div class="section" id="accessing-the-session">
<h3>Accessing the Session<a class="headerlink" href="#accessing-the-session" title="Permalink to this headline">¶</a></h3>
<p>If you have a session attached to the Request, you can access it via the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getSession" title="Symfony\Component\HttpFoundation\Request::getSession()"><span class="pre">getSession()</span></a></tt> method;
the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_hasPreviousSession" title="Symfony\Component\HttpFoundation\Request::hasPreviousSession()"><span class="pre">hasPreviousSession()</span></a></tt>
method tells you if the request contains a Session which was started in one of
the previous requests.</p>
</div>
<div class="section" id="accessing-other-data">
<h3>Accessing other Data<a class="headerlink" href="#accessing-other-data" title="Permalink to this headline">¶</a></h3>
<p>The Request class has many other methods that you can use to access the
request information. Have a look at the API for more information about them.</p>
</div>
</div>
<div class="section" id="response">
<h2>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h2>
<p>A <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html" title="Symfony\Component\HttpFoundation\Response"><span class="pre">Response</span></a></tt> object holds all the
information that needs to be sent back to the client from a given request. The
constructor takes up to three arguments: the response content, the status
code, and an array of HTTP headers:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\Response;

$response = new Response('Content', 200, array('content-type' =&gt; 'text/html'));</pre>
</div>
<p>These information can also be manipulated after the Response object creation:</p>
<div class="highlight-python"><pre>$response-&gt;setContent('Hello World');

// the headers public attribute is a ResponseHeaderBag
$response-&gt;headers-&gt;set('Content-Type', 'text/plain');

$response-&gt;setStatusCode(404);</pre>
</div>
<p>When setting the <tt class="docutils literal"><span class="pre">Content-Type</span></tt> of the Response, you can set the charset,
but it is better to set it via the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setCharset" title="Symfony\Component\HttpFoundation\Response::setCharset()"><span class="pre">setCharset()</span></a></tt> method:</p>
<div class="highlight-python"><pre>$response-&gt;setCharset('ISO-8859-1');</pre>
</div>
<p>Note that by default, Symfony assumes that your Responses are encoded in
UTF-8.</p>
<div class="section" id="sending-the-response">
<h3>Sending the Response<a class="headerlink" href="#sending-the-response" title="Permalink to this headline">¶</a></h3>
<p>Before sending the Response, you can ensure that it is compliant with the HTTP
specification by calling the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_prepare" title="Symfony\Component\HttpFoundation\Response::prepare()"><span class="pre">prepare()</span></a></tt> method:</p>
<div class="highlight-python"><pre>$response-&gt;prepare($request);</pre>
</div>
<p>Sending the response to the client is then as simple as calling
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_send" title="Symfony\Component\HttpFoundation\Response::send()"><span class="pre">send()</span></a></tt>:</p>
<div class="highlight-python"><pre>$response-&gt;send();</pre>
</div>
</div>
<div class="section" id="setting-cookies">
<h3>Setting Cookies<a class="headerlink" href="#setting-cookies" title="Permalink to this headline">¶</a></h3>
<p>The response cookies can be manipulated though the <tt class="docutils literal"><span class="pre">headers</span></tt> public
attribute:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\Cookie;

$response-&gt;headers-&gt;setCookie(new Cookie('foo', 'bar'));</pre>
</div>
<p>The
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/ResponseHeaderBag.html#method_setCookie" title="Symfony\Component\HttpFoundation\ResponseHeaderBag::setCookie()"><span class="pre">setCookie()</span></a></tt>
method takes an instance of
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Cookie.html" title="Symfony\Component\HttpFoundation\Cookie"><span class="pre">Cookie</span></a></tt> as an argument.</p>
<p>You can clear a cookie via the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_clearCookie" title="Symfony\Component\HttpFoundation\Response::clearCookie()"><span class="pre">clearCookie()</span></a></tt> method.</p>
</div>
<div class="section" id="managing-the-http-cache">
<h3>Managing the HTTP Cache<a class="headerlink" href="#managing-the-http-cache" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html" title="Symfony\Component\HttpFoundation\Response"><span class="pre">Response</span></a></tt> class has a rich set
of methods to manipulate the HTTP headers related to the cache:</p>
<ul class="simple">
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setPublic" title="Symfony\Component\HttpFoundation\Response::setPublic()"><span class="pre">setPublic()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setPrivate" title="Symfony\Component\HttpFoundation\Response::setPrivate()"><span class="pre">setPrivate()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_expire" title="Symfony\Component\HttpFoundation\Response::expire()"><span class="pre">expire()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setExpires" title="Symfony\Component\HttpFoundation\Response::setExpires()"><span class="pre">setExpires()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setMaxAge" title="Symfony\Component\HttpFoundation\Response::setMaxAge()"><span class="pre">setMaxAge()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setSharedMaxAge" title="Symfony\Component\HttpFoundation\Response::setSharedMaxAge()"><span class="pre">setSharedMaxAge()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setTtl" title="Symfony\Component\HttpFoundation\Response::setTtl()"><span class="pre">setTtl()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setClientTtl" title="Symfony\Component\HttpFoundation\Response::setClientTtl()"><span class="pre">setClientTtl()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setLastModified" title="Symfony\Component\HttpFoundation\Response::setLastModified()"><span class="pre">setLastModified()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setEtag" title="Symfony\Component\HttpFoundation\Response::setEtag()"><span class="pre">setEtag()</span></a></tt>;</li>
<li><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setVary" title="Symfony\Component\HttpFoundation\Response::setVary()"><span class="pre">setVary()</span></a></tt>;</li>
</ul>
<p>The <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_setCache" title="Symfony\Component\HttpFoundation\Response::setCache()"><span class="pre">setCache()</span></a></tt> method
can be used to set the most commonly used cache information in one method
call:</p>
<div class="highlight-python"><pre>$response-&gt;setCache(array(
    'etag'          =&gt; 'abcdef',
    'last_modified' =&gt; new \DateTime(),
    'max_age'       =&gt; 600,
    's_maxage'      =&gt; 600,
    'private'       =&gt; false,
    'public'        =&gt; true,
));</pre>
</div>
<p>To check if the Response validators (<tt class="docutils literal"><span class="pre">ETag</span></tt>, <tt class="docutils literal"><span class="pre">Last-Modified</span></tt>) match a
conditional value specified in the client Request, use the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_isNotModified" title="Symfony\Component\HttpFoundation\Response::isNotModified()"><span class="pre">isNotModified()</span></a></tt>
method:</p>
<div class="highlight-python"><pre>if ($response-&gt;isNotModified($request)) {
    $response-&gt;send();
}</pre>
</div>
<p>If the Response is not modified, it sets the status code to 304 and remove the
actual response content.</p>
</div>
<div class="section" id="redirecting-the-user">
<h3>Redirecting the User<a class="headerlink" href="#redirecting-the-user" title="Permalink to this headline">¶</a></h3>
<p>To redirect the client to another URL, you can use the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/RedirectResponse.html" title="Symfony\Component\HttpFoundation\RedirectResponse"><span class="pre">RedirectResponse</span></a></tt> class:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\RedirectResponse;

$response = new RedirectResponse('http://example.com/');</pre>
</div>
</div>
<div class="section" id="streaming-a-response">
<h3>Streaming a Response<a class="headerlink" href="#streaming-a-response" title="Permalink to this headline">¶</a></h3>
<p class="versionadded">
<span class="versionmodified">New in version 2.1: </span>Support for streamed responses was added in Symfony 2.1.</p>
<p>The <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/StreamedResponse.html" title="Symfony\Component\HttpFoundation\StreamedResponse"><span class="pre">StreamedResponse</span></a></tt> class allows
you to stream the Response back to the client. The response content is
represented by a PHP callable instead of a string:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\StreamedResponse;

$response = new StreamedResponse();
$response-&gt;setCallback(function () {
    echo 'Hello World';
    flush();
    sleep(2);
    echo 'Hello World';
    flush();
});
$response-&gt;send();</pre>
</div>
</div>
<div class="section" id="downloading-files">
<h3>Downloading Files<a class="headerlink" href="#downloading-files" title="Permalink to this headline">¶</a></h3>
<p class="versionadded">
<span class="versionmodified">New in version 2.1: </span>The <tt class="docutils literal"><span class="pre">makeDisposition</span></tt> method was added in Symfony 2.1.</p>
<p>When uploading a file, you must add a <tt class="docutils literal"><span class="pre">Content-Disposition</span></tt> header to your
response. While creating this header for basic file downloads is easy, using
non-ASCII filenames is more involving. The
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_makeDisposition" title="Symfony\Component\HttpFoundation\Response::makeDisposition()"><span class="pre">makeDisposition()</span></a></tt>
abstracts the hard work behind a simple API:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\ResponseHeaderBag;

$d = $response-&gt;headers-&gt;makeDisposition(ResponseHeaderBag::DISPOSITION_ATTACHMENT, 'foo.pdf');

$response-&gt;headers-&gt;set('Content-Disposition', $d);</pre>
</div>
</div>
</div>
<div class="section" id="session">
<h2>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h2>
<p>The session information is in its own document: <a class="reference internal" href="sessions.html"><em>Session Management</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The HttpFoundation Component</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#request">Request</a><ul>
<li><a class="reference internal" href="#accessing-request-data">Accessing Request Data</a></li>
<li><a class="reference internal" href="#identifying-a-request">Identifying a Request</a></li>
<li><a class="reference internal" href="#simulating-a-request">Simulating a Request</a></li>
<li><a class="reference internal" href="#accessing-the-session">Accessing the Session</a></li>
<li><a class="reference internal" href="#accessing-other-data">Accessing other Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#response">Response</a><ul>
<li><a class="reference internal" href="#sending-the-response">Sending the Response</a></li>
<li><a class="reference internal" href="#setting-cookies">Setting Cookies</a></li>
<li><a class="reference internal" href="#managing-the-http-cache">Managing the HTTP Cache</a></li>
<li><a class="reference internal" href="#redirecting-the-user">Redirecting the User</a></li>
<li><a class="reference internal" href="#streaming-a-response">Streaming a Response</a></li>
<li><a class="reference internal" href="#downloading-files">Downloading Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#session">Session</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">HTTP Foundation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sessions.html"
                        title="next chapter">Session Management</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/components/http_foundation/introduction.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sessions.html" title="Session Management"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="HTTP Foundation"
             >previous</a> |</li>
        <li><a href="../../index.html">Symfony2Docs v2.1.0 2.1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >The Components</a> &raquo;</li>
          <li><a href="index.html" >HTTP Foundation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>
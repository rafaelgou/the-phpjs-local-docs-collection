<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Contributing Changes</title><style type="text/css">body { background: white; color: black; font-family: Georgia, serif; margin: 0; padding: .5em .5em .5em 1.5em; } p { text-align: justify; } table.news p { margin-top: 0; } table.news td { vertical-align: baseline; } table.news .date { text-align: right; padding-right: 0.5em; white-space: nowrap; } table.donors td { vertical-align: baseline; } table.donors li { text-align: left; } div.directive, #banner { background: #F2F2F2; margin: 1em 0 1em -1em; padding: .7em .7em .7em 1em; } div.directive { border-top: 2px solid #DDD; } div.directive th { padding-left: 0; padding-right: .5em; vertical-align: baseline; text-align: left; font-weight: normal; } div.directive td { vertical-align: baseline; } div.directive pre { padding: 0; margin: 0; } div.directive p { margin: .5em 0 0 .1em; font-size: .8em; } #banner { margin: 0 0 0 -1em; } a.notrans { color: gray; text-decoration:none; } span.initial { font-size: 200%; float: left; padding-right: 10pt;} ul, ol { margin: .5em 0 1em 1em; padding: 0 .5em; } ol { list-style-position: inside; } li { text-align: justify; padding: .5em 0 0 1px; } .compact li { padding-top: 0; } dl { margin: .5em 0 1em 0; } dt { margin: .5em 0; } .compact dt { margin-bottom: .2em; } dd { margin-left: 1.5em; padding-left: 1px; text-align: justify; } td.list { background: #F2F2F2; } blockquote { margin: 1em 0 1em 1em; padding: .5em; } li blockquote, dd blockquote { margin: .7em 0; } blockquote.note { border: 1px dotted #999; text-align: justify; } blockquote.example { border-left: 1px solid #BBB; } blockquote.example pre { padding: 0; margin: 0; } sup { font-size: 50%; }</style><script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-27974099-2']);
        _gaq.push(['_setDomainName', 'nginx.org']);
        _gaq.push(['_trackPageview']);

        (function() {
           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script></head><body><table width="100%"><tr><td width="70%"><div id="banner"><center><table><tr><td align="center"><strong>Looking to make your web app faster? Look no further!</strong></td></tr><tr><td align="center"><i>NGINX Plus for HTTP load balancing, caching and SSL offload —
                            <a href="http://nginx.com/products/">Free 30-Day Trial</a>.</i></td></tr></table></center></div></td><td align="right"><a href="http://nginx.org"><img src="../../nginx.gif" alt="nginx" border="0"></a></td></tr><tr><td width="70%"><center><h3>Contributing Changes</h3></center></td><td rowspan="2" align="right" valign="top"><br>english<br><a href="http://nginx.org/ru/docs/contributing_changes.html">русский</a><br><br><a class="notrans">简体中文</a><br><a class="notrans">עברית</a><br><a class="notrans">日本語</a><br><a class="notrans">türkçe</a><br><a href="http://nginx.org/it/docs/contributing_changes.html">italiano</a><br><br><a href="http://nginx.org/">news</a><br><a href="http://nginx.org/en/">about</a><br><a href="http://nginx.org/en/download.html">download</a><br><a href="http://nginx.org/en/security_advisories.html">security advisories</a><br><a href="index.html">documentation</a><br><a href="http://nginx.org/en/pgp_keys.html">pgp keys</a><br><a href="faq.html">faq</a><br><a href="http://nginx.org/en/links.html">links</a><br><a href="http://nginx.org/en/books.html">books</a><br><a href="http://nginx.org/en/support.html">support</a><br><a href="http://nginx.org/en/donation.html">donation</a><br><br><a href="http://trac.nginx.org/nginx">trac</a><br><a href="http://wiki.nginx.org/">wiki</a><br><a href="http://twitter.com/nginxorg">twitter</a><br><a href="http://nginx.com/">nginx.com</a><br><a href="http://nginx.com/blog/">blog</a><br></td></tr><tr><td valign="top"><table width="100%"><tr><td align="left"><a href="contributing_changes.html#getting_sources">Getting Sources</a><br><a href="contributing_changes.html#formatting_changes">Formatting Changes</a><br><a href="contributing_changes.html#before_submitting">Before Submitting</a><br><a href="contributing_changes.html#submitting_changes">Submitting Changes</a><br><a href="contributing_changes.html#license">License</a><br></td></tr></table><a name="getting_sources"></a><center><h4>Getting Sources</h4></center><p>
<a href="http://mercurial.selenic.com">Mercurial</a> is used
to store source code.
The <a href="http://hg.nginx.org/nginx">repository</a> can be cloned
with the following command:
</p> <blockquote class="example"><pre>
hg clone http://hg.nginx.org/nginx
</pre></blockquote><p> 
</p><a name="formatting_changes"></a><center><h4>Formatting Changes</h4></center><p>
Changes should be formatted according to the code style used by nginx.
Code formatting should not rely on such editor features like syntax
highlighting or automatic line breaking.
Below are some basic rules:
</p> <ul class="compact">

<li>
maximum text width is 80 characters
</li>

<li>
indentation is four spaces
</li>

<li>
no tabs
</li>

<li>
logical code blocks in a file are separated with two empty lines
</li>

</ul><p> 
Examine how existing nginx sources are formatted and mimic this style
in your code.
Changes will more likely be accepted if style corresponds to the surrounding
code.
</p><p>
Commit the changes to create a Mercurial
<a href="http://mercurial.selenic.com/wiki/ChangeSet">changeset</a>.
Please ensure that the specified
<a href="http://mercurial.selenic.com/wiki/QuickStart#Setting_a_username">e-mail</a>
address and real name of the change’s author are correct.
</p><p>
The commit message should have a single-line synopsis followed by verbose
description after an empty line.
It is desirable that the first line is no longer than 67 symbols.
The resulting changeset as a patch can be obtained using the
<code>hg export</code> command:
</p> <blockquote class="example"><pre>
# HG changeset patch
# User Filipe Da Silva &lt;username@example.com&gt;
# Date 1368089668 -7200
#      Thu May 09 10:54:28 2013 +0200
# Node ID 2220de0521ca2c0b664a8ea1e201ce1cb90fd7a2
# Parent  822b82191940ef309cd1e6502f94d50d811252a1
Mail: removed surplus ngx_close_connection() call.

It is already called for a peer connection a few lines above.

diff -r 822b82191940 -r 2220de0521ca src/mail/ngx_mail_auth_http_module.c
--- a/src/mail/ngx_mail_auth_http_module.c      Wed May 15 15:04:49 2013 +0400
+++ b/src/mail/ngx_mail_auth_http_module.c      Thu May 09 10:54:28 2013 +0200
@@ -699,7 +699,6 @@ ngx_mail_auth_http_process_headers(ngx_m

                     p = ngx_pnalloc(s-&gt;connection-&gt;pool, ctx-&gt;err.len);
                     if (p == NULL) {
-                        ngx_close_connection(ctx-&gt;peer.connection);
                         ngx_destroy_pool(ctx-&gt;pool);
                         ngx_mail_session_internal_server_error(s);
                         return;
</pre></blockquote><p> 
</p><a name="before_submitting"></a><center><h4>Before Submitting</h4></center><p>
Several points are worth to consider before submitting changes:
</p> <ul class="compact">

<li>
The proposed changes should work properly on a wide range of
<a href="http://nginx.org/en/index.html#tested_os_and_platforms">supported
platforms</a>.
</li>

<li>
Try to make it clear why the suggested change is needed, and provide a use
case, if possible.
</li>

</ul><p> 
</p><a name="submitting_changes"></a><center><h4>Submitting Changes</h4></center><p>
The proposed changes should be sent to the
<a href="http://nginx.org/en/support.html#nginx_devel">nginx development</a>
mailing list.
The preferred and convenient method of submitting changesets
is with the
<a href="http://mercurial.selenic.com/wiki/PatchbombExtension">patchbomb</a>
extension.
</p><a name="license"></a><center><h4>License</h4></center><p>
Submitting changes implies granting project a permission to use it under
an appropriate <a href="http://nginx.org/LICENSE">license</a>.
</p></td></tr></table></body></html>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Chapter 12. Functions and Operators</title>
<link rel="stylesheet" href="mvl.css" type="text/css" />
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1 + chunker.py v1.9.1" />
<link rel="start" href="index.html" title="{book-title}" />
<link rel="up" href="" title="" />
<link rel="prev" href="data-types.html" title="Chapter 11. Data Types" />
<link rel="next" href="sql-syntax.html" title="Chapter 13. SQL Statement Syntax" />
<script language="javascript" type="text/javascript">
  function addOnload(theFunc)
  {
    var previous = window.onload;
    if (typeof window.onload != 'function')
    {
      window.onload = theFunc;
    }
    else
    {
      window.onload = function()
      {
        previous();
        theFunc();
      }
    }
  }

  addOnload(function()
  {
    var base = new Date(1377579534+*1000);
    var now = new Date();
    var diff = ((now-base)/1000)/(24*3600);

    if (diff > 90) {
      var nodes = document.getElementsByClassName('titlepage');
      nodes[0].innerHTML = '<p style="border: 5px #ff0000 solid; padding: 5px; margin 5px">' +
        'This copy of the manual is more than 90 days old. We encourage you to download a ' +
        'new version from <a href="http://dev.mysql.com">dev.mysql.com/doc</a>.</p>' + nodes[0].innerHTML;
    }
  });
</script>
<noscript></noscript>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr>
<th colspan="3" align="center">Chapter 12. Functions and Operators</th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="data-types.html">Prev</a> </td>
<th width="60%" align="center"></th>
<td width="20%" align="right"> <a accesskey="n" href="sql-syntax.html">Next</a></td>
</tr>
</table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="functions"></a>Chapter 12. Functions and Operators</h1>

</div>

</div>

</div>
<div class="toc">
<p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="functions.html#func-op-summary-ref">12.1. Function and Operator Reference</a></span></dt><dt><span class="section"><a href="functions.html#type-conversion">12.2. Type Conversion in Expression Evaluation</a></span></dt><dt><span class="section"><a href="functions.html#non-typed-operators">12.3. Operators</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#operator-precedence">12.3.1. Operator Precedence</a></span></dt><dt><span class="section"><a href="functions.html#comparison-operators">12.3.2. Comparison Functions and Operators</a></span></dt><dt><span class="section"><a href="functions.html#logical-operators">12.3.3. Logical Operators</a></span></dt><dt><span class="section"><a href="functions.html#assignment-operators">12.3.4. Assignment Operators</a></span></dt></dl></dd><dt><span class="section"><a href="functions.html#control-flow-functions">12.4. Control Flow Functions</a></span></dt><dt><span class="section"><a href="functions.html#string-functions">12.5. String Functions</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#string-comparison-functions">12.5.1. String Comparison Functions</a></span></dt><dt><span class="section"><a href="functions.html#regexp">12.5.2. Regular Expressions</a></span></dt></dl></dd><dt><span class="section"><a href="functions.html#numeric-functions">12.6. Numeric Functions and Operators</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#arithmetic-functions">12.6.1. Arithmetic Operators</a></span></dt><dt><span class="section"><a href="functions.html#mathematical-functions">12.6.2. Mathematical Functions</a></span></dt></dl></dd><dt><span class="section"><a href="functions.html#date-and-time-functions">12.7. Date and Time Functions</a></span></dt><dt><span class="section"><a href="functions.html#mysql-calendar">12.8. What Calendar Is Used By MySQL?</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-search">12.9. Full-Text Search Functions</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#fulltext-natural-language">12.9.1. Natural Language Full-Text Searches</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-boolean">12.9.2. Boolean Full-Text Searches</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-query-expansion">12.9.3. Full-Text Searches with Query Expansion</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-stopwords">12.9.4. Full-Text Stopwords</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-restrictions">12.9.5. Full-Text Restrictions</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-fine-tuning">12.9.6. Fine-Tuning MySQL Full-Text Search</a></span></dt><dt><span class="section"><a href="functions.html#full-text-adding-collation">12.9.7. Adding a Collation for Full-Text Indexing</a></span></dt></dl></dd><dt><span class="section"><a href="functions.html#cast-functions">12.10. Cast Functions and Operators</a></span></dt><dt><span class="section"><a href="functions.html#xml-functions">12.11. XML Functions</a></span></dt><dt><span class="section"><a href="functions.html#bit-functions">12.12. Bit Functions</a></span></dt><dt><span class="section"><a href="functions.html#encryption-functions">12.13. Encryption and Compression Functions</a></span></dt><dt><span class="section"><a href="functions.html#information-functions">12.14. Information Functions</a></span></dt><dt><span class="section"><a href="functions.html#gtid-functions">12.15. GTID Functions</a></span></dt><dt><span class="section"><a href="functions.html#miscellaneous-functions">12.16. Miscellaneous Functions</a></span></dt><dt><span class="section"><a href="functions.html#group-by-functions-and-modifiers">12.17. Functions and Modifiers for Use with <code class="literal">GROUP BY</code> Clauses</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#group-by-functions">12.17.1. <code class="literal">GROUP BY</code> (Aggregate) Functions</a></span></dt><dt><span class="section"><a href="functions.html#group-by-modifiers">12.17.2. <code class="literal">GROUP BY</code> Modifiers</a></span></dt><dt><span class="section"><a href="functions.html#group-by-extensions">12.17.3. MySQL Extensions to <code class="literal">GROUP BY</code></a></span></dt></dl></dd><dt><span class="section"><a href="functions.html#spatial-extensions">12.18. Spatial Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#gis-introduction">12.18.1. Introduction to MySQL Spatial Support</a></span></dt><dt><span class="section"><a href="functions.html#opengis-geometry-model">12.18.2. The OpenGIS Geometry Model</a></span></dt><dt><span class="section"><a href="functions.html#supported-spatial-data-formats">12.18.3. Supported Spatial Data Formats</a></span></dt><dt><span class="section"><a href="functions.html#creating-a-spatially-enabled-mysql-database">12.18.4. Creating a Spatially Enabled MySQL Database</a></span></dt><dt><span class="section"><a href="functions.html#spatial-analysis-functions">12.18.5. Spatial Analysis Functions</a></span></dt><dt><span class="section"><a href="functions.html#optimizing-spatial-analysis">12.18.6. Optimizing Spatial Analysis</a></span></dt><dt><span class="section"><a href="functions.html#mysql-gis-conformance-and-compatibility">12.18.7. MySQL Conformance and Compatibility</a></span></dt></dl></dd><dt><span class="section"><a href="functions.html#precision-math">12.19. Precision Math</a></span></dt><dd><dl><dt><span class="section"><a href="functions.html#precision-math-numbers">12.19.1. Types of Numeric Values</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-decimal-changes">12.19.2. <code class="literal">DECIMAL</code> Data Type Changes</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-expressions">12.19.3. Expression Handling</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-rounding">12.19.4. Rounding Behavior</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-examples">12.19.5. Precision Math Examples</a></span></dt></dl></dd></dl>
</div>
<a class="indexterm" name="idp60152592"></a><a class="indexterm" name="idp60154096"></a><a class="indexterm" name="idp60155168"></a><p>
    Expressions can be used at several points in
    <a class="link" href="glossary.html#glos_sql" title="SQL">SQL</a> statements, such as in the
    <code class="literal">ORDER BY</code> or <code class="literal">HAVING</code> clauses of
    <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements, in the
    <code class="literal">WHERE</code> clause of a
    <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>,
    <a class="link" href="sql-syntax.html#delete" title="13.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, or
    <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement, or in
    <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>
    statements. Expressions can be written using literal values, column
    values, <code class="literal">NULL</code>, built-in functions, stored
    functions, user-defined functions, and operators. This chapter
    describes the functions and operators that are permitted for writing
    expressions in MySQL. Instructions for writing stored functions and
    user-defined functions are given in
    <a class="xref" href="stored-programs-views.html#stored-routines" title="19.2. Using Stored Routines (Procedures and Functions)">Section 19.2, “Using Stored Routines (Procedures and Functions)”</a>, and
    <a class="xref" href="extending-mysql.html#adding-functions" title="23.3. Adding New Functions to MySQL">Section 23.3, “Adding New Functions to MySQL”</a>. See
    <a class="xref" href="language-structure.html#function-resolution" title="9.2.4. Function Name Parsing and Resolution">Section 9.2.4, “Function Name Parsing and Resolution”</a>, for the rules describing how
    the server interprets references to different kinds of functions.
  </p><p>
    An expression that contains <code class="literal">NULL</code> always produces
    a <code class="literal">NULL</code> value unless otherwise indicated in the
    documentation for a particular function or operator.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
      By default, there must be no whitespace between a function name
      and the parenthesis following it. This helps the MySQL parser
      distinguish between function calls and references to tables or
      columns that happen to have the same name as a function. However,
      spaces around function arguments are permitted.
</p>
</div>
<p>
    You can tell the MySQL server to accept spaces after function names
    by starting it with the
    <a class="link" href="server-administration.html#option_mysqld_sql-mode"><code class="option">--sql-mode=IGNORE_SPACE</code></a> option. (See
    <a class="xref" href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.) Individual client programs can
    request this behavior by using the
    <code class="literal">CLIENT_IGNORE_SPACE</code> option for
    <a class="link" href="connectors-apis.html#mysql-real-connect" title="22.8.7.53. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. In either
    case, all function names become reserved words.
  </p><p>
    For the sake of brevity, most examples in this chapter display the
    output from the <a class="link" href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> program in abbreviated
    form. Rather than showing examples in this format:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MOD(29,9);</code></strong>
+-----------+
| mod(29,9) |
+-----------+
|         2 |
+-----------+
1 rows in set (0.00 sec)
</pre><p>
    This format is used instead:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MOD(29,9);</code></strong>
        -&gt; 2
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="func-op-summary-ref"></a>12.1. Function and Operator Reference</h2>

</div>

</div>

</div>

<div class="table">
<a name="idp60179760"></a><p class="title"><b>Table 12.1. Functions/Operators</b></p>
<div class="table-contents">
<table summary="Functions/Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_abs"><code class="literal">ABS()</code></a></td><td>Return the absolute value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_acos"><code class="literal">ACOS()</code></a></td><td>Return the arc cosine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_adddate"><code class="literal">ADDDATE()</code></a></td><td>Add time values (intervals) to a date value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_addtime"><code class="literal">ADDTIME()</code></a></td><td>Add time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a></td><td>Decrypt using AES</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a></td><td>Encrypt using AES</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_and"><code class="literal">AND</code>, <code class="literal">&amp;&amp;</code></a></td><td>Logical AND</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ascii"><code class="literal">ASCII()</code></a></td><td>Return numeric value of left-most character</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_asin"><code class="literal">ASIN()</code></a></td><td>Return the arc sine</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_assign-equal"><code class="literal">=</code></a></td><td>Assign a value (as part of a  <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a> statement, or  as part of the <code class="literal">SET</code> clause in an  <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement)</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a></td><td>Assign a value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_atan2"><code class="literal">ATAN2()</code>, <code class="literal">ATAN()</code></a></td><td>Return the arc tangent of the two arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_atan"><code class="literal">ATAN()</code></a></td><td>Return the arc tangent</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_avg"><code class="literal">AVG()</code></a></td><td>Return the average value of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a></td><td>Repeatedly execute an expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td><td>Check whether a value is within a range of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bin"><code class="literal">BIN()</code></a></td><td>Return a string containing binary representation of a  number</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a></td><td>Cast a string to a binary string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a></td><td>Return bitwise and</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a></td><td>Return the number of bits that are set</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-length"><code class="literal">BIT_LENGTH()</code></a></td><td>Return length of argument in bits</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a></td><td>Return bitwise or</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a></td><td>Return bitwise xor</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td><td>Bitwise AND</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td><td>Invert bits</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-or"><code class="literal">|</code></a></td><td>Bitwise OR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td><td>Bitwise XOR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_case"><code class="literal">CASE</code></a></td><td>Case operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a></td><td>Cast a value as a certain type</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ceil"><code class="literal">CEIL()</code></a></td><td>Return the smallest integer value not less than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ceiling"><code class="literal">CEILING()</code></a></td><td>Return the smallest integer value not less than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a></td><td>Return number of characters in argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_char"><code class="literal">CHAR()</code></a></td><td>Return the character for each integer passed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH()</code></a></td><td>A synonym for CHAR_LENGTH()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_charset"><code class="literal">CHARSET()</code></a></td><td>Return the character set of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_coalesce"><code class="literal">COALESCE()</code></a></td><td>Return the first non-NULL argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_coercibility"><code class="literal">COERCIBILITY()</code></a></td><td>Return the collation coercibility value of the string  argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_collation"><code class="literal">COLLATION()</code></a></td><td>Return the collation of the string argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a></td><td>Return result as a binary string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a></td><td>Return concatenate with  separator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a></td><td>Return concatenated string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a></td><td>Return the connection ID (thread ID)  for the connection</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_conv"><code class="literal">CONV()</code></a></td><td>Convert numbers between different number bases</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a></td><td>Convert from one timezone to another</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a></td><td>Cast a value as a certain type</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cos"><code class="literal">COS()</code></a></td><td>Return the cosine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cot"><code class="literal">COT()</code></a></td><td>Return the cotangent</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_count-distinct"><code class="literal">COUNT(DISTINCT)</code></a></td><td>Return the count of a number of different values</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a></td><td>Return a count of the number of rows returned</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_crc32"><code class="literal">CRC32()</code></a></td><td>Compute a cyclic redundancy check value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a></td><td>Return the current date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code>, <code class="literal">CURRENT_DATE</code></a></td><td>Synonyms for CURDATE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code>, <code class="literal">CURRENT_TIME</code></a></td><td>Synonyms for CURTIME()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code>, <code class="literal">CURRENT_TIMESTAMP</code></a></td><td>Synonyms for NOW()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code>, <code class="literal">CURRENT_USER</code></a></td><td>The authenticated user name and host name</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_curtime"><code class="literal">CURTIME()</code></a></td><td>Return the current time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a></td><td>Return the default (current) database name</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a></td><td>Add time values (intervals) to a date value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a></td><td>Format date as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a></td><td>Subtract a time value (interval) from a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date"><code class="literal">DATE()</code></a></td><td>Extract the date part of a date or datetime expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_datediff"><code class="literal">DATEDIFF()</code></a></td><td>Subtract two dates</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_day"><code class="literal">DAY()</code></a></td><td>Synonym for DAYOFMONTH()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayname"><code class="literal">DAYNAME()</code></a></td><td>Return the name of the weekday</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a></td><td>Return the day of the month (0-31)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayofweek"><code class="literal">DAYOFWEEK()</code></a></td><td>Return the weekday index of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a></td><td>Return the day of the year (1-366)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_decode"><code class="literal">DECODE()</code></a></td><td>Decodes a string encrypted using ENCODE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_default"><code class="literal">DEFAULT()</code></a></td><td>Return the default value for a table column</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_degrees"><code class="literal">DEGREES()</code></a></td><td>Convert radians to degrees</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a></td><td>Decrypt a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a></td><td>Encrypt a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_div"><code class="literal">DIV</code></a></td><td>Integer division</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a></td><td>Division operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_elt"><code class="literal">ELT()</code></a></td><td>Return string at index number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_encode"><code class="literal">ENCODE()</code></a></td><td>Encode a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a></td><td>Encrypt a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td><td>NULL-safe equal to operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a></td><td>Equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_exp"><code class="literal">EXP()</code></a></td><td>Raise to the power of</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_export-set"><code class="literal">EXPORT_SET()</code></a></td><td>Return a string such that for every bit set in the value  bits, you get an on string and for every unset bit, you get an off string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_extract"><code class="literal">EXTRACT()</code></a></td><td>Extract part of a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a></td><td>Extracts a value from an XML string using XPath notation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_field"><code class="literal">FIELD()</code></a></td><td>Return the index (position) of the first argument  in the subsequent arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a></td><td>Return the index position of  the first argument within the second argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_floor"><code class="literal">FLOOR()</code></a></td><td>Return the largest integer value not greater than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_format"><code class="literal">FORMAT()</code></a></td><td>Return a number formatted to specified number of decimal places</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a></td><td>For a SELECT with a LIMIT clause, the  number of rows that would be returned were there no LIMIT clause</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a></td><td>Decode to a base-64 string and return result</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_from-days"><code class="literal">FROM_DAYS()</code></a></td><td>Convert a day number to a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a></td><td>Format UNIX timestamp as a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a></td><td>Return a date format string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a></td><td>Get a named lock</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td><td>Greater than or equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a></td><td>Greater than operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a></td><td>Return the largest argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a></td><td>Return a concatenated string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_gtid-subset"><code class="literal">GTID_SUBSET()</code></a></td><td>Return true if all GTIDs in subset are also in set; otherwise  false.</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_gtid-subtract"><code class="literal">GTID_SUBTRACT()</code></a></td><td>Return all GTIDs in set that are not in subset.</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a></td><td>Return a hexadecimal representation of a  decimal or string value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_hour"><code class="literal">HOUR()</code></a></td><td>Extract the hour</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a></td><td>If/else construct</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a></td><td>Null if/else construct</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_in"><code class="literal">IN()</code></a></td><td>Check whether a value is within a set of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a></td><td>Return the numeric value of an IP address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a></td><td>Return the IP address from a numeric value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a></td><td>Return the numeric value of an IPv6 address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a></td><td>Return the IPv6 address from a numeric value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_insert"><code class="literal">INSERT()</code></a></td><td>Insert a substring at the specified position up to  the specified number of characters</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_instr"><code class="literal">INSTR()</code></a></td><td>Return the index of the first occurrence of substring</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_interval"><code class="literal">INTERVAL()</code></a></td><td>Return the index of the argument  that is less than the first argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a></td><td>Checks whether the named lock  is free</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv4-compat"><code class="literal">IS_IPV4_COMPAT()</code></a></td><td>Return true if argument is an IPv4-compatible address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv4-mapped"><code class="literal">IS_IPV4_MAPPED()</code></a></td><td>Return true if argument is an IPv4-mapped address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a></td><td>Return true if argument is an IPv4 address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv6"><code class="literal">IS_IPV6()</code></a></td><td>Return true if argument is an IPv6 address</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-not-null"><code class="literal">IS NOT NULL</code></a></td><td>NOT NULL value test</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-not"><code class="literal">IS NOT</code></a></td><td>Test a value against a boolean</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a></td><td>NULL value test</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a></td><td>Checks whether the named lock is in use.  Return connection identifier if true.</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is"><code class="literal">IS</code></a></td><td>Test a value against a boolean</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_isnull"><code class="literal">ISNULL()</code></a></td><td>Test whether the argument is NULL</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_last-day"><code class="literal">LAST_DAY</code></a></td><td>Return the last day of the month for the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a></td><td>Value of the AUTOINCREMENT column  for the last INSERT</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_lcase"><code class="literal">LCASE()</code></a></td><td>Synonym for LOWER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_least"><code class="literal">LEAST()</code></a></td><td>Return the smallest argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td><td>Left shift</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_left"><code class="literal">LEFT()</code></a></td><td>Return the leftmost number of characters as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_length"><code class="literal">LENGTH()</code></a></td><td>Return the length of a string in bytes</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td><td>Less than or equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_less-than"><code class="literal">&lt;</code></a></td><td>Less than operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a></td><td>Simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ln"><code class="literal">LN()</code></a></td><td>Return the natural logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a></td><td>Load the named file</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME()</code>, <code class="literal">LOCALTIME</code></a></td><td>Synonym for NOW()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code>, <code class="literal">LOCALTIMESTAMP()</code></a></td><td>Synonym for NOW()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_locate"><code class="literal">LOCATE()</code></a></td><td>Return the position of the first occurrence  of substring</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log10"><code class="literal">LOG10()</code></a></td><td>Return the base-10 logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log2"><code class="literal">LOG2()</code></a></td><td>Return the base-2 logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log"><code class="literal">LOG()</code></a></td><td>Return the natural logarithm of the first argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a></td><td>Return the argument in lowercase</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_lpad"><code class="literal">LPAD()</code></a></td><td>Return the string argument, left-padded  with the specified string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ltrim"><code class="literal">LTRIM()</code></a></td><td>Remove leading spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_make-set"><code class="literal">MAKE_SET()</code></a></td><td>Return a set of comma-separated strings  that have the corresponding bit in bits set</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a></td><td>Create a date from the year and day of year</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_maketime"><code class="literal">MAKETIME</code></a></td><td>MAKETIME()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a></td><td>Block until the slave has read and  applied all updates up to the specified position</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_match"><code class="literal">MATCH</code></a></td><td>Perform full-text search</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_max"><code class="literal">MAX()</code></a></td><td>Return the maximum value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a></td><td>Calculate MD5 checksum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_microsecond"><code class="literal">MICROSECOND()</code></a></td><td>Return the microseconds from argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_mid"><code class="literal">MID()</code></a></td><td>Return a substring starting from the specified position</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_min"><code class="literal">MIN()</code></a></td><td>Return the minimum value</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a></td><td>Minus operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_minute"><code class="literal">MINUTE()</code></a></td><td>Return the minute from the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_mod"><code class="literal">MOD()</code></a></td><td>Return the remainder</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_mod"><code class="literal">% or MOD</code></a></td><td>Modulo operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_month"><code class="literal">MONTH()</code></a></td><td>Return the month from the date passed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a></td><td>Return the name of the month</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a></td><td>Causes the column to have the given name</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-between"><code class="literal">NOT BETWEEN ... AND ...</code></a></td><td>Check whether a value is not within a range of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-equal"><code class="literal">!=</code>, <code class="literal">&lt;&gt;</code></a></td><td>Not equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_not-in"><code class="literal">NOT IN()</code></a></td><td>Check whether a value is not within a set of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td><td>Negation of simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td><td>Negation of REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not"><code class="literal">NOT</code>, <code class="literal">!</code></a></td><td>Negates value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a></td><td>Return the current date and time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_nullif"><code class="literal">NULLIF()</code></a></td><td>Return NULL if expr1 = expr2</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_oct"><code class="literal">OCT()</code></a></td><td>Return a string containing octal representation of a  number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_octet-length"><code class="literal">OCTET_LENGTH()</code></a></td><td>A synonym for LENGTH()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a></td><td>Return the value of the  pre-4.1 implementation of PASSWORD</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_or"><code class="literal">||</code>, <code class="literal">OR</code></a></td><td>Logical OR</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ord"><code class="literal">ORD()</code></a></td><td>Return character code for leftmost character of the  argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a></td><td>Calculate and return a password string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_period-add"><code class="literal">PERIOD_ADD()</code></a></td><td>Add a period to a year-month</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_period-diff"><code class="literal">PERIOD_DIFF()</code></a></td><td>Return the number of months between periods</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_pi"><code class="literal">PI()</code></a></td><td>Return the value of pi</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a></td><td>Addition operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_position"><code class="literal">POSITION()</code></a></td><td>A synonym for LOCATE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_pow"><code class="literal">POW()</code></a></td><td>Return the argument raised to the specified power</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_power"><code class="literal">POWER()</code></a></td><td>Return the argument raised to the specified power</td></tr><tr><td scope="row"><a class="link" href="optimization.html#procedure-analyse" title="8.4.2.4. Using PROCEDURE ANALYSE"><code class="literal">PROCEDURE ANALYSE()</code></a></td><td>Analyze the results of a query</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_quarter"><code class="literal">QUARTER()</code></a></td><td>Return the quarter from a date argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_quote"><code class="literal">QUOTE()</code></a></td><td>Escape the argument for use in an SQL statement</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_radians"><code class="literal">RADIANS()</code></a></td><td>Return argument converted to radians</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a></td><td>Return a random floating-point value</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td><td>Pattern matching using regular expressions</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a></td><td>Releases the named lock</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_repeat"><code class="literal">REPEAT()</code></a></td><td>Repeat a string the specified number of times</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_replace"><code class="literal">REPLACE()</code></a></td><td>Replace occurrences of a specified string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_reverse"><code class="literal">REVERSE()</code></a></td><td>Reverse the characters in a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td><td>Right shift</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_right"><code class="literal">RIGHT()</code></a></td><td>Return the specified rightmost number of characters</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td><td>Synonym for REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a></td><td>Round the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a></td><td>The number of rows  updated</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rpad"><code class="literal">RPAD()</code></a></td><td>Append string the specified number of times</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rtrim"><code class="literal">RTRIM()</code></a></td><td>Remove trailing spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_schema"><code class="literal">SCHEMA()</code></a></td><td>A synonym for DATABASE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a></td><td>Converts seconds to 'HH:MM:SS' format</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_second"><code class="literal">SECOND()</code></a></td><td>Return the second (0-59)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a></td><td>Synonym for USER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code>, <code class="literal">SHA()</code></a></td><td>Calculate an SHA-1 160-bit checksum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a></td><td>Calculate an SHA-2 checksum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sign"><code class="literal">SIGN()</code></a></td><td>Return the sign of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sin"><code class="literal">SIN()</code></a></td><td>Return the sine of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a></td><td>Sleep for a number of seconds</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a></td><td>Return a soundex string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_sounds-like"><code class="literal">SOUNDS LIKE</code></a></td><td>Compare sounds</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_space"><code class="literal">SPACE()</code></a></td><td>Return a string of the specified number of spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sql-thread-wait-after-gtids"><code class="literal">SQL_THREAD_WAIT_AFTER_GTIDS()</code></a>(deprecated 5.6.9)</td><td>OBSOLETE: Replaced by WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sqrt"><code class="literal">SQRT()</code></a></td><td>Return the square root of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_std"><code class="literal">STD()</code></a></td><td>Return the population standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a></td><td>Return the population standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP()</code></a></td><td>Return the sample standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_stddev"><code class="literal">STDDEV()</code></a></td><td>Return the population standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a></td><td>Convert a string to a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td><td>Compare two strings</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_subdate"><code class="literal">SUBDATE()</code></a></td><td>A synonym for DATE_SUB() when invoked with three arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR()</code></a></td><td>Return the substring as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a></td><td>Return a substring from a  string before the specified number of occurrences of the delimiter</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a></td><td>Return the substring as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_subtime"><code class="literal">SUBTIME()</code></a></td><td>Subtract times</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a></td><td>Return the sum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a></td><td>Return the time at which the function executes</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a></td><td>Synonym for USER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_tan"><code class="literal">TAN()</code></a></td><td>Return the tangent of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_time-format"><code class="literal">TIME_FORMAT()</code></a></td><td>Format as time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC()</code></a></td><td>Return the argument converted to seconds</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_time"><code class="literal">TIME()</code></a></td><td>Extract the time portion of the expression passed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timediff"><code class="literal">TIMEDIFF()</code></a></td><td>Subtract time</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_times"><code class="literal">*</code></a></td><td>Multiplication operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a></td><td>With a single argument, this function returns the date or  datetime expression; with two arguments, the sum of the arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a></td><td>Add an interval to a datetime expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a></td><td>Subtract an interval from a datetime expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a></td><td>Return the argument converted to a base-64 string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a></td><td>Return the date argument converted to days</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a></td><td>Return the date or datetime argument converted to seconds since  Year 0</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_trim"><code class="literal">TRIM()</code></a></td><td>Remove leading and trailing spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_truncate"><code class="literal">TRUNCATE()</code></a></td><td>Truncate to specified number of decimal places</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ucase"><code class="literal">UCASE()</code></a></td><td>Synonym for UPPER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_unary-minus"><code class="literal">-</code></a></td><td>Change the sign of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a></td><td>Uncompress a string compressed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uncompressed-length"><code class="literal">UNCOMPRESSED_LENGTH()</code></a></td><td>Return the length of a string before compression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a></td><td>Return a string containing hex representation of a  number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a></td><td>Return a UNIX timestamp</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a></td><td>Return replaced XML fragment</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a></td><td>Convert to uppercase</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a></td><td>The user name and host name provided by the client</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a></td><td>Return the current UTC date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a></td><td>Return the current UTC time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a></td><td>Return the current UTC date and time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a></td><td>Return an integer-valued universal identifier</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a></td><td>Return a Universal Unique Identifier (UUID)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a></td><td>Determine strength of password</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_values"><code class="literal">VALUES()</code></a></td><td>Defines the values to be used during an INSERT</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a></td><td>Return the population standard variance</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a></td><td>Return the sample variance</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_variance"><code class="literal">VARIANCE()</code></a></td><td>Return the population standard variance</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a></td><td>Returns a string that indicates the MySQL server version</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code></a></td><td>Wait until the slave SQL thread has executed all the given  GTIDs. Returns: the number of events that were executed (or NULL, if GTID  mode is not enabled).</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a></td><td>Return the week number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a></td><td>Return the weekday index</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a></td><td>Return the calendar week of the date (0-53)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a></td><td>Return the weight string for a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_xor"><code class="literal">XOR</code></a></td><td>Logical XOR</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_year"><code class="literal">YEAR()</code></a></td><td>Return the year</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a></td><td>Return the year and week</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="type-conversion"></a>12.2. Type Conversion in Expression Evaluation</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp60671952"></a><a class="indexterm" name="idp60673024"></a><p>
      When an operator is used with operands of different types, type
      conversion occurs to make the operands compatible. Some
      conversions occur implicitly. For example, MySQL automatically
      converts numbers to strings as necessary, and vice versa.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1+'1';</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT CONCAT(2,' test');</code></strong>
        -&gt; '2 test'
</pre><p>
      It is also possible to convert a number to a string explicitly
      using the <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> function.
      Conversion occurs implicitly with the
      <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> function because it
      expects string arguments.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 38.8, CAST(38.8 AS CHAR);</code></strong>
        -&gt; 38.8, '38.8'
mysql&gt; <strong class="userinput"><code>SELECT 38.8, CONCAT(38.8);</code></strong>
        -&gt; 38.8, '38.8'
</pre><p>
      See later in this section for information about the character set
      of implicit number-to-string conversions.
    </p><p>
      The following rules describe how conversion occurs for comparison
      operations:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If one or both arguments are <code class="literal">NULL</code>, the
          result of the comparison is <code class="literal">NULL</code>, except
          for the <code class="literal">NULL</code>-safe
          <a class="link" href="functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a>
          equality comparison operator. For <code class="literal">NULL &lt;=&gt;
          NULL</code>, the result is true. No conversion is needed.
        </p></li><li class="listitem"><p>
          If both arguments in a comparison operation are strings, they
          are compared as strings.
        </p></li><li class="listitem"><p>
          If both arguments are integers, they are compared as integers.
        </p></li><li class="listitem"><p>
          Hexadecimal values are treated as binary strings if not
          compared to a number.
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idp60690640"></a>

          <a class="indexterm" name="idp60691712"></a>

          If one of the arguments is a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> or
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> column and the other
          argument is a constant, the constant is converted to a
          timestamp before the comparison is performed. This is done to
          be more ODBC-friendly. Note that this is not done for the
          arguments to <a class="link" href="functions.html#function_in"><code class="literal">IN()</code></a>! To be safe,
          always use complete datetime, date, or time strings when doing
          comparisons. For example, to achieve best results when using
          <a class="link" href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> with date or time values,
          use <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> to explicitly
          convert the values to the desired data type.
        </p><p>
          A single-row subquery from a table or tables is not considered
          a constant. For example, if a subquery returns an integer to
          be compared to a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>
          value, the comparison is done as two integers. The integer is
          not converted to a temporal value. To compare the operands as
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> values, use
          <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> to explicitly convert
          the subquery value to <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>.
        </p></li><li class="listitem"><p>
          If one of the arguments is a decimal value, comparison depends
          on the other argument. The arguments are compared as decimal
          values if the other argument is a decimal or integer value, or
          as floating-point values if the other argument is a
          floating-point value.
        </p></li><li class="listitem"><p>
          In all other cases, the arguments are compared as
          floating-point (real) numbers.
</p></li></ul>
</div>
<p>
      For information about conversion of values from one temporal type
      to another, see <a class="xref" href="data-types.html#date-and-time-type-conversion" title="11.3.7. Conversion Between Date and Time Types">Section 11.3.7, “Conversion Between Date and Time Types”</a>.
    </p><p>
      The following examples illustrate conversion of strings to numbers
      for comparison operations:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 &gt; '6x';</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 7 &gt; '6x';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 0 &gt; 'x6';</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 0 = 'x6';</code></strong>
        -&gt; 1
</pre><p>
      For comparisons of a string column with a number, MySQL cannot use
      an index on the column to look up the value quickly. If
      <em class="replaceable"><code>str_col</code></em> is an indexed string column,
      the index cannot be used when performing the lookup in the
      following statement:
    </p><pre class="programlisting">SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>str_col</code></em>=1;
</pre><p>
      The reason for this is that there are many different strings that
      may convert to the value <code class="literal">1</code>, such as
      <code class="literal">'1'</code>, <code class="literal">' 1'</code>, or
      <code class="literal">'1a'</code>.
    </p><p>
      Comparisons that use floating-point numbers (or values that are
      converted to floating-point numbers) are approximate because such
      numbers are inexact. This might lead to results that appear
      inconsistent:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '18015376320243458' = 18015376320243458;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT '18015376320243459' = 18015376320243459;</code></strong>
        -&gt; 0
</pre><p>
      Such results can occur because the values are converted to
      floating-point numbers, which have only 53 bits of precision and
      are subject to rounding:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '18015376320243459'+0.0;</code></strong>
        -&gt; 1.8015376320243e+16
</pre><p>
      Furthermore, the conversion from string to floating-point and from
      integer to floating-point do not necessarily occur the same way.
      The integer may be converted to floating-point by the CPU, whereas
      the string is converted digit by digit in an operation that
      involves floating-point multiplications.
    </p><p>
      The results shown will vary on different systems, and can be
      affected by factors such as computer architecture or the compiler
      version or optimization level. One way to avoid such problems is
      to use <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> so that a value will
      not be converted implicitly to a float-point number:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CAST('18015376320243459' AS UNSIGNED) = 18015376320243459;</code></strong>
        -&gt; 1
</pre><p>
      For more information about floating-point comparisons, see
      <a class="xref" href="error-handling.html#problems-with-float" title="C.5.5.8. Problems with Floating-Point Values">Section C.5.5.8, “Problems with Floating-Point Values”</a>.
    </p><p>
      In MySQL 5.6, the server includes
      <code class="literal">dtoa</code>, a conversion library that provides the
      basis for improved conversion between string or
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> values and
      approximate-value
      (<a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a>/<a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a>)
      numbers:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Consistent conversion results across platforms, which
          eliminates, for example, Unix versus Windows conversion
          differences.
        </p></li><li class="listitem"><p>
          Accurate representation of values in cases where results
          previously did not provide sufficient precision, such as for
          values close to IEEE limits.
        </p></li><li class="listitem"><p>
          Conversion of numbers to string format with the best possible
          precision. The precision of <code class="literal">dtoa</code> is always
          the same or better than that of the standard C library
          functions.
</p></li></ul>
</div>
<p>
      Because the conversions produced by this library differ in some
      cases from previous results, the potential exists for
      incompatibilities in applications that rely on previous results.
      For example, applications that depend on a specific exact result
      from previous conversions might need adjustment to accommodate
      additional precision.
    </p><p>
      The <code class="literal">dtoa</code> library provides conversions with the
      following properties. <em class="replaceable"><code>D</code></em> represents a
      value with a <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> or string
      representation, and <em class="replaceable"><code>F</code></em> represents a
      floating-point number in native binary (IEEE) format.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <em class="replaceable"><code>F</code></em> -&gt;
          <em class="replaceable"><code>D</code></em> conversion is done with the best
          possible precision, returning <em class="replaceable"><code>D</code></em> as
          the shortest string that yields <em class="replaceable"><code>F</code></em>
          when read back in and rounded to the nearest value in native
          binary format as specified by IEEE.
        </p></li><li class="listitem"><p>
          <em class="replaceable"><code>D</code></em> -&gt;
          <em class="replaceable"><code>F</code></em> conversion is done such that
          <em class="replaceable"><code>F</code></em> is the nearest native binary
          number to the input decimal string
          <em class="replaceable"><code>D</code></em>.
</p></li></ul>
</div>
<p>
      These properties imply that <em class="replaceable"><code>F</code></em> -&gt;
      <em class="replaceable"><code>D</code></em> -&gt; <em class="replaceable"><code>F</code></em>
      conversions are lossless unless <em class="replaceable"><code>F</code></em> is
      <code class="literal">-inf</code>, <code class="literal">+inf</code>, or
      <code class="literal">NaN</code>. The latter values are not supported
      because the SQL standard defines them as invalid values for
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a> or
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a>.
    </p><p>
      For <em class="replaceable"><code>D</code></em> -&gt;
      <em class="replaceable"><code>F</code></em> -&gt; <em class="replaceable"><code>D</code></em>
      conversions, a sufficient condition for losslessness is that
      <em class="replaceable"><code>D</code></em> uses 15 or fewer digits of precision,
      is not a denormal value, <code class="literal">-inf</code>,
      <code class="literal">+inf</code>, or <code class="literal">NaN</code>. In some cases,
      the conversion is lossless even if <em class="replaceable"><code>D</code></em>
      has more than 15 digits of precision, but this is not always the
      case.
    </p><p>
      In MySQL 5.6, implicit conversion of a numeric or
      temporal value to string produces a value that has a character set
      and collation determined by the
      <a class="link" href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> and
      <a class="link" href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a> system
      variables. (These variables commonly are set with
      <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET
      NAMES</code></a>. For information about connection character sets,
      see <a class="xref" href="globalization.html#charset-connection" title="10.1.4. Connection Character Sets and Collations">Section 10.1.4, “Connection Character Sets and Collations”</a>.)
    </p><p>
      This means that such a conversion results in a character
      (nonbinary) string (a <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>,
      <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>, or
      <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">LONGTEXT</code></a> value), except in the case
      that the connection character set is set to
      <code class="literal">binary</code>. In that case, the conversion result is
      a binary string (a <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
      <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, or
      <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">LONGBLOB</code></a> value).
</p>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="non-typed-operators"></a>12.3. Operators</h2>

</div>

</div>

</div>

<div class="toc">
<dl><dt><span class="section"><a href="functions.html#operator-precedence">12.3.1. Operator Precedence</a></span></dt><dt><span class="section"><a href="functions.html#comparison-operators">12.3.2. Comparison Functions and Operators</a></span></dt><dt><span class="section"><a href="functions.html#logical-operators">12.3.3. Logical Operators</a></span></dt><dt><span class="section"><a href="functions.html#assignment-operators">12.3.4. Assignment Operators</a></span></dt></dl>
</div>

<div class="table">
<a name="idp60764672"></a><p class="title"><b>Table 12.2. Operators</b></p>
<div class="table-contents">
<table summary="Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_and"><code class="literal">AND</code>, <code class="literal">&amp;&amp;</code></a></td><td>Logical AND</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_assign-equal"><code class="literal">=</code></a></td><td>Assign a value (as part of a  <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a> statement, or  as part of the <code class="literal">SET</code> clause in an  <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement)</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a></td><td>Assign a value</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td><td>Check whether a value is within a range of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a></td><td>Cast a string to a binary string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td><td>Bitwise AND</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td><td>Invert bits</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-or"><code class="literal">|</code></a></td><td>Bitwise OR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td><td>Bitwise XOR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_case"><code class="literal">CASE</code></a></td><td>Case operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_div"><code class="literal">DIV</code></a></td><td>Integer division</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a></td><td>Division operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td><td>NULL-safe equal to operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a></td><td>Equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td><td>Greater than or equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a></td><td>Greater than operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-not-null"><code class="literal">IS NOT NULL</code></a></td><td>NOT NULL value test</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-not"><code class="literal">IS NOT</code></a></td><td>Test a value against a boolean</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a></td><td>NULL value test</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is"><code class="literal">IS</code></a></td><td>Test a value against a boolean</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td><td>Left shift</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td><td>Less than or equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_less-than"><code class="literal">&lt;</code></a></td><td>Less than operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a></td><td>Simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a></td><td>Minus operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_mod"><code class="literal">% or MOD</code></a></td><td>Modulo operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-between"><code class="literal">NOT BETWEEN ... AND ...</code></a></td><td>Check whether a value is not within a range of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-equal"><code class="literal">!=</code>, <code class="literal">&lt;&gt;</code></a></td><td>Not equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td><td>Negation of simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td><td>Negation of REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not"><code class="literal">NOT</code>, <code class="literal">!</code></a></td><td>Negates value</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_or"><code class="literal">||</code>, <code class="literal">OR</code></a></td><td>Logical OR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a></td><td>Addition operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td><td>Pattern matching using regular expressions</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td><td>Right shift</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td><td>Synonym for REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_sounds-like"><code class="literal">SOUNDS LIKE</code></a></td><td>Compare sounds</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_times"><code class="literal">*</code></a></td><td>Multiplication operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_unary-minus"><code class="literal">-</code></a></td><td>Change the sign of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_xor"><code class="literal">XOR</code></a></td><td>Logical XOR</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="operator-precedence"></a>12.3.1. Operator Precedence</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp60844304"></a><a class="indexterm" name="idp60845792"></a><p>
        Operator precedences are shown in the following list, from
        highest precedence to the lowest. Operators that are shown
        together on a line have the same precedence.
      </p><pre class="programlisting">INTERVAL
BINARY, COLLATE
!
- (unary minus), ~ (unary bit inversion)
^
*, /, DIV, %, MOD
-, +
&lt;&lt;, &gt;&gt;
&amp;
|
= (comparison), &lt;=&gt;, &gt;=, &gt;, &lt;=, &lt;, &lt;&gt;, !=, IS, LIKE, REGEXP, IN
BETWEEN, CASE, WHEN, THEN, ELSE
NOT
&amp;&amp;, AND
XOR
||, OR
= (assignment), :=</pre><p>
        The precedence of <code class="literal">=</code> depends on whether it is
        used as a comparison operator
        (<a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a>) or as an
        assignment operator
        (<a class="link" href="functions.html#operator_assign-equal"><code class="literal">=</code></a>). When
        used as a comparison operator, it has the same precedence as
        <a class="link" href="functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a>,
        <a class="link" href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a>,
        <a class="link" href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a>,
        <a class="link" href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a>,
        <a class="link" href="functions.html#operator_less-than"><code class="literal">&lt;</code></a>,
        <a class="link" href="functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a>,
        <a class="link" href="functions.html#operator_not-equal"><code class="literal">!=</code></a>,
        <a class="link" href="functions.html#operator_is"><code class="literal">IS</code></a>,
        <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a>,
        <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a>, and
        <a class="link" href="functions.html#function_in"><code class="literal">IN</code></a>. When used as an assignment
        operator, it has the same precedence as
        <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a>.
        <a class="xref" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax">Section 13.7.4, “<code class="literal">SET</code> Syntax”</a>, and
        <a class="xref" href="language-structure.html#user-variables" title="9.4. User-Defined Variables">Section 9.4, “User-Defined Variables”</a>, explain how MySQL determines
        which interpretation of <code class="literal">=</code> should apply.
      </p><p>
        The meaning of some operators depends on the SQL mode:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            By default, <a class="link" href="functions.html#operator_or"><code class="literal">||</code></a>
            is a logical <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> operator. With
            <a class="link" href="server-administration.html#sqlmode_pipes_as_concat"><code class="literal">PIPES_AS_CONCAT</code></a> enabled,
            <a class="link" href="functions.html#operator_or"><code class="literal">||</code></a> is string
            concatenation, with a precedence between
            <a class="link" href="functions.html#operator_bitwise-xor"><code class="literal">^</code></a> and
            the unary operators.
          </p></li><li class="listitem"><p>
            By default, <a class="link" href="functions.html#operator_not"><code class="literal">!</code></a>
            has a higher precedence than <code class="literal">NOT</code>. With
            <a class="link" href="server-administration.html#sqlmode_high_not_precedence"><code class="literal">HIGH_NOT_PRECEDENCE</code></a>
            enabled, <a class="link" href="functions.html#operator_not"><code class="literal">!</code></a> and
            <code class="literal">NOT</code> have the same precedence.
</p></li></ul>
</div>
<p>
        See <a class="xref" href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
      </p><a class="indexterm" name="idp60875584"></a><a class="indexterm" name="idp60876656"></a><a class="indexterm" name="idp60877728"></a><a class="indexterm" name="idp60879216"></a><p>
        The precedence of operators determines the order of evaluation
        of terms in an expression. To override this order and group
        terms explicitly, use parentheses. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1+2*3;</code></strong>
        -&gt; 7
mysql&gt; <strong class="userinput"><code>SELECT (1+2)*3;</code></strong>
        -&gt; 9
</pre>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="comparison-operators"></a>12.3.2. Comparison Functions and Operators</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp60884528"></a>
<div class="table">
<a name="idp60885600"></a><p class="title"><b>Table 12.3. Comparison Operators</b></p>
<div class="table-contents">
<table summary="Comparison Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_between"><code class="literal">BETWEEN ... AND ...</code></a></td><td>Check whether a value is within a range of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_coalesce"><code class="literal">COALESCE()</code></a></td><td>Return the first non-NULL argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a></td><td>NULL-safe equal to operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a></td><td>Equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a></td><td>Greater than or equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a></td><td>Greater than operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a></td><td>Return the largest argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_in"><code class="literal">IN()</code></a></td><td>Check whether a value is within a set of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_interval"><code class="literal">INTERVAL()</code></a></td><td>Return the index of the argument  that is less than the first argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-not-null"><code class="literal">IS NOT NULL</code></a></td><td>NOT NULL value test</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-not"><code class="literal">IS NOT</code></a></td><td>Test a value against a boolean</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a></td><td>NULL value test</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_is"><code class="literal">IS</code></a></td><td>Test a value against a boolean</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_isnull"><code class="literal">ISNULL()</code></a></td><td>Test whether the argument is NULL</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_least"><code class="literal">LEAST()</code></a></td><td>Return the smallest argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a></td><td>Less than or equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_less-than"><code class="literal">&lt;</code></a></td><td>Less than operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a></td><td>Simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-between"><code class="literal">NOT BETWEEN ... AND ...</code></a></td><td>Check whether a value is not within a range of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-equal"><code class="literal">!=</code>, <code class="literal">&lt;&gt;</code></a></td><td>Not equal operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_not-in"><code class="literal">NOT IN()</code></a></td><td>Check whether a value is not within a set of values</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td><td>Negation of simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td><td>Compare two strings</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><a class="indexterm" name="idp60931392"></a><a class="indexterm" name="idp60932464"></a><p>
        Comparison operations result in a value of <code class="literal">1</code>
        (<code class="literal">TRUE</code>), <code class="literal">0</code>
        (<code class="literal">FALSE</code>), or <code class="literal">NULL</code>. These
        operations work for both numbers and strings. Strings are
        automatically converted to numbers and numbers to strings as
        necessary.
      </p><p>
        The following relational comparison operators can be used to
        compare not only scalar operands, but row operands:
      </p><pre class="programlisting">=  &gt;  &lt;  &gt;=  &lt;=  &lt;&gt;  !=</pre><p>
        For examples of row comparisons, see
        <a class="xref" href="sql-syntax.html#row-subqueries" title="13.2.10.5. Row Subqueries">Section 13.2.10.5, “Row Subqueries”</a>.
      </p><p>
        Some of the functions in this section return values other than
        <code class="literal">1</code> (<code class="literal">TRUE</code>),
        <code class="literal">0</code> (<code class="literal">FALSE</code>), or
        <code class="literal">NULL</code>. For example,
        <a class="link" href="functions.html#function_least"><code class="literal">LEAST()</code></a> and
        <a class="link" href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a>. However, the value
        they return is based on comparison operations performed
        according to the rules described in
        <a class="xref" href="functions.html#type-conversion" title="12.2. Type Conversion in Expression Evaluation">Section 12.2, “Type Conversion in Expression Evaluation”</a>.
      </p><p>
        To convert a value to a specific type for comparison purposes,
        you can use the <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> function.
        String values can be converted to a different character set
        using <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a>. See
        <a class="xref" href="functions.html#cast-functions" title="12.10. Cast Functions and Operators">Section 12.10, “Cast Functions and Operators”</a>.
      </p><p>
        By default, string comparisons are not case sensitive and use
        the current character set. The default is
        <code class="literal">latin1</code> (cp1252 West European), which also
        works well for English.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_equal"></a>
            <a class="indexterm" name="idp60952736"></a>

            <a class="indexterm" name="idp60953808"></a>

            <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a>
          </p><p>
            Equal:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 = 0;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT '0' = 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT '0.0' = 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT '0.01' = 0;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT '.01' = 0.01;</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="operator_equal-to"></a>
            <a class="indexterm" name="idp60963808"></a>

            <a class="indexterm" name="idp60965296"></a>

            <a class="link" href="functions.html#operator_equal-to"><code class="literal">&lt;=&gt;</code></a>
          </p><p>
            <code class="literal">NULL</code>-safe equal. This operator performs
            an equality comparison like the
            <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a> operator,
            but returns <code class="literal">1</code> rather than
            <code class="literal">NULL</code> if both operands are
            <code class="literal">NULL</code>, and <code class="literal">0</code> rather
            than <code class="literal">NULL</code> if one operand is
            <code class="literal">NULL</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 &lt;=&gt; 1, NULL &lt;=&gt; NULL, 1 &lt;=&gt; NULL;</code></strong>
        -&gt; 1, 1, 0
mysql&gt; <strong class="userinput"><code>SELECT 1 = 1, NULL = NULL, 1 = NULL;</code></strong>
        -&gt; 1, NULL, NULL
</pre></li><li class="listitem"><p><a name="operator_not-equal"></a>
            <a class="indexterm" name="idp60980992"></a>

            <a class="indexterm" name="idp60982080"></a>

            <a class="indexterm" name="idp60983168"></a>

            <a class="indexterm" name="idp60984240"></a>

            <a class="link" href="functions.html#operator_not-equal"><code class="literal">&lt;&gt;</code></a>,
            <a class="link" href="functions.html#operator_not-equal"><code class="literal">!=</code></a>
          </p><p>
            Not equal:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '.01' &lt;&gt; '0.01';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT .01 &lt;&gt; '0.01';</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'zapp' &lt;&gt; 'zappp';</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="operator_less-than-or-equal"></a>
            <a class="indexterm" name="idp60994768"></a>

            <a class="indexterm" name="idp60995872"></a>

            <a class="link" href="functions.html#operator_less-than-or-equal"><code class="literal">&lt;=</code></a>
          </p><p>
            Less than or equal:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 0.1 &lt;= 2;</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="operator_less-than"></a>
            <a class="indexterm" name="idp61004160"></a>

            <a class="indexterm" name="idp61005248"></a>

            <a class="link" href="functions.html#operator_less-than"><code class="literal">&lt;</code></a>
          </p><p>
            Less than:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 2 &lt; 2;</code></strong>
        -&gt; 0
</pre></li><li class="listitem"><p><a name="operator_greater-than-or-equal"></a>
            <a class="indexterm" name="idp61013488"></a>

            <a class="indexterm" name="idp61014592"></a>

            <a class="link" href="functions.html#operator_greater-than-or-equal"><code class="literal">&gt;=</code></a>
          </p><p>
            Greater than or equal:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 2 &gt;= 2;</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="operator_greater-than"></a>
            <a class="indexterm" name="idp61022864"></a>

            <a class="indexterm" name="idp61023952"></a>

            <a class="link" href="functions.html#operator_greater-than"><code class="literal">&gt;</code></a>
          </p><p>
            Greater than:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 2 &gt; 2;</code></strong>
        -&gt; 0
</pre></li><li class="listitem"><p><a name="operator_is"></a>
            <a class="indexterm" name="idp61032848"></a>

            <a class="indexterm" name="idp61034336"></a>

            <a class="indexterm" name="idp61035824"></a>

            <a class="indexterm" name="idp61037312"></a>

            <a class="link" href="functions.html#operator_is"><code class="literal">IS
            <em class="replaceable"><code>boolean_value</code></em></code></a>
          </p><p>
            Tests a value against a boolean value, where
            <em class="replaceable"><code>boolean_value</code></em> can be
            <code class="literal">TRUE</code>, <code class="literal">FALSE</code>, or
            <code class="literal">UNKNOWN</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 IS TRUE, 0 IS FALSE, NULL IS UNKNOWN;</code></strong>
        -&gt; 1, 1, 1
</pre></li><li class="listitem"><p><a name="operator_is-not"></a>
            <a class="indexterm" name="idp61049152"></a>

            <a class="indexterm" name="idp61050640"></a>

            <a class="indexterm" name="idp61052128"></a>

            <a class="indexterm" name="idp61053616"></a>

            <a class="link" href="functions.html#operator_is-not"><code class="literal">IS NOT
            <em class="replaceable"><code>boolean_value</code></em></code></a>
          </p><p>
            Tests a value against a boolean value, where
            <em class="replaceable"><code>boolean_value</code></em> can be
            <code class="literal">TRUE</code>, <code class="literal">FALSE</code>, or
            <code class="literal">UNKNOWN</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 IS NOT UNKNOWN, 0 IS NOT UNKNOWN, NULL IS NOT UNKNOWN;</code></strong>
        -&gt; 1, 1, 0
</pre></li><li class="listitem"><p><a name="operator_is-null"></a>
            <a class="indexterm" name="idp61065472"></a>

            <a class="indexterm" name="idp61066960"></a>

            <a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a>
          </p><p>
            Tests whether a value is <code class="literal">NULL</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 IS NULL, 0 IS NULL, NULL IS NULL;</code></strong>
        -&gt; 0, 0, 1
</pre><p>
            <a class="indexterm" name="idp61073936"></a>

            <a class="indexterm" name="idp61075008"></a>

            To work well with ODBC programs, MySQL supports the
            following extra features when using <a class="link" href="functions.html#operator_is-null"><code class="literal">IS
            NULL</code></a>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If <a class="link" href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a>
                variable is set to 1, then after a statement that
                successfully inserts an automatically generated
                <code class="literal">AUTO_INCREMENT</code> value, you can find
                that value by issuing a statement of the following form:
              </p><pre class="programlisting">SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>auto_col</code></em> IS NULL
</pre><p>
                If the statement returns a row, the value returned is
                the same as if you invoked the
                <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
                function. For details, including the return value after
                a multiple-row insert, see
                <a class="xref" href="functions.html#information-functions" title="12.14. Information Functions">Section 12.14, “Information Functions”</a>. If no
                <code class="literal">AUTO_INCREMENT</code> value was successfully
                inserted, the <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
                statement returns no row.
              </p><p>
                The behavior of retrieving an
                <code class="literal">AUTO_INCREMENT</code> value by using an
                <a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a> comparison can be
                disabled by setting
                <a class="link" href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null = 0</code></a>.
                See <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4. Server System Variables">Section 5.1.4, “Server System Variables”</a>.
              </p><p>
                The default value of
                <a class="link" href="server-administration.html#sysvar_sql_auto_is_null"><code class="literal">sql_auto_is_null</code></a> is 0
                in MySQL 5.6.
              </p></li><li class="listitem"><p>
                For <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> and
                <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> columns that are
                declared as <code class="literal">NOT NULL</code>, you can find
                the special date <code class="literal">'0000-00-00'</code> by
                using a statement like this:
              </p><pre class="programlisting">SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>date_column</code></em> IS NULL
</pre><p>
                This is needed to get some ODBC applications to work
                because ODBC does not support a
                <code class="literal">'0000-00-00'</code> date value.
              </p><p>
                See
                <a class="xref" href="connectors-apis.html#connector-odbc-usagenotes-functionality-last-insert-id" title="22.1.7.1.1. Obtaining Auto-Increment Values">Section 22.1.7.1.1, “Obtaining Auto-Increment Values”</a>,
                and the description for the
                <code class="literal">FLAG_AUTO_IS_NULL</code> option at
                <a class="xref" href="connectors-apis.html#connector-odbc-configuration-connection-parameters" title="22.1.4.2. Connector/ODBC Connection Parameters">Section 22.1.4.2, “Connector/ODBC Connection Parameters”</a>.
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="operator_is-not-null"></a>
            <a class="indexterm" name="idp61102944"></a>

            <a class="indexterm" name="idp61104432"></a>

            <a class="link" href="functions.html#operator_is-null"><code class="literal">IS NOT NULL</code></a>
          </p><p>
            Tests whether a value is not <code class="literal">NULL</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 IS NOT NULL, 0 IS NOT NULL, NULL IS NOT NULL;</code></strong>
        -&gt; 1, 1, 0
</pre></li><li class="listitem"><p><a name="operator_between"></a>
            <a class="indexterm" name="idp61114112"></a>

            <a class="link" href="functions.html#operator_between"><code class="literal"><em class="replaceable"><code>expr</code></em>
            BETWEEN <em class="replaceable"><code>min</code></em> AND
            <em class="replaceable"><code>max</code></em></code></a>
          </p><p>
            If <em class="replaceable"><code>expr</code></em> is greater than or equal
            to <em class="replaceable"><code>min</code></em> and
            <em class="replaceable"><code>expr</code></em> is less than or equal to
            <em class="replaceable"><code>max</code></em>,
            <a class="link" href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> returns
            <code class="literal">1</code>, otherwise it returns
            <code class="literal">0</code>. This is equivalent to the expression
            <code class="literal">(<em class="replaceable"><code>min</code></em> &lt;=
            <em class="replaceable"><code>expr</code></em> AND
            <em class="replaceable"><code>expr</code></em> &lt;=
            <em class="replaceable"><code>max</code></em>)</code> if all the
            arguments are of the same type. Otherwise type conversion
            takes place according to the rules described in
            <a class="xref" href="functions.html#type-conversion" title="12.2. Type Conversion in Expression Evaluation">Section 12.2, “Type Conversion in Expression Evaluation”</a>, but applied to all the
            three arguments.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 2 BETWEEN 1 AND 3, 2 BETWEEN 3 and 1;</code></strong>
        -&gt; 1, 0
mysql&gt; <strong class="userinput"><code>SELECT 1 BETWEEN 2 AND 3;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'b' BETWEEN 'a' AND 'c';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 2 BETWEEN 2 AND '3';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 2 BETWEEN 2 AND 'x-3';</code></strong>
        -&gt; 0
</pre><p>
            For best results when using
            <a class="link" href="functions.html#operator_between"><code class="literal">BETWEEN</code></a> with date or time
            values, use <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> to
            explicitly convert the values to the desired data type.
            Examples: If you compare a
            <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> to two
            <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> values, convert the
            <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> values to
            <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> values. If you use a
            string constant such as <code class="literal">'2001-1-1'</code> in a
            comparison to a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>, cast
            the string to a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>.
          </p></li><li class="listitem"><p><a name="operator_not-between"></a>
            <a class="indexterm" name="idp61141680"></a>

            <a class="link" href="functions.html#operator_not-between"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT BETWEEN <em class="replaceable"><code>min</code></em> AND
            <em class="replaceable"><code>max</code></em></code></a>
          </p><p>
            This is the same as <code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> BETWEEN
            <em class="replaceable"><code>min</code></em> AND
            <em class="replaceable"><code>max</code></em>)</code>.
          </p></li><li class="listitem"><p><a name="function_coalesce"></a>
            <a class="indexterm" name="idp61150896"></a>

            <a class="indexterm" name="idp61152384"></a>

            <a class="link" href="functions.html#function_coalesce"><code class="literal">COALESCE(<em class="replaceable"><code>value</code></em>,...)</code></a>
          </p><p>
            Returns the first non-<code class="literal">NULL</code> value in the
            list, or <code class="literal">NULL</code> if there are no
            non-<code class="literal">NULL</code> values.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COALESCE(NULL,1);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT COALESCE(NULL,NULL,NULL);</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_greatest"></a>
            <a class="indexterm" name="idp61163984"></a>

            <a class="link" href="functions.html#function_greatest"><code class="literal">GREATEST(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,...)</code></a>
          </p><p>
            With two or more arguments, returns the largest
            (maximum-valued) argument. The arguments are compared using
            the same rules as for
            <a class="link" href="functions.html#function_least"><code class="literal">LEAST()</code></a>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT GREATEST(2,0);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT GREATEST(34.0,3.0,5.0,767.0);</code></strong>
        -&gt; 767.0
mysql&gt; <strong class="userinput"><code>SELECT GREATEST('B','A','C');</code></strong>
        -&gt; 'C'
</pre><p>
            <a class="link" href="functions.html#function_greatest"><code class="literal">GREATEST()</code></a> returns
            <code class="literal">NULL</code> if any argument is
            <code class="literal">NULL</code>.
          </p></li><li class="listitem"><p><a name="function_in"></a>
            <a class="indexterm" name="idp61178208"></a>

            <a class="link" href="functions.html#function_in"><code class="literal"><em class="replaceable"><code>expr</code></em>
            IN (<em class="replaceable"><code>value</code></em>,...)</code></a>
          </p><p>
            Returns <code class="literal">1</code> if
            <em class="replaceable"><code>expr</code></em> is equal to any of the
            values in the <code class="literal">IN</code> list, else returns
            <code class="literal">0</code>. If all values are constants, they are
            evaluated according to the type of
            <em class="replaceable"><code>expr</code></em> and sorted. The search for
            the item then is done using a binary search. This means
            <code class="literal">IN</code> is very quick if the
            <code class="literal">IN</code> value list consists entirely of
            constants. Otherwise, type conversion takes place according
            to the rules described in <a class="xref" href="functions.html#type-conversion" title="12.2. Type Conversion in Expression Evaluation">Section 12.2, “Type Conversion in Expression Evaluation”</a>,
            but applied to all the arguments.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 2 IN (0,3,5,7);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'wefwf' IN ('wee','wefwf','weg');</code></strong>
        -&gt; 1
</pre><p>
            You should never mix quoted and unquoted values in an
            <code class="literal">IN</code> list because the comparison rules for
            quoted values (such as strings) and unquoted values (such as
            numbers) differ. Mixing types may therefore lead to
            inconsistent results. For example, do not write an
            <code class="literal">IN</code> expression like this:
          </p><pre class="programlisting">SELECT val1 FROM tbl1 WHERE val1 IN (1,2,'a');</pre><p>
            Instead, write it like this:
          </p><pre class="programlisting">SELECT val1 FROM tbl1 WHERE val1 IN ('1','2','a');</pre><p>
            The number of values in the <code class="literal">IN</code> list is
            only limited by the
            <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> value.
          </p><p>
            To comply with the SQL standard, <code class="literal">IN</code>
            returns <code class="literal">NULL</code> not only if the expression
            on the left hand side is <code class="literal">NULL</code>, but also
            if no match is found in the list and one of the expressions
            in the list is <code class="literal">NULL</code>.
          </p><p>
            <code class="literal">IN()</code> syntax can also be used to write
            certain types of subqueries. See
            <a class="xref" href="sql-syntax.html#any-in-some-subqueries" title="13.2.10.3. Subqueries with ANY, IN, or SOME">Section 13.2.10.3, “Subqueries with <code class="literal">ANY</code>, <code class="literal">IN</code>, or
        <code class="literal">SOME</code>”</a>.
          </p></li><li class="listitem"><p><a name="function_not-in"></a>
            <a class="indexterm" name="idp61204384"></a>

            <a class="link" href="functions.html#function_not-in"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT IN (<em class="replaceable"><code>value</code></em>,...)</code></a>
          </p><p>
            This is the same as <code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> IN
            (<em class="replaceable"><code>value</code></em>,...))</code>.
          </p></li><li class="listitem"><p><a name="function_isnull"></a>
            <a class="indexterm" name="idp61213008"></a>

            <a class="link" href="functions.html#function_isnull"><code class="literal">ISNULL(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            If <em class="replaceable"><code>expr</code></em> is
            <code class="literal">NULL</code>,
            <a class="link" href="functions.html#function_isnull"><code class="literal">ISNULL()</code></a> returns
            <code class="literal">1</code>, otherwise it returns
            <code class="literal">0</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ISNULL(1+1);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT ISNULL(1/0);</code></strong>
        -&gt; 1
</pre><p>
            <a class="link" href="functions.html#function_isnull"><code class="literal">ISNULL()</code></a> can be used instead
            of <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a> to test
            whether a value is <code class="literal">NULL</code>. (Comparing a
            value to <code class="literal">NULL</code> using
            <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a> always
            yields false.)
          </p><p>
            The <a class="link" href="functions.html#function_isnull"><code class="literal">ISNULL()</code></a> function shares
            some special behaviors with the
            <a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a>
            comparison operator. See the description of
            <a class="link" href="functions.html#operator_is-null"><code class="literal">IS NULL</code></a>.
          </p></li><li class="listitem"><p><a name="function_interval"></a>
            <a class="indexterm" name="idp61233216"></a>

            <a class="link" href="functions.html#function_interval"><code class="literal">INTERVAL(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>N1</code></em>,<em class="replaceable"><code>N2</code></em>,<em class="replaceable"><code>N3</code></em>,...)</code></a>
          </p><p>
            Returns <code class="literal">0</code> if <em class="replaceable"><code>N</code></em>
            &lt; <em class="replaceable"><code>N1</code></em>, <code class="literal">1</code> if
            <em class="replaceable"><code>N</code></em> &lt;
            <em class="replaceable"><code>N2</code></em> and so on or
            <code class="literal">-1</code> if <em class="replaceable"><code>N</code></em> is
            <code class="literal">NULL</code>. All arguments are treated as
            integers. It is required that <em class="replaceable"><code>N1</code></em>
            &lt; <em class="replaceable"><code>N2</code></em> &lt;
            <em class="replaceable"><code>N3</code></em> &lt; <code class="literal">...</code>
            &lt; <em class="replaceable"><code>Nn</code></em> for this function to work
            correctly. This is because a binary search is used (very
            fast).
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INTERVAL(23, 1, 15, 17, 30, 44, 200);</code></strong>
        -&gt; 3
mysql&gt; <strong class="userinput"><code>SELECT INTERVAL(10, 1, 10, 100, 1000);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT INTERVAL(22, 23, 30, 44, 200);</code></strong>
        -&gt; 0
</pre></li><li class="listitem"><p><a name="function_least"></a>
            <a class="indexterm" name="idp61252032"></a>

            <a class="link" href="functions.html#function_least"><code class="literal">LEAST(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,...)</code></a>
          </p><p>
            With two or more arguments, returns the smallest
            (minimum-valued) argument. The arguments are compared using
            the following rules:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If any argument is <code class="literal">NULL</code>, the result
                is <code class="literal">NULL</code>. No comparison is needed.
              </p></li><li class="listitem"><p>
                If the return value is used in an
                <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INTEGER</code></a> context or all
                arguments are integer-valued, they are compared as
                integers.
              </p></li><li class="listitem"><p>
                If the return value is used in a
                <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">REAL</code></a> context or all
                arguments are real-valued, they are compared as reals.
              </p></li><li class="listitem"><p>
                If the arguments comprise a mix of numbers and strings,
                they are compared as numbers.
              </p></li><li class="listitem"><p>
                If any argument is a nonbinary (character) string, the
                arguments are compared as nonbinary strings.
              </p></li><li class="listitem"><p>
                In all other cases, the arguments are compared as binary
                strings.
</p></li></ul>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LEAST(2,0);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT LEAST(34.0,3.0,5.0,767.0);</code></strong>
        -&gt; 3.0
mysql&gt; <strong class="userinput"><code>SELECT LEAST('B','A','C');</code></strong>
        -&gt; 'A'
</pre><p>
            Note that the preceding conversion rules can produce strange
            results in some borderline cases:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CAST(LEAST(3600, 9223372036854775808.0) as SIGNED);</code></strong>
        -&gt; -9223372036854775808
</pre><p>
            This happens because MySQL reads
            <code class="literal">9223372036854775808.0</code> in an integer
            context. The integer representation is not good enough to
            hold the value, so it wraps to a signed integer.
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="logical-operators"></a>12.3.3. Logical Operators</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp61274208"></a><a class="indexterm" name="idp61275280"></a>
<div class="table">
<a name="idp61276768"></a><p class="title"><b>Table 12.4. Logical Operators</b></p>
<div class="table-contents">
<table summary="Logical Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_and"><code class="literal">AND</code>, <code class="literal">&amp;&amp;</code></a></td><td>Logical AND</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not"><code class="literal">NOT</code>, <code class="literal">!</code></a></td><td>Negates value</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_or"><code class="literal">||</code>, <code class="literal">OR</code></a></td><td>Logical OR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_xor"><code class="literal">XOR</code></a></td><td>Logical XOR</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        In SQL, all logical operators evaluate to
        <code class="literal">TRUE</code>, <code class="literal">FALSE</code>, or
        <code class="literal">NULL</code> (<code class="literal">UNKNOWN</code>). In MySQL,
        these are implemented as 1 (<code class="literal">TRUE</code>), 0
        (<code class="literal">FALSE</code>), and <code class="literal">NULL</code>. Most of
        this is common to different SQL database servers, although some
        servers may return any nonzero value for
        <code class="literal">TRUE</code>.
      </p><p>
        MySQL evaluates any nonzero, non-<code class="literal">NULL</code> value
        to <code class="literal">TRUE</code>. For example, the following
        statements all assess to <code class="literal">TRUE</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 10 IS TRUE;</code></strong>
-&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT -10 IS TRUE;</code></strong>
-&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'string' IS NOT NULL;</code></strong>
-&gt; 1
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_not"></a>
            <a class="indexterm" name="idp61304944"></a>

            <a class="indexterm" name="idp61306400"></a>

            <a class="link" href="functions.html#operator_not"><code class="literal">NOT</code></a>,
            <a class="link" href="functions.html#operator_not"><code class="literal">!</code></a>
          </p><p>
            Logical NOT. Evaluates to <code class="literal">1</code> if the
            operand is <code class="literal">0</code>, to <code class="literal">0</code> if
            the operand is nonzero, and <code class="literal">NOT NULL</code>
            returns <code class="literal">NULL</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NOT 10;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT NOT 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT NOT NULL;</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT ! (1+1);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT ! 1+1;</code></strong>
        -&gt; 1
</pre><p>
            The last example produces <code class="literal">1</code> because the
            expression evaluates the same way as
            <code class="literal">(!1)+1</code>.
          </p></li><li class="listitem"><p><a name="operator_and"></a>
            <a class="indexterm" name="idp61324464"></a>

            <a class="indexterm" name="idp61325920"></a>

            <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a>,
            <a class="link" href="functions.html#operator_and"><code class="literal">&amp;&amp;</code></a>
          </p><p>
            Logical AND. Evaluates to <code class="literal">1</code> if all
            operands are nonzero and not <code class="literal">NULL</code>, to
            <code class="literal">0</code> if one or more operands are
            <code class="literal">0</code>, otherwise <code class="literal">NULL</code> is
            returned.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 &amp;&amp; 1;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 1 &amp;&amp; 0;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 1 &amp;&amp; NULL;</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT 0 &amp;&amp; NULL;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT NULL &amp;&amp; 0;</code></strong>
        -&gt; 0
</pre></li><li class="listitem"><p><a name="operator_or"></a>
            <a class="indexterm" name="idp61342144"></a>

            <a class="indexterm" name="idp61343600"></a>

            <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a>,
            <a class="link" href="functions.html#operator_or"><code class="literal">||</code></a>
          </p><p>
            Logical OR. When both operands are
            non-<code class="literal">NULL</code>, the result is
            <code class="literal">1</code> if any operand is nonzero, and
            <code class="literal">0</code> otherwise. With a
            <code class="literal">NULL</code> operand, the result is
            <code class="literal">1</code> if the other operand is nonzero, and
            <code class="literal">NULL</code> otherwise. If both operands are
            <code class="literal">NULL</code>, the result is
            <code class="literal">NULL</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 || 1;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 1 || 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 0 || 0;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 0 || NULL;</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT 1 || NULL;</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="operator_xor"></a>
            <a class="indexterm" name="idp61361328"></a>

            <a class="link" href="functions.html#operator_xor"><code class="literal">XOR</code></a>
          </p><p>
            Logical XOR. Returns <code class="literal">NULL</code> if either
            operand is <code class="literal">NULL</code>. For
            non-<code class="literal">NULL</code> operands, evaluates to
            <code class="literal">1</code> if an odd number of operands is
            nonzero, otherwise <code class="literal">0</code> is returned.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 XOR 1;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 1 XOR 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 1 XOR NULL;</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT 1 XOR 1 XOR 1;</code></strong>
        -&gt; 1
</pre><p>
            <code class="literal">a XOR b</code> is mathematically equal to
            <code class="literal">(a AND (NOT b)) OR ((NOT a) and b)</code>.
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="assignment-operators"></a>12.3.4. Assignment Operators</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp61376672"></a><a class="indexterm" name="idp61377744"></a>
<div class="table">
<a name="idp61379232"></a><p class="title"><b>Table 12.5. Assignment Operators</b></p>
<div class="table-contents">
<table summary="Assignment Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_assign-equal"><code class="literal">=</code></a></td><td>Assign a value (as part of a  <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a> statement, or  as part of the <code class="literal">SET</code> clause in an  <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement)</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a></td><td>Assign a value</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_assign-value"></a>
            <a class="indexterm" name="idp61390976"></a>

            <a class="indexterm" name="idp61392064"></a>

            <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a>
          </p><p>
            Assignment operator. Causes the user variable on the left
            hand side of the operator to take on the value to its right.
            The value on the right hand side may be a literal value,
            another variable storing a value, or any legal expression
            that yields a scalar value, including the result of a query
            (provided that this value is a scalar value). You can
            perform multiple assignments in the same
            <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>
            statement. You can perform multiple assignments in the same
            statement-
          </p><p>
            Unlike
            <a class="link" href="functions.html#operator_assign-equal"><code class="literal">=</code></a>, the
            <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a>
            operator is never interpreted as a comparison operator. This
            means you can use
            <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a> in
            any valid SQL statement (not just in
            <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>
            statements) to assign a value to a variable.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2;</code></strong>
        -&gt; NULL, NULL
mysql&gt; <strong class="userinput"><code>SELECT @var1 := 1, @var2;</code></strong>
        -&gt; 1, NULL
mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2;</code></strong>
        -&gt; 1, NULL
mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2 := @var1;</code></strong>
        -&gt; 1, 1
mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2;</code></strong>
        -&gt; 1, 1

mysql&gt; <strong class="userinput"><code>SELECT @var1:=COUNT(*) FROM t1;</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT @var1;</code></strong>
        -&gt; 4
</pre><p>
            You can make value assignments using
            <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a> in
            other statements besides
            <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>, such as
            <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>, as shown here:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @var1;</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT * FROM t1;</code></strong>
        -&gt; 1, 3, 5, 7

mysql&gt; <strong class="userinput"><code>UPDATE t1 SET c1 = 2 WHERE c1 = @var1:= 1;</code></strong>
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT @var1;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT * FROM t1;</code></strong>
        -&gt; 2, 3, 5, 7
</pre><p>
            While it is also possible both to set and to read the value
            of the same variable in a single SQL statement using the
            <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a>
            operator, this is not recommended.
            <a class="xref" href="language-structure.html#user-variables" title="9.4. User-Defined Variables">Section 9.4, “User-Defined Variables”</a>, explains why you should
            avoid doing this.
          </p></li><li class="listitem"><p><a name="operator_assign-equal"></a>
            <a class="indexterm" name="idp61420096"></a>

            <a class="indexterm" name="idp61421168"></a>

            <a class="indexterm" name="idp61422624"></a>

            <a class="link" href="functions.html#operator_assign-equal"><code class="literal">=</code></a>
          </p><p>
            This operator is used to perform value assignments in two
            cases, described in the next two paragraphs.
          </p><p>
            Within a
            <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>
            statement, <code class="literal">=</code> is treated as an assignment
            operator that causes the user variable on the left hand side
            of the operator to take on the value to its right. (In other
            words, when used in a
            <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>
            statement, <code class="literal">=</code> is treated identically to
            <a class="link" href="functions.html#operator_assign-value"><code class="literal">:=</code></a>.)
            The value on the right hand side may be a literal value,
            another variable storing a value, or any legal expression
            that yields a scalar value, including the result of a query
            (provided that this value is a scalar value). You can
            perform multiple assignments in the same
            <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>
            statement.
          </p><p>
            In the <code class="literal">SET</code> clause of an
            <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement,
            <code class="literal">=</code> also acts as an assignment operator; in
            this case, however, it causes the column named on the left
            hand side of the operator to assume the value given to the
            right, provided any <code class="literal">WHERE</code> conditions that
            are part of the <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> are
            met. You can make multiple assignments in the same
            <code class="literal">SET</code> clause of an
            <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement.
          </p><p>
            In any other context, <code class="literal">=</code> is treated as a
            <a class="link" href="functions.html#operator_equal">comparison operator</a>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2;</code></strong>
        -&gt; NULL, NULL
mysql&gt; <strong class="userinput"><code>SELECT @var1 := 1, @var2;</code></strong>
        -&gt; 1, NULL
mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2;</code></strong>
        -&gt; 1, NULL
mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2 := @var1;</code></strong>
        -&gt; 1, 1
mysql&gt; <strong class="userinput"><code>SELECT @var1, @var2;</code></strong>
        -&gt; 1, 1
</pre><p>
            For more information, see <a class="xref" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax">Section 13.7.4, “<code class="literal">SET</code> Syntax”</a>,
            <a class="xref" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax">Section 13.2.11, “<code class="literal">UPDATE</code> Syntax”</a>, and <a class="xref" href="sql-syntax.html#subqueries" title="13.2.10. Subquery Syntax">Section 13.2.10, “Subquery Syntax”</a>.
</p></li></ul>
</div>

</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="control-flow-functions"></a>12.4. Control Flow Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp61449408"></a><a class="indexterm" name="idp61450480"></a>
<div class="table">
<a name="idp61451968"></a><p class="title"><b>Table 12.6. Flow Control Operators</b></p>
<div class="table-contents">
<table summary="Flow Control Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_case"><code class="literal">CASE</code></a></td><td>Case operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a></td><td>If/else construct</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a></td><td>Null if/else construct</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_nullif"><code class="literal">NULLIF()</code></a></td><td>Return NULL if expr1 = expr2</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_case"></a>
          <a class="indexterm" name="idp61466464"></a>

          <a class="link" href="functions.html#operator_case"><code class="literal">CASE
          <em class="replaceable"><code>value</code></em> WHEN
          [<em class="replaceable"><code>compare_value</code></em>] THEN
          <em class="replaceable"><code>result</code></em> [WHEN
          [<em class="replaceable"><code>compare_value</code></em>] THEN
          <em class="replaceable"><code>result</code></em> ...] [ELSE
          <em class="replaceable"><code>result</code></em>] END</code></a>
        </p><p>
          <a class="link" href="functions.html#operator_case"><code class="literal">CASE WHEN
          [<em class="replaceable"><code>condition</code></em>] THEN
          <em class="replaceable"><code>result</code></em> [WHEN
          [<em class="replaceable"><code>condition</code></em>] THEN
          <em class="replaceable"><code>result</code></em> ...] [ELSE
          <em class="replaceable"><code>result</code></em>] END</code></a>
        </p><p>
          The first version returns the
          <em class="replaceable"><code>result</code></em> where
          <code class="literal"><em class="replaceable"><code>value</code></em>=<em class="replaceable"><code>compare_value</code></em></code>.
          The second version returns the result for the first condition
          that is true. If there was no matching result value, the
          result after <code class="literal">ELSE</code> is returned, or
          <code class="literal">NULL</code> if there is no <code class="literal">ELSE</code>
          part.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CASE 1 WHEN 1 THEN 'one'</code></strong>
    -&gt;     <strong class="userinput"><code>WHEN 2 THEN 'two' ELSE 'more' END;</code></strong>
        -&gt; 'one'
mysql&gt; <strong class="userinput"><code>SELECT CASE WHEN 1&gt;0 THEN 'true' ELSE 'false' END;</code></strong>
        -&gt; 'true'
mysql&gt; <strong class="userinput"><code>SELECT CASE BINARY 'B'</code></strong>
    -&gt;     <strong class="userinput"><code>WHEN 'a' THEN 1 WHEN 'b' THEN 2 END;</code></strong>
        -&gt; NULL
</pre><p>
          The return type of a <a class="link" href="functions.html#operator_case"><code class="literal">CASE</code></a>
          expression is the compatible aggregated type of all return
          values, but also depends on the context in which it is used.
          If used in a string context, the result is returned as a
          string. If used in a numeric context, the result is returned
          as a decimal, real, or integer value.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            The syntax of the <a class="link" href="functions.html#operator_case"><code class="literal">CASE</code></a>
            <span class="emphasis"><em>expression</em></span> shown here differs slightly
            from that of the SQL <a class="link" href="sql-syntax.html#case" title="13.6.5.1. CASE Syntax"><code class="literal">CASE</code></a>
            <span class="emphasis"><em>statement</em></span> described in
            <a class="xref" href="sql-syntax.html#case" title="13.6.5.1. CASE Syntax">Section 13.6.5.1, “<code class="literal">CASE</code> Syntax”</a>, for use inside stored programs. The
            <a class="link" href="sql-syntax.html#case" title="13.6.5.1. CASE Syntax"><code class="literal">CASE</code></a> statement cannot have an
            <code class="literal">ELSE NULL</code> clause, and it is terminated
            with <code class="literal">END CASE</code> instead of
            <code class="literal">END</code>.
</p>
</div>
</li><li class="listitem"><p><a name="function_if"></a>
          <a class="indexterm" name="idp61497680"></a>

          <a class="link" href="functions.html#function_if"><code class="literal">IF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>,<em class="replaceable"><code>expr3</code></em>)</code></a>
        </p><p>
          If <em class="replaceable"><code>expr1</code></em> is <code class="literal">TRUE</code>
          (<code class="literal"><em class="replaceable"><code>expr1</code></em> &lt;&gt;
          0</code> and <code class="literal"><em class="replaceable"><code>expr1</code></em>
          &lt;&gt; NULL</code>) then
          <a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a> returns
          <em class="replaceable"><code>expr2</code></em>; otherwise it returns
          <em class="replaceable"><code>expr3</code></em>.
          <a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a> returns a numeric or
          string value, depending on the context in which it is used.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT IF(1&gt;2,2,3);</code></strong>
        -&gt; 3
mysql&gt; <strong class="userinput"><code>SELECT IF(1&lt;2,'yes','no');</code></strong>
        -&gt; 'yes'
mysql&gt; <strong class="userinput"><code>SELECT IF(STRCMP('test','test1'),'no','yes');</code></strong>
        -&gt; 'no'
</pre><p>
          If only one of <em class="replaceable"><code>expr2</code></em> or
          <em class="replaceable"><code>expr3</code></em> is explicitly
          <code class="literal">NULL</code>, the result type of the
          <a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a> function is the type of
          the non-<code class="literal">NULL</code> expression.
        </p><p>
          The default return type of <a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a>
          (which may matter when it is stored into a temporary table) is
          calculated as follows.
</p>
<div class="informaltable">
<table summary="This table lists expressions and corresponding
            return values which show how the default return type of
            IF() is calculated. " border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Expression</th><th scope="col">Return Value</th></tr></thead><tbody><tr><td scope="row"><em class="replaceable"><code>expr2</code></em> or <em class="replaceable"><code>expr3</code></em>
                  returns a string</td><td>string</td></tr><tr><td scope="row"><em class="replaceable"><code>expr2</code></em> or <em class="replaceable"><code>expr3</code></em>
                  returns a floating-point value</td><td>floating-point</td></tr><tr><td scope="row"><em class="replaceable"><code>expr2</code></em> or <em class="replaceable"><code>expr3</code></em>
returns an integer</td><td>integer</td></tr></tbody></table>
</div>
<p>
          If <em class="replaceable"><code>expr2</code></em> and
          <em class="replaceable"><code>expr3</code></em> are both strings, the result
          is case sensitive if either string is case sensitive.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            There is also an <a class="link" href="sql-syntax.html#if" title="13.6.5.2. IF Syntax"><code class="literal">IF</code></a>
            <span class="emphasis"><em>statement</em></span>, which differs from the
            <a class="link" href="functions.html#function_if"><code class="literal">IF()</code></a>
            <span class="emphasis"><em>function</em></span> described here. See
            <a class="xref" href="sql-syntax.html#if" title="13.6.5.2. IF Syntax">Section 13.6.5.2, “<code class="literal">IF</code> Syntax”</a>.
</p>
</div>
</li><li class="listitem"><p><a name="function_ifnull"></a>
          <a class="indexterm" name="idp61536528"></a>

          <a class="indexterm" name="idp61538016"></a>

          <a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          If <em class="replaceable"><code>expr1</code></em> is not
          <code class="literal">NULL</code>,
          <a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a> returns
          <em class="replaceable"><code>expr1</code></em>; otherwise it returns
          <em class="replaceable"><code>expr2</code></em>.
          <a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a> returns a numeric or
          string value, depending on the context in which it is used.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT IFNULL(1,0);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT IFNULL(NULL,10);</code></strong>
        -&gt; 10
mysql&gt; <strong class="userinput"><code>SELECT IFNULL(1/0,10);</code></strong>
        -&gt; 10
mysql&gt; <strong class="userinput"><code>SELECT IFNULL(1/0,'yes');</code></strong>
        -&gt; 'yes'
</pre><p>
          The default result value of
          <a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
          is the more <span class="quote">“<span class="quote">general</span>”</span> of the two expressions, in
          the order <code class="literal">STRING</code>,
          <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">REAL</code></a>, or
          <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INTEGER</code></a>. Consider the case of a
          table based on expressions or where MySQL must internally
          store a value returned by
          <a class="link" href="functions.html#function_ifnull"><code class="literal">IFNULL()</code></a> in a temporary table:
        </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE tmp SELECT IFNULL(1,'test') AS test;</code></strong>
mysql&gt; <strong class="userinput"><code>DESCRIBE tmp;</code></strong>
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| test  | varbinary(4) | NO   |     |         |       |
+-------+--------------+------+-----+---------+-------+
</pre><p>
          In this example, the type of the <code class="literal">test</code>
          column is <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY(4)</code></a>.
        </p></li><li class="listitem"><p><a name="function_nullif"></a>
          <a class="indexterm" name="idp61563808"></a>

          <a class="link" href="functions.html#function_nullif"><code class="literal">NULLIF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          Returns <code class="literal">NULL</code> if
          <code class="literal"><em class="replaceable"><code>expr1</code></em> =
          <em class="replaceable"><code>expr2</code></em></code> is true, otherwise
          returns <em class="replaceable"><code>expr1</code></em>. This is the same as
          <a class="link" href="functions.html#operator_case"><code class="literal">CASE WHEN
          <em class="replaceable"><code>expr1</code></em> =
          <em class="replaceable"><code>expr2</code></em> THEN NULL ELSE
          <em class="replaceable"><code>expr1</code></em> END</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NULLIF(1,1);</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT NULLIF(1,2);</code></strong>
        -&gt; 1
</pre><p>
          Note that MySQL evaluates <em class="replaceable"><code>expr1</code></em>
          twice if the arguments are not equal.
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="string-functions"></a>12.5. String Functions</h2>

</div>

</div>

</div>

<div class="toc">
<dl><dt><span class="section"><a href="functions.html#string-comparison-functions">12.5.1. String Comparison Functions</a></span></dt><dt><span class="section"><a href="functions.html#regexp">12.5.2. Regular Expressions</a></span></dt></dl>
</div>
<a class="indexterm" name="idp61578304"></a><a class="indexterm" name="idp61579376"></a>
<div class="table">
<a name="idp61580864"></a><p class="title"><b>Table 12.7. String Operators</b></p>
<div class="table-contents">
<table summary="String Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_ascii"><code class="literal">ASCII()</code></a></td><td>Return numeric value of left-most character</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bin"><code class="literal">BIN()</code></a></td><td>Return a string containing binary representation of a  number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-length"><code class="literal">BIT_LENGTH()</code></a></td><td>Return length of argument in bits</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a></td><td>Return number of characters in argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_char"><code class="literal">CHAR()</code></a></td><td>Return the character for each integer passed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH()</code></a></td><td>A synonym for CHAR_LENGTH()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a></td><td>Return concatenate with  separator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a></td><td>Return concatenated string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_elt"><code class="literal">ELT()</code></a></td><td>Return string at index number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_export-set"><code class="literal">EXPORT_SET()</code></a></td><td>Return a string such that for every bit set in the value  bits, you get an on string and for every unset bit, you get an off string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_field"><code class="literal">FIELD()</code></a></td><td>Return the index (position) of the first argument  in the subsequent arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a></td><td>Return the index position of  the first argument within the second argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_format"><code class="literal">FORMAT()</code></a></td><td>Return a number formatted to specified number of decimal places</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a></td><td>Decode to a base-64 string and return result</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a></td><td>Return a hexadecimal representation of a  decimal or string value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_insert"><code class="literal">INSERT()</code></a></td><td>Insert a substring at the specified position up to  the specified number of characters</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_instr"><code class="literal">INSTR()</code></a></td><td>Return the index of the first occurrence of substring</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_lcase"><code class="literal">LCASE()</code></a></td><td>Synonym for LOWER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_left"><code class="literal">LEFT()</code></a></td><td>Return the leftmost number of characters as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_length"><code class="literal">LENGTH()</code></a></td><td>Return the length of a string in bytes</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a></td><td>Simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE()</code></a></td><td>Load the named file</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_locate"><code class="literal">LOCATE()</code></a></td><td>Return the position of the first occurrence  of substring</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a></td><td>Return the argument in lowercase</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_lpad"><code class="literal">LPAD()</code></a></td><td>Return the string argument, left-padded  with the specified string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ltrim"><code class="literal">LTRIM()</code></a></td><td>Remove leading spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_make-set"><code class="literal">MAKE_SET()</code></a></td><td>Return a set of comma-separated strings  that have the corresponding bit in bits set</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_match"><code class="literal">MATCH</code></a></td><td>Perform full-text search</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_mid"><code class="literal">MID()</code></a></td><td>Return a substring starting from the specified position</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td><td>Negation of simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td><td>Negation of REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_oct"><code class="literal">OCT()</code></a></td><td>Return a string containing octal representation of a  number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_octet-length"><code class="literal">OCTET_LENGTH()</code></a></td><td>A synonym for LENGTH()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ord"><code class="literal">ORD()</code></a></td><td>Return character code for leftmost character of the  argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_position"><code class="literal">POSITION()</code></a></td><td>A synonym for LOCATE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_quote"><code class="literal">QUOTE()</code></a></td><td>Escape the argument for use in an SQL statement</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td><td>Pattern matching using regular expressions</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_repeat"><code class="literal">REPEAT()</code></a></td><td>Repeat a string the specified number of times</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_replace"><code class="literal">REPLACE()</code></a></td><td>Replace occurrences of a specified string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_reverse"><code class="literal">REVERSE()</code></a></td><td>Reverse the characters in a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_right"><code class="literal">RIGHT()</code></a></td><td>Return the specified rightmost number of characters</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td><td>Synonym for REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rpad"><code class="literal">RPAD()</code></a></td><td>Append string the specified number of times</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rtrim"><code class="literal">RTRIM()</code></a></td><td>Remove trailing spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a></td><td>Return a soundex string</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_sounds-like"><code class="literal">SOUNDS LIKE</code></a></td><td>Compare sounds</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_space"><code class="literal">SPACE()</code></a></td><td>Return a string of the specified number of spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td><td>Compare two strings</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR()</code></a></td><td>Return the substring as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a></td><td>Return a substring from a  string before the specified number of occurrences of the delimiter</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a></td><td>Return the substring as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a></td><td>Return the argument converted to a base-64 string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_trim"><code class="literal">TRIM()</code></a></td><td>Remove leading and trailing spaces</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ucase"><code class="literal">UCASE()</code></a></td><td>Synonym for UPPER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a></td><td>Return a string containing hex representation of a  number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a></td><td>Convert to uppercase</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a></td><td>Return the weight string for a string</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      String-valued functions return <code class="literal">NULL</code> if the
      length of the result would be greater than the value of the
      <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> system
      variable. See <a class="xref" href="optimization.html#server-parameters" title="8.11.2. Tuning Server Parameters">Section 8.11.2, “Tuning Server Parameters”</a>.
    </p><p>
      For functions that operate on string positions, the first position
      is numbered 1.
    </p><p>
      For functions that take length arguments, noninteger arguments are
      rounded to the nearest integer.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_ascii"></a>
          <a class="indexterm" name="idp61693120"></a>

          <a class="link" href="functions.html#function_ascii"><code class="literal">ASCII(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the numeric value of the leftmost character of the
          string <em class="replaceable"><code>str</code></em>. Returns
          <code class="literal">0</code> if <em class="replaceable"><code>str</code></em> is the
          empty string. Returns <code class="literal">NULL</code> if
          <em class="replaceable"><code>str</code></em> is <code class="literal">NULL</code>.
          <a class="link" href="functions.html#function_ascii"><code class="literal">ASCII()</code></a> works for 8-bit
          characters.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ASCII('2');</code></strong>
        -&gt; 50
mysql&gt; <strong class="userinput"><code>SELECT ASCII(2);</code></strong>
        -&gt; 50
mysql&gt; <strong class="userinput"><code>SELECT ASCII('dx');</code></strong>
        -&gt; 100
</pre><p>
          See also the <a class="link" href="functions.html#function_ord"><code class="literal">ORD()</code></a> function.
        </p></li><li class="listitem"><p><a name="function_bin"></a>
          <a class="indexterm" name="idp61708736"></a>

          <a class="link" href="functions.html#function_bin"><code class="literal">BIN(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          Returns a string representation of the binary value of
          <em class="replaceable"><code>N</code></em>, where
          <em class="replaceable"><code>N</code></em> is a longlong
          (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>) number. This is
          equivalent to
          <a class="link" href="functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,10,2)</code></a>.
          Returns <code class="literal">NULL</code> if
          <em class="replaceable"><code>N</code></em> is <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT BIN(12);</code></strong>
        -&gt; '1100'
</pre></li><li class="listitem"><p><a name="function_bit-length"></a>
          <a class="indexterm" name="idp61722224"></a>

          <a class="link" href="functions.html#function_bit-length"><code class="literal">BIT_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the length of the string
          <em class="replaceable"><code>str</code></em> in bits.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT BIT_LENGTH('text');</code></strong>
        -&gt; 32
</pre></li><li class="listitem"><p><a name="function_char"></a>
          <a class="indexterm" name="idp61731264"></a>

          <a class="link" href="functions.html#function_char"><code class="literal">CHAR(<em class="replaceable"><code>N</code></em>,...
          [USING <em class="replaceable"><code>charset_name</code></em>])</code></a>
        </p><p>
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR()</code></a> interprets each argument
          <em class="replaceable"><code>N</code></em> as an integer and returns a
          string consisting of the characters given by the code values
          of those integers. <code class="literal">NULL</code> values are skipped.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CHAR(77,121,83,81,'76');</code></strong>
        -&gt; 'MySQL'
mysql&gt; <strong class="userinput"><code>SELECT CHAR(77,77.3,'77.3');</code></strong>
        -&gt; 'MMM'
</pre><p>
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR()</code></a> arguments larger than
          255 are converted into multiple result bytes. For example,
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR(256)</code></a> is equivalent to
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR(1,0)</code></a>, and
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR(256*256)</code></a> is equivalent to
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR(1,0,0)</code></a>:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(CHAR(1,0)), HEX(CHAR(256));</code></strong>
+----------------+----------------+
| HEX(CHAR(1,0)) | HEX(CHAR(256)) |
+----------------+----------------+
| 0100           | 0100           |
+----------------+----------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(CHAR(1,0,0)), HEX(CHAR(256*256));</code></strong>
+------------------+--------------------+
| HEX(CHAR(1,0,0)) | HEX(CHAR(256*256)) |
+------------------+--------------------+
| 010000           | 010000             |
+------------------+--------------------+
</pre><p>
          By default, <a class="link" href="functions.html#function_char"><code class="literal">CHAR()</code></a> returns a
          binary string. To produce a string in a given character set,
          use the optional <code class="literal">USING</code> clause:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CHARSET(CHAR(0x65)), CHARSET(CHAR(0x65 USING utf8));</code></strong>
+---------------------+--------------------------------+
| CHARSET(CHAR(0x65)) | CHARSET(CHAR(0x65 USING utf8)) |
+---------------------+--------------------------------+
| binary              | utf8                           |
+---------------------+--------------------------------+
</pre><p>
          If <code class="literal">USING</code> is given and the result string is
          illegal for the given character set, a warning is issued.
          Also, if strict SQL mode is enabled, the result from
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR()</code></a> becomes
          <code class="literal">NULL</code>.
        </p></li><li class="listitem"><p><a name="function_char-length"></a>
          <a class="indexterm" name="idp61758384"></a>

          <a class="link" href="functions.html#function_char-length"><code class="literal">CHAR_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the length of the string
          <em class="replaceable"><code>str</code></em>, measured in characters. A
          multi-byte character counts as a single character. This means
          that for a string containing five 2-byte characters,
          <a class="link" href="functions.html#function_length"><code class="literal">LENGTH()</code></a> returns
          <code class="literal">10</code>, whereas
          <a class="link" href="functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a> returns
          <code class="literal">5</code>.
        </p></li><li class="listitem"><p><a name="function_character-length"></a>
          <a class="indexterm" name="idp61768720"></a>

          <a class="link" href="functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_character-length"><code class="literal">CHARACTER_LENGTH()</code></a> is a synonym
          for <a class="link" href="functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a>.
        </p></li><li class="listitem"><p><a name="function_concat"></a>
          <a class="indexterm" name="idp61777072"></a>

          <a class="indexterm" name="idp61778144"></a>

          <a class="indexterm" name="idp61779216"></a>

          <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT(<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,...)</code></a>
        </p><p>
          Returns the string that results from concatenating the
          arguments. May have one or more arguments. If all arguments
          are nonbinary strings, the result is a nonbinary string. If
          the arguments include any binary strings, the result is a
          binary string. A numeric argument is converted to its
          equivalent nonbinary string form.
        </p><p>
          <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> returns
          <code class="literal">NULL</code> if any argument is
          <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CONCAT('My', 'S', 'QL');</code></strong>
        -&gt; 'MySQL'
mysql&gt; <strong class="userinput"><code>SELECT CONCAT('My', NULL, 'QL');</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT CONCAT(14.3);</code></strong>
        -&gt; '14.3'
</pre><p>
          For quoted strings, concatenation can be performed by placing
          the strings next to each other:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'My' 'S' 'QL';</code></strong>
        -&gt; 'MySQL'
</pre></li><li class="listitem"><p><a name="function_concat-ws"></a>
          <a class="indexterm" name="idp61795248"></a>

          <a class="link" href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS(<em class="replaceable"><code>separator</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,...)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a> stands for
          Concatenate With Separator and is a special form of
          <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>. The first argument is
          the separator for the rest of the arguments. The separator is
          added between the strings to be concatenated. The separator
          can be a string, as can the rest of the arguments. If the
          separator is <code class="literal">NULL</code>, the result is
          <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CONCAT_WS(',','First name','Second name','Last Name');</code></strong>
        -&gt; 'First name,Second name,Last Name'
mysql&gt; <strong class="userinput"><code>SELECT CONCAT_WS(',','First name',NULL,'Last Name');</code></strong>
        -&gt; 'First name,Last Name'
</pre><p>
          <a class="link" href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a> does not skip empty
          strings. However, it does skip any <code class="literal">NULL</code>
          values after the separator argument.
        </p></li><li class="listitem"><p><a name="function_elt"></a>
          <a class="indexterm" name="idp61811152"></a>

          <a class="link" href="functions.html#function_elt"><code class="literal">ELT(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,<em class="replaceable"><code>str3</code></em>,...)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_elt"><code class="literal">ELT()</code></a> returns the
          <em class="replaceable"><code>N</code></em>th element of the list of strings:
          <em class="replaceable"><code>str1</code></em> if
          <em class="replaceable"><code>N</code></em> = <code class="literal">1</code>,
          <em class="replaceable"><code>str2</code></em> if
          <em class="replaceable"><code>N</code></em> = <code class="literal">2</code>, and so
          on. Returns <code class="literal">NULL</code> if
          <em class="replaceable"><code>N</code></em> is less than <code class="literal">1</code>
          or greater than the number of arguments.
          <a class="link" href="functions.html#function_elt"><code class="literal">ELT()</code></a> is the complement of
          <a class="link" href="functions.html#function_field"><code class="literal">FIELD()</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ELT(1, 'ej', 'Heja', 'hej', 'foo');</code></strong>
        -&gt; 'ej'
mysql&gt; <strong class="userinput"><code>SELECT ELT(4, 'ej', 'Heja', 'hej', 'foo');</code></strong>
        -&gt; 'foo'
</pre></li><li class="listitem"><p><a name="function_export-set"></a>
          <a class="indexterm" name="idp61829728"></a>

          <a class="link" href="functions.html#function_export-set"><code class="literal">EXPORT_SET(<em class="replaceable"><code>bits</code></em>,<em class="replaceable"><code>on</code></em>,<em class="replaceable"><code>off</code></em>[,<em class="replaceable"><code>separator</code></em>[,<em class="replaceable"><code>number_of_bits</code></em>]])</code></a>
        </p><p>
          Returns a string such that for every bit set in the value
          <em class="replaceable"><code>bits</code></em>, you get an
          <em class="replaceable"><code>on</code></em> string and for every bit not set
          in the value, you get an <em class="replaceable"><code>off</code></em>
          string. Bits in <em class="replaceable"><code>bits</code></em> are examined
          from right to left (from low-order to high-order bits).
          Strings are added to the result from left to right, separated
          by the <em class="replaceable"><code>separator</code></em> string (the
          default being the comma character
          <span class="quote">“<span class="quote"><code class="literal">,</code></span>”</span>). The number of bits
          examined is given by
          <em class="replaceable"><code>number_of_bits</code></em>, which has a default
          of 64 if not specified.
          <em class="replaceable"><code>number_of_bits</code></em> is silently clipped
          to 64 if larger than 64. It is treated as an unsigned integer,
          so a value of –1 is effectively the same as 64.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT EXPORT_SET(5,'Y','N',',',4);</code></strong>
        -&gt; 'Y,N,Y,N'
mysql&gt; <strong class="userinput"><code>SELECT EXPORT_SET(6,'1','0',',',10);</code></strong>
        -&gt; '0,1,1,0,0,0,0,0,0,0'
</pre></li><li class="listitem"><p><a name="function_field"></a>
          <a class="indexterm" name="idp61845456"></a>

          <a class="link" href="functions.html#function_field"><code class="literal">FIELD(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,<em class="replaceable"><code>str3</code></em>,...)</code></a>
        </p><p>
          Returns the index (position) of <em class="replaceable"><code>str</code></em>
          in the <em class="replaceable"><code>str1</code></em>,
          <em class="replaceable"><code>str2</code></em>,
          <em class="replaceable"><code>str3</code></em>, <code class="literal">...</code> list.
          Returns <code class="literal">0</code> if <em class="replaceable"><code>str</code></em>
          is not found.
        </p><p>
          If all arguments to <a class="link" href="functions.html#function_field"><code class="literal">FIELD()</code></a> are
          strings, all arguments are compared as strings. If all
          arguments are numbers, they are compared as numbers.
          Otherwise, the arguments are compared as double.
        </p><p>
          If <em class="replaceable"><code>str</code></em> is <code class="literal">NULL</code>,
          the return value is <code class="literal">0</code> because
          <code class="literal">NULL</code> fails equality comparison with any
          value. <a class="link" href="functions.html#function_field"><code class="literal">FIELD()</code></a> is the
          complement of <a class="link" href="functions.html#function_elt"><code class="literal">ELT()</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FIELD('ej', 'Hej', 'ej', 'Heja', 'hej', 'foo');</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT FIELD('fo', 'Hej', 'ej', 'Heja', 'hej', 'foo');</code></strong>
        -&gt; 0
</pre></li><li class="listitem"><p><a name="function_find-in-set"></a>
          <a class="indexterm" name="idp61865872"></a>

          <a class="link" href="functions.html#function_find-in-set"><code class="literal">FIND_IN_SET(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>strlist</code></em>)</code></a>
        </p><p>
          Returns a value in the range of 1 to
          <em class="replaceable"><code>N</code></em> if the string
          <em class="replaceable"><code>str</code></em> is in the string list
          <em class="replaceable"><code>strlist</code></em> consisting of
          <em class="replaceable"><code>N</code></em> substrings. A string list is a
          string composed of substrings separated by
          <span class="quote">“<span class="quote"><code class="literal">,</code></span>”</span> characters. If the first
          argument is a constant string and the second is a column of
          type <a class="link" href="data-types.html#set" title="11.4.5. The SET Type"><code class="literal">SET</code></a>, the
          <a class="link" href="functions.html#function_find-in-set"><code class="literal">FIND_IN_SET()</code></a> function is
          optimized to use bit arithmetic. Returns <code class="literal">0</code>
          if <em class="replaceable"><code>str</code></em> is not in
          <em class="replaceable"><code>strlist</code></em> or if
          <em class="replaceable"><code>strlist</code></em> is the empty string.
          Returns <code class="literal">NULL</code> if either argument is
          <code class="literal">NULL</code>. This function does not work properly
          if the first argument contains a comma
          (<span class="quote">“<span class="quote"><code class="literal">,</code></span>”</span>) character.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FIND_IN_SET('b','a,b,c,d');</code></strong>
        -&gt; 2
</pre></li><li class="listitem"><p><a name="function_format"></a>
          <a class="indexterm" name="idp61883728"></a>

          <a class="link" href="functions.html#function_format"><code class="literal">FORMAT(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>[,<em class="replaceable"><code>locale</code></em>])</code></a>
        </p><p>
          Formats the number <em class="replaceable"><code>X</code></em> to a format
          like <code class="literal">'#,###,###.##'</code>, rounded to
          <em class="replaceable"><code>D</code></em> decimal places, and returns the
          result as a string. If <em class="replaceable"><code>D</code></em> is
          <code class="literal">0</code>, the result has no decimal point or
          fractional part.
        </p><p>
          The optional third parameter enables a locale to be specified
          to be used for the result number's decimal point, thousands
          separator, and grouping between separators. Permissible locale
          values are the same as the legal values for the
          <a class="link" href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> system variable
          (see <a class="xref" href="globalization.html#locale-support" title="10.7. MySQL Server Locale Support">Section 10.7, “MySQL Server Locale Support”</a>). If no locale is
          specified, the default is <code class="literal">'en_US'</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FORMAT(12332.123456, 4);</code></strong>
        -&gt; '12,332.1235'
mysql&gt; <strong class="userinput"><code>SELECT FORMAT(12332.1,4);</code></strong>
        -&gt; '12,332.1000'
mysql&gt; <strong class="userinput"><code>SELECT FORMAT(12332.2,0);</code></strong>
        -&gt; '12,332'
mysql&gt; <strong class="userinput"><code>SELECT FORMAT(12332.2,2,'de_DE');</code></strong>
        -&gt; '12.332,20'
</pre></li><li class="listitem"><p><a name="function_from-base64"></a>
          <a class="indexterm" name="idp61901248"></a>

          <a class="link" href="functions.html#function_from-base64"><code class="literal">FROM_BASE64(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Takes a string encoded with the base-64 encoded rules used by
          <a class="link" href="functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a> and returns the
          decoded result as a binary string. The result is
          <code class="literal">NULL</code> if the argument is
          <code class="literal">NULL</code> or not a valid base-64 string. See the
          description of <a class="link" href="functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a> for
          details about the encoding and decoding rules.
        </p><p>
          This function was added in MySQL 5.6.1.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_BASE64('abc'), FROM_BASE64(TO_BASE64('abc'));</code></strong>
        -&gt; 'JWJj', 'abc'
</pre></li><li class="listitem"><p><a name="function_hex"></a>
          <a class="indexterm" name="idp61913728"></a>

          <a class="link" href="functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>str</code></em>)</code></a>,
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          For a string argument <em class="replaceable"><code>str</code></em>,
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a> returns a hexadecimal
          string representation of <em class="replaceable"><code>str</code></em> where
          each character in <em class="replaceable"><code>str</code></em> is converted
          to two hexadecimal digits. The inverse of this operation is
          performed by the <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a>
          function.
        </p><p>
          For a numeric argument <em class="replaceable"><code>N</code></em>,
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a> returns a hexadecimal
          string representation of the value of
          <em class="replaceable"><code>N</code></em> treated as a longlong
          (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>) number. This is
          equivalent to
          <a class="link" href="functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,10,16)</code></a>.
          The inverse of this operation is performed by
          <a class="link" href="functions.html#function_conv"><code class="literal">CONV(HEX(<em class="replaceable"><code>N</code></em>),16,10)</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 0x616263, HEX('abc'), UNHEX(HEX('abc'));</code></strong>
        -&gt; 'abc', 616263, 'abc'
mysql&gt; <strong class="userinput"><code>SELECT HEX(255), CONV(HEX(255),16,10);</code></strong>
        -&gt; 'FF', 255
</pre></li><li class="listitem"><p><a name="function_insert"></a>
          <a class="indexterm" name="idp61933872"></a>

          <a class="link" href="functions.html#function_insert"><code class="literal">INSERT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>,<em class="replaceable"><code>newstr</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em>, with the
          substring beginning at position <em class="replaceable"><code>pos</code></em>
          and <em class="replaceable"><code>len</code></em> characters long replaced by
          the string <em class="replaceable"><code>newstr</code></em>. Returns the
          original string if <em class="replaceable"><code>pos</code></em> is not
          within the length of the string. Replaces the rest of the
          string from position <em class="replaceable"><code>pos</code></em> if
          <em class="replaceable"><code>len</code></em> is not within the length of the
          rest of the string. Returns <code class="literal">NULL</code> if any
          argument is <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INSERT('Quadratic', 3, 4, 'What');</code></strong>
        -&gt; 'QuWhattic'
mysql&gt; <strong class="userinput"><code>SELECT INSERT('Quadratic', -1, 4, 'What');</code></strong>
        -&gt; 'Quadratic'
mysql&gt; <strong class="userinput"><code>SELECT INSERT('Quadratic', 3, 100, 'What');</code></strong>
        -&gt; 'QuWhat'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_instr"></a>
          <a class="indexterm" name="idp61950400"></a>

          <a class="link" href="functions.html#function_instr"><code class="literal">INSTR(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>substr</code></em>)</code></a>
        </p><p>
          Returns the position of the first occurrence of substring
          <em class="replaceable"><code>substr</code></em> in string
          <em class="replaceable"><code>str</code></em>. This is the same as the
          two-argument form of <a class="link" href="functions.html#function_locate"><code class="literal">LOCATE()</code></a>,
          except that the order of the arguments is reversed.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INSTR('foobarbar', 'bar');</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT INSTR('xbar', 'foobar');</code></strong>
        -&gt; 0
</pre><p>
          This function is multi-byte safe, and is case sensitive only
          if at least one argument is a binary string.
        </p></li><li class="listitem"><p><a name="function_lcase"></a>
          <a class="indexterm" name="idp61962560"></a>

          <a class="link" href="functions.html#function_lcase"><code class="literal">LCASE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_lcase"><code class="literal">LCASE()</code></a> is a synonym for
          <a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a>.
        </p></li><li class="listitem"><p><a name="function_left"></a>
          <a class="indexterm" name="idp61970880"></a>

          <a class="link" href="functions.html#function_left"><code class="literal">LEFT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          Returns the leftmost <em class="replaceable"><code>len</code></em> characters
          from the string <em class="replaceable"><code>str</code></em>, or
          <code class="literal">NULL</code> if any argument is
          <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LEFT('foobarbar', 5);</code></strong>
        -&gt; 'fooba'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_length"></a>
          <a class="indexterm" name="idp61982624"></a>

          <a class="link" href="functions.html#function_length"><code class="literal">LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the length of the string
          <em class="replaceable"><code>str</code></em>, measured in bytes. A
          multi-byte character counts as multiple bytes. This means that
          for a string containing five 2-byte characters,
          <a class="link" href="functions.html#function_length"><code class="literal">LENGTH()</code></a> returns
          <code class="literal">10</code>, whereas
          <a class="link" href="functions.html#function_char-length"><code class="literal">CHAR_LENGTH()</code></a> returns
          <code class="literal">5</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LENGTH('text');</code></strong>
        -&gt; 4
</pre></li><li class="listitem"><p><a name="function_load-file"></a>
          <a class="indexterm" name="idp61994864"></a>

          <a class="indexterm" name="idp61995936"></a>

          <a class="link" href="functions.html#function_load-file"><code class="literal">LOAD_FILE(<em class="replaceable"><code>file_name</code></em>)</code></a>
        </p><p>
          Reads the file and returns the file contents as a string. To
          use this function, the file must be located on the server
          host, you must specify the full path name to the file, and you
          must have the <a class="link" href="security.html#priv_file"><code class="literal">FILE</code></a> privilege.
          The file must be readable by all and its size less than
          <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a> bytes. If
          the <a class="link" href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a> system
          variable is set to a nonempty directory name, the file to be
          loaded must be located in that directory.
        </p><p>
          If the file does not exist or cannot be read because one of
          the preceding conditions is not satisfied, the function
          returns <code class="literal">NULL</code>.
        </p><p>
          The <a class="link" href="server-administration.html#sysvar_character_set_filesystem"><code class="literal">character_set_filesystem</code></a>
          system variable controls interpretation of file names that are
          given as literal strings.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE t</code></strong>
          <strong class="userinput"><code>  SET blob_col=LOAD_FILE('/tmp/picture')</code></strong>
          <strong class="userinput"><code>  WHERE id=1;</code></strong>
</pre></li><li class="listitem"><p><a name="function_locate"></a>
          <a class="indexterm" name="idp62011600"></a>

          <a class="link" href="functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>substr</code></em>,<em class="replaceable"><code>str</code></em>)</code></a>,
          <a class="link" href="functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>substr</code></em>,<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>)</code></a>
        </p><p>
          The first syntax returns the position of the first occurrence
          of substring <em class="replaceable"><code>substr</code></em> in string
          <em class="replaceable"><code>str</code></em>. The second syntax returns the
          position of the first occurrence of substring
          <em class="replaceable"><code>substr</code></em> in string
          <em class="replaceable"><code>str</code></em>, starting at position
          <em class="replaceable"><code>pos</code></em>. Returns <code class="literal">0</code>
          if <em class="replaceable"><code>substr</code></em> is not in
          <em class="replaceable"><code>str</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOCATE('bar', 'foobarbar');</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT LOCATE('xbar', 'foobar');</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT LOCATE('bar', 'foobarbar', 5);</code></strong>
        -&gt; 7
</pre><p>
          This function is multi-byte safe, and is case-sensitive only
          if at least one argument is a binary string.
        </p></li><li class="listitem"><p><a name="function_lower"></a>
          <a class="indexterm" name="idp62028512"></a>

          <a class="link" href="functions.html#function_lower"><code class="literal">LOWER(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with all
          characters changed to lowercase according to the current
          character set mapping. The default is
          <code class="literal">latin1</code> (cp1252 West European).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOWER('QUADRATICALLY');</code></strong>
        -&gt; 'quadratically'
</pre><p>
          <a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a> (and
          <a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a>) are ineffective when
          applied to binary strings
          (<a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>,
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a>). To perform lettercase
          conversion, convert the string to a nonbinary string:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @str = BINARY 'New York';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT LOWER(@str), LOWER(CONVERT(@str USING latin1));</code></strong>
+-------------+-----------------------------------+
| LOWER(@str) | LOWER(CONVERT(@str USING latin1)) |
+-------------+-----------------------------------+
| New York    | new york                          |
+-------------+-----------------------------------+
</pre><p>
          For Unicode character sets,
          <a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a> and
          <a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a> work accounting to
          Unicode Collation Algorithm (UCA) 5.2.0 for
          <code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_520_ci</code>
          collations and for language-specific collations that are
          derived from them. For other Unicode collations,
          <a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a> and
          <a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a> work accounting to
          Unicode Collation Algorithm (UCA) 4.0.0. See
          <a class="xref" href="globalization.html#charset-unicode-sets" title="10.1.14.1. Unicode Character Sets">Section 10.1.14.1, “Unicode Character Sets”</a>.
        </p><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_lpad"></a>
          <a class="indexterm" name="idp62051168"></a>

          <a class="link" href="functions.html#function_lpad"><code class="literal">LPAD(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>,<em class="replaceable"><code>padstr</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em>, left-padded
          with the string <em class="replaceable"><code>padstr</code></em> to a length
          of <em class="replaceable"><code>len</code></em> characters. If
          <em class="replaceable"><code>str</code></em> is longer than
          <em class="replaceable"><code>len</code></em>, the return value is shortened
          to <em class="replaceable"><code>len</code></em> characters.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LPAD('hi',4,'??');</code></strong>
        -&gt; '??hi'
mysql&gt; <strong class="userinput"><code>SELECT LPAD('hi',1,'??');</code></strong>
        -&gt; 'h'
</pre></li><li class="listitem"><p><a name="function_ltrim"></a>
          <a class="indexterm" name="idp62064016"></a>

          <a class="link" href="functions.html#function_ltrim"><code class="literal">LTRIM(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with leading
          space characters removed.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LTRIM('  barbar');</code></strong>
        -&gt; 'barbar'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_make-set"></a>
          <a class="indexterm" name="idp62073536"></a>

          <a class="link" href="functions.html#function_make-set"><code class="literal">MAKE_SET(<em class="replaceable"><code>bits</code></em>,<em class="replaceable"><code>str1</code></em>,<em class="replaceable"><code>str2</code></em>,...)</code></a>
        </p><p>
          Returns a set value (a string containing substrings separated
          by <span class="quote">“<span class="quote"><code class="literal">,</code></span>”</span> characters) consisting
          of the strings that have the corresponding bit in
          <em class="replaceable"><code>bits</code></em> set.
          <em class="replaceable"><code>str1</code></em> corresponds to bit 0,
          <em class="replaceable"><code>str2</code></em> to bit 1, and so on.
          <code class="literal">NULL</code> values in
          <em class="replaceable"><code>str1</code></em>,
          <em class="replaceable"><code>str2</code></em>, <code class="literal">...</code> are
          not appended to the result.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MAKE_SET(1,'a','b','c');</code></strong>
        -&gt; 'a'
mysql&gt; <strong class="userinput"><code>SELECT MAKE_SET(1 | 4,'hello','nice','world');</code></strong>
        -&gt; 'hello,world'
mysql&gt; <strong class="userinput"><code>SELECT MAKE_SET(1 | 4,'hello','nice',NULL,'world');</code></strong>
        -&gt; 'hello'
mysql&gt; <strong class="userinput"><code>SELECT MAKE_SET(0,'a','b','c');</code></strong>
        -&gt; ''
</pre></li><li class="listitem"><p><a name="function_mid"></a>
          <a class="indexterm" name="idp62090000"></a>

          <a class="link" href="functions.html#function_mid"><code class="literal">MID(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_mid"><code class="literal">MID(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
          is a synonym for
          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>.
        </p></li><li class="listitem"><p><a name="function_oct"></a>
          <a class="indexterm" name="idp62101408"></a>

          <a class="link" href="functions.html#function_oct"><code class="literal">OCT(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          Returns a string representation of the octal value of
          <em class="replaceable"><code>N</code></em>, where
          <em class="replaceable"><code>N</code></em> is a longlong
          (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>) number. This is
          equivalent to
          <a class="link" href="functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,10,8)</code></a>.
          Returns <code class="literal">NULL</code> if
          <em class="replaceable"><code>N</code></em> is <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT OCT(12);</code></strong>
        -&gt; '14'
</pre></li><li class="listitem"><p><a name="function_octet-length"></a>
          <a class="indexterm" name="idp62114896"></a>

          <a class="link" href="functions.html#function_octet-length"><code class="literal">OCTET_LENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_octet-length"><code class="literal">OCTET_LENGTH()</code></a> is a synonym for
          <a class="link" href="functions.html#function_length"><code class="literal">LENGTH()</code></a>.
        </p></li><li class="listitem"><p><a name="function_ord"></a>
          <a class="indexterm" name="idp62123232"></a>

          <a class="link" href="functions.html#function_ord"><code class="literal">ORD(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          If the leftmost character of the string
          <em class="replaceable"><code>str</code></em> is a multi-byte character,
          returns the code for that character, calculated from the
          numeric values of its constituent bytes using this formula:
        </p><pre class="programlisting">  (1st byte code)
+ (2nd byte code * 256)
+ (3rd byte code * 256<sup>2</sup>) ...
</pre><p>
          If the leftmost character is not a multi-byte character,
          <a class="link" href="functions.html#function_ord"><code class="literal">ORD()</code></a> returns the same value as
          the <a class="link" href="functions.html#function_ascii"><code class="literal">ASCII()</code></a> function.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ORD('2');</code></strong>
        -&gt; 50
</pre></li><li class="listitem"><p><a name="function_position"></a>
          <a class="indexterm" name="idp62135792"></a>

          <a class="link" href="functions.html#function_position"><code class="literal">POSITION(<em class="replaceable"><code>substr</code></em>
          IN <em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_position"><code class="literal">POSITION(<em class="replaceable"><code>substr</code></em>
          IN <em class="replaceable"><code>str</code></em>)</code></a> is a synonym for
          <a class="link" href="functions.html#function_locate"><code class="literal">LOCATE(<em class="replaceable"><code>substr</code></em>,<em class="replaceable"><code>str</code></em>)</code></a>.
        </p></li><li class="listitem"><p><a name="function_quote"></a>
          <a class="indexterm" name="idp62146192"></a>

          <a class="link" href="functions.html#function_quote"><code class="literal">QUOTE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Quotes a string to produce a result that can be used as a
          properly escaped data value in an SQL statement. The string is
          returned enclosed by single quotation marks and with each
          instance of backslash (<span class="quote">“<span class="quote"><code class="literal">\</code></span>”</span>),
          single quote (<span class="quote">“<span class="quote"><code class="literal">'</code></span>”</span>), ASCII
          <code class="literal">NUL</code>, and Control+Z preceded by a backslash.
          If the argument is <code class="literal">NULL</code>, the return value
          is the word <span class="quote">“<span class="quote">NULL</span>”</span> without enclosing single
          quotation marks.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT QUOTE('Don\'t!');</code></strong>
        -&gt; 'Don\'t!'
mysql&gt; <strong class="userinput"><code>SELECT QUOTE(NULL);</code></strong>
        -&gt; NULL
</pre><a class="indexterm" name="idp62157184"></a><p>
          For comparison, see the quoting rules for literal strings and
          within the C API in <a class="xref" href="language-structure.html#string-literals" title="9.1.1. String Literals">Section 9.1.1, “String Literals”</a>, and
          <a class="xref" href="connectors-apis.html#mysql-real-escape-string" title="22.8.7.54. mysql_real_escape_string()">Section 22.8.7.54, “<code class="literal">mysql_real_escape_string()</code>”</a>.
        </p></li><li class="listitem"><p><a name="function_repeat"></a>
          <a class="indexterm" name="idp62162144"></a>

          <a class="link" href="functions.html#function_repeat"><code class="literal">REPEAT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>count</code></em>)</code></a>
        </p><p>
          Returns a string consisting of the string
          <em class="replaceable"><code>str</code></em> repeated
          <em class="replaceable"><code>count</code></em> times. If
          <em class="replaceable"><code>count</code></em> is less than 1, returns an
          empty string. Returns <code class="literal">NULL</code> if
          <em class="replaceable"><code>str</code></em> or
          <em class="replaceable"><code>count</code></em> are <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT REPEAT('MySQL', 3);</code></strong>
        -&gt; 'MySQLMySQLMySQL'
</pre></li><li class="listitem"><p><a name="function_replace"></a>
          <a class="indexterm" name="idp62174928"></a>

          <a class="link" href="functions.html#function_replace"><code class="literal">REPLACE(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>from_str</code></em>,<em class="replaceable"><code>to_str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with all
          occurrences of the string <em class="replaceable"><code>from_str</code></em>
          replaced by the string <em class="replaceable"><code>to_str</code></em>.
          <a class="link" href="functions.html#function_replace"><code class="literal">REPLACE()</code></a> performs a
          case-sensitive match when searching for
          <em class="replaceable"><code>from_str</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT REPLACE('www.mysql.com', 'w', 'Ww');</code></strong>
        -&gt; 'WwWwWw.mysql.com'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_reverse"></a>
          <a class="indexterm" name="idp62187616"></a>

          <a class="link" href="functions.html#function_reverse"><code class="literal">REVERSE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with the
          order of the characters reversed.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT REVERSE('abc');</code></strong>
        -&gt; 'cba'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_right"></a>
          <a class="indexterm" name="idp62197120"></a>

          <a class="link" href="functions.html#function_right"><code class="literal">RIGHT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          Returns the rightmost <em class="replaceable"><code>len</code></em>
          characters from the string <em class="replaceable"><code>str</code></em>, or
          <code class="literal">NULL</code> if any argument is
          <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT RIGHT('foobarbar', 4);</code></strong>
        -&gt; 'rbar'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_rpad"></a>
          <a class="indexterm" name="idp62208864"></a>

          <a class="link" href="functions.html#function_rpad"><code class="literal">RPAD(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>len</code></em>,<em class="replaceable"><code>padstr</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em>,
          right-padded with the string <em class="replaceable"><code>padstr</code></em>
          to a length of <em class="replaceable"><code>len</code></em> characters. If
          <em class="replaceable"><code>str</code></em> is longer than
          <em class="replaceable"><code>len</code></em>, the return value is shortened
          to <em class="replaceable"><code>len</code></em> characters.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT RPAD('hi',5,'?');</code></strong>
        -&gt; 'hi???'
mysql&gt; <strong class="userinput"><code>SELECT RPAD('hi',1,'?');</code></strong>
        -&gt; 'h'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_rtrim"></a>
          <a class="indexterm" name="idp62222160"></a>

          <a class="link" href="functions.html#function_rtrim"><code class="literal">RTRIM(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with
          trailing space characters removed.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT RTRIM('barbar   ');</code></strong>
        -&gt; 'barbar'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_soundex"></a>
          <a class="indexterm" name="idp62231680"></a>

          <a class="link" href="functions.html#function_soundex"><code class="literal">SOUNDEX(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns a soundex string from <em class="replaceable"><code>str</code></em>.
          Two strings that sound almost the same should have identical
          soundex strings. A standard soundex string is four characters
          long, but the <a class="link" href="functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a>
          function returns an arbitrarily long string. You can use
          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a> on the result to
          get a standard soundex string. All nonalphabetic characters in
          <em class="replaceable"><code>str</code></em> are ignored. All international
          alphabetic characters outside the A-Z range are treated as
          vowels.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p xmlns="">
            When using <a class="link" href="functions.html#function_soundex"><code class="literal">SOUNDEX()</code></a>, you
            should be aware of the following limitations:
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              This function, as currently implemented, is intended to
              work well with strings that are in the English language
              only. Strings in other languages may not produce reliable
              results.
            </p></li><li class="listitem"><p>
              This function is not guaranteed to provide consistent
              results with strings that use multi-byte character sets,
              including <code class="literal">utf-8</code>.
            </p><p>
              We hope to remove these limitations in a future release.
              See Bug #22638 for more information.
</p></li></ul>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SOUNDEX('Hello');</code></strong>
        -&gt; 'H400'
mysql&gt; <strong class="userinput"><code>SELECT SOUNDEX('Quadratically');</code></strong>
        -&gt; 'Q36324'
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            This function implements the original Soundex algorithm, not
            the more popular enhanced version (also described by D.
            Knuth). The difference is that original version discards
            vowels first and duplicates second, whereas the enhanced
            version discards duplicates first and vowels second.
</p>
</div>
</li><li class="listitem"><p><a name="operator_sounds-like"></a>
          <a class="indexterm" name="idp62251232"></a>

          <a class="link" href="functions.html#operator_sounds-like"><code class="literal"><em class="replaceable"><code>expr1</code></em>
          SOUNDS LIKE <em class="replaceable"><code>expr2</code></em></code></a>
        </p><p>
          This is the same as
          <a class="link" href="functions.html#function_soundex"><code class="literal">SOUNDEX(<em class="replaceable"><code>expr1</code></em>)
          = SOUNDEX(<em class="replaceable"><code>expr2</code></em>)</code></a>.
        </p></li><li class="listitem"><p><a name="function_space"></a>
          <a class="indexterm" name="idp62259808"></a>

          <a class="link" href="functions.html#function_space"><code class="literal">SPACE(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          Returns a string consisting of <em class="replaceable"><code>N</code></em>
          space characters.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SPACE(6);</code></strong>
        -&gt; '      '
</pre></li><li class="listitem"><p><a name="function_substr"></a>
          <a class="indexterm" name="idp62268848"></a>

          <a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>)</code></a>,
          <a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em>)</code></a>,
          <a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>,
          <a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em> FOR
          <em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_substr"><code class="literal">SUBSTR()</code></a> is a synonym for
          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a>.
        </p></li><li class="listitem"><p><a name="function_substring"></a>
          <a class="indexterm" name="idp62283264"></a>

          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>)</code></a>,
          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em>)</code></a>,
          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pos</code></em>,<em class="replaceable"><code>len</code></em>)</code></a>,
          <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING(<em class="replaceable"><code>str</code></em>
          FROM <em class="replaceable"><code>pos</code></em> FOR
          <em class="replaceable"><code>len</code></em>)</code></a>
        </p><p>
          The forms without a <em class="replaceable"><code>len</code></em> argument
          return a substring from string <em class="replaceable"><code>str</code></em>
          starting at position <em class="replaceable"><code>pos</code></em>. The forms
          with a <em class="replaceable"><code>len</code></em> argument return a
          substring <em class="replaceable"><code>len</code></em> characters long from
          string <em class="replaceable"><code>str</code></em>, starting at position
          <em class="replaceable"><code>pos</code></em>. The forms that use
          <code class="literal">FROM</code> are standard SQL syntax. It is also
          possible to use a negative value for
          <em class="replaceable"><code>pos</code></em>. In this case, the beginning of
          the substring is <em class="replaceable"><code>pos</code></em> characters
          from the end of the string, rather than the beginning. A
          negative value may be used for <em class="replaceable"><code>pos</code></em>
          in any of the forms of this function.
        </p><p>
          For all forms of <a class="link" href="functions.html#function_substring"><code class="literal">SUBSTRING()</code></a>,
          the position of the first character in the string from which
          the substring is to be extracted is reckoned as
          <code class="literal">1</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING('Quadratically',5);</code></strong>
        -&gt; 'ratically'
mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING('foobarbar' FROM 4);</code></strong>
        -&gt; 'barbar'
mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING('Quadratically',5,6);</code></strong>
        -&gt; 'ratica'
mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING('Sakila', -3);</code></strong>
        -&gt; 'ila'
mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING('Sakila', -5, 3);</code></strong>
        -&gt; 'aki'
mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING('Sakila' FROM -4 FOR 2);</code></strong>
        -&gt; 'ki'
</pre><p>
          This function is multi-byte safe.
        </p><p>
          If <em class="replaceable"><code>len</code></em> is less than 1, the result
          is the empty string.
        </p></li><li class="listitem"><p><a name="function_substring-index"></a>
          <a class="indexterm" name="idp62310656"></a>

          <a class="link" href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>delim</code></em>,<em class="replaceable"><code>count</code></em>)</code></a>
        </p><p>
          Returns the substring from string
          <em class="replaceable"><code>str</code></em> before
          <em class="replaceable"><code>count</code></em> occurrences of the delimiter
          <em class="replaceable"><code>delim</code></em>. If
          <em class="replaceable"><code>count</code></em> is positive, everything to
          the left of the final delimiter (counting from the left) is
          returned. If <em class="replaceable"><code>count</code></em> is negative,
          everything to the right of the final delimiter (counting from
          the right) is returned.
          <a class="link" href="functions.html#function_substring-index"><code class="literal">SUBSTRING_INDEX()</code></a> performs a
          case-sensitive match when searching for
          <em class="replaceable"><code>delim</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING_INDEX('www.mysql.com', '.', 2);</code></strong>
        -&gt; 'www.mysql'
mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING_INDEX('www.mysql.com', '.', -2);</code></strong>
        -&gt; 'mysql.com'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_to-base64"></a>
          <a class="indexterm" name="idp62325312"></a>

          <a class="link" href="functions.html#function_to-base64"><code class="literal">TO_BASE64(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Converts the string argument to base-64 encoded form and
          returns the result as a character string with the connection
          character set and collation. If the argument is not a string,
          it is converted to a string before conversion takes place. The
          result is <code class="literal">NULL</code> if the argument is
          <code class="literal">NULL</code>. Base-64 encoded strings can be
          decoded using the the
          <a class="link" href="functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a> function.
        </p><p>
          This function was added in MySQL 5.6.1.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_BASE64('abc'), FROM_BASE64(TO_BASE64('abc'));</code></strong>
        -&gt; 'JWJj', 'abc'
</pre><p>
          Different base-64 encoding schemes exist. These are the
          encoding and decoding rules used by
          <a class="link" href="functions.html#function_to-base64"><code class="literal">TO_BASE64()</code></a> and
          <a class="link" href="functions.html#function_from-base64"><code class="literal">FROM_BASE64()</code></a>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              The encoding for alphabet value 62 is
              <code class="literal">'+'</code>.
            </p></li><li class="listitem"><p>
              The encoding for alphabet value 63 is
              <code class="literal">'/'</code>.
            </p></li><li class="listitem"><p>
              Encoded output consists of groups of 4 printable
              characters. Each 3 bytes of the input data are encoded
              using 4 characters. If the last group is incomplete, it is
              padded with <code class="literal">'='</code> characters to a length
              of 4.
            </p></li><li class="listitem"><p>
              A newline is added after each 76 characters of encoded
              output to divide long output into multiple lines.
            </p></li><li class="listitem"><p>
              Decoding recognizes and ignores newline, carriage return,
              tab, and space.
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="function_trim"></a>
          <a class="indexterm" name="idp62347136"></a>

          <a class="link" href="functions.html#function_trim"><code class="literal">TRIM([{BOTH | LEADING | TRAILING}
          [<em class="replaceable"><code>remstr</code></em>] FROM]
          <em class="replaceable"><code>str</code></em>)</code></a>,
          <a class="link" href="functions.html#function_trim"><code class="literal">TRIM([<em class="replaceable"><code>remstr</code></em>
          FROM] <em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with all
          <em class="replaceable"><code>remstr</code></em> prefixes or suffixes
          removed. If none of the specifiers <code class="literal">BOTH</code>,
          <code class="literal">LEADING</code>, or <code class="literal">TRAILING</code> is
          given, <code class="literal">BOTH</code> is assumed.
          <em class="replaceable"><code>remstr</code></em> is optional and, if not
          specified, spaces are removed.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TRIM('  bar   ');</code></strong>
        -&gt; 'bar'
mysql&gt; <strong class="userinput"><code>SELECT TRIM(LEADING 'x' FROM 'xxxbarxxx');</code></strong>
        -&gt; 'barxxx'
mysql&gt; <strong class="userinput"><code>SELECT TRIM(BOTH 'x' FROM 'xxxbarxxx');</code></strong>
        -&gt; 'bar'
mysql&gt; <strong class="userinput"><code>SELECT TRIM(TRAILING 'xyz' FROM 'barxxyz');</code></strong>
        -&gt; 'barx'
</pre><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_ucase"></a>
          <a class="indexterm" name="idp62365024"></a>

          <a class="link" href="functions.html#function_ucase"><code class="literal">UCASE(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_ucase"><code class="literal">UCASE()</code></a> is a synonym for
          <a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a>.
        </p></li><li class="listitem"><p><a name="function_unhex"></a>
          <a class="indexterm" name="idp62374400"></a>

          <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          For a string argument <em class="replaceable"><code>str</code></em>,
          <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX(<em class="replaceable"><code>str</code></em>)</code></a>
          performs the inverse operation of
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>str</code></em>)</code></a>.
          That is, it interprets each pair of characters in the argument
          as a hexadecimal number and converts it to the character
          represented by the number. The return value is a binary
          string.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UNHEX('4D7953514C');</code></strong>
        -&gt; 'MySQL'
mysql&gt; <strong class="userinput"><code>SELECT 0x4D7953514C;</code></strong>
        -&gt; 'MySQL'
mysql&gt; <strong class="userinput"><code>SELECT UNHEX(HEX('string'));</code></strong>
        -&gt; 'string'
mysql&gt; <strong class="userinput"><code>SELECT HEX(UNHEX('1267'));</code></strong>
        -&gt; '1267'
</pre><p>
          The characters in the argument string must be legal
          hexadecimal digits: <code class="literal">'0'</code> ..
          <code class="literal">'9'</code>, <code class="literal">'A'</code> ..
          <code class="literal">'F'</code>, <code class="literal">'a'</code> ..
          <code class="literal">'f'</code>. If the argument contains any
          nonhexadecimal digits, the result is <code class="literal">NULL</code>:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UNHEX('GG');</code></strong>
+-------------+
| UNHEX('GG') |
+-------------+
| NULL        |
+-------------+
</pre><p>
          A <code class="literal">NULL</code> result can occur if the argument to
          <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a> is a
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a> column, because values
          are padded with 0x00 bytes when stored but those bytes are not
          stripped on retrieval. For example, <code class="literal">'41'</code> is
          stored into a <code class="literal">CHAR(3)</code> column as
          <code class="literal">'41 '</code> and retrieved as
          <code class="literal">'41'</code> (with the trailing pad space
          stripped), so <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a> for the
          column value returns <code class="literal">'A'</code>. By contrast
          <code class="literal">'41'</code> is stored into a
          <code class="literal">BINARY(3)</code> column as
          <code class="literal">'41\0'</code> and retrieved as
          <code class="literal">'41\0'</code> (with the trailing pad
          <code class="literal">0x00</code> byte not stripped).
          <code class="literal">'\0'</code> is not a legal hexadecimal digit, so
          <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a> for the column value
          returns <code class="literal">NULL</code>.
        </p><p>
          For a numeric argument <em class="replaceable"><code>N</code></em>, the
          inverse of
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX(<em class="replaceable"><code>N</code></em>)</code></a>
          is not performed by <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a>.
          Use
          <a class="link" href="functions.html#function_conv"><code class="literal">CONV(HEX(<em class="replaceable"><code>N</code></em>),16,10)</code></a>
          instead. See the description of
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a>.
        </p></li><li class="listitem"><p><a name="function_upper"></a>
          <a class="indexterm" name="idp62412944"></a>

          <a class="link" href="functions.html#function_upper"><code class="literal">UPPER(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the string <em class="replaceable"><code>str</code></em> with all
          characters changed to uppercase according to the current
          character set mapping. The default is
          <code class="literal">latin1</code> (cp1252 West European).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UPPER('Hej');</code></strong>
        -&gt; 'HEJ'
</pre><p>
          See the description of <a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a>
          for information that also applies to
          <a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a>. This included
          information about how to perform lettercase conversion of
          binary strings (<a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>,
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a>) for which these functions
          are ineffective, and information about case folding for
          Unicode character sets.
        </p><p>
          This function is multi-byte safe.
        </p></li><li class="listitem"><p><a name="function_weight-string"></a>
          <a class="indexterm" name="idp62427664"></a>

          <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str</code></em>
          [AS {CHAR|BINARY}(<em class="replaceable"><code>N</code></em>)] [LEVEL
          <em class="replaceable"><code>levels</code></em>]
          [<em class="replaceable"><code>flags</code></em>])</code></a>
        </p><p>
          <code class="literal"><em class="replaceable"><code>levels</code></em>:
          <em class="replaceable"><code>N</code></em> [ASC|DESC|REVERSE] [,
          <em class="replaceable"><code>N</code></em> [ASC|DESC|REVERSE]] ...</code>
        </p><p>
          This function returns the weight string for the input string.
          The return value is a binary string that represents the
          sorting and comparison value of the string. It has these
          properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              If
              <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str1</code></em>)</code></a>
              =
              <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str2</code></em>)</code></a>,
              then <code class="literal"><em class="replaceable"><code>str1</code></em> =
              <em class="replaceable"><code>str2</code></em></code>
              (<em class="replaceable"><code>str1</code></em> and
              <em class="replaceable"><code>str2</code></em> are considered equal)
            </p></li><li class="listitem"><p>
              If
              <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str1</code></em>)</code></a>
              &lt;
              <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING(<em class="replaceable"><code>str2</code></em>)</code></a>,
              then <code class="literal"><em class="replaceable"><code>str1</code></em> &lt;
              <em class="replaceable"><code>str2</code></em></code>
              (<em class="replaceable"><code>str1</code></em> sorts before
              <em class="replaceable"><code>str2</code></em>)
</p></li></ul>
</div>
<p>
          <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a> can be used for
          testing and debugging of collations, especially if you are
          adding a new collation. See
          <a class="xref" href="globalization.html#adding-collation" title="10.4. Adding a Collation to a Character Set">Section 10.4, “Adding a Collation to a Character Set”</a>.
        </p><p>
          The input string, <em class="replaceable"><code>str</code></em>, is a string
          expression. If the input is a nonbinary (character) string
          such as a <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>, or
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">TEXT</code></a> value, the return value
          contains the collation weights for the string. If the input is
          a binary (byte) string such as a
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, or
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> value, the return value is
          the same as the input (the weight for each byte in a binary
          string is the byte value). If the input is
          <code class="literal">NULL</code>,
          <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a> returns
          <code class="literal">NULL</code>.
        </p><p>
          Examples:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = _latin1 'AB' COLLATE latin1_swedish_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong>
+------+---------+------------------------+
| @s   | HEX(@s) | HEX(WEIGHT_STRING(@s)) |
+------+---------+------------------------+
| AB   | 4142    | 4142                   |
+------+---------+------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = _latin1 'ab' COLLATE latin1_swedish_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong>
+------+---------+------------------------+
| @s   | HEX(@s) | HEX(WEIGHT_STRING(@s)) |
+------+---------+------------------------+
| ab   | 6162    | 4142                   |
+------+---------+------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = CAST('AB' AS BINARY);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong>
+------+---------+------------------------+
| @s   | HEX(@s) | HEX(WEIGHT_STRING(@s)) |
+------+---------+------------------------+
| AB   | 4142    | 4142                   |
+------+---------+------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = CAST('ab' AS BINARY);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));</code></strong>
+------+---------+------------------------+
| @s   | HEX(@s) | HEX(WEIGHT_STRING(@s)) |
+------+---------+------------------------+
| ab   | 6162    | 6162                   |
+------+---------+------------------------+
</pre><p>
          The preceding examples use
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a> to display the
          <a class="link" href="functions.html#function_weight-string"><code class="literal">WEIGHT_STRING()</code></a> result. Because
          the result is a binary value,
          <a class="link" href="functions.html#function_hex"><code class="literal">HEX()</code></a> can be especially useful
          when the result contains nonprinting values, to display it in
          printable form:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = CONVERT(0xC39F USING utf8) COLLATE utf8_czech_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(@s));</code></strong>
+------------------------+
| HEX(WEIGHT_STRING(@s)) |
+------------------------+
| 0FEA0FEA               |
+------------------------+
</pre><p>
          For non-<code class="literal">NULL</code> return values, the data type
          of the value is <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a> if
          its length is within the maximum length for
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>, otherwise the data
          type is <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a>.
        </p><p>
          The <code class="literal">AS</code> clause may be given to cast the
          input string to a nonbinary or binary string and to force it
          to a given length:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">AS CHAR(<em class="replaceable"><code>N</code></em>)</code>
              casts the string to a nonbinary string and pads it on the
              right with spaces to a length of
              <em class="replaceable"><code>N</code></em> characters.
              <em class="replaceable"><code>N</code></em> must be at least 1. If
              <em class="replaceable"><code>N</code></em> is less than the length of
              the input string, the string is truncated to
              <em class="replaceable"><code>N</code></em> characters. No warning occurs
              for truncation.
            </p></li><li class="listitem"><p>
              <code class="literal">AS BINARY(<em class="replaceable"><code>N</code></em>)</code>
              is similar but casts the string to a binary string,
              <em class="replaceable"><code>N</code></em> is measured in bytes (not
              characters), and padding uses <code class="literal">0x00</code>
              bytes (not spaces).
</p></li></ul>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('ab' AS CHAR(4)));</code></strong>
+-------------------------------------+
| HEX(WEIGHT_STRING('ab' AS CHAR(4))) |
+-------------------------------------+
| 41422020                            |
+-------------------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('ab' AS BINARY(4)));</code></strong>
+---------------------------------------+
| HEX(WEIGHT_STRING('ab' AS BINARY(4))) |
+---------------------------------------+
| 61620000                              |
+---------------------------------------+
</pre><p>
          The <code class="literal">LEVEL</code> clause may be given to specify
          that the return value should contain weights for specific
          collation levels.
        </p><p>
          The <em class="replaceable"><code>levels</code></em> specifier following the
          <code class="literal">LEVEL</code> keyword may be given either as a list
          of one or more integers separated by commas, or as a range of
          two integers separated by a dash. Whitespace around the
          punctuation characters does not matter.
        </p><p>
          Examples:
        </p><pre class="programlisting">LEVEL 1
LEVEL 2, 3, 5
LEVEL 1-3</pre><p>
          Any level less than 1 is treated as 1. Any level greater than
          the maximum for the input string collation is treated as
          maximum for the collation. The maximum varies per collation,
          but is never greater than 6.
        </p><p>
          In a list of levels, levels must be given in increasing order.
          In a range of levels, if the second number is less than the
          first, it is treated as the first number (for example, 4-2 is
          the same as 4-4).
        </p><p>
          If the <code class="literal">LEVEL</code> clause is omitted, MySQL
          assumes <code class="literal">LEVEL 1 -
          <em class="replaceable"><code>max</code></em></code>, where
          <em class="replaceable"><code>max</code></em> is the maximum level for the
          collation.
        </p><p>
          If <code class="literal">LEVEL</code> is specified using list syntax
          (not range syntax), any level number can be followed by these
          modifiers:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">ASC</code>: Return the weights without
              modification. This is the default.
            </p></li><li class="listitem"><p>
              <code class="literal">DESC</code>: Return bitwise-inverted weights
              (for example, <code class="literal">0x78f0 DESC</code> =
              <code class="literal">0x870f</code>).
            </p></li><li class="listitem"><p>
              <code class="literal">REVERSE</code>: Return the weights in reverse
              order (that is,the weights for the reversed string, with
              the first character last and the last first).
</p></li></ul>
</div>
<p>
          Examples:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1));</code></strong>
+--------------------------------------+
| HEX(WEIGHT_STRING(0x007fff LEVEL 1)) |
+--------------------------------------+
| 007FFF                               |
+--------------------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1 DESC));</code></strong>
+-------------------------------------------+
| HEX(WEIGHT_STRING(0x007fff LEVEL 1 DESC)) |
+-------------------------------------------+
| FF8000                                    |
+-------------------------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1 REVERSE));</code></strong>
+----------------------------------------------+
| HEX(WEIGHT_STRING(0x007fff LEVEL 1 REVERSE)) |
+----------------------------------------------+
| FF7F00                                       |
+----------------------------------------------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(0x007fff LEVEL 1 DESC REVERSE));</code></strong>
+---------------------------------------------------+
| HEX(WEIGHT_STRING(0x007fff LEVEL 1 DESC REVERSE)) |
+---------------------------------------------------+
| 0080FF                                            |
+---------------------------------------------------+
</pre><p>
          The <em class="replaceable"><code>flags</code></em> clause currently is
          unused.
</p></li></ul>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="string-comparison-functions"></a>12.5.1. String Comparison Functions</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp62514160"></a><a class="indexterm" name="idp62515248"></a>
<div class="table">
<a name="idp62516736"></a><p class="title"><b>Table 12.8. String Comparison Operators</b></p>
<div class="table-contents">
<table summary="String Comparison Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a></td><td>Simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_not-like"><code class="literal">NOT LIKE</code></a></td><td>Negation of simple pattern matching</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP()</code></a></td><td>Compare two strings</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        If a string function is given a binary string as an argument,
        the resulting string is also a binary string. A number converted
        to a string is treated as a binary string. This affects only
        comparisons.
      </p><a class="indexterm" name="idp62527040"></a><a class="indexterm" name="idp62528528"></a><p>
        Normally, if any expression in a string comparison is case
        sensitive, the comparison is performed in case-sensitive
        fashion.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_like"></a>
            <a class="indexterm" name="idp62533648"></a>

            <a class="link" href="functions.html#operator_like"><code class="literal"><em class="replaceable"><code>expr</code></em>
            LIKE <em class="replaceable"><code>pat</code></em> [ESCAPE
            '<em class="replaceable"><code>escape_char</code></em>']</code></a>
          </p><p>
            Pattern matching using SQL simple regular expression
            comparison. Returns <code class="literal">1</code>
            (<code class="literal">TRUE</code>) or <code class="literal">0</code>
            (<code class="literal">FALSE</code>). If either
            <em class="replaceable"><code>expr</code></em> or
            <em class="replaceable"><code>pat</code></em> is <code class="literal">NULL</code>,
            the result is <code class="literal">NULL</code>.
          </p><p>
            The pattern need not be a literal string. For example, it
            can be specified as a string expression or table column.
          </p><p>
            Per the SQL standard, <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a>
            performs matching on a per-character basis, thus it can
            produce results different from the
            <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a> comparison
            operator:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'ä' LIKE 'ae' COLLATE latin1_german2_ci;</code></strong>
+-----------------------------------------+
| 'ä' LIKE 'ae' COLLATE latin1_german2_ci |
+-----------------------------------------+
|                                       0 |
+-----------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT 'ä' = 'ae' COLLATE latin1_german2_ci;</code></strong>
+--------------------------------------+
| 'ä' = 'ae' COLLATE latin1_german2_ci |
+--------------------------------------+
|                                    1 |
+--------------------------------------+
</pre><p>
            In particular, trailing spaces are significant, which is not
            true for <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> or
            <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> comparisons performed
            with the <a class="link" href="functions.html#operator_equal"><code class="literal">=</code></a>
            operator:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'a' = 'a ', 'a' LIKE 'a ';</code></strong>
+------------+---------------+
| 'a' = 'a ' | 'a' LIKE 'a ' |
+------------+---------------+
|          1 |             0 |
+------------+---------------+
1 row in set (0.00 sec)
</pre><p>
            With <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> you can use the
            following two wildcard characters in the pattern.
</p>
<div class="informaltable">
<table summary="This table lists wildcard characters that can be
              used with the
              LIKE string
              comparison function and provides a description of each
character." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Character</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">%</code></td><td>Matches any number of characters, even zero characters</td></tr><tr><td scope="row"><code class="literal">_</code></td><td>Matches exactly one character</td></tr></tbody></table>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'David!' LIKE 'David_';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'David!' LIKE '%D%v%';</code></strong>
        -&gt; 1
</pre><p>
            To test for literal instances of a wildcard character,
            precede it by the escape character. If you do not specify
            the <code class="literal">ESCAPE</code> character,
            <span class="quote">“<span class="quote"><code class="literal">\</code></span>”</span> is assumed.
</p>
<div class="informaltable">
<table summary="This table lists strings that are assumed if you
              do not specify the ESCAPE character
              when testing for literal instances of wildcard characters.
A description of each string is provided." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">String</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">\%</code></td><td>Matches one <span class="quote">“<span class="quote"><code class="literal">%</code></span>”</span> character</td></tr><tr><td scope="row"><code class="literal">\_</code></td><td>Matches one <span class="quote">“<span class="quote"><code class="literal">_</code></span>”</span> character</td></tr></tbody></table>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'David!' LIKE 'David\_';</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'David_' LIKE 'David\_';</code></strong>
        -&gt; 1
</pre><p>
            To specify a different escape character, use the
            <code class="literal">ESCAPE</code> clause:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'David_' LIKE 'David|_' ESCAPE '|';</code></strong>
        -&gt; 1
</pre><p>
            The escape sequence should be empty or one character long.
            The expression must evaluate as a constant at execution
            time. If the
            <a class="link" href="server-administration.html#sqlmode_no_backslash_escapes"><code class="literal">NO_BACKSLASH_ESCAPES</code></a> SQL
            mode is enabled, the sequence cannot be empty.
          </p><p>
            The following two statements illustrate that string
            comparisons are not case sensitive unless one of the
            operands is a binary string:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'abc' LIKE 'ABC';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'abc' LIKE BINARY 'ABC';</code></strong>
        -&gt; 0
</pre><p>
            In MySQL, <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> is permitted on
            numeric expressions. (This is an extension to the standard
            SQL <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a>.)
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 10 LIKE '1%';</code></strong>
        -&gt; 1
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
              Because MySQL uses C escape syntax in strings (for
              example, <span class="quote">“<span class="quote"><code class="literal">\n</code></span>”</span> to represent
              a newline character), you must double any
              <span class="quote">“<span class="quote"><code class="literal">\</code></span>”</span> that you use in
              <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> strings. For example, to
              search for <span class="quote">“<span class="quote"><code class="literal">\n</code></span>”</span>, specify
              it as <span class="quote">“<span class="quote"><code class="literal">\\n</code></span>”</span>. To search for
              <span class="quote">“<span class="quote"><code class="literal">\</code></span>”</span>, specify it as
              <span class="quote">“<span class="quote"><code class="literal">\\\\</code></span>”</span>; this is because
              the backslashes are stripped once by the parser and again
              when the pattern match is made, leaving a single backslash
              to be matched against.
            </p><p xmlns="">
              Exception: At the end of the pattern string, backslash can
              be specified as <span class="quote">“<span class="quote"><code class="literal">\\</code></span>”</span>. At
              the end of the string, backslash stands for itself because
              there is nothing following to escape. Suppose that a table
              contains the following values:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT filename FROM t1;</code></strong>
+--------------+
| filename     |
+--------------+
| C:           | 
| C:\          | 
| C:\Programs  | 
| C:\Programs\ | 
+--------------+
</pre><p xmlns="">
              To test for values that end with backslash, you can match
              the values using either of the following patterns:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT filename, filename LIKE '%\\' FROM t1;</code></strong>
+--------------+---------------------+
| filename     | filename LIKE '%\\' |
+--------------+---------------------+
| C:           |                   0 | 
| C:\          |                   1 | 
| C:\Programs  |                   0 | 
| C:\Programs\ |                   1 | 
+--------------+---------------------+

mysql&gt; <strong class="userinput"><code>SELECT filename, filename LIKE '%\\\\' FROM t1;</code></strong>
+--------------+-----------------------+
| filename     | filename LIKE '%\\\\' |
+--------------+-----------------------+
| C:           |                     0 | 
| C:\          |                     1 | 
| C:\Programs  |                     0 | 
| C:\Programs\ |                     1 | 
+--------------+-----------------------+
</pre>
</div>
</li><li class="listitem"><p><a name="operator_not-like"></a>
            <a class="indexterm" name="idp62608880"></a>

            <a class="link" href="functions.html#operator_not-like"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT LIKE <em class="replaceable"><code>pat</code></em> [ESCAPE
            '<em class="replaceable"><code>escape_char</code></em>']</code></a>
          </p><p>
            This is the same as <code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> LIKE
            <em class="replaceable"><code>pat</code></em> [ESCAPE
            '<em class="replaceable"><code>escape_char</code></em>'])</code>.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
              Aggregate queries involving <a class="link" href="functions.html#operator_not-like"><code class="literal">NOT
              LIKE</code></a> comparisons with columns containing
              <code class="literal">NULL</code> may yield unexpected results. For
              example, consider the following table and data:
            </p><pre class="programlisting">CREATE TABLE foo (bar VARCHAR(10));

INSERT INTO foo VALUES (NULL), (NULL);</pre><p xmlns="">
              The query <code class="literal">SELECT COUNT(*) FROM foo WHERE bar LIKE
              '%baz%';</code> returns <code class="literal">0</code>. You might
              assume that <code class="literal">SELECT COUNT(*) FROM foo WHERE bar
              NOT LIKE '%baz%';</code> would return
              <code class="literal">2</code>. However, this is not the case: The
              second query returns <code class="literal">0</code>. This is because
              <code class="literal">NULL NOT LIKE
              <em class="replaceable"><code>expr</code></em></code> always returns
              <code class="literal">NULL</code>, regardless of the value of
              <em class="replaceable"><code>expr</code></em>. The same is true for
              aggregate queries involving <code class="literal">NULL</code> and
              comparisons using
              <a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT
              RLIKE</code></a> or <a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT
              REGEXP</code></a>. In such cases, you must test explicitly
              for <code class="literal">NOT NULL</code> using
              <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> (and not
              <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a>), as shown here:
</p><pre class="programlisting">SELECT COUNT(*) FROM foo WHERE bar NOT LIKE '%baz%' OR bar IS NULL;</pre>
</div>
</li><li class="listitem"><p><a name="function_strcmp"></a>
            <a class="indexterm" name="idp62633616"></a>

            <a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
          </p><p>
            <a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP()</code></a> returns
            <code class="literal">0</code> if the strings are the same,
            <code class="literal">-1</code> if the first argument is smaller than
            the second according to the current sort order, and
            <code class="literal">1</code> otherwise.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT STRCMP('text', 'text2');</code></strong>
        -&gt; -1
mysql&gt; <strong class="userinput"><code>SELECT STRCMP('text2', 'text');</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT STRCMP('text', 'text');</code></strong>
        -&gt; 0
</pre><p>
            <a class="link" href="functions.html#function_strcmp"><code class="literal">STRCMP()</code></a> performs the
            comparison using the collation of the arguments.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s1 = _latin1 'x' COLLATE latin1_general_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @s2 = _latin1 'X' COLLATE latin1_general_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @s3 = _latin1 'x' COLLATE latin1_general_cs;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @s4 = _latin1 'X' COLLATE latin1_general_cs;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT STRCMP(@s1, @s2), STRCMP(@s3, @s4);</code></strong>
+------------------+------------------+
| STRCMP(@s1, @s2) | STRCMP(@s3, @s4) |
+------------------+------------------+
|                0 |                1 |
+------------------+------------------+
</pre><p>
            If the collations are incompatible, one of the arguments
            must be converted to be compatible with the other. See
            <a class="xref" href="globalization.html#charset-collation-expressions" title="10.1.7.5. Collation of Expressions">Section 10.1.7.5, “Collation of Expressions”</a>.
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT STRCMP(@s1, @s3);</code></strong>
ERROR 1267 (HY000) at line 10: Illegal mix of collations (latin1_general_ci,IMPLICIT) and (latin1_general_cs,IMPLICIT) for operation 'strcmp'
mysql&gt; <strong class="userinput"><code>SELECT STRCMP(@s1, @s3 COLLATE latin1_general_ci);</code></strong>
+--------------------------------------------+
| STRCMP(@s1, @s3 COLLATE latin1_general_ci) |
+--------------------------------------------+
|                                          0 |
+--------------------------------------------+
</pre></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="regexp"></a>12.5.2. Regular Expressions</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp62655968"></a><a class="indexterm" name="idp62657040"></a><a class="indexterm" name="idp62658112"></a><a class="indexterm" name="idp62659200"></a>
<div class="table">
<a name="idp62660688"></a><p class="title"><b>Table 12.9. String Regular Expression Operators</b></p>
<div class="table-contents">
<table summary="String Regular Expression Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_not-regexp"><code class="literal">NOT REGEXP</code></a></td><td>Negation of REGEXP</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a></td><td>Pattern matching using regular expressions</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a></td><td>Synonym for REGEXP</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        A regular expression is a powerful way of specifying a pattern
        for a complex search.
      </p><p>
        MySQL uses Henry Spencer's implementation of regular
        expressions, which is aimed at conformance with POSIX 1003.2.
        MySQL uses the extended version to support pattern-matching
        operations performed with the
        <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> operator in SQL statements.
      </p><p>
        This section summarizes, with examples, the special characters
        and constructs that can be used in MySQL for
        <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> operations. It does not
        contain all the details that can be found in Henry Spencer's
        <code class="literal">regex(7)</code> manual page. That manual page is
        included in MySQL source distributions, in the
        <code class="filename">regex.7</code> file under the
        <code class="filename">regex</code> directory. See also
        <a class="xref" href="tutorial.html#pattern-matching" title="3.3.4.7. Pattern Matching">Section 3.3.4.7, “Pattern Matching”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_not-regexp"></a>
            <a class="indexterm" name="idp62678224"></a>

            <a class="link" href="functions.html#operator_not-regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT REGEXP <em class="replaceable"><code>pat</code></em></code></a>,
            <a class="link" href="functions.html#operator_not-regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
            NOT RLIKE <em class="replaceable"><code>pat</code></em></code></a>
          </p><p>
            This is the same as <code class="literal">NOT
            (<em class="replaceable"><code>expr</code></em> REGEXP
            <em class="replaceable"><code>pat</code></em>)</code>.
          </p></li><li class="listitem"><p><a name="operator_regexp"></a>
            <a class="indexterm" name="idp62688704"></a>

            <a class="indexterm" name="idp62689776"></a>

            <a class="indexterm" name="idp62691264"></a>

            <a class="indexterm" name="idp62692336"></a>

            <a class="link" href="functions.html#operator_regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
            REGEXP <em class="replaceable"><code>pat</code></em></code></a>,
            <a class="link" href="functions.html#operator_regexp"><code class="literal"><em class="replaceable"><code>expr</code></em>
            RLIKE <em class="replaceable"><code>pat</code></em></code></a>
          </p><p>
            Performs a pattern match of a string expression
            <em class="replaceable"><code>expr</code></em> against a pattern
            <em class="replaceable"><code>pat</code></em>. The pattern can be an
            extended regular expression. The syntax for regular
            expressions is discussed in <a class="xref" href="functions.html#regexp" title="12.5.2. Regular Expressions">Section 12.5.2, “Regular Expressions”</a>.
            Returns <code class="literal">1</code> if
            <em class="replaceable"><code>expr</code></em> matches
            <em class="replaceable"><code>pat</code></em>; otherwise it returns
            <code class="literal">0</code>. If either
            <em class="replaceable"><code>expr</code></em> or
            <em class="replaceable"><code>pat</code></em> is <code class="literal">NULL</code>,
            the result is <code class="literal">NULL</code>.
            <a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a> is a
            synonym for <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a>, provided
            for <code class="literal">mSQL</code> compatibility.
          </p><p>
            The pattern need not be a literal string. For example, it
            can be specified as a string expression or table column.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
              Because MySQL uses the C escape syntax in strings (for
              example, <span class="quote">“<span class="quote"><code class="literal">\n</code></span>”</span> to represent
              the newline character), you must double any
              <span class="quote">“<span class="quote"><code class="literal">\</code></span>”</span> that you use in your
              <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> strings.
</p>
</div>
<p>
            <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> is not case sensitive,
            except when used with binary strings.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'Monty!' REGEXP '.*';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'new*\n*line' REGEXP 'new\\*.\\*line';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'a' REGEXP 'A', 'a' REGEXP BINARY 'A';</code></strong>
        -&gt; 1  0
mysql&gt; <strong class="userinput"><code>SELECT 'a' REGEXP '^[a-d]';</code></strong>
        -&gt; 1
</pre><p>
            <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> and
            <a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a> use
            the character set and collations of the arguments when
            deciding the type of a character and performing the
            comparison. If the arguments have different character sets
            or collations, coercibility rules apply as described in
            <a class="xref" href="globalization.html#charset-collation-expressions" title="10.1.7.5. Collation of Expressions">Section 10.1.7.5, “Collation of Expressions”</a>.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p xmlns="">
              The <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a> and
              <a class="link" href="functions.html#operator_regexp"><code class="literal">RLIKE</code></a>
              operators work in byte-wise fashion, so they are not
              multi-byte safe and may produce unexpected results with
              multi-byte character sets. In addition, these operators
              compare characters by their byte values and accented
              characters may not compare as equal even if a given
              collation treats them as equal.
</p>
</div>
</li></ul>
</div>
<p>
        A regular expression describes a set of strings. The simplest
        regular expression is one that has no special characters in it.
        For example, the regular expression <code class="literal">hello</code>
        matches <code class="literal">hello</code> and nothing else.
      </p><p>
        Nontrivial regular expressions use certain special constructs so
        that they can match more than one string. For example, the
        regular expression <code class="literal">hello|word</code> matches either
        the string <code class="literal">hello</code> or the string
        <code class="literal">word</code>.
      </p><p>
        As a more complex example, the regular expression
        <code class="literal">B[an]*s</code> matches any of the strings
        <code class="literal">Bananas</code>, <code class="literal">Baaaaas</code>,
        <code class="literal">Bs</code>, and any other string starting with a
        <code class="literal">B</code>, ending with an <code class="literal">s</code>, and
        containing any number of <code class="literal">a</code> or
        <code class="literal">n</code> characters in between.
      </p><p>
        A regular expression for the <a class="link" href="functions.html#operator_regexp"><code class="literal">REGEXP</code></a>
        operator may use any of the following special characters and
        constructs:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">^</code>
          </p><p>
            Match the beginning of a string.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'fo\nfo' REGEXP '^fo$';</code></strong>                   -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'fofo' REGEXP '^fo';</code></strong>                      -&gt; 1
</pre></li><li class="listitem"><p>
            <code class="literal">$</code>
          </p><p>
            Match the end of a string.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'fo\no' REGEXP '^fo\no$';</code></strong>                 -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'fo\no' REGEXP '^fo$';</code></strong>                    -&gt; 0
</pre></li><li class="listitem"><p>
            <code class="literal">.</code>
          </p><p>
            Match any character (including carriage return and newline).
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'fofo' REGEXP '^f.*$';</code></strong>                    -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'fo\r\nfo' REGEXP '^f.*$';</code></strong>                -&gt; 1
</pre></li><li class="listitem"><p>
            <code class="literal">a*</code>
          </p><p>
            Match any sequence of zero or more <code class="literal">a</code>
            characters.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'Ban' REGEXP '^Ba*n';</code></strong>                     -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'Baaan' REGEXP '^Ba*n';</code></strong>                   -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'Bn' REGEXP '^Ba*n';</code></strong>                      -&gt; 1
</pre></li><li class="listitem"><p>
            <code class="literal">a+</code>
          </p><p>
            Match any sequence of one or more <code class="literal">a</code>
            characters.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'Ban' REGEXP '^Ba+n';</code></strong>                     -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'Bn' REGEXP '^Ba+n';</code></strong>                      -&gt; 0
</pre></li><li class="listitem"><p>
            <code class="literal">a?</code>
          </p><p>
            Match either zero or one <code class="literal">a</code> character.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'Bn' REGEXP '^Ba?n';</code></strong>                      -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'Ban' REGEXP '^Ba?n';</code></strong>                     -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'Baan' REGEXP '^Ba?n';</code></strong>                    -&gt; 0
</pre></li><li class="listitem"><p>
            <code class="literal">de|abc</code>
          </p><p>
            Match either of the sequences <code class="literal">de</code> or
            <code class="literal">abc</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'pi' REGEXP 'pi|apa';</code></strong>                     -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'axe' REGEXP 'pi|apa';</code></strong>                    -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'apa' REGEXP 'pi|apa';</code></strong>                    -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'apa' REGEXP '^(pi|apa)$';</code></strong>                -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'pi' REGEXP '^(pi|apa)$';</code></strong>                 -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'pix' REGEXP '^(pi|apa)$';</code></strong>                -&gt; 0
</pre></li><li class="listitem"><p>
            <code class="literal">(abc)*</code>
          </p><p>
            Match zero or more instances of the sequence
            <code class="literal">abc</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'pi' REGEXP '^(pi)*$';</code></strong>                    -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'pip' REGEXP '^(pi)*$';</code></strong>                   -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'pipi' REGEXP '^(pi)*$';</code></strong>                  -&gt; 1
</pre></li><li class="listitem"><p>
            <code class="literal">{1}</code>, <code class="literal">{2,3}</code>
          </p><p>
            <code class="literal">{n}</code> or <code class="literal">{m,n}</code> notation
            provides a more general way of writing regular expressions
            that match many occurrences of the previous atom (or
            <span class="quote">“<span class="quote">piece</span>”</span>) of the pattern. <code class="literal">m</code>
            and <code class="literal">n</code> are integers.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">a*</code>
              </p><p>
                Can be written as <code class="literal">a{0,}</code>.
              </p></li><li class="listitem"><p>
                <code class="literal">a+</code>
              </p><p>
                Can be written as <code class="literal">a{1,}</code>.
              </p></li><li class="listitem"><p>
                <code class="literal">a?</code>
              </p><p>
                Can be written as <code class="literal">a{0,1}</code>.
</p></li></ul>
</div>
<p>
            To be more precise, <code class="literal">a{n}</code> matches exactly
            <code class="literal">n</code> instances of <code class="literal">a</code>.
            <code class="literal">a{n,}</code> matches <code class="literal">n</code> or
            more instances of <code class="literal">a</code>.
            <code class="literal">a{m,n}</code> matches <code class="literal">m</code>
            through <code class="literal">n</code> instances of
            <code class="literal">a</code>, inclusive.
          </p><p>
            <code class="literal">m</code> and <code class="literal">n</code> must be in the
            range from <code class="literal">0</code> to
            <code class="literal">RE_DUP_MAX</code> (default 255), inclusive. If
            both <code class="literal">m</code> and <code class="literal">n</code> are
            given, <code class="literal">m</code> must be less than or equal to
            <code class="literal">n</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'abcde' REGEXP 'a[bcd]{2}e';</code></strong>              -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'abcde' REGEXP 'a[bcd]{3}e';</code></strong>              -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'abcde' REGEXP 'a[bcd]{1,10}e';</code></strong>           -&gt; 1
</pre></li><li class="listitem"><p>
            <code class="literal">[a-dX]</code>, <code class="literal">[^a-dX]</code>
          </p><p>
            Matches any character that is (or is not, if ^ is used)
            either <code class="literal">a</code>, <code class="literal">b</code>,
            <code class="literal">c</code>, <code class="literal">d</code> or
            <code class="literal">X</code>. A <code class="literal">-</code> character
            between two other characters forms a range that matches all
            characters from the first character to the second. For
            example, <code class="literal">[0-9]</code> matches any decimal digit.
            To include a literal <code class="literal">]</code> character, it must
            immediately follow the opening bracket <code class="literal">[</code>.
            To include a literal <code class="literal">-</code> character, it must
            be written first or last. Any character that does not have a
            defined special meaning inside a <code class="literal">[]</code> pair
            matches only itself.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'aXbc' REGEXP '[a-dXYZ]';</code></strong>                 -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'aXbc' REGEXP '^[a-dXYZ]$';</code></strong>               -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'aXbc' REGEXP '^[a-dXYZ]+$';</code></strong>              -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'aXbc' REGEXP '^[^a-dXYZ]+$';</code></strong>             -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'gheis' REGEXP '^[^a-dXYZ]+$';</code></strong>            -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'gheisa' REGEXP '^[^a-dXYZ]+$';</code></strong>           -&gt; 0
</pre></li><li class="listitem"><p>
            <code class="literal">[.characters.]</code>
          </p><p>
            Within a bracket expression (written using
            <code class="literal">[</code> and <code class="literal">]</code>), matches the
            sequence of characters of that collating element.
            <code class="literal">characters</code> is either a single character
            or a character name like <code class="literal">newline</code>. The
            following table lists the permissible character names.
          </p><p>
            The following table shows the permissible character names
            and the characters that they match. For characters given as
            numeric values, the values are represented in octal.
</p>
<div class="informaltable">
<table summary="This table shows permissible character names and
              matching characters. To save space, the column pairing of
              Name and Character are presented in a four column table
              format in this order: Name, Character, Name, Character.
              For characters given as numeric values, the values are
represented in octal." border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Character</th><th scope="col">Name</th><th scope="col">Character</th></tr></thead><tbody><tr><td scope="row"><code class="literal">NUL</code></td><td><code class="literal">0</code></td><td><code class="literal">SOH</code></td><td><code class="literal">001</code></td></tr><tr><td scope="row"><code class="literal">STX</code></td><td><code class="literal">002</code></td><td><code class="literal">ETX</code></td><td><code class="literal">003</code></td></tr><tr><td scope="row"><code class="literal">EOT</code></td><td><code class="literal">004</code></td><td><code class="literal">ENQ</code></td><td><code class="literal">005</code></td></tr><tr><td scope="row"><code class="literal">ACK</code></td><td><code class="literal">006</code></td><td><code class="literal">BEL</code></td><td><code class="literal">007</code></td></tr><tr><td scope="row"><code class="literal">alert</code></td><td><code class="literal">007</code></td><td><code class="literal">BS</code></td><td><code class="literal">010</code></td></tr><tr><td scope="row"><code class="literal">backspace</code></td><td><code class="literal">'\b'</code></td><td><code class="literal">HT</code></td><td><code class="literal">011</code></td></tr><tr><td scope="row"><code class="literal">tab</code></td><td><code class="literal">'\t'</code></td><td><code class="literal">LF</code></td><td><code class="literal">012</code></td></tr><tr><td scope="row"><code class="literal">newline</code></td><td><code class="literal">'\n'</code></td><td><code class="literal">VT</code></td><td><code class="literal">013</code></td></tr><tr><td scope="row"><code class="literal">vertical-tab</code></td><td><code class="literal">'\v'</code></td><td><code class="literal">FF</code></td><td><code class="literal">014</code></td></tr><tr><td scope="row"><code class="literal">form-feed</code></td><td><code class="literal">'\f'</code></td><td><code class="literal">CR</code></td><td><code class="literal">015</code></td></tr><tr><td scope="row"><code class="literal">carriage-return</code></td><td><code class="literal">'\r'</code></td><td><code class="literal">SO</code></td><td><code class="literal">016</code></td></tr><tr><td scope="row"><code class="literal">SI</code></td><td><code class="literal">017</code></td><td><code class="literal">DLE</code></td><td><code class="literal">020</code></td></tr><tr><td scope="row"><code class="literal">DC1</code></td><td><code class="literal">021</code></td><td><code class="literal">DC2</code></td><td><code class="literal">022</code></td></tr><tr><td scope="row"><code class="literal">DC3</code></td><td><code class="literal">023</code></td><td><code class="literal">DC4</code></td><td><code class="literal">024</code></td></tr><tr><td scope="row"><code class="literal">NAK</code></td><td><code class="literal">025</code></td><td><code class="literal">SYN</code></td><td><code class="literal">026</code></td></tr><tr><td scope="row"><code class="literal">ETB</code></td><td><code class="literal">027</code></td><td><code class="literal">CAN</code></td><td><code class="literal">030</code></td></tr><tr><td scope="row"><code class="literal">EM</code></td><td><code class="literal">031</code></td><td><code class="literal">SUB</code></td><td><code class="literal">032</code></td></tr><tr><td scope="row"><code class="literal">ESC</code></td><td><code class="literal">033</code></td><td><code class="literal">IS4</code></td><td><code class="literal">034</code></td></tr><tr><td scope="row"><code class="literal">FS</code></td><td><code class="literal">034</code></td><td><code class="literal">IS3</code></td><td><code class="literal">035</code></td></tr><tr><td scope="row"><code class="literal">GS</code></td><td><code class="literal">035</code></td><td><code class="literal">IS2</code></td><td><code class="literal">036</code></td></tr><tr><td scope="row"><code class="literal">RS</code></td><td><code class="literal">036</code></td><td><code class="literal">IS1</code></td><td><code class="literal">037</code></td></tr><tr><td scope="row"><code class="literal">US</code></td><td><code class="literal">037</code></td><td><code class="literal">space</code></td><td><code class="literal">' '</code></td></tr><tr><td scope="row"><code class="literal">exclamation-mark</code></td><td><code class="literal">'!'</code></td><td><code class="literal">quotation-mark</code></td><td><code class="literal">'"'</code></td></tr><tr><td scope="row"><code class="literal">number-sign</code></td><td><code class="literal">'#'</code></td><td><code class="literal">dollar-sign</code></td><td><code class="literal">'$'</code></td></tr><tr><td scope="row"><code class="literal">percent-sign</code></td><td><code class="literal">'%'</code></td><td><code class="literal">ampersand</code></td><td><code class="literal">'&amp;'</code></td></tr><tr><td scope="row"><code class="literal">apostrophe</code></td><td><code class="literal">'\''</code></td><td><code class="literal">left-parenthesis</code></td><td><code class="literal">'('</code></td></tr><tr><td scope="row"><code class="literal">right-parenthesis</code></td><td><code class="literal">')'</code></td><td><code class="literal">asterisk</code></td><td><code class="literal">'*'</code></td></tr><tr><td scope="row"><code class="literal">plus-sign</code></td><td><code class="literal">'+'</code></td><td><code class="literal">comma</code></td><td><code class="literal">','</code></td></tr><tr><td scope="row"><code class="literal">hyphen</code></td><td><code class="literal">'-'</code></td><td><code class="literal">hyphen-minus</code></td><td><code class="literal">'-'</code></td></tr><tr><td scope="row"><code class="literal">period</code></td><td><code class="literal">'.'</code></td><td><code class="literal">full-stop</code></td><td><code class="literal">'.'</code></td></tr><tr><td scope="row"><code class="literal">slash</code></td><td><code class="literal">'/'</code></td><td><code class="literal">solidus</code></td><td><code class="literal">'/'</code></td></tr><tr><td scope="row"><code class="literal">zero</code></td><td><code class="literal">'0'</code></td><td><code class="literal">one</code></td><td><code class="literal">'1'</code></td></tr><tr><td scope="row"><code class="literal">two</code></td><td><code class="literal">'2'</code></td><td><code class="literal">three</code></td><td><code class="literal">'3'</code></td></tr><tr><td scope="row"><code class="literal">four</code></td><td><code class="literal">'4'</code></td><td><code class="literal">five</code></td><td><code class="literal">'5'</code></td></tr><tr><td scope="row"><code class="literal">six</code></td><td><code class="literal">'6'</code></td><td><code class="literal">seven</code></td><td><code class="literal">'7'</code></td></tr><tr><td scope="row"><code class="literal">eight</code></td><td><code class="literal">'8'</code></td><td><code class="literal">nine</code></td><td><code class="literal">'9'</code></td></tr><tr><td scope="row"><code class="literal">colon</code></td><td><code class="literal">':'</code></td><td><code class="literal">semicolon</code></td><td><code class="literal">';'</code></td></tr><tr><td scope="row"><code class="literal">less-than-sign</code></td><td><code class="literal">'&lt;'</code></td><td><code class="literal">equals-sign</code></td><td><code class="literal">'='</code></td></tr><tr><td scope="row"><code class="literal">greater-than-sign</code></td><td><code class="literal">'&gt;'</code></td><td><code class="literal">question-mark</code></td><td><code class="literal">'?'</code></td></tr><tr><td scope="row"><code class="literal">commercial-at</code></td><td><code class="literal">'@'</code></td><td><code class="literal">left-square-bracket</code></td><td><code class="literal">'['</code></td></tr><tr><td scope="row"><code class="literal">backslash</code></td><td><code class="literal">'\\'</code></td><td><code class="literal">reverse-solidus</code></td><td><code class="literal">'\\'</code></td></tr><tr><td scope="row"><code class="literal">right-square-bracket</code></td><td><code class="literal">']'</code></td><td><code class="literal">circumflex</code></td><td><code class="literal">'^'</code></td></tr><tr><td scope="row"><code class="literal">circumflex-accent</code></td><td><code class="literal">'^'</code></td><td><code class="literal">underscore</code></td><td><code class="literal">'_'</code></td></tr><tr><td scope="row"><code class="literal">low-line</code></td><td><code class="literal">'_'</code></td><td><code class="literal">grave-accent</code></td><td><code class="literal">'`'</code></td></tr><tr><td scope="row"><code class="literal">left-brace</code></td><td><code class="literal">'{'</code></td><td><code class="literal">left-curly-bracket</code></td><td><code class="literal">'{'</code></td></tr><tr><td scope="row"><code class="literal">vertical-line</code></td><td><code class="literal">'|'</code></td><td><code class="literal">right-brace</code></td><td><code class="literal">'}'</code></td></tr><tr><td scope="row"><code class="literal">right-curly-bracket</code></td><td><code class="literal">'}'</code></td><td><code class="literal">tilde</code></td><td><code class="literal">'~'</code></td></tr><tr><td scope="row"><code class="literal">DEL</code></td><td><code class="literal">177</code></td><td> </td><td> </td></tr></tbody></table>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '~' REGEXP '[[.~.]]';</code></strong>                     -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT '~' REGEXP '[[.tilde.]]';</code></strong>                 -&gt; 1
</pre></li><li class="listitem"><p>
            <code class="literal">[=character_class=]</code>
          </p><p>
            Within a bracket expression (written using
            <code class="literal">[</code> and <code class="literal">]</code>),
            <code class="literal">[=character_class=]</code> represents an
            equivalence class. It matches all characters with the same
            collation value, including itself. For example, if
            <code class="literal">o</code> and <code class="literal">(+)</code> are the
            members of an equivalence class, <code class="literal">[[=o=]]</code>,
            <code class="literal">[[=(+)=]]</code>, and <code class="literal">[o(+)]</code>
            are all synonymous. An equivalence class may not be used as
            an endpoint of a range.
          </p></li><li class="listitem"><p>
            <code class="literal">[:character_class:]</code>
          </p><p>
            Within a bracket expression (written using
            <code class="literal">[</code> and <code class="literal">]</code>),
            <code class="literal">[:character_class:]</code> represents a
            character class that matches all characters belonging to
            that class. The following table lists the standard class
            names. These names stand for the character classes defined
            in the <code class="literal">ctype(3)</code> manual page. A particular
            locale may provide other class names. A character class may
            not be used as an endpoint of a range.
</p>
<div class="informaltable">
<table summary="This table lists character class names and
describes the meaning of each." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Character Class Name</th><th scope="col">Meaning</th></tr></thead><tbody><tr><td scope="row"><code class="literal">alnum</code></td><td>Alphanumeric characters</td></tr><tr><td scope="row"><code class="literal">alpha</code></td><td>Alphabetic characters</td></tr><tr><td scope="row"><code class="literal">blank</code></td><td>Whitespace characters</td></tr><tr><td scope="row"><code class="literal">cntrl</code></td><td>Control characters</td></tr><tr><td scope="row"><code class="literal">digit</code></td><td>Digit characters</td></tr><tr><td scope="row"><code class="literal">graph</code></td><td>Graphic characters</td></tr><tr><td scope="row"><code class="literal">lower</code></td><td>Lowercase alphabetic characters</td></tr><tr><td scope="row"><code class="literal">print</code></td><td>Graphic or space characters</td></tr><tr><td scope="row"><code class="literal">punct</code></td><td>Punctuation characters</td></tr><tr><td scope="row"><code class="literal">space</code></td><td>Space, tab, newline, and carriage return</td></tr><tr><td scope="row"><code class="literal">upper</code></td><td>Uppercase alphabetic characters</td></tr><tr><td scope="row"><code class="literal">xdigit</code></td><td>Hexadecimal digit characters</td></tr></tbody></table>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'justalnums' REGEXP '[[:alnum:]]+';</code></strong>       -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT '!!' REGEXP '[[:alnum:]]+';</code></strong>               -&gt; 0
</pre></li><li class="listitem"><p>
            <code class="literal">[[:&lt;:]]</code>, <code class="literal">[[:&gt;:]]</code>
          </p><p>
            These markers stand for word boundaries. They match the
            beginning and end of words, respectively. A word is a
            sequence of word characters that is not preceded by or
            followed by word characters. A word character is an
            alphanumeric character in the <code class="literal">alnum</code> class
            or an underscore (<code class="literal">_</code>).
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'a word a' REGEXP '[[:&lt;:]]word[[:&gt;:]]';</code></strong>   -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 'a xword a' REGEXP '[[:&lt;:]]word[[:&gt;:]]';</code></strong>  -&gt; 0
</pre></li></ul>
</div>
<p>
        To use a literal instance of a special character in a regular
        expression, precede it by two backslash (\) characters. The
        MySQL parser interprets one of the backslashes, and the regular
        expression library interprets the other. For example, to match
        the string <code class="literal">1+2</code> that contains the special
        <code class="literal">+</code> character, only the last of the following
        regular expressions is the correct one:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '1+2' REGEXP '1+2';</code></strong>                       -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT '1+2' REGEXP '1\+2';</code></strong>                      -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT '1+2' REGEXP '1\\+2';</code></strong>                     -&gt; 1
</pre>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="numeric-functions"></a>12.6. Numeric Functions and Operators</h2>

</div>

</div>

</div>

<div class="toc">
<dl><dt><span class="section"><a href="functions.html#arithmetic-functions">12.6.1. Arithmetic Operators</a></span></dt><dt><span class="section"><a href="functions.html#mathematical-functions">12.6.2. Mathematical Functions</a></span></dt></dl>
</div>

<div class="table">
<a name="idp63061872"></a><p class="title"><b>Table 12.10. Numeric Functions and Operators</b></p>
<div class="table-contents">
<table summary="Numeric Functions and Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_abs"><code class="literal">ABS()</code></a></td><td>Return the absolute value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_acos"><code class="literal">ACOS()</code></a></td><td>Return the arc cosine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_asin"><code class="literal">ASIN()</code></a></td><td>Return the arc sine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_atan2"><code class="literal">ATAN2()</code>, <code class="literal">ATAN()</code></a></td><td>Return the arc tangent of the two arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_atan"><code class="literal">ATAN()</code></a></td><td>Return the arc tangent</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ceil"><code class="literal">CEIL()</code></a></td><td>Return the smallest integer value not less than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ceiling"><code class="literal">CEILING()</code></a></td><td>Return the smallest integer value not less than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_conv"><code class="literal">CONV()</code></a></td><td>Convert numbers between different number bases</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cos"><code class="literal">COS()</code></a></td><td>Return the cosine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cot"><code class="literal">COT()</code></a></td><td>Return the cotangent</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_crc32"><code class="literal">CRC32()</code></a></td><td>Compute a cyclic redundancy check value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_degrees"><code class="literal">DEGREES()</code></a></td><td>Convert radians to degrees</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_div"><code class="literal">DIV</code></a></td><td>Integer division</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a></td><td>Division operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_exp"><code class="literal">EXP()</code></a></td><td>Raise to the power of</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_floor"><code class="literal">FLOOR()</code></a></td><td>Return the largest integer value not greater than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ln"><code class="literal">LN()</code></a></td><td>Return the natural logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log10"><code class="literal">LOG10()</code></a></td><td>Return the base-10 logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log2"><code class="literal">LOG2()</code></a></td><td>Return the base-2 logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log"><code class="literal">LOG()</code></a></td><td>Return the natural logarithm of the first argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a></td><td>Minus operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_mod"><code class="literal">MOD()</code></a></td><td>Return the remainder</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_mod"><code class="literal">% or MOD</code></a></td><td>Modulo operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_pi"><code class="literal">PI()</code></a></td><td>Return the value of pi</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a></td><td>Addition operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_pow"><code class="literal">POW()</code></a></td><td>Return the argument raised to the specified power</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_power"><code class="literal">POWER()</code></a></td><td>Return the argument raised to the specified power</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_radians"><code class="literal">RADIANS()</code></a></td><td>Return argument converted to radians</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a></td><td>Return a random floating-point value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a></td><td>Round the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sign"><code class="literal">SIGN()</code></a></td><td>Return the sign of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sin"><code class="literal">SIN()</code></a></td><td>Return the sine of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sqrt"><code class="literal">SQRT()</code></a></td><td>Return the square root of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_tan"><code class="literal">TAN()</code></a></td><td>Return the tangent of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_times"><code class="literal">*</code></a></td><td>Multiplication operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_truncate"><code class="literal">TRUNCATE()</code></a></td><td>Truncate to specified number of decimal places</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_unary-minus"><code class="literal">-</code></a></td><td>Change the sign of the argument</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="arithmetic-functions"></a>12.6.1. Arithmetic Operators</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp63132576"></a>
<div class="table">
<a name="idp63134064"></a><p class="title"><b>Table 12.11. Arithmetic Operators</b></p>
<div class="table-contents">
<table summary="Arithmetic Operators" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_div"><code class="literal">DIV</code></a></td><td>Integer division</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a></td><td>Division operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a></td><td>Minus operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_mod"><code class="literal">% or MOD</code></a></td><td>Modulo operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a></td><td>Addition operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_times"><code class="literal">*</code></a></td><td>Multiplication operator</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_unary-minus"><code class="literal">-</code></a></td><td>Change the sign of the argument</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        The usual arithmetic operators are available. The result is
        determined according to the following rules:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            In the case of
            <a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a>,
            <a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a>, and
            <a class="link" href="functions.html#operator_times"><code class="literal">*</code></a>, the result
            is calculated with <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>
            (64-bit) precision if both operands are integers.
          </p></li><li class="listitem"><p>
            If both operands are integers and any of them are unsigned,
            the result is an unsigned integer. For subtraction, if the
            <a class="link" href="server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a>
            SQL mode is enabled, the result is signed even if any
            operand is unsigned.
          </p></li><li class="listitem"><p>
            If any of the operands of a
            <a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a>,
            <a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a>,
            <a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a>,
            <a class="link" href="functions.html#operator_times"><code class="literal">*</code></a>,
            <a class="link" href="functions.html#operator_mod"><code class="literal">%</code></a> is a real or
            string value, the precision of the result is the precision
            of the operand with the maximum precision.
          </p></li><li class="listitem"><p>
            In division performed with
            <a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a>, the scale
            of the result when using two exact-value operands is the
            scale of the first operand plus the value of the
            <a class="link" href="server-administration.html#sysvar_div_precision_increment"><code class="literal">div_precision_increment</code></a>
            system variable (which is 4 by default). For example, the
            result of the expression <code class="literal">5.05 / 0.014</code> has
            a scale of six decimal places
            (<code class="literal">360.714286</code>).
</p></li></ul>
</div>
<p>
        These rules are applied for each operation, such that nested
        calculations imply the precision of each component. Hence,
        <code class="literal">(14620 / 9432456) / (24250 / 9432456)</code>,
        resolves first to <code class="literal">(0.0014) / (0.0026)</code>, with
        the final result having 8 decimal places
        (<code class="literal">0.60288653</code>).
      </p><p>
        Because of these rules and the way they are applied, care should
        be taken to ensure that components and subcomponents of a
        calculation use the appropriate level of precision. See
        <a class="xref" href="functions.html#cast-functions" title="12.10. Cast Functions and Operators">Section 12.10, “Cast Functions and Operators”</a>.
      </p><p>
        For information about handling of overflow in numeric expression
        evaluation, see <a class="xref" href="data-types.html#out-of-range-and-overflow" title="11.2.6. Out-of-Range and Overflow Handling">Section 11.2.6, “Out-of-Range and Overflow Handling”</a>.
      </p><p>
        Arithmetic operators apply to numbers. For other types of
        values, alternative operations may be available. For example, to
        add date values, use <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>;
        see <a class="xref" href="functions.html#date-and-time-functions" title="12.7. Date and Time Functions">Section 12.7, “Date and Time Functions”</a>.
</p><a class="indexterm" name="idp63173888"></a><a class="indexterm" name="idp63175376"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_plus"></a>
            <a class="indexterm" name="idp63178784"></a>

            <a class="indexterm" name="idp63179856"></a>

            <a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a>
          </p><p>
            Addition:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 3+5;</code></strong>
        -&gt; 8
</pre></li><li class="listitem"><p><a name="operator_minus"></a>
            <a class="indexterm" name="idp63188032"></a>

            <a class="indexterm" name="idp63189104"></a>

            <a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a>
          </p><p>
            Subtraction:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 3-5;</code></strong>
        -&gt; -2
</pre></li><li class="listitem"><p><a name="operator_unary-minus"></a>
            <a class="indexterm" name="idp63197280"></a>

            <a class="indexterm" name="idp63198352"></a>

            <a class="indexterm" name="idp63199840"></a>

            <a class="link" href="functions.html#operator_unary-minus"><code class="literal">-</code></a>
          </p><p>
            Unary minus. This operator changes the sign of the operand.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT - 2;</code></strong>
        -&gt; -2
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
              If this operator is used with a
              <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>, the return value is
              also a <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>. This means
              that you should avoid using <code class="literal">-</code> on
              integers that may have the value of
              –2<sup>63</sup>.
</p>
</div>
</li><li class="listitem"><p><a name="operator_times"></a>
            <a class="indexterm" name="idp63211872"></a>

            <a class="indexterm" name="idp63212944"></a>

            <a class="link" href="functions.html#operator_times"><code class="literal">*</code></a>
          </p><p>
            Multiplication:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 3*5;</code></strong>
        -&gt; 15
mysql&gt; <strong class="userinput"><code>SELECT 18014398509481984*18014398509481984.0;</code></strong>
        -&gt; 324518553658426726783156020576256.0
mysql&gt; <strong class="userinput"><code>SELECT 18014398509481984*18014398509481984;</code></strong>
        -&gt; out-of-range error
</pre><p>
            The last expression produces an error because the result of
            the integer multiplication exceeds the 64-bit range of
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> calculations. (See
            <a class="xref" href="data-types.html#numeric-types" title="11.2. Numeric Types">Section 11.2, “Numeric Types”</a>.)
          </p></li><li class="listitem"><p><a name="operator_divide"></a>
            <a class="indexterm" name="idp63224752"></a>

            <a class="indexterm" name="idp63225824"></a>

            <a class="link" href="functions.html#operator_divide"><code class="literal">/</code></a>
          </p><p>
            Division:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 3/5;</code></strong>
        -&gt; 0.60
</pre><p>
            Division by zero produces a <code class="literal">NULL</code> result:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 102/(1-1);</code></strong>
        -&gt; NULL
</pre><p>
            A division is calculated with
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> arithmetic only if
            performed in a context where its result is converted to an
            integer.
          </p></li><li class="listitem"><p><a name="operator_div"></a>
            <a class="indexterm" name="idp63238656"></a>

            <a class="link" href="functions.html#operator_div"><code class="literal">DIV</code></a>
          </p><p>
            Integer division. Similar to
            <a class="link" href="functions.html#function_floor"><code class="literal">FLOOR()</code></a>, but is safe with
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> values.
          </p><p>
            In MySQL 5.6, if either operand has a
            noninteger type, the operands are converted to
            <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> and divided using
            <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> arithmetic before
            converting the result to
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>. If the result exceeds
            <code class="literal">BIGINT</code> range, an error occurs.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 5 DIV 2;</code></strong>
        -&gt; 2
</pre></li><li class="listitem"><p><a name="operator_mod"></a>
            <a class="indexterm" name="idp63253088"></a>

            <a class="link" href="functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            % <em class="replaceable"><code>M</code></em></code></a>,
            <a class="link" href="functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            MOD <em class="replaceable"><code>M</code></em></code></a>
          </p><p>
            Modulo operation. Returns the remainder of
            <em class="replaceable"><code>N</code></em> divided by
            <em class="replaceable"><code>M</code></em>. For more information, see the
            description for the <a class="link" href="functions.html#function_mod"><code class="literal">MOD()</code></a>
            function in <a class="xref" href="functions.html#mathematical-functions" title="12.6.2. Mathematical Functions">Section 12.6.2, “Mathematical Functions”</a>.
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mathematical-functions"></a>12.6.2. Mathematical Functions</h3>

</div>

</div>

</div>

<div class="table">
<a name="idp63262640"></a><p class="title"><b>Table 12.12. Mathematical Functions</b></p>
<div class="table-contents">
<table summary="Mathematical Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_abs"><code class="literal">ABS()</code></a></td><td>Return the absolute value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_acos"><code class="literal">ACOS()</code></a></td><td>Return the arc cosine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_asin"><code class="literal">ASIN()</code></a></td><td>Return the arc sine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_atan2"><code class="literal">ATAN2()</code>, <code class="literal">ATAN()</code></a></td><td>Return the arc tangent of the two arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_atan"><code class="literal">ATAN()</code></a></td><td>Return the arc tangent</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ceil"><code class="literal">CEIL()</code></a></td><td>Return the smallest integer value not less than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ceiling"><code class="literal">CEILING()</code></a></td><td>Return the smallest integer value not less than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_conv"><code class="literal">CONV()</code></a></td><td>Convert numbers between different number bases</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cos"><code class="literal">COS()</code></a></td><td>Return the cosine</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cot"><code class="literal">COT()</code></a></td><td>Return the cotangent</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_crc32"><code class="literal">CRC32()</code></a></td><td>Compute a cyclic redundancy check value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_degrees"><code class="literal">DEGREES()</code></a></td><td>Convert radians to degrees</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_exp"><code class="literal">EXP()</code></a></td><td>Raise to the power of</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_floor"><code class="literal">FLOOR()</code></a></td><td>Return the largest integer value not greater than  the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_ln"><code class="literal">LN()</code></a></td><td>Return the natural logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log10"><code class="literal">LOG10()</code></a></td><td>Return the base-10 logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log2"><code class="literal">LOG2()</code></a></td><td>Return the base-2 logarithm of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_log"><code class="literal">LOG()</code></a></td><td>Return the natural logarithm of the first argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_mod"><code class="literal">MOD()</code></a></td><td>Return the remainder</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_pi"><code class="literal">PI()</code></a></td><td>Return the value of pi</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_pow"><code class="literal">POW()</code></a></td><td>Return the argument raised to the specified power</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_power"><code class="literal">POWER()</code></a></td><td>Return the argument raised to the specified power</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_radians"><code class="literal">RADIANS()</code></a></td><td>Return argument converted to radians</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a></td><td>Return a random floating-point value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a></td><td>Round the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sign"><code class="literal">SIGN()</code></a></td><td>Return the sign of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sin"><code class="literal">SIN()</code></a></td><td>Return the sine of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sqrt"><code class="literal">SQRT()</code></a></td><td>Return the square root of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_tan"><code class="literal">TAN()</code></a></td><td>Return the tangent of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_truncate"><code class="literal">TRUNCATE()</code></a></td><td>Truncate to specified number of decimal places</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        All mathematical functions return <code class="literal">NULL</code> in the
        event of an error.
</p><a class="indexterm" name="idp63322256"></a><a class="indexterm" name="idp63323328"></a>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_abs"></a>
            <a class="indexterm" name="idp63327152"></a>

            <a class="link" href="functions.html#function_abs"><code class="literal">ABS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the absolute value of <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ABS(2);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT ABS(-32);</code></strong>
        -&gt; 32
</pre><p>
            This function is safe to use with
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> values.
          </p></li><li class="listitem"><p><a name="function_acos"></a>
            <a class="indexterm" name="idp63338208"></a>

            <a class="link" href="functions.html#function_acos"><code class="literal">ACOS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the arc cosine of <em class="replaceable"><code>X</code></em>, that
            is, the value whose cosine is <em class="replaceable"><code>X</code></em>.
            Returns <code class="literal">NULL</code> if
            <em class="replaceable"><code>X</code></em> is not in the range
            <code class="literal">-1</code> to <code class="literal">1</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ACOS(1);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT ACOS(1.0001);</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT ACOS(0);</code></strong>
        -&gt; 1.5707963267949
</pre></li><li class="listitem"><p><a name="function_asin"></a>
            <a class="indexterm" name="idp63351728"></a>

            <a class="link" href="functions.html#function_asin"><code class="literal">ASIN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the arc sine of <em class="replaceable"><code>X</code></em>, that
            is, the value whose sine is <em class="replaceable"><code>X</code></em>.
            Returns <code class="literal">NULL</code> if
            <em class="replaceable"><code>X</code></em> is not in the range
            <code class="literal">-1</code> to <code class="literal">1</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ASIN(0.2);</code></strong>
        -&gt; 0.20135792079033
mysql&gt; <strong class="userinput"><code>SELECT ASIN('foo');</code></strong>

+-------------+
| ASIN('foo') |
+-------------+
|           0 |
+-------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+-----------------------------------------+
| Level   | Code | Message                                 |
+---------+------+-----------------------------------------+
| Warning | 1292 | Truncated incorrect DOUBLE value: 'foo' |
+---------+------+-----------------------------------------+
</pre></li><li class="listitem"><p><a name="function_atan"></a>
            <a class="indexterm" name="idp63365760"></a>

            <a class="link" href="functions.html#function_atan"><code class="literal">ATAN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the arc tangent of <em class="replaceable"><code>X</code></em>,
            that is, the value whose tangent is
            <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ATAN(2);</code></strong>
        -&gt; 1.1071487177941
mysql&gt; <strong class="userinput"><code>SELECT ATAN(-2);</code></strong>
        -&gt; -1.1071487177941
</pre></li><li class="listitem"><p><a name="function_atan2"></a>
            <a class="indexterm" name="idp63376112"></a>

            <a class="link" href="functions.html#function_atan2"><code class="literal">ATAN(<em class="replaceable"><code>Y</code></em>,<em class="replaceable"><code>X</code></em>)</code></a>,
            <a class="link" href="functions.html#function_atan2"><code class="literal">ATAN2(<em class="replaceable"><code>Y</code></em>,<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the arc tangent of the two variables
            <em class="replaceable"><code>X</code></em> and
            <em class="replaceable"><code>Y</code></em>. It is similar to calculating
            the arc tangent of <code class="literal"><em class="replaceable"><code>Y</code></em> /
            <em class="replaceable"><code>X</code></em></code>, except that the
            signs of both arguments are used to determine the quadrant
            of the result.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ATAN(-2,2);</code></strong>
        -&gt; -0.78539816339745
mysql&gt; <strong class="userinput"><code>SELECT ATAN2(PI(),0);</code></strong>
        -&gt; 1.5707963267949
</pre></li><li class="listitem"><p><a name="function_ceil"></a>
            <a class="indexterm" name="idp63390528"></a>

            <a class="link" href="functions.html#function_ceil"><code class="literal">CEIL(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            <a class="link" href="functions.html#function_ceil"><code class="literal">CEIL()</code></a> is a synonym for
            <a class="link" href="functions.html#function_ceiling"><code class="literal">CEILING()</code></a>.
          </p></li><li class="listitem"><p><a name="function_ceiling"></a>
            <a class="indexterm" name="idp63399552"></a>

            <a class="link" href="functions.html#function_ceiling"><code class="literal">CEILING(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the smallest integer value not less than
            <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CEILING(1.23);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT CEILING(-1.23);</code></strong>
        -&gt; -1
</pre><p>
            For exact-value numeric arguments, the return value has an
            exact-value numeric type. For string or floating-point
            arguments, the return value has a floating-point type.
          </p></li><li class="listitem"><p><a name="function_conv"></a>
            <a class="indexterm" name="idp63409952"></a>

            <a class="link" href="functions.html#function_conv"><code class="literal">CONV(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>from_base</code></em>,<em class="replaceable"><code>to_base</code></em>)</code></a>
          </p><p>
            Converts numbers between different number bases. Returns a
            string representation of the number
            <em class="replaceable"><code>N</code></em>, converted from base
            <em class="replaceable"><code>from_base</code></em> to base
            <em class="replaceable"><code>to_base</code></em>. Returns
            <code class="literal">NULL</code> if any argument is
            <code class="literal">NULL</code>. The argument
            <em class="replaceable"><code>N</code></em> is interpreted as an integer,
            but may be specified as an integer or a string. The minimum
            base is <code class="literal">2</code> and the maximum base is
            <code class="literal">36</code>. If <em class="replaceable"><code>to_base</code></em>
            is a negative number, <em class="replaceable"><code>N</code></em> is
            regarded as a signed number. Otherwise,
            <em class="replaceable"><code>N</code></em> is treated as unsigned.
            <a class="link" href="functions.html#function_conv"><code class="literal">CONV()</code></a> works with 64-bit
            precision.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CONV('a',16,2);</code></strong>
        -&gt; '1010'
mysql&gt; <strong class="userinput"><code>SELECT CONV('6E',18,8);</code></strong>
        -&gt; '172'
mysql&gt; <strong class="userinput"><code>SELECT CONV(-17,10,-18);</code></strong>
        -&gt; '-H'
mysql&gt; <strong class="userinput"><code>SELECT CONV(10+'10'+'10'+0xa,10,10);</code></strong>
        -&gt; '40'
</pre></li><li class="listitem"><p><a name="function_cos"></a>
            <a class="indexterm" name="idp63428768"></a>

            <a class="link" href="functions.html#function_cos"><code class="literal">COS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the cosine of <em class="replaceable"><code>X</code></em>, where
            <em class="replaceable"><code>X</code></em> is given in radians.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COS(PI());</code></strong>
        -&gt; -1
</pre></li><li class="listitem"><p><a name="function_cot"></a>
            <a class="indexterm" name="idp63438176"></a>

            <a class="link" href="functions.html#function_cot"><code class="literal">COT(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the cotangent of <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COT(12);</code></strong>
        -&gt; -1.5726734063977
mysql&gt; <strong class="userinput"><code>SELECT COT(0);</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_crc32"></a>
            <a class="indexterm" name="idp63447984"></a>

            <a class="link" href="functions.html#function_crc32"><code class="literal">CRC32(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Computes a cyclic redundancy check value and returns a
            32-bit unsigned value. The result is <code class="literal">NULL</code>
            if the argument is <code class="literal">NULL</code>. The argument is
            expected to be a string and (if possible) is treated as one
            if it is not.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CRC32('MySQL');</code></strong>
        -&gt; 3259397556
mysql&gt; <strong class="userinput"><code>SELECT CRC32('mysql');</code></strong>
        -&gt; 2501908538
</pre></li><li class="listitem"><p><a name="function_degrees"></a>
            <a class="indexterm" name="idp63459040"></a>

            <a class="link" href="functions.html#function_degrees"><code class="literal">DEGREES(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the argument <em class="replaceable"><code>X</code></em>, converted
            from radians to degrees.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DEGREES(PI());</code></strong>
        -&gt; 180
mysql&gt; <strong class="userinput"><code>SELECT DEGREES(PI() / 2);</code></strong>
        -&gt; 90
</pre></li><li class="listitem"><p><a name="function_exp"></a>
            <a class="indexterm" name="idp63468848"></a>

            <a class="link" href="functions.html#function_exp"><code class="literal">EXP(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the value of <span class="emphasis"><em>e</em></span> (the base of
            natural logarithms) raised to the power of
            <em class="replaceable"><code>X</code></em>. The inverse of this function
            is <a class="link" href="functions.html#function_log"><code class="literal">LOG()</code></a> (using a single
            argument only) or <a class="link" href="functions.html#function_ln"><code class="literal">LN()</code></a>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT EXP(2);</code></strong>
        -&gt; 7.3890560989307
mysql&gt; <strong class="userinput"><code>SELECT EXP(-2);</code></strong>
        -&gt; 0.13533528323661
mysql&gt; <strong class="userinput"><code>SELECT EXP(0);</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="function_floor"></a>
            <a class="indexterm" name="idp63481696"></a>

            <a class="link" href="functions.html#function_floor"><code class="literal">FLOOR(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the largest integer value not greater than
            <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FLOOR(1.23);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT FLOOR(-1.23);</code></strong>
        -&gt; -2
</pre><p>
            For exact-value numeric arguments, the return value has an
            exact-value numeric type. For string or floating-point
            arguments, the return value has a floating-point type.
          </p></li><li class="listitem"><p>
            <a class="link" href="functions.html#function_format"><code class="literal">FORMAT(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
          </p><p>
            Formats the number <em class="replaceable"><code>X</code></em> to a format
            like <code class="literal">'#,###,###.##'</code>, rounded to
            <em class="replaceable"><code>D</code></em> decimal places, and returns the
            result as a string. For details, see
            <a class="xref" href="functions.html#string-functions" title="12.5. String Functions">Section 12.5, “String Functions”</a>.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idp63497232"></a>

            <a class="link" href="functions.html#function_hex"><code class="literal">HEX(N_or_S)</code></a>
          </p><p>
            This function can be used to obtain a hexadecimal
            representation of a decimal number or a string; the manner
            in which it does so varies according to the argument's
            type. See this function's description in
            <a class="xref" href="functions.html#string-functions" title="12.5. String Functions">Section 12.5, “String Functions”</a>, for details.
          </p></li><li class="listitem"><p><a name="function_ln"></a>
            <a class="indexterm" name="idp63502704"></a>

            <a class="link" href="functions.html#function_ln"><code class="literal">LN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the natural logarithm of
            <em class="replaceable"><code>X</code></em>; that is, the
            base-<span class="emphasis"><em>e</em></span> logarithm of
            <em class="replaceable"><code>X</code></em>. If
            <em class="replaceable"><code>X</code></em> is less than or equal to 0,
            then <code class="literal">NULL</code> is returned.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LN(2);</code></strong>
        -&gt; 0.69314718055995
mysql&gt; <strong class="userinput"><code>SELECT LN(-2);</code></strong>
        -&gt; NULL
</pre><p>
            This function is synonymous with
            <a class="link" href="functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>)</code></a>.
            The inverse of this function is the
            <a class="link" href="functions.html#function_exp"><code class="literal">EXP()</code></a> function.
          </p></li><li class="listitem"><p><a name="function_log"></a>
            <a class="indexterm" name="idp63517120"></a>

            <a class="link" href="functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>)</code></a>,
            <a class="link" href="functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>B</code></em>,<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            If called with one parameter, this function returns the
            natural logarithm of <em class="replaceable"><code>X</code></em>. If
            <em class="replaceable"><code>X</code></em> is less than or equal to 0,
            then <code class="literal">NULL</code> is returned.
          </p><p>
            The inverse of this function (when called with a single
            argument) is the <a class="link" href="functions.html#function_exp"><code class="literal">EXP()</code></a>
            function.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOG(2);</code></strong>
        -&gt; 0.69314718055995
mysql&gt; <strong class="userinput"><code>SELECT LOG(-2);</code></strong>
        -&gt; NULL
</pre><p>
            If called with two parameters, this function returns the
            logarithm of <em class="replaceable"><code>X</code></em> to the base
            <em class="replaceable"><code>B</code></em>. If
            <em class="replaceable"><code>X</code></em> is less than or equal to 0, or
            if <em class="replaceable"><code>B</code></em> is less than or equal to 1,
            then <code class="literal">NULL</code> is returned.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOG(2,65536);</code></strong>
        -&gt; 16
mysql&gt; <strong class="userinput"><code>SELECT LOG(10,100);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT LOG(1,100);</code></strong>
        -&gt; NULL
</pre><p>
            <a class="link" href="functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>B</code></em>,<em class="replaceable"><code>X</code></em>)</code></a>
            is equivalent to
            <a class="link" href="functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>) /
            LOG(<em class="replaceable"><code>B</code></em>)</code></a>.
          </p></li><li class="listitem"><p><a name="function_log2"></a>
            <a class="indexterm" name="idp63540656"></a>

            <a class="link" href="functions.html#function_log2"><code class="literal">LOG2(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the base-2 logarithm of
            <code class="literal"><em class="replaceable"><code>X</code></em></code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOG2(65536);</code></strong>
        -&gt; 16
mysql&gt; <strong class="userinput"><code>SELECT LOG2(-100);</code></strong>
        -&gt; NULL
</pre><p>
            <a class="link" href="functions.html#function_log2"><code class="literal">LOG2()</code></a> is useful for finding
            out how many bits a number requires for storage. This
            function is equivalent to the expression
            <a class="link" href="functions.html#function_log"><code class="literal">LOG(<em class="replaceable"><code>X</code></em>) /
            LOG(2)</code></a>.
          </p></li><li class="listitem"><p><a name="function_log10"></a>
            <a class="indexterm" name="idp63553456"></a>

            <a class="link" href="functions.html#function_log10"><code class="literal">LOG10(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the base-10 logarithm of
            <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LOG10(2);</code></strong>
        -&gt; 0.30102999566398
mysql&gt; <strong class="userinput"><code>SELECT LOG10(100);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT LOG10(-100);</code></strong>
        -&gt; NULL
</pre><p>
            <a class="link" href="functions.html#function_log10"><code class="literal">LOG10(<em class="replaceable"><code>X</code></em>)</code></a>
            is equivalent to
            <a class="link" href="functions.html#function_log"><code class="literal">LOG(10,<em class="replaceable"><code>X</code></em>)</code></a>.
          </p></li><li class="listitem"><p><a name="function_mod"></a>
            <a class="indexterm" name="idp63567568"></a>

            <a class="indexterm" name="idp63568640"></a>

            <a class="indexterm" name="idp63569712"></a>

            <a class="indexterm" name="idp63570784"></a>

            <a class="indexterm" name="idp63571856"></a>

            <a class="link" href="functions.html#function_mod"><code class="literal">MOD(<em class="replaceable"><code>N</code></em>,<em class="replaceable"><code>M</code></em>)</code></a>,
            <a class="link" href="functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            % <em class="replaceable"><code>M</code></em></code></a>,
            <a class="link" href="functions.html#operator_mod"><code class="literal"><em class="replaceable"><code>N</code></em>
            MOD <em class="replaceable"><code>M</code></em></code></a>
          </p><p>
            Modulo operation. Returns the remainder of
            <em class="replaceable"><code>N</code></em> divided by
            <em class="replaceable"><code>M</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MOD(234, 10);</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT 253 % 7;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT MOD(29,9);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT 29 MOD 9;</code></strong>
        -&gt; 2
</pre><p>
            This function is safe to use with
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> values.
          </p><p>
            <a class="link" href="functions.html#function_mod"><code class="literal">MOD()</code></a> also works on values
            that have a fractional part and returns the exact remainder
            after division:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MOD(34.5,3);</code></strong>
        -&gt; 1.5
</pre><p>
            <a class="link" href="functions.html#function_mod"><code class="literal">MOD(<em class="replaceable"><code>N</code></em>,0)</code></a>
            returns <code class="literal">NULL</code>.
          </p></li><li class="listitem"><p><a name="function_pi"></a>
            <a class="indexterm" name="idp63592960"></a>

            <a class="link" href="functions.html#function_pi"><code class="literal">PI()</code></a>
          </p><p>
            Returns the value of π (pi). The default number of
            decimal places displayed is seven, but MySQL uses the full
            double-precision value internally.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PI();</code></strong>
        -&gt; 3.141593
mysql&gt; <strong class="userinput"><code>SELECT PI()+0.000000000000000000;</code></strong>
        -&gt; 3.141592653589793116
</pre></li><li class="listitem"><p><a name="function_pow"></a>
            <a class="indexterm" name="idp63603072"></a>

            <a class="link" href="functions.html#function_pow"><code class="literal">POW(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>Y</code></em>)</code></a>
          </p><p>
            Returns the value of <em class="replaceable"><code>X</code></em> raised to
            the power of <em class="replaceable"><code>Y</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT POW(2,2);</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT POW(2,-2);</code></strong>
        -&gt; 0.25
</pre></li><li class="listitem"><p><a name="function_power"></a>
            <a class="indexterm" name="idp63614320"></a>

            <a class="link" href="functions.html#function_power"><code class="literal">POWER(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>Y</code></em>)</code></a>
          </p><p>
            This is a synonym for <a class="link" href="functions.html#function_pow"><code class="literal">POW()</code></a>.
          </p></li><li class="listitem"><p><a name="function_radians"></a>
            <a class="indexterm" name="idp63622208"></a>

            <a class="link" href="functions.html#function_radians"><code class="literal">RADIANS(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the argument <em class="replaceable"><code>X</code></em>, converted
            from degrees to radians. (Note that π radians equals 180
            degrees.)
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT RADIANS(90);</code></strong>
        -&gt; 1.5707963267949
</pre></li><li class="listitem"><p><a name="function_rand"></a>
            <a class="indexterm" name="idp63631488"></a>

            <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a>,
            <a class="link" href="functions.html#function_rand"><code class="literal">RAND(<em class="replaceable"><code>N</code></em>)</code></a>
          </p><p>
            Returns a random floating-point value
            <em class="replaceable"><code>v</code></em> in the range
            <code class="literal">0</code> &lt;= <em class="replaceable"><code>v</code></em> &lt;
            <code class="literal">1.0</code>. If a constant integer argument
            <em class="replaceable"><code>N</code></em> is specified, it is used as the
            seed value, which produces a repeatable sequence of column
            values. In the following example, note that the sequences of
            values produced by <code class="literal">RAND(3)</code> is the same
            both places where it occurs.
          </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>CREATE TABLE t (i INT);</code></strong>
Query OK, 0 rows affected (0.42 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES(1),(2),(3);</code></strong>
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT i, RAND() FROM t;</code></strong>
+------+------------------+
| i    | RAND()           |
+------+------------------+
|    1 | 0.61914388706828 |
|    2 | 0.93845168309142 |
|    3 | 0.83482678498591 |
+------+------------------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT i, RAND(3) FROM t;</code></strong>
+------+------------------+
| i    | RAND(3)          |
+------+------------------+
|    1 | 0.90576975597606 |
|    2 | 0.37307905813035 |
|    3 | 0.14808605345719 |
+------+------------------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT i, RAND() FROM t;</code></strong>
+------+------------------+
| i    | RAND()           |
+------+------------------+
|    1 | 0.35877890638893 |
|    2 | 0.28941420772058 |
|    3 | 0.37073435016976 |
+------+------------------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT i, RAND(3) FROM t;</code></strong>
+------+------------------+
| i    | RAND(3)          |
+------+------------------+
|    1 | 0.90576975597606 |
|    2 | 0.37307905813035 |
|    3 | 0.14808605345719 |
+------+------------------+
3 rows in set (0.01 sec)
</pre><p>
            With a constant initializer, the seed is initialized once
            when the statement is compiled, prior to execution. If a
            nonconstant initializer (such as a column name) is used as
            the argument, the seed is initialized with the value for
            each invocation of <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a>.
            (One implication of this is that for equal argument values,
            <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a> will return the same
            value each time.)
          </p><p>
            To obtain a random integer <em class="replaceable"><code>R</code></em> in
            the range <em class="replaceable"><code>i</code></em> &lt;=
            <em class="replaceable"><code>R</code></em> &lt;
            <em class="replaceable"><code>j</code></em>, use the expression
            <a class="link" href="functions.html#function_floor"><code class="literal">FLOOR(<em class="replaceable"><code>i</code></em>
            + RAND() * (<em class="replaceable"><code>j</code></em></code></a>
            – <code class="literal"><em class="replaceable"><code>i</code></em>))</code>.
            For example, to obtain a random integer in the range the
            range <code class="literal">7</code> &lt;=
            <em class="replaceable"><code>R</code></em> &lt; <code class="literal">12</code>, you
            could use the following statement:
          </p><pre class="programlisting">SELECT FLOOR(7 + (RAND() * 5));</pre><p>
            <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a> in a
            <code class="literal">WHERE</code> clause is re-evaluated every time
            the <code class="literal">WHERE</code> is executed.
          </p><p>
            You cannot use a column with
            <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a> values in an
            <code class="literal">ORDER BY</code> clause, because <code class="literal">ORDER
            BY</code> would evaluate the column multiple times.
            However, you can retrieve rows in random order like this:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> ORDER BY RAND();</code></strong>
</pre><p>
            <code class="literal">ORDER BY RAND()</code> combined with
            <code class="literal">LIMIT</code> is useful for selecting a random
            sample from a set of rows:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM table1, table2 WHERE a=b AND c&lt;d</code></strong> -&gt; <strong class="userinput"><code>ORDER BY RAND() LIMIT 1000;</code></strong>
</pre><p>
            <a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a> is not meant to be a
            perfect random generator. It is a fast way to generate
            random numbers on demand that is portable between platforms
            for the same MySQL version.
          </p><p>
            This function is unsafe for statement-based replication. A
            warning is logged if you use this function when
            <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a> is set to
            <code class="literal">STATEMENT</code>. (Bug #49222)
          </p></li><li class="listitem"><p><a name="function_round"></a>
            <a class="indexterm" name="idp63675008"></a>

            <a class="link" href="functions.html#function_round"><code class="literal">ROUND(<em class="replaceable"><code>X</code></em>)</code></a>,
            <a class="link" href="functions.html#function_round"><code class="literal">ROUND(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
          </p><p>
            Rounds the argument <em class="replaceable"><code>X</code></em> to
            <em class="replaceable"><code>D</code></em> decimal places. The rounding
            algorithm depends on the data type of
            <em class="replaceable"><code>X</code></em>. <em class="replaceable"><code>D</code></em>
            defaults to 0 if not specified. <em class="replaceable"><code>D</code></em>
            can be negative to cause <em class="replaceable"><code>D</code></em> digits
            left of the decimal point of the value
            <em class="replaceable"><code>X</code></em> to become zero.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ROUND(-1.23);</code></strong>
        -&gt; -1
mysql&gt; <strong class="userinput"><code>SELECT ROUND(-1.58);</code></strong>
        -&gt; -2
mysql&gt; <strong class="userinput"><code>SELECT ROUND(1.58);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT ROUND(1.298, 1);</code></strong>
        -&gt; 1.3
mysql&gt; <strong class="userinput"><code>SELECT ROUND(1.298, 0);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT ROUND(23.298, -1);</code></strong>
        -&gt; 20
</pre><p>
            The return type is the same type as that of the first
            argument (assuming that it is integer, double, or decimal).
            This means that for an integer argument, the result is an
            integer (no decimal places):
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ROUND(150.000,2), ROUND(150,2);</code></strong>
+------------------+--------------+
| ROUND(150.000,2) | ROUND(150,2) |
+------------------+--------------+
|           150.00 |          150 |
+------------------+--------------+
</pre><p>
            <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> uses the following
            rules depending on the type of the first argument:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                For exact-value numbers,
                <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> uses the
                <span class="quote">“<span class="quote">round half away from zero</span>”</span> or <span class="quote">“<span class="quote">round
                toward nearest</span>”</span> rule: A value with a fractional
                part of .5 or greater is rounded up to the next integer
                if positive or down to the next integer if negative. (In
                other words, it is rounded away from zero.) A value with
                a fractional part less than .5 is rounded down to the
                next integer if positive or up to the next integer if
                negative.
              </p></li><li class="listitem"><p>
                For approximate-value numbers, the result depends on the
                C library. On many systems, this means that
                <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> uses the "round
                to nearest even" rule: A value with any fractional part
                is rounded to the nearest even integer.
</p></li></ul>
</div>
<p>
            The following example shows how rounding differs for exact
            and approximate values:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ROUND(2.5), ROUND(25E-1);</code></strong>
+------------+--------------+
| ROUND(2.5) | ROUND(25E-1) |
+------------+--------------+
| 3          |            2 |
+------------+--------------+
</pre><p>
            For more information, see <a class="xref" href="functions.html#precision-math" title="12.19. Precision Math">Section 12.19, “Precision Math”</a>.
          </p></li><li class="listitem"><p><a name="function_sign"></a>
            <a class="indexterm" name="idp63703872"></a>

            <a class="link" href="functions.html#function_sign"><code class="literal">SIGN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the sign of the argument as <code class="literal">-1</code>,
            <code class="literal">0</code>, or <code class="literal">1</code>, depending on
            whether <em class="replaceable"><code>X</code></em> is negative, zero, or
            positive.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SIGN(-32);</code></strong>
        -&gt; -1
mysql&gt; <strong class="userinput"><code>SELECT SIGN(0);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT SIGN(234);</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="function_sin"></a>
            <a class="indexterm" name="idp63716416"></a>

            <a class="link" href="functions.html#function_sin"><code class="literal">SIN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the sine of <em class="replaceable"><code>X</code></em>, where
            <em class="replaceable"><code>X</code></em> is given in radians.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SIN(PI());</code></strong>
        -&gt; 1.2246063538224e-16
mysql&gt; <strong class="userinput"><code>SELECT ROUND(SIN(PI()));</code></strong>
        -&gt; 0
</pre></li><li class="listitem"><p><a name="function_sqrt"></a>
            <a class="indexterm" name="idp63726672"></a>

            <a class="link" href="functions.html#function_sqrt"><code class="literal">SQRT(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the square root of a nonnegative number
            <em class="replaceable"><code>X</code></em>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SQRT(4);</code></strong>
        -&gt; 2
mysql&gt; <strong class="userinput"><code>SELECT SQRT(20);</code></strong>
        -&gt; 4.4721359549996
mysql&gt; <strong class="userinput"><code>SELECT SQRT(-16);</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_tan"></a>
            <a class="indexterm" name="idp63737264"></a>

            <a class="link" href="functions.html#function_tan"><code class="literal">TAN(<em class="replaceable"><code>X</code></em>)</code></a>
          </p><p>
            Returns the tangent of <em class="replaceable"><code>X</code></em>, where
            <em class="replaceable"><code>X</code></em> is given in radians.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TAN(PI());</code></strong>
        -&gt; -1.2246063538224e-16
mysql&gt; <strong class="userinput"><code>SELECT TAN(PI()+1);</code></strong>
        -&gt; 1.5574077246549
</pre></li><li class="listitem"><p><a name="function_truncate"></a>
            <a class="indexterm" name="idp63747568"></a>

            <a class="link" href="functions.html#function_truncate"><code class="literal">TRUNCATE(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
          </p><p>
            Returns the number <em class="replaceable"><code>X</code></em>, truncated
            to <em class="replaceable"><code>D</code></em> decimal places. If
            <em class="replaceable"><code>D</code></em> is <code class="literal">0</code>, the
            result has no decimal point or fractional part.
            <em class="replaceable"><code>D</code></em> can be negative to cause
            <em class="replaceable"><code>D</code></em> digits left of the decimal
            point of the value <em class="replaceable"><code>X</code></em> to become
            zero.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TRUNCATE(1.223,1);</code></strong>
        -&gt; 1.2
mysql&gt; <strong class="userinput"><code>SELECT TRUNCATE(1.999,1);</code></strong>
        -&gt; 1.9
mysql&gt; <strong class="userinput"><code>SELECT TRUNCATE(1.999,0);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT TRUNCATE(-1.999,1);</code></strong>
        -&gt; -1.9
mysql&gt; <strong class="userinput"><code>SELECT TRUNCATE(122,-2);</code></strong>
       -&gt; 100
mysql&gt; <strong class="userinput"><code>SELECT TRUNCATE(10.28*100,0);</code></strong>
       -&gt; 1028
</pre><p>
            All numbers are rounded toward zero.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="date-and-time-functions"></a>12.7. Date and Time Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp63764160"></a><a class="indexterm" name="idp63765232"></a><p>
      This section describes the functions that can be used to
      manipulate temporal values. See
      <a class="xref" href="data-types.html#date-and-time-types" title="11.3. Date and Time Types">Section 11.3, “Date and Time Types”</a>, for a description of the
      range of values each date and time type has and the valid formats
      in which values may be specified.
</p>
<div class="table">
<a name="idp63767920"></a><p class="title"><b>Table 12.13. Date/Time Functions</b></p>
<div class="table-contents">
<table summary="Date/Time Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_adddate"><code class="literal">ADDDATE()</code></a></td><td>Add time values (intervals) to a date value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_addtime"><code class="literal">ADDTIME()</code></a></td><td>Add time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a></td><td>Convert from one timezone to another</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a></td><td>Return the current date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code>, <code class="literal">CURRENT_DATE</code></a></td><td>Synonyms for CURDATE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code>, <code class="literal">CURRENT_TIME</code></a></td><td>Synonyms for CURTIME()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code>, <code class="literal">CURRENT_TIMESTAMP</code></a></td><td>Synonyms for NOW()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_curtime"><code class="literal">CURTIME()</code></a></td><td>Return the current time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a></td><td>Add time values (intervals) to a date value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a></td><td>Format date as specified</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a></td><td>Subtract a time value (interval) from a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_date"><code class="literal">DATE()</code></a></td><td>Extract the date part of a date or datetime expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_datediff"><code class="literal">DATEDIFF()</code></a></td><td>Subtract two dates</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_day"><code class="literal">DAY()</code></a></td><td>Synonym for DAYOFMONTH()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayname"><code class="literal">DAYNAME()</code></a></td><td>Return the name of the weekday</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a></td><td>Return the day of the month (0-31)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayofweek"><code class="literal">DAYOFWEEK()</code></a></td><td>Return the weekday index of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a></td><td>Return the day of the year (1-366)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_extract"><code class="literal">EXTRACT()</code></a></td><td>Extract part of a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_from-days"><code class="literal">FROM_DAYS()</code></a></td><td>Convert a day number to a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a></td><td>Format UNIX timestamp as a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a></td><td>Return a date format string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_hour"><code class="literal">HOUR()</code></a></td><td>Extract the hour</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_last-day"><code class="literal">LAST_DAY</code></a></td><td>Return the last day of the month for the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME()</code>, <code class="literal">LOCALTIME</code></a></td><td>Synonym for NOW()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code>, <code class="literal">LOCALTIMESTAMP()</code></a></td><td>Synonym for NOW()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_makedate"><code class="literal">MAKEDATE()</code></a></td><td>Create a date from the year and day of year</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_maketime"><code class="literal">MAKETIME</code></a></td><td>MAKETIME()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_microsecond"><code class="literal">MICROSECOND()</code></a></td><td>Return the microseconds from argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_minute"><code class="literal">MINUTE()</code></a></td><td>Return the minute from the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_month"><code class="literal">MONTH()</code></a></td><td>Return the month from the date passed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a></td><td>Return the name of the month</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a></td><td>Return the current date and time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_period-add"><code class="literal">PERIOD_ADD()</code></a></td><td>Add a period to a year-month</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_period-diff"><code class="literal">PERIOD_DIFF()</code></a></td><td>Return the number of months between periods</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_quarter"><code class="literal">QUARTER()</code></a></td><td>Return the quarter from a date argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME()</code></a></td><td>Converts seconds to 'HH:MM:SS' format</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_second"><code class="literal">SECOND()</code></a></td><td>Return the second (0-59)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a></td><td>Convert a string to a date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_subdate"><code class="literal">SUBDATE()</code></a></td><td>A synonym for DATE_SUB() when invoked with three arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_subtime"><code class="literal">SUBTIME()</code></a></td><td>Subtract times</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a></td><td>Return the time at which the function executes</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_time-format"><code class="literal">TIME_FORMAT()</code></a></td><td>Format as time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC()</code></a></td><td>Return the argument converted to seconds</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_time"><code class="literal">TIME()</code></a></td><td>Extract the time portion of the expression passed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timediff"><code class="literal">TIMEDIFF()</code></a></td><td>Subtract time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a></td><td>With a single argument, this function returns the date or  datetime expression; with two arguments, the sum of the arguments</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a></td><td>Add an interval to a datetime expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a></td><td>Subtract an interval from a datetime expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a></td><td>Return the date argument converted to days</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a></td><td>Return the date or datetime argument converted to seconds since  Year 0</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a></td><td>Return a UNIX timestamp</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a></td><td>Return the current UTC date</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a></td><td>Return the current UTC time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a></td><td>Return the current UTC date and time</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a></td><td>Return the week number</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a></td><td>Return the weekday index</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a></td><td>Return the calendar week of the date (0-53)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_year"><code class="literal">YEAR()</code></a></td><td>Return the year</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a></td><td>Return the year and week</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      Here is an example that uses date functions. The following query
      selects all rows with a <em class="replaceable"><code>date_col</code></em> value
      from within the last 30 days:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT <em class="replaceable"><code>something</code></em> FROM <em class="replaceable"><code>tbl_name</code></em></code></strong>
    -&gt; <strong class="userinput"><code>WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) &lt;= <em class="replaceable"><code>date_col</code></em>;</code></strong>
</pre><p>
      The query also selects rows with dates that lie in the future.
    </p><p>
      Functions that expect date values usually accept datetime values
      and ignore the time part. Functions that expect time values
      usually accept datetime values and ignore the date part.
    </p><p>
      Functions that return the current date or time each are evaluated
      only once per query at the start of query execution. This means
      that multiple references to a function such as
      <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> within a single query always
      produce the same result. (For our purposes, a single query also
      includes a call to a stored program (stored routine, trigger, or
      event) and all subprograms called by that program.) This principle
      also applies to <a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>,
      <a class="link" href="functions.html#function_curtime"><code class="literal">CURTIME()</code></a>,
      <a class="link" href="functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a>,
      <a class="link" href="functions.html#function_utc-time"><code class="literal">UTC_TIME()</code></a>,
      <a class="link" href="functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP()</code></a>, and to any of
      their synonyms.
    </p><p>
      The <a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code></a>,
      <a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code></a>,
      <a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a>, and
      <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a> functions return
      values in the connection's current time zone, which is available
      as the value of the <a class="link" href="server-administration.html#sysvar_time_zone"><code class="literal">time_zone</code></a>
      system variable. In addition,
      <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> assumes that its
      argument is a datetime value in the current time zone. See
      <a class="xref" href="globalization.html#time-zone-support" title="10.6. MySQL Server Time Zone Support">Section 10.6, “MySQL Server Time Zone Support”</a>.
    </p><p>
      Some date functions can be used with <span class="quote">“<span class="quote">zero</span>”</span> dates or
      incomplete dates such as <code class="literal">'2001-11-00'</code>, whereas
      others cannot. Functions that extract parts of dates typically
      work with incomplete dates and thus can return 0 when you might
      otherwise expect a nonzero value. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DAYOFMONTH('2001-11-00'), MONTH('2005-00-00');</code></strong>
        -&gt; 0, 0
</pre><p>
      Other functions expect complete dates and return
      <code class="literal">NULL</code> for incomplete dates. These include
      functions that perform date arithmetic or that map parts of dates
      to names. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2006-05-00',INTERVAL 1 DAY);</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT DAYNAME('2006-05-00');</code></strong>
        -&gt; NULL
</pre><p>
      As of MySQL 5.6.4, several functions are more strict when passed a
      <a class="link" href="functions.html#function_date"><code class="literal">DATE()</code></a> function value as their
      argument and reject incomplete dates with a day part of zero.
      These functions are affected:
      <a class="link" href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a>,
      <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>,
      <a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>,
      <a class="link" href="functions.html#function_dayofyear"><code class="literal">DAYOFYEAR()</code></a>,
      <a class="link" href="functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a>,
      <a class="link" href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a>,
      <a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a>,
      <a class="link" href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a>,
      <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a>,
      <a class="link" href="functions.html#function_weekday"><code class="literal">WEEKDAY()</code></a>,
      <a class="link" href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a>,
      <a class="link" href="functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a>. This restriction was
      relaxed for <a class="link" href="functions.html#function_last-day"><code class="literal">LAST_DAY()</code></a> in 5.6.5 to
      permit a day part of zero.
    </p><p>
      MySQL 5.6.4 and up supports fractional seconds for
      <code class="literal">TIME</code>, <code class="literal">DATETIME</code>, and
      <code class="literal">TIMESTAMP</code> values, with up to microsecond
      precision. Functions that take temporal arguments accept values
      with fractional seconds. Return values from temporal functions
      include fractional seconds as appropriate.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_adddate"></a>
          <a class="indexterm" name="idp63923728"></a>

          <a class="link" href="functions.html#function_adddate"><code class="literal">ADDDATE(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>,
          <a class="link" href="functions.html#function_adddate"><code class="literal">ADDDATE(<em class="replaceable"><code>expr</code></em>,<em class="replaceable"><code>days</code></em>)</code></a>
        </p><p>
          When invoked with the <code class="literal">INTERVAL</code> form of the
          second argument, <a class="link" href="functions.html#function_adddate"><code class="literal">ADDDATE()</code></a> is a
          synonym for <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>. The
          related function <a class="link" href="functions.html#function_subdate"><code class="literal">SUBDATE()</code></a> is a
          synonym for <a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>. For
          information on the <code class="literal">INTERVAL</code>
          <em class="replaceable"><code>unit</code></em> argument, see the discussion
          for <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2008-01-02', INTERVAL 31 DAY);</code></strong>
        -&gt; '2008-02-02'
mysql&gt; <strong class="userinput"><code>SELECT ADDDATE('2008-01-02', INTERVAL 31 DAY);</code></strong>
        -&gt; '2008-02-02'
</pre><p>
          When invoked with the <em class="replaceable"><code>days</code></em> form of
          the second argument, MySQL treats it as an integer number of
          days to be added to <em class="replaceable"><code>expr</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ADDDATE('2008-01-02', 31);</code></strong>
        -&gt; '2008-02-02'
</pre></li><li class="listitem"><p><a name="function_addtime"></a>
          <a class="indexterm" name="idp63944944"></a>

          <a class="link" href="functions.html#function_addtime"><code class="literal">ADDTIME(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_addtime"><code class="literal">ADDTIME()</code></a> adds
          <em class="replaceable"><code>expr2</code></em> to
          <em class="replaceable"><code>expr1</code></em> and returns the result.
          <em class="replaceable"><code>expr1</code></em> is a time or datetime
          expression, and <em class="replaceable"><code>expr2</code></em> is a time
          expression.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ADDTIME('2007-12-31 23:59:59.999999', '1 1:1:1.000002');</code></strong>
        -&gt; '2008-01-02 01:01:01.000001'
mysql&gt; <strong class="userinput"><code>SELECT ADDTIME('01:00:00.999999', '02:00:00.999998');</code></strong>
        -&gt; '03:00:01.999997'
</pre></li><li class="listitem"><p><a name="function_convert-tz"></a>
          <a class="indexterm" name="idp63957616"></a>

          <a class="link" href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ(<em class="replaceable"><code>dt</code></em>,<em class="replaceable"><code>from_tz</code></em>,<em class="replaceable"><code>to_tz</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_convert-tz"><code class="literal">CONVERT_TZ()</code></a> converts a
          datetime value <em class="replaceable"><code>dt</code></em> from the time
          zone given by <em class="replaceable"><code>from_tz</code></em> to the time
          zone given by <em class="replaceable"><code>to_tz</code></em> and returns the
          resulting value. Time zones are specified as described in
          <a class="xref" href="globalization.html#time-zone-support" title="10.6. MySQL Server Time Zone Support">Section 10.6, “MySQL Server Time Zone Support”</a>. This function returns
          <code class="literal">NULL</code> if the arguments are invalid.
        </p><p>
          If the value falls out of the supported range of the
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> type when converted
          from <em class="replaceable"><code>from_tz</code></em> to UTC, no conversion
          occurs. The <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> range is
          described in <a class="xref" href="data-types.html#date-and-time-type-overview" title="11.1.2. Date and Time Type Overview">Section 11.1.2, “Date and Time Type Overview”</a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CONVERT_TZ('2004-01-01 12:00:00','GMT','MET');</code></strong>
        -&gt; '2004-01-01 13:00:00'
mysql&gt; <strong class="userinput"><code>SELECT CONVERT_TZ('2004-01-01 12:00:00','+00:00','+10:00');</code></strong>
        -&gt; '2004-01-01 22:00:00'
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            To use named time zones such as <code class="literal">'MET'</code> or
            <code class="literal">'Europe/Moscow'</code>, the time zone tables
            must be properly set up. See
            <a class="xref" href="globalization.html#time-zone-support" title="10.6. MySQL Server Time Zone Support">Section 10.6, “MySQL Server Time Zone Support”</a>, for instructions.
</p>
</div>
</li><li class="listitem"><p><a name="function_curdate"></a>
          <a class="indexterm" name="idp63977728"></a>

          <a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>
        </p><p>
          Returns the current date as a value in
          <code class="literal">'YYYY-MM-DD'</code> or <code class="literal">YYYYMMDD</code>
          format, depending on whether the function is used in a string
          or numeric context.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CURDATE();</code></strong>
        -&gt; '2008-06-13'
mysql&gt; <strong class="userinput"><code>SELECT CURDATE() + 0;</code></strong>
        -&gt; 20080613
</pre></li><li class="listitem"><p><a name="function_current-date"></a>
          <a class="indexterm" name="idp63988288"></a>

          <a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a>,
          <a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a>
        </p><p>
          <a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a> and
          <a class="link" href="functions.html#function_current-date"><code class="literal">CURRENT_DATE()</code></a> are synonyms for
          <a class="link" href="functions.html#function_curdate"><code class="literal">CURDATE()</code></a>.
        </p></li><li class="listitem"><p><a name="function_current-time"></a>
          <a class="indexterm" name="idp63997920"></a>

          <a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME</code></a>,
          <a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME</code></a> and
          <a class="link" href="functions.html#function_current-time"><code class="literal">CURRENT_TIME()</code></a> are synonyms for
          <a class="link" href="functions.html#function_curtime"><code class="literal">CURTIME()</code></a>.
        </p></li><li class="listitem"><p><a name="function_current-timestamp"></a>
          <a class="indexterm" name="idp64007952"></a>

          <a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a>,
          <a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a> and
          <a class="link" href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP()</code></a> are
          synonyms for <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>.
        </p></li><li class="listitem"><p><a name="function_curtime"></a>
          <a class="indexterm" name="idp64018032"></a>

          <a class="link" href="functions.html#function_curtime"><code class="literal">CURTIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          Returns the current time as a value in
          <code class="literal">'HH:MM:SS'</code> or <code class="literal">HHMMSS</code>
          format, depending on whether the function is used in a string
          or numeric context. The value is expressed in the current time
          zone.
        </p><p>
          As of MySQL 5.6.4, if the <em class="replaceable"><code>fsp</code></em>
          argument is given to specify a fractional seconds precision
          from 0 to 6, the return value includes a fractional seconds
          part of that many digits. Before 5.6.4, any argument is
          ignored.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CURTIME();</code></strong>
        -&gt; '23:50:26'
mysql&gt; <strong class="userinput"><code>SELECT CURTIME() + 0;</code></strong>
        -&gt; 235026.000000
</pre></li><li class="listitem"><p><a name="function_date"></a>
          <a class="indexterm" name="idp64030880"></a>

          <a class="link" href="functions.html#function_date"><code class="literal">DATE(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Extracts the date part of the date or datetime expression
          <em class="replaceable"><code>expr</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE('2003-12-31 01:02:03');</code></strong>
        -&gt; '2003-12-31'
</pre></li><li class="listitem"><p><a name="function_datediff"></a>
          <a class="indexterm" name="idp64040080"></a>

          <a class="link" href="functions.html#function_datediff"><code class="literal">DATEDIFF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_datediff"><code class="literal">DATEDIFF()</code></a> returns
          <em class="replaceable"><code>expr1</code></em> –
          <em class="replaceable"><code>expr2</code></em> expressed as a value in days
          from one date to the other. <em class="replaceable"><code>expr1</code></em>
          and <em class="replaceable"><code>expr2</code></em> are date or date-and-time
          expressions. Only the date parts of the values are used in the
          calculation.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30');</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT DATEDIFF('2010-11-30 23:59:59','2010-12-31');</code></strong>
        -&gt; -31
</pre></li><li class="listitem"><p><a name="function_date-add"></a>
          <a class="indexterm" name="idp64053536"></a>

          <a class="indexterm" name="idp64054608"></a>

          <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>,
          <a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>
        </p><p>
          These functions perform date arithmetic. The
          <em class="replaceable"><code>date</code></em> argument specifies the
          starting date or datetime value.
          <em class="replaceable"><code>expr</code></em> is an expression specifying
          the interval value to be added or subtracted from the starting
          date. <em class="replaceable"><code>expr</code></em> is a string; it may
          start with a <span class="quote">“<span class="quote"><code class="literal">-</code></span>”</span> for negative
          intervals. <em class="replaceable"><code>unit</code></em> is a keyword
          indicating the units in which the expression should be
          interpreted.
        </p><p>
          The <code class="literal">INTERVAL</code> keyword and the
          <em class="replaceable"><code>unit</code></em> specifier are not case
          sensitive.
        </p><p>
          The following table shows the expected form of the
          <em class="replaceable"><code>expr</code></em> argument for each
          <em class="replaceable"><code>unit</code></em> value.
</p>
<div class="informaltable">
<table summary="This table lists unit
            values and the expected expr
argument for each." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col"><em class="replaceable"><code>unit</code></em> Value</th><th scope="col">Expected <em class="replaceable"><code>expr</code></em> Format</th></tr></thead><tbody><tr><td scope="row"><code class="literal">MICROSECOND</code></td><td><code class="literal">MICROSECONDS</code></td></tr><tr><td scope="row"><code class="literal">SECOND</code></td><td><code class="literal">SECONDS</code></td></tr><tr><td scope="row"><code class="literal">MINUTE</code></td><td><code class="literal">MINUTES</code></td></tr><tr><td scope="row"><code class="literal">HOUR</code></td><td><code class="literal">HOURS</code></td></tr><tr><td scope="row"><code class="literal">DAY</code></td><td><code class="literal">DAYS</code></td></tr><tr><td scope="row"><code class="literal">WEEK</code></td><td><code class="literal">WEEKS</code></td></tr><tr><td scope="row"><code class="literal">MONTH</code></td><td><code class="literal">MONTHS</code></td></tr><tr><td scope="row"><code class="literal">QUARTER</code></td><td><code class="literal">QUARTERS</code></td></tr><tr><td scope="row"><code class="literal">YEAR</code></td><td><code class="literal">YEARS</code></td></tr><tr><td scope="row"><code class="literal">SECOND_MICROSECOND</code></td><td><code class="literal">'SECONDS.MICROSECONDS'</code></td></tr><tr><td scope="row"><code class="literal">MINUTE_MICROSECOND</code></td><td><code class="literal">'MINUTES:SECONDS.MICROSECONDS'</code></td></tr><tr><td scope="row"><code class="literal">MINUTE_SECOND</code></td><td><code class="literal">'MINUTES:SECONDS'</code></td></tr><tr><td scope="row"><code class="literal">HOUR_MICROSECOND</code></td><td><code class="literal">'HOURS:MINUTES:SECONDS.MICROSECONDS'</code></td></tr><tr><td scope="row"><code class="literal">HOUR_SECOND</code></td><td><code class="literal">'HOURS:MINUTES:SECONDS'</code></td></tr><tr><td scope="row"><code class="literal">HOUR_MINUTE</code></td><td><code class="literal">'HOURS:MINUTES'</code></td></tr><tr><td scope="row"><code class="literal">DAY_MICROSECOND</code></td><td><code class="literal">'DAYS HOURS:MINUTES:SECONDS.MICROSECONDS'</code></td></tr><tr><td scope="row"><code class="literal">DAY_SECOND</code></td><td><code class="literal">'DAYS HOURS:MINUTES:SECONDS'</code></td></tr><tr><td scope="row"><code class="literal">DAY_MINUTE</code></td><td><code class="literal">'DAYS HOURS:MINUTES'</code></td></tr><tr><td scope="row"><code class="literal">DAY_HOUR</code></td><td><code class="literal">'DAYS HOURS'</code></td></tr><tr><td scope="row"><code class="literal">YEAR_MONTH</code></td><td><code class="literal">'YEARS-MONTHS'</code></td></tr></tbody></table>
</div>
<p>
          The return value depends on the arguments:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> if the first
              argument is a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> (or
              <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>) value, or if the
              first argument is a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>
              and the <em class="replaceable"><code>unit</code></em> value uses
              <code class="literal">HOURS</code>, <code class="literal">MINUTES</code>, or
              <code class="literal">SECONDS</code>.
            </p></li><li class="listitem"><p>
              String otherwise.
</p></li></ul>
</div>
<p>
          To ensure that the result is
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>, you can use
          <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> to convert the first
          argument to <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>.
        </p><p>
          MySQL permits any punctuation delimiter in the
          <em class="replaceable"><code>expr</code></em> format. Those shown in the
          table are the suggested delimiters. If the
          <em class="replaceable"><code>date</code></em> argument is a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> value and your
          calculations involve only <code class="literal">YEAR</code>,
          <code class="literal">MONTH</code>, and <code class="literal">DAY</code> parts
          (that is, no time parts), the result is a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> value. Otherwise, the
          result is a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> value.
        </p><p>
          Date arithmetic also can be performed using
          <code class="literal">INTERVAL</code> together with the
          <a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a> or
          <a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a> operator:
        </p><pre class="programlisting"><code class="literal">date</code> + INTERVAL <em class="replaceable"><code>expr</code></em> <em class="replaceable"><code>unit</code></em>
<code class="literal">date</code> - INTERVAL <em class="replaceable"><code>expr</code></em> <em class="replaceable"><code>unit</code></em>
</pre><p>
          <code class="literal">INTERVAL <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em></code> is permitted on
          either side of the
          <a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a> operator if
          the expression on the other side is a date or datetime value.
          For the <a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a>
          operator, <code class="literal">INTERVAL <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em></code> is permitted only on
          the right side, because it makes no sense to subtract a date
          or datetime value from an interval.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT '2008-12-31 23:59:59' + INTERVAL 1 SECOND;</code></strong>
        -&gt; '2009-01-01 00:00:00'
mysql&gt; <strong class="userinput"><code>SELECT INTERVAL 1 DAY + '2008-12-31';</code></strong>
        -&gt; '2009-01-01'
mysql&gt; <strong class="userinput"><code>SELECT '2005-01-01' - INTERVAL 1 SECOND;</code></strong>
        -&gt; '2004-12-31 23:59:59'
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2000-12-31 23:59:59',</code></strong>
    -&gt; <strong class="userinput"><code>                INTERVAL 1 SECOND);</code></strong>
        -&gt; '2001-01-01 00:00:00'
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2010-12-31 23:59:59',</code></strong>
    -&gt; <strong class="userinput"><code>                INTERVAL 1 DAY);</code></strong>
        -&gt; '2011-01-01 23:59:59'
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2100-12-31 23:59:59',</code></strong>
    -&gt; <strong class="userinput"><code>                INTERVAL '1:1' MINUTE_SECOND);</code></strong>
        -&gt; '2101-01-01 00:01:00'
mysql&gt; <strong class="userinput"><code>SELECT DATE_SUB('2005-01-01 00:00:00',</code></strong>
    -&gt; <strong class="userinput"><code>                INTERVAL '1 1:1:1' DAY_SECOND);</code></strong>
        -&gt; '2004-12-30 22:58:59'
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('1900-01-01 00:00:00',</code></strong>
    -&gt; <strong class="userinput"><code>                INTERVAL '-1 10' DAY_HOUR);</code></strong>
        -&gt; '1899-12-30 14:00:00'
mysql&gt; <strong class="userinput"><code>SELECT DATE_SUB('1998-01-02', INTERVAL 31 DAY);</code></strong>
        -&gt; '1997-12-02'
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('1992-12-31 23:59:59.000002',</code></strong>
    -&gt;            <strong class="userinput"><code>INTERVAL '1.999999' SECOND_MICROSECOND);</code></strong>
        -&gt; '1993-01-01 00:00:01.000001'
</pre><p>
          If you specify an interval value that is too short (does not
          include all the interval parts that would be expected from the
          <em class="replaceable"><code>unit</code></em> keyword), MySQL assumes that
          you have left out the leftmost parts of the interval value.
          For example, if you specify a <em class="replaceable"><code>unit</code></em>
          of <code class="literal">DAY_SECOND</code>, the value of
          <em class="replaceable"><code>expr</code></em> is expected to have days,
          hours, minutes, and seconds parts. If you specify a value like
          <code class="literal">'1:10'</code>, MySQL assumes that the days and
          hours parts are missing and the value represents minutes and
          seconds. In other words, <code class="literal">'1:10' DAY_SECOND</code>
          is interpreted in such a way that it is equivalent to
          <code class="literal">'1:10' MINUTE_SECOND</code>. This is analogous to
          the way that MySQL interprets
          <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a> values as representing
          elapsed time rather than as a time of day.
        </p><p>
          Because <em class="replaceable"><code>expr</code></em> is treated as a
          string, be careful if you specify a nonstring value with
          <code class="literal">INTERVAL</code>. For example, with an interval
          specifier of <code class="literal">HOUR_MINUTE</code>,
          <code class="literal">6/4</code> evaluates to <code class="literal">1.5000</code>
          and is treated as 1 hour, 5000 minutes:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 6/4;</code></strong>
        -&gt; 1.5000
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2009-01-01', INTERVAL 6/4 HOUR_MINUTE);</code></strong>
        -&gt; '2009-01-04 12:20:00'
</pre><p>
          To ensure interpretation of the interval value as you expect,
          a <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> operation may be used.
          To treat <code class="literal">6/4</code> as 1 hour, 5 minutes, cast it
          to a <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> value with a
          single fractional digit:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CAST(6/4 AS DECIMAL(3,1));</code></strong>
        -&gt; 1.5
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('1970-01-01 12:00:00',</code></strong>
    -&gt; <strong class="userinput"><code>                INTERVAL CAST(6/4 AS DECIMAL(3,1)) HOUR_MINUTE);</code></strong>
        -&gt; '1970-01-01 13:05:00'
</pre><p>
          If you add to or subtract from a date value something that
          contains a time part, the result is automatically converted to
          a datetime value:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2013-01-01', INTERVAL 1 DAY);</code></strong>
        -&gt; '2013-01-02'
mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2013-01-01', INTERVAL 1 HOUR);</code></strong>
        -&gt; '2013-01-01 01:00:00'
</pre><p>
          If you add <code class="literal">MONTH</code>,
          <code class="literal">YEAR_MONTH</code>, or <code class="literal">YEAR</code> and
          the resulting date has a day that is larger than the maximum
          day for the new month, the day is adjusted to the maximum days
          in the new month:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2009-01-30', INTERVAL 1 MONTH);</code></strong>
        -&gt; '2009-02-28'
</pre><p>
          Date arithmetic operations require complete dates and do not
          work with incomplete dates such as
          <code class="literal">'2006-07-00'</code> or badly malformed dates:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_ADD('2006-07-00', INTERVAL 1 DAY);</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT '2005-03-32' + INTERVAL 1 MONTH;</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_date-format"></a>
          <a class="indexterm" name="idp64189376"></a>

          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT(<em class="replaceable"><code>date</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p>
          Formats the <em class="replaceable"><code>date</code></em> value according to
          the <em class="replaceable"><code>format</code></em> string.
        </p><p>
          The following specifiers may be used in the
          <em class="replaceable"><code>format</code></em> string. The
          <span class="quote">“<span class="quote"><code class="literal">%</code></span>”</span> character is required
          before format specifier characters.
</p>
<div class="informaltable">
<table summary="This table lists specifier characters for the
            DATE_FORMAT function that may be used in
            the format string and provides a
            description of each specifier character." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Specifier</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">%a</code></td><td>Abbreviated weekday name
                  (<code class="literal">Sun</code>..<code class="literal">Sat</code>)</td></tr><tr><td scope="row"><code class="literal">%b</code></td><td>Abbreviated month name (<code class="literal">Jan</code>..<code class="literal">Dec</code>)</td></tr><tr><td scope="row"><code class="literal">%c</code></td><td>Month, numeric (<code class="literal">0</code>..<code class="literal">12</code>)</td></tr><tr><td scope="row"><code class="literal">%D</code></td><td>Day of the month with English suffix (<code class="literal">0th</code>,
                  <code class="literal">1st</code>, <code class="literal">2nd</code>,
                  <code class="literal">3rd</code>, …)</td></tr><tr><td scope="row"><code class="literal">%d</code></td><td>Day of the month, numeric (<code class="literal">00</code>..<code class="literal">31</code>)</td></tr><tr><td scope="row"><code class="literal">%e</code></td><td>Day of the month, numeric (<code class="literal">0</code>..<code class="literal">31</code>)</td></tr><tr><td scope="row"><code class="literal">%f</code></td><td>Microseconds (<code class="literal">000000</code>..<code class="literal">999999</code>)</td></tr><tr><td scope="row"><code class="literal">%H</code></td><td>Hour (<code class="literal">00</code>..<code class="literal">23</code>)</td></tr><tr><td scope="row"><code class="literal">%h</code></td><td>Hour (<code class="literal">01</code>..<code class="literal">12</code>)</td></tr><tr><td scope="row"><code class="literal">%I</code></td><td>Hour (<code class="literal">01</code>..<code class="literal">12</code>)</td></tr><tr><td scope="row"><code class="literal">%i</code></td><td>Minutes, numeric (<code class="literal">00</code>..<code class="literal">59</code>)</td></tr><tr><td scope="row"><code class="literal">%j</code></td><td>Day of year (<code class="literal">001</code>..<code class="literal">366</code>)</td></tr><tr><td scope="row"><code class="literal">%k</code></td><td>Hour (<code class="literal">0</code>..<code class="literal">23</code>)</td></tr><tr><td scope="row"><code class="literal">%l</code></td><td>Hour (<code class="literal">1</code>..<code class="literal">12</code>)</td></tr><tr><td scope="row"><code class="literal">%M</code></td><td>Month name (<code class="literal">January</code>..<code class="literal">December</code>)</td></tr><tr><td scope="row"><code class="literal">%m</code></td><td>Month, numeric (<code class="literal">00</code>..<code class="literal">12</code>)</td></tr><tr><td scope="row"><code class="literal">%p</code></td><td><code class="literal">AM</code> or <code class="literal">PM</code></td></tr><tr><td scope="row"><code class="literal">%r</code></td><td>Time, 12-hour (<code class="literal">hh:mm:ss</code> followed by
                  <code class="literal">AM</code> or <code class="literal">PM</code>)</td></tr><tr><td scope="row"><code class="literal">%S</code></td><td>Seconds (<code class="literal">00</code>..<code class="literal">59</code>)</td></tr><tr><td scope="row"><code class="literal">%s</code></td><td>Seconds (<code class="literal">00</code>..<code class="literal">59</code>)</td></tr><tr><td scope="row"><code class="literal">%T</code></td><td>Time, 24-hour (<code class="literal">hh:mm:ss</code>)</td></tr><tr><td scope="row"><code class="literal">%U</code></td><td>Week (<code class="literal">00</code>..<code class="literal">53</code>), where Sunday is the
                  first day of the week</td></tr><tr><td scope="row"><code class="literal">%u</code></td><td>Week (<code class="literal">00</code>..<code class="literal">53</code>), where Monday is the
                  first day of the week</td></tr><tr><td scope="row"><code class="literal">%V</code></td><td>Week (<code class="literal">01</code>..<code class="literal">53</code>), where Sunday is the
                  first day of the week; used with <code class="literal">%X</code></td></tr><tr><td scope="row"><code class="literal">%v</code></td><td>Week (<code class="literal">01</code>..<code class="literal">53</code>), where Monday is the
                  first day of the week; used with <code class="literal">%x</code></td></tr><tr><td scope="row"><code class="literal">%W</code></td><td>Weekday name (<code class="literal">Sunday</code>..<code class="literal">Saturday</code>)</td></tr><tr><td scope="row"><code class="literal">%w</code></td><td>Day of the week
                  (<code class="literal">0</code>=Sunday..<code class="literal">6</code>=Saturday)</td></tr><tr><td scope="row"><code class="literal">%X</code></td><td>Year for the week where Sunday is the first day of the week, numeric,
                  four digits; used with <code class="literal">%V</code></td></tr><tr><td scope="row"><code class="literal">%x</code></td><td>Year for the week, where Monday is the first day of the week, numeric,
                  four digits; used with <code class="literal">%v</code></td></tr><tr><td scope="row"><code class="literal">%Y</code></td><td>Year, numeric, four digits</td></tr><tr><td scope="row"><code class="literal">%y</code></td><td>Year, numeric (two digits)</td></tr><tr><td scope="row"><code class="literal">%%</code></td><td>A literal <span class="quote">“<span class="quote"><code class="literal">%</code></span>”</span> character</td></tr><tr><td scope="row"><code class="literal">%<em class="replaceable"><code>x</code></em></code></td><td><em class="replaceable"><code>x</code></em>, for any
                  <span class="quote">“<span class="quote"><em class="replaceable"><code>x</code></em></span>”</span> not listed
above</td></tr></tbody></table>
</div>
<p>
          Ranges for the month and day specifiers begin with zero due to
          the fact that MySQL permits the storing of incomplete dates
          such as <code class="literal">'2014-00-00'</code>.
        </p><p>
          The language used for day and month names and abbreviations is
          controlled by the value of the
          <a class="link" href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> system variable
          (<a class="xref" href="globalization.html#locale-support" title="10.7. MySQL Server Locale Support">Section 10.7, “MySQL Server Locale Support”</a>).
        </p><p>
          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> returns a string
          with a character set and collation given by
          <a class="link" href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> and
          <a class="link" href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a> so that
          it can return month and weekday names containing non-ASCII
          characters.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('2009-10-04 22:23:00', '%W %M %Y');</code></strong>
        -&gt; 'Sunday October 2009'
mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('2007-10-04 22:23:00', '%H:%i:%s');</code></strong>
        -&gt; '22:23:00'
mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('1900-10-04 22:23:00',</code></strong>
    -&gt; <strong class="userinput"><code>                '%D %y %a %d %m %b %j');</code></strong>
        -&gt; '4th 00 Thu 04 10 Oct 277'
mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('1997-10-04 22:23:00',</code></strong>
    -&gt; <strong class="userinput"><code>                '%H %k %I %r %T %S %w');</code></strong>
        -&gt; '22 22 10 10:23:00 PM 22:23:00 00 6'
mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('1999-01-01', '%X %V');</code></strong>
        -&gt; '1998 52'
mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('2006-06-00', '%d');</code></strong>
        -&gt; '00'
</pre></li><li class="listitem"><p><a name="function_date-sub"></a>
          <a class="indexterm" name="idp64313792"></a>

          <a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>
        </p><p>
          See the description for
          <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>.
        </p></li><li class="listitem"><p><a name="function_day"></a>
          <a class="indexterm" name="idp64322176"></a>

          <a class="link" href="functions.html#function_day"><code class="literal">DAY(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_day"><code class="literal">DAY()</code></a> is a synonym for
          <a class="link" href="functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH()</code></a>.
        </p></li><li class="listitem"><p><a name="function_dayname"></a>
          <a class="indexterm" name="idp64330528"></a>

          <a class="link" href="functions.html#function_dayname"><code class="literal">DAYNAME(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the name of the weekday for
          <em class="replaceable"><code>date</code></em>. The language used for the
          name is controlled by the value of the
          <a class="link" href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> system variable
          (<a class="xref" href="globalization.html#locale-support" title="10.7. MySQL Server Locale Support">Section 10.7, “MySQL Server Locale Support”</a>).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DAYNAME('2007-02-03');</code></strong>
        -&gt; 'Saturday'
</pre></li><li class="listitem"><p><a name="function_dayofmonth"></a>
          <a class="indexterm" name="idp64341136"></a>

          <a class="link" href="functions.html#function_dayofmonth"><code class="literal">DAYOFMONTH(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the day of the month for
          <em class="replaceable"><code>date</code></em>, in the range
          <code class="literal">1</code> to <code class="literal">31</code>, or
          <code class="literal">0</code> for dates such as
          <code class="literal">'0000-00-00'</code> or
          <code class="literal">'2008-00-00'</code> that have a zero day part.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DAYOFMONTH('2007-02-03');</code></strong>
        -&gt; 3
</pre></li><li class="listitem"><p><a name="function_dayofweek"></a>
          <a class="indexterm" name="idp64353792"></a>

          <a class="link" href="functions.html#function_dayofweek"><code class="literal">DAYOFWEEK(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the weekday index for <em class="replaceable"><code>date</code></em>
          (<code class="literal">1</code> = Sunday, <code class="literal">2</code> = Monday,
          …, <code class="literal">7</code> = Saturday). These index values
          correspond to the ODBC standard.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DAYOFWEEK('2007-02-03');</code></strong>
        -&gt; 7
</pre></li><li class="listitem"><p><a name="function_dayofyear"></a>
          <a class="indexterm" name="idp64365056"></a>

          <a class="link" href="functions.html#function_dayofyear"><code class="literal">DAYOFYEAR(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the day of the year for
          <em class="replaceable"><code>date</code></em>, in the range
          <code class="literal">1</code> to <code class="literal">366</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DAYOFYEAR('2007-02-03');</code></strong>
        -&gt; 34
</pre></li><li class="listitem"><p><a name="function_extract"></a>
          <a class="indexterm" name="idp64375552"></a>

          <a class="link" href="functions.html#function_extract"><code class="literal">EXTRACT(<em class="replaceable"><code>unit</code></em>
          FROM <em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          The <a class="link" href="functions.html#function_extract"><code class="literal">EXTRACT()</code></a> function uses the
          same kinds of unit specifiers as
          <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a> or
          <a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>, but extracts parts
          from the date rather than performing date arithmetic.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT EXTRACT(YEAR FROM '2009-07-02');</code></strong>
       -&gt; 2009
mysql&gt; <strong class="userinput"><code>SELECT EXTRACT(YEAR_MONTH FROM '2009-07-02 01:02:03');</code></strong>
       -&gt; 200907
mysql&gt; <strong class="userinput"><code>SELECT EXTRACT(DAY_MINUTE FROM '2009-07-02 01:02:03');</code></strong>
       -&gt; 20102
mysql&gt; <strong class="userinput"><code>SELECT EXTRACT(MICROSECOND</code></strong>
    -&gt;                <strong class="userinput"><code>FROM '2003-01-02 10:30:00.000123');</code></strong>
        -&gt; 123
</pre></li><li class="listitem"><p><a name="function_from-days"></a>
          <a class="indexterm" name="idp64390464"></a>

          <a class="link" href="functions.html#function_from-days"><code class="literal">FROM_DAYS(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          Given a day number <em class="replaceable"><code>N</code></em>, returns a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> value.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FROM_DAYS(730669);</code></strong>
        -&gt; '2007-07-03'
</pre><p>
          Use <a class="link" href="functions.html#function_from-days"><code class="literal">FROM_DAYS()</code></a> with caution on
          old dates. It is not intended for use with values that precede
          the advent of the Gregorian calendar (1582). See
          <a class="xref" href="functions.html#mysql-calendar" title="12.8. What Calendar Is Used By MySQL?">Section 12.8, “What Calendar Is Used By MySQL?”</a>.
        </p></li><li class="listitem"><p><a name="function_from-unixtime"></a>
          <a class="indexterm" name="idp64402368"></a>

          <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME(<em class="replaceable"><code>unix_timestamp</code></em>)</code></a>,
          <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME(<em class="replaceable"><code>unix_timestamp</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p>
          Returns a representation of the
          <em class="replaceable"><code>unix_timestamp</code></em> argument as a value
          in <code class="literal">'YYYY-MM-DD HH:MM:SS'</code> or
          <code class="literal">YYYYMMDDHHMMSS</code> format, depending on whether
          the function is used in a string or numeric context. The value
          is expressed in the current time zone.
          <em class="replaceable"><code>unix_timestamp</code></em> is an internal
          timestamp value such as is produced by the
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> function.
        </p><p>
          If <em class="replaceable"><code>format</code></em> is given, the result is
          formatted according to the <em class="replaceable"><code>format</code></em>
          string, which is used the same way as listed in the entry for
          the <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> function.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT FROM_UNIXTIME(1196440219);</code></strong>
        -&gt; '2007-11-30 10:30:19'
mysql&gt; <strong class="userinput"><code>SELECT FROM_UNIXTIME(1196440219) + 0;</code></strong>
        -&gt; 20071130103019.000000
mysql&gt; <strong class="userinput"><code>SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(),</code></strong>
    -&gt;                      <strong class="userinput"><code>'%Y %D %M %h:%i:%s %x');</code></strong>
        -&gt; '2007 30th November 10:30:59 2007'
</pre><p>
          Note: If you use
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> and
          <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a> to convert
          between <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values and
          Unix timestamp values, the conversion is lossy because the
          mapping is not one-to-one in both directions. For details, see
          the description of the
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> function.
        </p></li><li class="listitem"><p><a name="function_get-format"></a>
          <a class="indexterm" name="idp64424928"></a>

          <a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT({DATE|TIME|DATETIME},
          {'EUR'|'USA'|'JIS'|'ISO'|'INTERNAL'})</code></a>
        </p><p>
          Returns a format string. This function is useful in
          combination with the
          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> and the
          <a class="link" href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> functions.
        </p><p>
          The possible values for the first and second arguments result
          in several possible format strings (for the specifiers used,
          see the table in the
          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> function
          description). ISO format refers to ISO 9075, not ISO 8601.
</p>
<div class="informaltable">
<table summary="This table lists function calls for the
            GET_FORMAT function along with results
for each function call." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Function Call</th><th scope="col">Result</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'USA')</code></a></td><td><code class="literal">'%m.%d.%Y'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'JIS')</code></a></td><td><code class="literal">'%Y-%m-%d'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'ISO')</code></a></td><td><code class="literal">'%Y-%m-%d'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'EUR')</code></a></td><td><code class="literal">'%d.%m.%Y'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATE,'INTERNAL')</code></a></td><td><code class="literal">'%Y%m%d'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'USA')</code></a></td><td><code class="literal">'%Y-%m-%d %H.%i.%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'JIS')</code></a></td><td><code class="literal">'%Y-%m-%d %H:%i:%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'ISO')</code></a></td><td><code class="literal">'%Y-%m-%d %H:%i:%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'EUR')</code></a></td><td><code class="literal">'%Y-%m-%d %H.%i.%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(DATETIME,'INTERNAL')</code></a></td><td><code class="literal">'%Y%m%d%H%i%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'USA')</code></a></td><td><code class="literal">'%h:%i:%s %p'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'JIS')</code></a></td><td><code class="literal">'%H:%i:%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'ISO')</code></a></td><td><code class="literal">'%H:%i:%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'EUR')</code></a></td><td><code class="literal">'%H.%i.%s'</code></td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT(TIME,'INTERNAL')</code></a></td><td><code class="literal">'%H%i%s'</code></td></tr></tbody></table>
</div>
<p>
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> can also be used as
          the first argument to
          <a class="link" href="functions.html#function_get-format"><code class="literal">GET_FORMAT()</code></a>, in which case the
          function returns the same values as for
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('2003-10-03',GET_FORMAT(DATE,'EUR'));</code></strong>
        -&gt; '03.10.2003'
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('10.31.2003',GET_FORMAT(DATE,'USA'));</code></strong>
        -&gt; '2003-10-31'
</pre></li><li class="listitem"><p><a name="function_hour"></a>
          <a class="indexterm" name="idp64479936"></a>

          <a class="link" href="functions.html#function_hour"><code class="literal">HOUR(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p>
          Returns the hour for <em class="replaceable"><code>time</code></em>. The
          range of the return value is <code class="literal">0</code> to
          <code class="literal">23</code> for time-of-day values. However, the
          range of <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a> values actually
          is much larger, so <code class="literal">HOUR</code> can return values
          greater than <code class="literal">23</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HOUR('10:05:03');</code></strong>
        -&gt; 10
mysql&gt; <strong class="userinput"><code>SELECT HOUR('272:59:59');</code></strong>
        -&gt; 272
</pre></li><li class="listitem"><p><a name="function_last-day"></a>
          <a class="indexterm" name="idp64493536"></a>

          <a class="link" href="functions.html#function_last-day"><code class="literal">LAST_DAY(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Takes a date or datetime value and returns the corresponding
          value for the last day of the month. Returns
          <code class="literal">NULL</code> if the argument is invalid.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LAST_DAY('2003-02-05');</code></strong>
        -&gt; '2003-02-28'
mysql&gt; <strong class="userinput"><code>SELECT LAST_DAY('2004-02-05');</code></strong>
        -&gt; '2004-02-29'
mysql&gt; <strong class="userinput"><code>SELECT LAST_DAY('2004-01-01 01:01:01');</code></strong>
        -&gt; '2004-01-31'
mysql&gt; <strong class="userinput"><code>SELECT LAST_DAY('2003-03-32');</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_localtime"></a>
          <a class="indexterm" name="idp64505424"></a>

          <a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME</code></a>,
          <a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME</code></a> and
          <a class="link" href="functions.html#function_localtime"><code class="literal">LOCALTIME()</code></a> are synonyms for
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>.
        </p></li><li class="listitem"><p><a name="function_localtimestamp"></a>
          <a class="indexterm" name="idp64515440"></a>

          <a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code></a>,
          <a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          <a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP</code></a> and
          <a class="link" href="functions.html#function_localtimestamp"><code class="literal">LOCALTIMESTAMP()</code></a> are synonyms
          for <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>.
        </p></li><li class="listitem"><p><a name="function_makedate"></a>
          <a class="indexterm" name="idp64525456"></a>

          <a class="link" href="functions.html#function_makedate"><code class="literal">MAKEDATE(<em class="replaceable"><code>year</code></em>,<em class="replaceable"><code>dayofyear</code></em>)</code></a>
        </p><p>
          Returns a date, given year and day-of-year values.
          <em class="replaceable"><code>dayofyear</code></em> must be greater than 0 or
          the result is <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MAKEDATE(2011,31), MAKEDATE(2011,32);</code></strong>
        -&gt; '2011-01-31', '2011-02-01'
mysql&gt; <strong class="userinput"><code>SELECT MAKEDATE(2011,365), MAKEDATE(2014,365);</code></strong>
        -&gt; '2011-12-31', '2014-12-31'
mysql&gt; <strong class="userinput"><code>SELECT MAKEDATE(2011,0);</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_maketime"></a>
          <a class="indexterm" name="idp64537456"></a>

          <a class="link" href="functions.html#function_maketime"><code class="literal">MAKETIME(<em class="replaceable"><code>hour</code></em>,<em class="replaceable"><code>minute</code></em>,<em class="replaceable"><code>second</code></em>)</code></a>
        </p><p>
          Returns a time value calculated from the
          <em class="replaceable"><code>hour</code></em>,
          <em class="replaceable"><code>minute</code></em>, and
          <em class="replaceable"><code>second</code></em> arguments.
        </p><p>
          As of MySQL 5.6.4, the <em class="replaceable"><code>second</code></em>
          argument can have a fractional part.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MAKETIME(12,15,30);</code></strong>
        -&gt; '12:15:30'
</pre></li><li class="listitem"><p><a name="function_microsecond"></a>
          <a class="indexterm" name="idp64549232"></a>

          <a class="link" href="functions.html#function_microsecond"><code class="literal">MICROSECOND(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Returns the microseconds from the time or datetime expression
          <em class="replaceable"><code>expr</code></em> as a number in the range from
          <code class="literal">0</code> to <code class="literal">999999</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MICROSECOND('12:00:00.123456');</code></strong>
        -&gt; 123456
mysql&gt; <strong class="userinput"><code>SELECT MICROSECOND('2009-12-31 23:59:59.000010');</code></strong>
        -&gt; 10
</pre></li><li class="listitem"><p><a name="function_minute"></a>
          <a class="indexterm" name="idp64560624"></a>

          <a class="link" href="functions.html#function_minute"><code class="literal">MINUTE(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p>
          Returns the minute for <em class="replaceable"><code>time</code></em>, in the
          range <code class="literal">0</code> to <code class="literal">59</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MINUTE('2008-02-03 10:05:03');</code></strong>
        -&gt; 5
</pre></li><li class="listitem"><p><a name="function_month"></a>
          <a class="indexterm" name="idp64571104"></a>

          <a class="link" href="functions.html#function_month"><code class="literal">MONTH(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the month for <em class="replaceable"><code>date</code></em>, in the
          range <code class="literal">1</code> to <code class="literal">12</code> for
          January to December, or <code class="literal">0</code> for dates such as
          <code class="literal">'0000-00-00'</code> or
          <code class="literal">'2008-00-00'</code> that have a zero month part.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MONTH('2008-02-03');</code></strong>
        -&gt; 2
</pre></li><li class="listitem"><p><a name="function_monthname"></a>
          <a class="indexterm" name="idp64583760"></a>

          <a class="link" href="functions.html#function_monthname"><code class="literal">MONTHNAME(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the full name of the month for
          <em class="replaceable"><code>date</code></em>. The language used for the
          name is controlled by the value of the
          <a class="link" href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> system variable
          (<a class="xref" href="globalization.html#locale-support" title="10.7. MySQL Server Locale Support">Section 10.7, “MySQL Server Locale Support”</a>).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MONTHNAME('2008-02-03');</code></strong>
        -&gt; 'February'
</pre></li><li class="listitem"><p><a name="function_now"></a>
          <a class="indexterm" name="idp64594336"></a>

          <a class="link" href="functions.html#function_now"><code class="literal">NOW([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          Returns the current date and time as a value in
          <code class="literal">'YYYY-MM-DD HH:MM:SS'</code> or
          <code class="literal">YYYYMMDDHHMMSS</code> format, depending on whether
          the function is used in a string or numeric context. The value
          is expressed in the current time zone.
        </p><p>
          As of MySQL 5.6.4, if the <em class="replaceable"><code>fsp</code></em>
          argument is given to specify a fractional seconds precision
          from 0 to 6, the return value includes a fractional seconds
          part of that many digits. Before 5.6.4, any argument is
          ignored.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NOW();</code></strong>
        -&gt; '2007-12-15 23:50:26'
mysql&gt; <strong class="userinput"><code>SELECT NOW() + 0;</code></strong>
        -&gt; 20071215235026.000000
</pre><p>
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> returns a constant time
          that indicates the time at which the statement began to
          execute. (Within a stored function or trigger,
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> returns the time at which
          the function or triggering statement began to execute.) This
          differs from the behavior for
          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>, which returns the
          exact time at which it executes.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NOW(), SLEEP(2), NOW();</code></strong>
+---------------------+----------+---------------------+
| NOW()               | SLEEP(2) | NOW()               |
+---------------------+----------+---------------------+
| 2006-04-12 13:47:36 |        0 | 2006-04-12 13:47:36 |
+---------------------+----------+---------------------+

mysql&gt; <strong class="userinput"><code>SELECT SYSDATE(), SLEEP(2), SYSDATE();</code></strong>
+---------------------+----------+---------------------+
| SYSDATE()           | SLEEP(2) | SYSDATE()           |
+---------------------+----------+---------------------+
| 2006-04-12 13:47:44 |        0 | 2006-04-12 13:47:46 |
+---------------------+----------+---------------------+
</pre><p>
          In addition, the <code class="literal">SET TIMESTAMP</code> statement
          affects the value returned by
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> but not by
          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>. This means that
          timestamp settings in the binary log have no effect on
          invocations of <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>.
          Setting the timestamp to a nonzero value causes each
          subsequent invocation of <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>
          to return that value. Setting the timestamp to zero cancels
          this effect so that <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> once
          again returns the current date and time.
        </p><p>
          See the description for
          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> for additional
          information about the differences between the two functions.
        </p></li><li class="listitem"><p><a name="function_period-add"></a>
          <a class="indexterm" name="idp64619872"></a>

          <a class="link" href="functions.html#function_period-add"><code class="literal">PERIOD_ADD(<em class="replaceable"><code>P</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          Adds <em class="replaceable"><code>N</code></em> months to period
          <em class="replaceable"><code>P</code></em> (in the format
          <code class="literal">YYMM</code> or <code class="literal">YYYYMM</code>). Returns
          a value in the format <code class="literal">YYYYMM</code>. Note that the
          period argument <em class="replaceable"><code>P</code></em> is
          <span class="emphasis"><em>not</em></span> a date value.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PERIOD_ADD(200801,2);</code></strong>
        -&gt; 200803
</pre></li><li class="listitem"><p><a name="function_period-diff"></a>
          <a class="indexterm" name="idp64632768"></a>

          <a class="link" href="functions.html#function_period-diff"><code class="literal">PERIOD_DIFF(<em class="replaceable"><code>P1</code></em>,<em class="replaceable"><code>P2</code></em>)</code></a>
        </p><p>
          Returns the number of months between periods
          <em class="replaceable"><code>P1</code></em> and
          <em class="replaceable"><code>P2</code></em>. <em class="replaceable"><code>P1</code></em>
          and <em class="replaceable"><code>P2</code></em> should be in the format
          <code class="literal">YYMM</code> or <code class="literal">YYYYMM</code>. Note
          that the period arguments <em class="replaceable"><code>P1</code></em> and
          <em class="replaceable"><code>P2</code></em> are <span class="emphasis"><em>not</em></span>
          date values.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT PERIOD_DIFF(200802,200703);</code></strong>
        -&gt; 11
</pre></li><li class="listitem"><p><a name="function_quarter"></a>
          <a class="indexterm" name="idp64646272"></a>

          <a class="link" href="functions.html#function_quarter"><code class="literal">QUARTER(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the quarter of the year for
          <em class="replaceable"><code>date</code></em>, in the range
          <code class="literal">1</code> to <code class="literal">4</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT QUARTER('2008-04-01');</code></strong>
        -&gt; 2
</pre></li><li class="listitem"><p><a name="function_second"></a>
          <a class="indexterm" name="idp64656784"></a>

          <a class="link" href="functions.html#function_second"><code class="literal">SECOND(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p>
          Returns the second for <em class="replaceable"><code>time</code></em>, in the
          range <code class="literal">0</code> to <code class="literal">59</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SECOND('10:05:03');</code></strong>
        -&gt; 3
</pre></li><li class="listitem"><p><a name="function_sec-to-time"></a>
          <a class="indexterm" name="idp64667264"></a>

          <a class="link" href="functions.html#function_sec-to-time"><code class="literal">SEC_TO_TIME(<em class="replaceable"><code>seconds</code></em>)</code></a>
        </p><p>
          Returns the <em class="replaceable"><code>seconds</code></em> argument,
          converted to hours, minutes, and seconds, as a
          <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a> value. The range of the
          result is constrained to that of the
          <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a> data type. A warning
          occurs if the argument corresponds to a value outside that
          range.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SEC_TO_TIME(2378);</code></strong>
        -&gt; '00:39:38'
mysql&gt; <strong class="userinput"><code>SELECT SEC_TO_TIME(2378) + 0;</code></strong>
        -&gt; 3938
</pre></li><li class="listitem"><p><a name="function_str-to-date"></a>
          <a class="indexterm" name="idp64679056"></a>

          <a class="link" href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p>
          This is the inverse of the
          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> function. It
          takes a string <em class="replaceable"><code>str</code></em> and a format
          string <em class="replaceable"><code>format</code></em>.
          <a class="link" href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a> returns a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> value if the format
          string contains both date and time parts, or a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> or
          <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a> value if the string
          contains only date or time parts. If the date, time, or
          datetime value extracted from <em class="replaceable"><code>str</code></em>
          is illegal, <a class="link" href="functions.html#function_str-to-date"><code class="literal">STR_TO_DATE()</code></a>
          returns <code class="literal">NULL</code> and produces a warning.
        </p><p>
          The server scans <em class="replaceable"><code>str</code></em> attempting to
          match <em class="replaceable"><code>format</code></em> to it. The format
          string can contain literal characters and format specifiers
          beginning with <code class="literal">%</code>. Literal characters in
          <em class="replaceable"><code>format</code></em> must match literally in
          <em class="replaceable"><code>str</code></em>. Format specifiers in
          <em class="replaceable"><code>format</code></em> must match a date or time
          part in <em class="replaceable"><code>str</code></em>. For the specifiers
          that can be used in <em class="replaceable"><code>format</code></em>, see the
          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> function
          description.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('01,5,2013','%d,%m,%Y');</code></strong>
        -&gt; '2013-05-01'
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('May 1, 2013','%M %d,%Y');</code></strong>
        -&gt; '2013-05-01'
</pre><p>
          Scanning starts at the beginning of
          <em class="replaceable"><code>str</code></em> and fails if
          <em class="replaceable"><code>format</code></em> is found not to match. Extra
          characters at the end of <em class="replaceable"><code>str</code></em> are
          ignored.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('a09:30:17','a%h:%i:%s');</code></strong>
        -&gt; '09:30:17'
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('a09:30:17','%h:%i:%s');</code></strong>
        -&gt; NULL
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('09:30:17a','%h:%i:%s');</code></strong>
        -&gt; '09:30:17'
</pre><p>
          Unspecified date or time parts have a value of 0, so
          incompletely specified values in
          <em class="replaceable"><code>str</code></em> produce a result with some or
          all parts set to 0:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('abc','abc');</code></strong>
        -&gt; '0000-00-00'
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('9','%m');</code></strong>
        -&gt; '0000-09-00'
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('9','%s');</code></strong>
        -&gt; '00:00:09'
</pre><p>
          Range checking on the parts of date values is as described in
          <a class="xref" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types">Section 11.3.1, “The <code class="literal">DATE</code>, <code class="literal">DATETIME</code>, and
        <code class="literal">TIMESTAMP</code> Types”</a>. This means, for example, that
          <span class="quote">“<span class="quote">zero</span>”</span> dates or dates with part values of 0 are
          permitted unless the SQL mode is set to disallow such values.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('00/00/0000', '%m/%d/%Y');</code></strong>
        -&gt; '0000-00-00'
mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('04/31/2004', '%m/%d/%Y');</code></strong>
        -&gt; '2004-04-31'
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            You cannot use format <code class="literal">"%X%V"</code> to convert a
            year-week string to a date because the combination of a year
            and week does not uniquely identify a year and month if the
            week crosses a month boundary. To convert a year-week to a
            date, you should also specify the weekday:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT STR_TO_DATE('200442 Monday', '%X%V %W');</code></strong>
        -&gt; '2004-10-18'
</pre>
</div>
</li><li class="listitem"><p><a name="function_subdate"></a>
          <a class="indexterm" name="idp64717184"></a>

          <a class="link" href="functions.html#function_subdate"><code class="literal">SUBDATE(<em class="replaceable"><code>date</code></em>,INTERVAL
          <em class="replaceable"><code>expr</code></em>
          <em class="replaceable"><code>unit</code></em>)</code></a>,
          <a class="link" href="functions.html#function_subdate"><code class="literal">SUBDATE(<em class="replaceable"><code>expr</code></em>,<em class="replaceable"><code>days</code></em>)</code></a>
        </p><p>
          When invoked with the <code class="literal">INTERVAL</code> form of the
          second argument, <a class="link" href="functions.html#function_subdate"><code class="literal">SUBDATE()</code></a> is a
          synonym for <a class="link" href="functions.html#function_date-sub"><code class="literal">DATE_SUB()</code></a>. For
          information on the <code class="literal">INTERVAL</code>
          <em class="replaceable"><code>unit</code></em> argument, see the discussion
          for <a class="link" href="functions.html#function_date-add"><code class="literal">DATE_ADD()</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATE_SUB('2008-01-02', INTERVAL 31 DAY);</code></strong>
        -&gt; '2007-12-02'
mysql&gt; <strong class="userinput"><code>SELECT SUBDATE('2008-01-02', INTERVAL 31 DAY);</code></strong>
        -&gt; '2007-12-02'
</pre><p>
          The second form enables the use of an integer value for
          <em class="replaceable"><code>days</code></em>. In such cases, it is
          interpreted as the number of days to be subtracted from the
          date or datetime expression <em class="replaceable"><code>expr</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUBDATE('2008-01-02 12:00:00', 31);</code></strong>
        -&gt; '2007-12-02 12:00:00'
</pre></li><li class="listitem"><p><a name="function_subtime"></a>
          <a class="indexterm" name="idp64736240"></a>

          <a class="link" href="functions.html#function_subtime"><code class="literal">SUBTIME(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_subtime"><code class="literal">SUBTIME()</code></a> returns
          <em class="replaceable"><code>expr1</code></em> –
          <em class="replaceable"><code>expr2</code></em> expressed as a value in the
          same format as <em class="replaceable"><code>expr1</code></em>.
          <em class="replaceable"><code>expr1</code></em> is a time or datetime
          expression, and <em class="replaceable"><code>expr2</code></em> is a time
          expression.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUBTIME('2007-12-31 23:59:59.999999','1 1:1:1.000002');</code></strong>
        -&gt; '2007-12-30 22:58:58.999997'
mysql&gt; <strong class="userinput"><code>SELECT SUBTIME('01:00:00.999999', '02:00:00.999998');</code></strong>
        -&gt; '-00:59:59.999999'
</pre></li><li class="listitem"><p><a name="function_sysdate"></a>
          <a class="indexterm" name="idp64749392"></a>

          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>
        </p><p>
          Returns the current date and time as a value in
          <code class="literal">'YYYY-MM-DD HH:MM:SS'</code> or
          <code class="literal">YYYYMMDDHHMMSS</code> format, depending on whether
          the function is used in a string or numeric context.
        </p><p>
          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> returns the time at
          which it executes. This differs from the behavior for
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>, which returns a constant
          time that indicates the time at which the statement began to
          execute. (Within a stored function or trigger,
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> returns the time at which
          the function or triggering statement began to execute.)
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NOW(), SLEEP(2), NOW();</code></strong>
+---------------------+----------+---------------------+
| NOW()               | SLEEP(2) | NOW()               |
+---------------------+----------+---------------------+
| 2006-04-12 13:47:36 |        0 | 2006-04-12 13:47:36 |
+---------------------+----------+---------------------+

mysql&gt; <strong class="userinput"><code>SELECT SYSDATE(), SLEEP(2), SYSDATE();</code></strong>
+---------------------+----------+---------------------+
| SYSDATE()           | SLEEP(2) | SYSDATE()           |
+---------------------+----------+---------------------+
| 2006-04-12 13:47:44 |        0 | 2006-04-12 13:47:46 |
+---------------------+----------+---------------------+
</pre><p>
          In addition, the <code class="literal">SET TIMESTAMP</code> statement
          affects the value returned by
          <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a> but not by
          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>. This means that
          timestamp settings in the binary log have no effect on
          invocations of <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a>.
        </p><p>
          Because <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> can return
          different values even within the same statement, and is not
          affected by <code class="literal">SET TIMESTAMP</code>, it is
          nondeterministic and therefore unsafe for replication if
          statement-based binary logging is used. If that is a problem,
          you can use row-based logging.
        </p><p>
          Alternatively, you can use the
          <a class="link" href="server-administration.html#option_mysqld_sysdate-is-now"><code class="option">--sysdate-is-now</code></a> option to
          cause <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> to be an alias
          for <a class="link" href="functions.html#function_now"><code class="literal">NOW()</code></a>. This works if the
          option is used on both the master and the slave.
        </p><p>
          The nondeterministic nature of
          <a class="link" href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> also means that
          indexes cannot be used for evaluating expressions that refer
          to it.
        </p></li><li class="listitem"><p><a name="function_time"></a>
          <a class="indexterm" name="idp64774752"></a>

          <a class="link" href="functions.html#function_time"><code class="literal">TIME(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Extracts the time part of the time or datetime expression
          <em class="replaceable"><code>expr</code></em> and returns it as a string.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIME('2003-12-31 01:02:03');</code></strong>
        -&gt; '01:02:03'
mysql&gt; <strong class="userinput"><code>SELECT TIME('2003-12-31 01:02:03.000123');</code></strong>
        -&gt; '01:02:03.000123'
</pre></li><li class="listitem"><p><a name="function_timediff"></a>
          <a class="indexterm" name="idp64786912"></a>

          <a class="link" href="functions.html#function_timediff"><code class="literal">TIMEDIFF(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_timediff"><code class="literal">TIMEDIFF()</code></a> returns
          <em class="replaceable"><code>expr1</code></em> –
          <em class="replaceable"><code>expr2</code></em> expressed as a time value.
          <em class="replaceable"><code>expr1</code></em> and
          <em class="replaceable"><code>expr2</code></em> are time or date-and-time
          expressions, but both must be of the same type.
        </p><p>
          The result returned by <code class="literal">TIMEDIFF()</code> is
          limited to the range allowed for
          <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a> values. Alternatively, you
          can use either of the functions
          <a class="link" href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF()</code></a> and
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a>, both of which
          return integers.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIMEDIFF('2000:01:01 00:00:00',</code></strong>
    -&gt;                 <strong class="userinput"><code>'2000:01:01 00:00:00.000001');</code></strong>
        -&gt; '-00:00:00.000001'
mysql&gt; <strong class="userinput"><code>SELECT TIMEDIFF('2008-12-31 23:59:59.000001',</code></strong>
    -&gt; <strong class="userinput"><code>                '2008-12-30 01:01:01.000002');</code></strong>
        -&gt; '46:58:57.999999'
</pre></li><li class="listitem"><p><a name="function_timestamp"></a>
          <a class="indexterm" name="idp64805648"></a>

          <a class="link" href="functions.html#function_timestamp"><code class="literal">TIMESTAMP(<em class="replaceable"><code>expr</code></em>)</code></a>,
          <a class="link" href="functions.html#function_timestamp"><code class="literal">TIMESTAMP(<em class="replaceable"><code>expr1</code></em>,<em class="replaceable"><code>expr2</code></em>)</code></a>
        </p><p>
          With a single argument, this function returns the date or
          datetime expression <em class="replaceable"><code>expr</code></em> as a
          datetime value. With two arguments, it adds the time
          expression <em class="replaceable"><code>expr2</code></em> to the date or
          datetime expression <em class="replaceable"><code>expr1</code></em> and
          returns the result as a datetime value.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMP('2003-12-31');</code></strong>
        -&gt; '2003-12-31 00:00:00'
mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMP('2003-12-31 12:00:00','12:00:00');</code></strong>
        -&gt; '2004-01-01 00:00:00'
</pre></li><li class="listitem"><p><a name="function_timestampadd"></a>
          <a class="indexterm" name="idp64818448"></a>

          <a class="link" href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD(<em class="replaceable"><code>unit</code></em>,<em class="replaceable"><code>interval</code></em>,<em class="replaceable"><code>datetime_expr</code></em>)</code></a>
        </p><p>
          Adds the integer expression
          <em class="replaceable"><code>interval</code></em> to the date or datetime
          expression <em class="replaceable"><code>datetime_expr</code></em>. The unit
          for <em class="replaceable"><code>interval</code></em> is given by the
          <em class="replaceable"><code>unit</code></em> argument, which should be one
          of the following values: <code class="literal">MICROSECOND</code>
          (microseconds), <code class="literal">SECOND</code>,
          <code class="literal">MINUTE</code>, <code class="literal">HOUR</code>,
          <code class="literal">DAY</code>, <code class="literal">WEEK</code>,
          <code class="literal">MONTH</code>, <code class="literal">QUARTER</code>, or
          <code class="literal">YEAR</code>.
        </p><p>
          The <em class="replaceable"><code>unit</code></em> value may be specified
          using one of keywords as shown, or with a prefix of
          <code class="literal">SQL_TSI_</code>. For example,
          <code class="literal">DAY</code> and <code class="literal">SQL_TSI_DAY</code> both
          are legal.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMPADD(MINUTE,1,'2003-01-02');</code></strong>
        -&gt; '2003-01-02 00:01:00'
mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMPADD(WEEK,1,'2003-01-02');</code></strong>
        -&gt; '2003-01-09'
</pre></li><li class="listitem"><p><a name="function_timestampdiff"></a>
          <a class="indexterm" name="idp64840224"></a>

          <a class="link" href="functions.html#function_timestampdiff"><code class="literal">TIMESTAMPDIFF(<em class="replaceable"><code>unit</code></em>,<em class="replaceable"><code>datetime_expr1</code></em>,<em class="replaceable"><code>datetime_expr2</code></em>)</code></a>
        </p><p>
          Returns <em class="replaceable"><code>datetime_expr2</code></em> –
          <em class="replaceable"><code>datetime_expr1</code></em>, where
          <em class="replaceable"><code>datetime_expr1</code></em> and
          <em class="replaceable"><code>datetime_expr2</code></em> are date or datetime
          expressions. One expression may be a date and the other a
          datetime; a date value is treated as a datetime having the
          time part <code class="literal">'00:00:00'</code> where necessary. The
          unit for the result (an integer) is given by the
          <em class="replaceable"><code>unit</code></em> argument. The legal values for
          <em class="replaceable"><code>unit</code></em> are the same as those listed
          in the description of the
          <a class="link" href="functions.html#function_timestampadd"><code class="literal">TIMESTAMPADD()</code></a> function.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMPDIFF(MONTH,'2003-02-01','2003-05-01');</code></strong>
        -&gt; 3
mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMPDIFF(YEAR,'2002-05-01','2001-01-01');</code></strong>
        -&gt; -1
mysql&gt; <strong class="userinput"><code>SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55');</code></strong>
        -&gt; 128885
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            The order of the date or datetime arguments for this
            function is the opposite of that used with the
            <a class="link" href="functions.html#function_timestamp"><code class="literal">TIMESTAMP()</code></a> function when
            invoked with 2 arguments.
</p>
</div>
</li><li class="listitem"><p><a name="function_time-format"></a>
          <a class="indexterm" name="idp64857648"></a>

          <a class="link" href="functions.html#function_time-format"><code class="literal">TIME_FORMAT(<em class="replaceable"><code>time</code></em>,<em class="replaceable"><code>format</code></em>)</code></a>
        </p><p>
          This is used like the
          <a class="link" href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a> function, but the
          <em class="replaceable"><code>format</code></em> string may contain format
          specifiers only for hours, minutes, seconds, and microseconds.
          Other specifiers produce a <code class="literal">NULL</code> value or
          <code class="literal">0</code>.
        </p><p>
          If the <em class="replaceable"><code>time</code></em> value contains an hour
          part that is greater than <code class="literal">23</code>, the
          <code class="literal">%H</code> and <code class="literal">%k</code> hour format
          specifiers produce a value larger than the usual range of
          <code class="literal">0..23</code>. The other hour format specifiers
          produce the hour value modulo 12.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIME_FORMAT('100:00:00', '%H %k %h %I %l');</code></strong>
        -&gt; '100 100 04 04 4'
</pre></li><li class="listitem"><p><a name="function_time-to-sec"></a>
          <a class="indexterm" name="idp64873488"></a>

          <a class="link" href="functions.html#function_time-to-sec"><code class="literal">TIME_TO_SEC(<em class="replaceable"><code>time</code></em>)</code></a>
        </p><p>
          Returns the <em class="replaceable"><code>time</code></em> argument,
          converted to seconds.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TIME_TO_SEC('22:23:00');</code></strong>
        -&gt; 80580
mysql&gt; <strong class="userinput"><code>SELECT TIME_TO_SEC('00:39:38');</code></strong>
        -&gt; 2378
</pre></li><li class="listitem"><p><a name="function_to-days"></a>
          <a class="indexterm" name="idp64883360"></a>

          <a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Given a date <em class="replaceable"><code>date</code></em>, returns a day
          number (the number of days since year 0).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_DAYS(950501);</code></strong>
        -&gt; 728779
mysql&gt; <strong class="userinput"><code>SELECT TO_DAYS('2007-10-07');</code></strong>
        -&gt; 733321
</pre><p>
          <a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a> is not intended for
          use with values that precede the advent of the Gregorian
          calendar (1582), because it does not take into account the
          days that were lost when the calendar was changed. For dates
          before 1582 (and possibly a later year in other locales),
          results from this function are not reliable. See
          <a class="xref" href="functions.html#mysql-calendar" title="12.8. What Calendar Is Used By MySQL?">Section 12.8, “What Calendar Is Used By MySQL?”</a>, for details.
        </p><p>
          Remember that MySQL converts two-digit year values in dates to
          four-digit form using the rules in
          <a class="xref" href="data-types.html#date-and-time-types" title="11.3. Date and Time Types">Section 11.3, “Date and Time Types”</a>. For example,
          <code class="literal">'2008-10-07'</code> and
          <code class="literal">'08-10-07'</code> are seen as identical dates:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_DAYS('2008-10-07'), TO_DAYS('08-10-07');</code></strong>
        -&gt; 733687, 733687
</pre><p>
          In MySQL, the zero date is defined as
          <code class="literal">'0000-00-00'</code>, even though this date is
          itself considered invalid. This means that, for
          <code class="literal">'0000-00-00'</code> and
          <code class="literal">'0000-01-01'</code>,
          <a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a> returns the values
          shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_DAYS('0000-00-00');</code></strong>
+-----------------------+
| to_days('0000-00-00') |
+-----------------------+
|                  NULL |
+-----------------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1292 | Incorrect datetime value: '0000-00-00' |
+---------+------+----------------------------------------+
1 row in set (0.00 sec)


mysql&gt; <strong class="userinput"><code>SELECT TO_DAYS('0000-01-01');</code></strong>
+-----------------------+
| to_days('0000-01-01') |
+-----------------------+
|                     1 |
+-----------------------+
1 row in set (0.00 sec)
</pre><p>
          This is true whether or not the
          <a class="link" href="server-administration.html#sqlmode_allow_invalid_dates"><code class="literal">ALLOW_INVALID_DATES</code></a> SQL
          server mode is enabled.
        </p></li><li class="listitem"><p><a name="function_to-seconds"></a>
          <a class="indexterm" name="idp64908448"></a>

          <a class="link" href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Given a date or datetime <em class="replaceable"><code>expr</code></em>,
          returns a the number of seconds since the year 0. If
          <em class="replaceable"><code>expr</code></em> is not a valid date or
          datetime value, returns <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_SECONDS(950501);</code></strong>
        -&gt; 62966505600
mysql&gt; <strong class="userinput"><code>SELECT TO_SECONDS('2009-11-29');</code></strong>
        -&gt; 63426672000
mysql&gt; <strong class="userinput"><code>SELECT TO_SECONDS('2009-11-29 13:43:32');</code></strong>
        -&gt; 63426721412
mysql&gt; <strong class="userinput"><code>SELECT TO_SECONDS( NOW() );</code></strong>
        -&gt; 63426721458
</pre><p>
          Like <a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a>,
          <code class="literal">TO_SECONDS()</code> is not intended for use with
          values that precede the advent of the Gregorian calendar
          (1582), because it does not take into account the days that
          were lost when the calendar was changed. For dates before 1582
          (and possibly a later year in other locales), results from
          this function are not reliable. See
          <a class="xref" href="functions.html#mysql-calendar" title="12.8. What Calendar Is Used By MySQL?">Section 12.8, “What Calendar Is Used By MySQL?”</a>, for details.
        </p><p>
          Like <a class="link" href="functions.html#function_to-days"><code class="literal">TO_DAYS()</code></a>,
          <code class="literal">TO_SECONDS()</code>, converts two-digit year
          values in dates to four-digit form using the rules in
          <a class="xref" href="data-types.html#date-and-time-types" title="11.3. Date and Time Types">Section 11.3, “Date and Time Types”</a>.
        </p><p>
          In MySQL, the zero date is defined as
          <code class="literal">'0000-00-00'</code>, even though this date is
          itself considered invalid. This means that, for
          <code class="literal">'0000-00-00'</code> and
          <code class="literal">'0000-01-01'</code>,
          <a class="link" href="functions.html#function_to-seconds"><code class="literal">TO_SECONDS()</code></a> returns the values
          shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT TO_SECONDS('0000-00-00');</code></strong>
+--------------------------+
| TO_SECONDS('0000-00-00') |
+--------------------------+
|                     NULL |
+--------------------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1292 | Incorrect datetime value: '0000-00-00' |
+---------+------+----------------------------------------+
1 row in set (0.00 sec)


mysql&gt; <strong class="userinput"><code>SELECT TO_SECONDS('0000-01-01');</code></strong>
+--------------------------+
| TO_SECONDS('0000-01-01') |
+--------------------------+
|                    86400 |
+--------------------------+
1 row in set (0.00 sec)
</pre><p>
          This is true whether or not the
          <a class="link" href="server-administration.html#sqlmode_allow_invalid_dates"><code class="literal">ALLOW_INVALID_DATES</code></a> SQL
          server mode is enabled.
        </p></li><li class="listitem"><p><a name="function_unix-timestamp"></a>
          <a class="indexterm" name="idp64935808"></a>

          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a>,
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          If called with no argument, returns a Unix timestamp (seconds
          since <code class="literal">'1970-01-01 00:00:00'</code> UTC) as an
          unsigned integer. If
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> is called with
          a <em class="replaceable"><code>date</code></em> argument, it returns the
          value of the argument as seconds since <code class="literal">'1970-01-01
          00:00:00'</code> UTC. <em class="replaceable"><code>date</code></em> may
          be a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> string, a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> string, a
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>, or a number in the
          format <code class="literal">YYMMDD</code> or
          <code class="literal">YYYYMMDD</code>. The server interprets
          <em class="replaceable"><code>date</code></em> as a value in the current time
          zone and converts it to an internal value in UTC. Clients can
          set their time zone as described in
          <a class="xref" href="globalization.html#time-zone-support" title="10.6. MySQL Server Time Zone Support">Section 10.6, “MySQL Server Time Zone Support”</a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UNIX_TIMESTAMP();</code></strong>
        -&gt; 1196440210
mysql&gt; <strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2007-11-30 10:30:19');</code></strong>
        -&gt; 1196440219
</pre><p>
          When <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> is used
          on a <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column, the
          function returns the internal timestamp value directly, with
          no implicit <span class="quote">“<span class="quote">string-to-Unix-timestamp</span>”</span>
          conversion. If you pass an out-of-range date to
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a>, it returns
          <code class="literal">0</code>.
        </p><p>
          Note: If you use
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> and
          <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a> to convert
          between <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values and
          Unix timestamp values, the conversion is lossy because the
          mapping is not one-to-one in both directions. For example, due
          to conventions for local time zone changes, it is possible for
          two <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> to map two
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values to the same
          Unix timestamp value.
          <a class="link" href="functions.html#function_from-unixtime"><code class="literal">FROM_UNIXTIME()</code></a> will map that
          value back to only one of the original
          <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values. Here is an
          example, using <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> values
          in the <code class="literal">CET</code> time zone:
        </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2005-03-27 03:00:00');</code></strong>
+---------------------------------------+
| UNIX_TIMESTAMP('2005-03-27 03:00:00') |
+---------------------------------------+
|                            1111885200 |
+---------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT UNIX_TIMESTAMP('2005-03-27 02:00:00');</code></strong>
+---------------------------------------+
| UNIX_TIMESTAMP('2005-03-27 02:00:00') |
+---------------------------------------+
|                            1111885200 |
+---------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT FROM_UNIXTIME(1111885200);</code></strong>
+---------------------------+
| FROM_UNIXTIME(1111885200) |
+---------------------------+
| 2005-03-27 03:00:00       |
+---------------------------+
</pre><p>
          If you want to subtract
          <a class="link" href="functions.html#function_unix-timestamp"><code class="literal">UNIX_TIMESTAMP()</code></a> columns, you
          might want to cast the result to signed integers. See
          <a class="xref" href="functions.html#cast-functions" title="12.10. Cast Functions and Operators">Section 12.10, “Cast Functions and Operators”</a>.
        </p></li><li class="listitem"><p><a name="function_utc-date"></a>
          <a class="indexterm" name="idp64973056"></a>

          <a class="link" href="functions.html#function_utc-date"><code class="literal">UTC_DATE</code></a>,
          <a class="link" href="functions.html#function_utc-date"><code class="literal">UTC_DATE()</code></a>
        </p><p>
          Returns the current UTC date as a value in
          <code class="literal">'YYYY-MM-DD'</code> or <code class="literal">YYYYMMDD</code>
          format, depending on whether the function is used in a string
          or numeric context.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UTC_DATE(), UTC_DATE() + 0;</code></strong>
        -&gt; '2003-08-14', 20030814
</pre></li><li class="listitem"><p><a name="function_utc-time"></a>
          <a class="indexterm" name="idp64983776"></a>

          <a class="link" href="functions.html#function_utc-time"><code class="literal">UTC_TIME</code></a>,
          <a class="link" href="functions.html#function_utc-time"><code class="literal">UTC_TIME([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          Returns the current UTC time as a value in
          <code class="literal">'HH:MM:SS'</code> or <code class="literal">HHMMSS</code>
          format, depending on whether the function is used in a string
          or numeric context.
        </p><p>
          As of MySQL 5.6.4, if the <em class="replaceable"><code>fsp</code></em>
          argument is given to specify a fractional seconds precision
          from 0 to 6, the return value includes a fractional seconds
          part of that many digits. Before 5.6.4, any argument is
          ignored.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UTC_TIME(), UTC_TIME() + 0;</code></strong>
        -&gt; '18:07:53', 180753.000000
</pre></li><li class="listitem"><p><a name="function_utc-timestamp"></a>
          <a class="indexterm" name="idp64995952"></a>

          <a class="link" href="functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP</code></a>,
          <a class="link" href="functions.html#function_utc-timestamp"><code class="literal">UTC_TIMESTAMP([<em class="replaceable"><code>fsp</code></em>])</code></a>
        </p><p>
          Returns the current UTC date and time as a value in
          <code class="literal">'YYYY-MM-DD HH:MM:SS'</code> or
          <code class="literal">YYYYMMDDHHMMSS</code> format, depending on whether
          the function is used in a string or numeric context.
        </p><p>
          As of MySQL 5.6.4, if the <em class="replaceable"><code>fsp</code></em>
          argument is given to specify a fractional seconds precision
          from 0 to 6, the return value includes a fractional seconds
          part of that many digits. Before 5.6.4, any argument is
          ignored.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UTC_TIMESTAMP(), UTC_TIMESTAMP() + 0;</code></strong>
        -&gt; '2003-08-14 18:08:04', 20030814180804.000000
</pre></li><li class="listitem"><p><a name="function_week"></a>
          <a class="indexterm" name="idp65008192"></a>

          <a class="link" href="functions.html#function_week"><code class="literal">WEEK(<em class="replaceable"><code>date</code></em>[,<em class="replaceable"><code>mode</code></em>])</code></a>
        </p><p>
          This function returns the week number for
          <em class="replaceable"><code>date</code></em>. The two-argument form of
          <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a> enables you to specify
          whether the week starts on Sunday or Monday and whether the
          return value should be in the range from <code class="literal">0</code>
          to <code class="literal">53</code> or from <code class="literal">1</code> to
          <code class="literal">53</code>. If the <em class="replaceable"><code>mode</code></em>
          argument is omitted, the value of the
          <a class="link" href="server-administration.html#sysvar_default_week_format"><code class="literal">default_week_format</code></a> system
          variable is used. See
          <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4. Server System Variables">Section 5.1.4, “Server System Variables”</a>.
        </p><p>
          The following table describes how the
          <em class="replaceable"><code>mode</code></em> argument works.
</p>
<div class="informaltable">
<table summary="This table describes how the
            mode argument of the
            WEEK function works. For each mode value,
            the table lists the first day of the week, the range, and a
description of week 1." border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th scope="col">Mode</th><th scope="col">First day of week</th><th scope="col">Range</th><th scope="col">Week 1 is the first week …</th></tr></thead><tbody><tr><td scope="row">0</td><td>Sunday</td><td>0-53</td><td>with a Sunday in this year</td></tr><tr><td scope="row">1</td><td>Monday</td><td>0-53</td><td>with more than 3 days this year</td></tr><tr><td scope="row">2</td><td>Sunday</td><td>1-53</td><td>with a Sunday in this year</td></tr><tr><td scope="row">3</td><td>Monday</td><td>1-53</td><td>with more than 3 days this year</td></tr><tr><td scope="row">4</td><td>Sunday</td><td>0-53</td><td>with more than 3 days this year</td></tr><tr><td scope="row">5</td><td>Monday</td><td>0-53</td><td>with a Monday in this year</td></tr><tr><td scope="row">6</td><td>Sunday</td><td>1-53</td><td>with more than 3 days this year</td></tr><tr><td scope="row">7</td><td>Monday</td><td>1-53</td><td>with a Monday in this year</td></tr></tbody></table>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT WEEK('2008-02-20');</code></strong>
        -&gt; 7
mysql&gt; <strong class="userinput"><code>SELECT WEEK('2008-02-20',0);</code></strong>
        -&gt; 7
mysql&gt; <strong class="userinput"><code>SELECT WEEK('2008-02-20',1);</code></strong>
        -&gt; 8
mysql&gt; <strong class="userinput"><code>SELECT WEEK('2008-12-31',1);</code></strong>
        -&gt; 53
</pre><p>
          Note that if a date falls in the last week of the previous
          year, MySQL returns <code class="literal">0</code> if you do not use
          <code class="literal">2</code>, <code class="literal">3</code>,
          <code class="literal">6</code>, or <code class="literal">7</code> as the optional
          <em class="replaceable"><code>mode</code></em> argument:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT YEAR('2000-01-01'), WEEK('2000-01-01',0);</code></strong>
        -&gt; 2000, 0
</pre><p>
          One might argue that MySQL should return <code class="literal">52</code>
          for the <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a> function,
          because the given date actually occurs in the 52nd week of
          1999. We decided to return <code class="literal">0</code> instead
          because we want the function to return <span class="quote">“<span class="quote">the week number
          in the given year.</span>”</span> This makes use of the
          <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a> function reliable when
          combined with other functions that extract a date part from a
          date.
        </p><p>
          If you would prefer the result to be evaluated with respect to
          the year that contains the first day of the week for the given
          date, use <code class="literal">0</code>, <code class="literal">2</code>,
          <code class="literal">5</code>, or <code class="literal">7</code> as the optional
          <em class="replaceable"><code>mode</code></em> argument.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT WEEK('2000-01-01',2);</code></strong>
        -&gt; 52
</pre><p>
          Alternatively, use the
          <a class="link" href="functions.html#function_yearweek"><code class="literal">YEARWEEK()</code></a> function:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT YEARWEEK('2000-01-01');</code></strong>
        -&gt; 199952
mysql&gt; <strong class="userinput"><code>SELECT MID(YEARWEEK('2000-01-01'),5,2);</code></strong>
        -&gt; '52'
</pre></li><li class="listitem"><p><a name="function_weekday"></a>
          <a class="indexterm" name="idp65069600"></a>

          <a class="link" href="functions.html#function_weekday"><code class="literal">WEEKDAY(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the weekday index for <em class="replaceable"><code>date</code></em>
          (<code class="literal">0</code> = Monday, <code class="literal">1</code> =
          Tuesday, … <code class="literal">6</code> = Sunday).
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT WEEKDAY('2008-02-03 22:23:00');</code></strong>
        -&gt; 6
mysql&gt; <strong class="userinput"><code>SELECT WEEKDAY('2007-11-06');</code></strong>
        -&gt; 1
</pre></li><li class="listitem"><p><a name="function_weekofyear"></a>
          <a class="indexterm" name="idp65081536"></a>

          <a class="link" href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the calendar week of the date as a number in the range
          from <code class="literal">1</code> to <code class="literal">53</code>.
          <a class="link" href="functions.html#function_weekofyear"><code class="literal">WEEKOFYEAR()</code></a> is a compatibility
          function that is equivalent to
          <a class="link" href="functions.html#function_week"><code class="literal">WEEK(<em class="replaceable"><code>date</code></em>,3)</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT WEEKOFYEAR('2008-02-20');</code></strong>
        -&gt; 8
</pre></li><li class="listitem"><p><a name="function_year"></a>
          <a class="indexterm" name="idp65093776"></a>

          <a class="link" href="functions.html#function_year"><code class="literal">YEAR(<em class="replaceable"><code>date</code></em>)</code></a>
        </p><p>
          Returns the year for <em class="replaceable"><code>date</code></em>, in the
          range <code class="literal">1000</code> to <code class="literal">9999</code>, or
          <code class="literal">0</code> for the <span class="quote">“<span class="quote">zero</span>”</span> date.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT YEAR('1987-01-01');</code></strong>
        -&gt; 1987
</pre></li><li class="listitem"><p><a name="function_yearweek"></a>
          <a class="indexterm" name="idp65105456"></a>

          <a class="link" href="functions.html#function_yearweek"><code class="literal">YEARWEEK(<em class="replaceable"><code>date</code></em>)</code></a>,
          <a class="link" href="functions.html#function_yearweek"><code class="literal">YEARWEEK(<em class="replaceable"><code>date</code></em>,<em class="replaceable"><code>mode</code></em>)</code></a>
        </p><p>
          Returns year and week for a date. The
          <em class="replaceable"><code>mode</code></em> argument works exactly like
          the <em class="replaceable"><code>mode</code></em> argument to
          <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a>. The year in the result
          may be different from the year in the date argument for the
          first and the last week of the year.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT YEARWEEK('1987-01-01');</code></strong>
        -&gt; 198653
</pre><p>
          Note that the week number is different from what the
          <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a> function would return
          (<code class="literal">0</code>) for optional arguments
          <code class="literal">0</code> or <code class="literal">1</code>, as
          <a class="link" href="functions.html#function_week"><code class="literal">WEEK()</code></a> then returns the week in
          the context of the given year.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-calendar"></a>12.8. What Calendar Is Used By MySQL?</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp65121152"></a><p>
      MySQL uses what is known as a <em class="firstterm">proleptic Gregorian
      calendar</em>.
    </p><p>
      Every country that has switched from the Julian to the Gregorian
      calendar has had to discard at least ten days during the switch.
      To see how this works, consider the month of October 1582, when
      the first Julian-to-Gregorian switch occurred.
</p>
<div class="informaltable">
<table summary="This table shows the month of October 1582, when the
        first Julian-to-Gregorian switch occurred. Table headings are
        days of the week and table rows list the dates for each day of
        the week. The table is intended to illustrate that there are no
dates between October 4 and October 15." border="1"><colgroup><col><col><col><col><col><col><col></colgroup><thead><tr><th scope="col">Monday</th><th scope="col">Tuesday</th><th scope="col">Wednesday</th><th scope="col">Thursday</th><th scope="col">Friday</th><th scope="col">Saturday</th><th scope="col">Sunday</th></tr></thead><tbody><tr><td scope="row">1</td><td>2</td><td>3</td><td>4</td><td>15</td><td>16</td><td>17</td></tr><tr><td scope="row">18</td><td>19</td><td>20</td><td>21</td><td>22</td><td>23</td><td>24</td></tr><tr><td scope="row">25</td><td>26</td><td>27</td><td>28</td><td>29</td><td>30</td><td>31</td></tr></tbody></table>
</div>
<p>
      There are no dates between October 4 and October 15. This
      discontinuity is called the <em class="firstterm">cutover</em>. Any
      dates before the cutover are Julian, and any dates following the
      cutover are Gregorian. Dates during a cutover are nonexistent.
    </p><p>
      A calendar applied to dates when it was not actually in use is
      called <em class="firstterm">proleptic</em>. Thus, if we assume there
      was never a cutover and Gregorian rules always rule, we have a
      proleptic Gregorian calendar. This is what is used by MySQL, as is
      required by standard SQL. For this reason, dates prior to the
      cutover stored as MySQL <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a> or
      <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a> values must be adjusted to
      compensate for the difference. It is important to realize that the
      cutover did not occur at the same time in all countries, and that
      the later it happened, the more days were lost. For example, in
      Great Britain, it took place in 1752, when Wednesday September 2
      was followed by Thursday September 14. Russia remained on the
      Julian calendar until 1918, losing 13 days in the process, and
      what is popularly referred to as its <span class="quote">“<span class="quote">October
      Revolution</span>”</span> occurred in November according to the Gregorian
      calendar.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="fulltext-search"></a>12.9. Full-Text Search Functions</h2>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#fulltext-natural-language">12.9.1. Natural Language Full-Text Searches</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-boolean">12.9.2. Boolean Full-Text Searches</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-query-expansion">12.9.3. Full-Text Searches with Query Expansion</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-stopwords">12.9.4. Full-Text Stopwords</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-restrictions">12.9.5. Full-Text Restrictions</a></span></dt><dt><span class="section"><a href="functions.html#fulltext-fine-tuning">12.9.6. Fine-Tuning MySQL Full-Text Search</a></span></dt><dt><span class="section"><a href="functions.html#full-text-adding-collation">12.9.7. Adding a Collation for Full-Text Indexing</a></span></dt></dl>
</div>
<a class="indexterm" name="idp65149504"></a><a class="indexterm" name="idp65150992"></a><a class="indexterm" name="idp65152064"></a><a class="indexterm" name="idp65153136"></a><p><a name="function_match"></a>
      <a class="link" href="functions.html#function_match"><code class="literal">MATCH
      (<em class="replaceable"><code>col1</code></em>,<em class="replaceable"><code>col2</code></em>,...)
      AGAINST (<em class="replaceable"><code>expr</code></em>
      [<em class="replaceable"><code>search_modifier</code></em>])</code></a>
    </p><pre class="programlisting"><em class="replaceable"><code>search_modifier:</code></em>
  {
       IN NATURAL LANGUAGE MODE
     | IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION
     | IN BOOLEAN MODE
     | WITH QUERY EXPANSION
  }
</pre><p>
      MySQL has support for full-text indexing and searching:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A full-text index in MySQL is an index of type
          <code class="literal">FULLTEXT</code>.
        </p></li><li class="listitem"><p>
          Full-text indexes can be used only with
          <a class="link" href="storage-engines.html#innodb-storage-engine" title="14.2. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> or
          <a class="link" href="storage-engines.html#myisam-storage-engine" title="14.3. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables, and can be created
          only for <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>, or
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">TEXT</code></a> columns.
        </p></li><li class="listitem"><p>
          A <code class="literal">FULLTEXT</code> index definition can be given in
          the <a class="link" href="sql-syntax.html#create-table" title="13.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement when
          a table is created, or added later using
          <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> or
          <a class="link" href="sql-syntax.html#create-index" title="13.1.13. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>.
        </p></li><li class="listitem"><p>
          For large data sets, it is much faster to load your data into
          a table that has no <code class="literal">FULLTEXT</code> index and then
          create the index after that, than to load data into a table
          that has an existing <code class="literal">FULLTEXT</code> index.
</p></li></ul>
</div>
<p>
      Full-text searching is performed using
      <a class="link" href="functions.html#function_match"><code class="literal">MATCH() ... AGAINST</code></a> syntax.
      <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> takes a comma-separated
      list that names the columns to be searched.
      <code class="literal">AGAINST</code> takes a string to search for, and an
      optional modifier that indicates what type of search to perform.
      The search string must be a string value that is constant during
      query evaluation. This rules out, for example, a table column
      because that can differ for each row.
    </p><p>
      There are three types of full-text searches:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A natural language search interprets the search string as a
          phrase in natural human language (a phrase in free text).
          There are no special operators. The stopword list applies,
          controlled by
          <a class="link" href="storage-engines.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a>,
          <a class="link" href="storage-engines.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a>,
          and
          <a class="link" href="storage-engines.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a>
          for <code class="literal">InnoDB</code> search indexes, and
          <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a> for
          <code class="literal">MyISAM</code> ones.
        </p></li><li class="listitem"><p>
          Full-text searches are natural language searches if the
          <code class="literal">IN NATURAL LANGUAGE MODE</code> modifier is given
          or if no modifier is given. For more information, see
          <a class="xref" href="functions.html#fulltext-natural-language" title="12.9.1. Natural Language Full-Text Searches">Section 12.9.1, “Natural Language Full-Text Searches”</a>.
        </p></li><li class="listitem"><p>
          A boolean search interprets the search string using the rules
          of a special query language. The string contains the words to
          search for. It can also contain operators that specify
          requirements such that a word must be present or absent in
          matching rows, or that it should be weighted higher or lower
          than usual. Certain common words (stopwords) are omitted from
          the search index and do not match if present in the search
          string. The <code class="literal">IN BOOLEAN MODE</code> modifier
          specifies a boolean search. For more information, see
          <a class="xref" href="functions.html#fulltext-boolean" title="12.9.2. Boolean Full-Text Searches">Section 12.9.2, “Boolean Full-Text Searches”</a>.
        </p></li><li class="listitem"><p>
          A query expansion search is a modification of a natural
          language search. The search string is used to perform a
          natural language search. Then words from the most relevant
          rows returned by the search are added to the search string and
          the search is done again. The query returns the rows from the
          second search. The <code class="literal">IN NATURAL LANGUAGE MODE WITH
          QUERY EXPANSION</code> or <code class="literal">WITH QUERY
          EXPANSION</code> modifier specifies a query expansion
          search. For more information, see
          <a class="xref" href="functions.html#fulltext-query-expansion" title="12.9.3. Full-Text Searches with Query Expansion">Section 12.9.3, “Full-Text Searches with Query Expansion”</a>.
</p></li></ul>
</div>
<p>
      For information about <code class="literal">FULLTEXT</code> query
      performance, see <a class="xref" href="optimization.html#column-indexes" title="8.3.4. Column Indexes">Section 8.3.4, “Column Indexes”</a>.
    </p><p>
      For more technical details about processing for
      <code class="literal">InnoDB</code> <code class="literal">FULLTEXT</code> indexes, see
      <a class="xref" href="storage-engines.html#innodb-fulltext-index" title="14.2.3.12.3. FULLTEXT Indexes">Section 14.2.3.12.3, “<code class="literal">FULLTEXT</code> Indexes”</a>.
    </p><p>
      Constraints on full-text searching are listed in
      <a class="xref" href="functions.html#fulltext-restrictions" title="12.9.5. Full-Text Restrictions">Section 12.9.5, “Full-Text Restrictions”</a>.
    </p><p>
      The <a class="link" href="programs.html#myisam-ftdump" title="4.6.2. myisam_ftdump — Display Full-Text Index information"><span class="command"><strong>myisam_ftdump</strong></span></a> utility dumps the contents of
      a <code class="literal">MyISAM</code> full-text index. This may be helpful
      for debugging full-text queries. See
      <a class="xref" href="programs.html#myisam-ftdump" title="4.6.2. myisam_ftdump — Display Full-Text Index information">Section 4.6.2, “<span class="command"><strong>myisam_ftdump</strong></span> — Display Full-Text Index information”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-natural-language"></a>12.9.1. Natural Language Full-Text Searches</h3>
</div>
</div>
</div>
<p>
        By default or with the <code class="literal">IN NATURAL LANGUAGE
        MODE</code> modifier, the
        <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> function performs a
        natural language search for a string against a <em class="firstterm">text
        collection</em>. A collection is a set of one or more
        columns included in a <code class="literal">FULLTEXT</code> index. The
        search string is given as the argument to
        <code class="literal">AGAINST()</code>. For each row in the table,
        <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> returns a relevance
        value; that is, a similarity measure between the search string
        and the text in that row in the columns named in the
        <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> list.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE articles (</code></strong>
    <strong class="userinput"><code>  id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,</code></strong>
    <strong class="userinput"><code>  title VARCHAR(200),</code></strong>
    <strong class="userinput"><code>  body TEXT,</code></strong>
    <strong class="userinput"><code>  FULLTEXT (title,body)</code></strong>
    <strong class="userinput"><code>) ENGINE=InnoDB;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO articles (title,body) VALUES</code></strong>
    <strong class="userinput"><code>('MySQL Tutorial','DBMS stands for DataBase ...'),</code></strong>
    <strong class="userinput"><code>('How To Use MySQL Well','After you went through a ...'),</code></strong>
    <strong class="userinput"><code>('Optimizing MySQL','In this tutorial we will show ...'),</code></strong>
    <strong class="userinput"><code>('1001 MySQL Tricks','1. Never run mysqld as root. 2. ...'),</code></strong>
    <strong class="userinput"><code>('MySQL vs. YourSQL','In the following database comparison ...'),</code></strong>
    <strong class="userinput"><code>('MySQL Security','When configured properly, MySQL ...');</code></strong>
Query OK, 6 rows affected (0.00 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' IN NATURAL LANGUAGE MODE);</code></strong>
+----+-------------------+------------------------------------------+
| id | title             | body                                     |
+----+-------------------+------------------------------------------+
|  1 | MySQL Tutorial    | DBMS stands for DataBase ...             |
|  5 | MySQL vs. YourSQL | In the following database comparison ... |
+----+-------------------+------------------------------------------+
2 rows in set (0.00 sec)
</pre><p>
        By default, the search is performed in case-insensitive fashion.
        To perform a case-sensitive full-text search, use a binary
        collation for the indexed columns. For example, a column that
        uses the <code class="literal">latin1</code> character set of can be
        assigned a collation of <code class="literal">latin1_bin</code> to make it
        case sensitive for full-text searches.
      </p><p>
        When <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> is used in a
        <code class="literal">WHERE</code> clause, as in the example shown
        earlier, the rows returned are automatically sorted with the
        highest relevance first. Relevance values are nonnegative
        floating-point numbers. Zero relevance means no similarity.
        Relevance is computed based on the number of words in the row,
        the number of unique words in that row, the total number of
        words in the collection, and the number of documents (rows) that
        contain a particular word.
      </p><p>
        To simply count matches, you could use a query like this:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' IN NATURAL LANGUAGE MODE);</code></strong>
+----------+
| COUNT(*) |
+----------+
|        2 |
+----------+
1 row in set (0.00 sec)
</pre><p>
        You might find it quicker to rewrite the query as follows:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    <strong class="userinput"><code>COUNT(IF(MATCH (title,body) AGAINST ('database' IN NATURAL LANGUAGE MODE), 1, NULL))</code></strong>
    <strong class="userinput"><code>AS count</code></strong>
    <strong class="userinput"><code>FROM articles;</code></strong>
+-------+
| count |
+-------+
|     2 |
+-------+
1 row in set (0.03 sec)
</pre><p>
        The first query does some extra work (sorting the results by
        relevance) but also can use an index lookup based on the
        <code class="literal">WHERE</code> clause. The index lookup might make the
        first query faster if the search matches few rows. The second
        query performs a full table scan, which might be faster than the
        index lookup if the search term was present in most rows.
      </p><p>
        For natural-language full-text searches, the columns named in
        the <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> function must be the
        same columns included in some <code class="literal">FULLTEXT</code> index
        in your table. For the preceding query, note that the columns
        named in the <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> function
        (<code class="literal">title</code> and <code class="literal">body</code>) are the
        same as those named in the definition of the
        <code class="literal">article</code> table's <code class="literal">FULLTEXT</code>
        index. To search the <code class="literal">title</code> or
        <code class="literal">body</code> separately, you would create separate
        <code class="literal">FULLTEXT</code> indexes for each column.
      </p><p>
        You can also perform a boolean search or a search with query
        expansion. These search types are described in
        <a class="xref" href="functions.html#fulltext-boolean" title="12.9.2. Boolean Full-Text Searches">Section 12.9.2, “Boolean Full-Text Searches”</a>, and
        <a class="xref" href="functions.html#fulltext-query-expansion" title="12.9.3. Full-Text Searches with Query Expansion">Section 12.9.3, “Full-Text Searches with Query Expansion”</a>.
      </p><p>
        A full-text search that uses an index can name columns only from
        a single table in the <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a>
        clause because an index cannot span multiple tables. For
        <code class="literal">MyISAM</code> tables, a boolean search can be done
        in the absence of an index (albeit more slowly), in which case
        it is possible to name columns from multiple tables.
      </p><p>
        The preceding example is a basic illustration that shows how to
        use the <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> function where
        rows are returned in order of decreasing relevance. The next
        example shows how to retrieve the relevance values explicitly.
        Returned rows are not ordered because the
        <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement includes neither
        <code class="literal">WHERE</code> nor <code class="literal">ORDER BY</code>
        clauses:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('Tutorial' IN NATURAL LANGUAGE MODE) AS score</code></strong>
    <strong class="userinput"><code>FROM articles;</code></strong>
+----+---------------------+
| id | score               |
+----+---------------------+
|  1 | 0.22764469683170319 |
|  2 |                   0 |
|  3 | 0.22764469683170319 |
|  4 |                   0 |
|  5 |                   0 |
|  6 |                   0 |
+----+---------------------+
6 rows in set (0.00 sec)
</pre><p>
        The following example is more complex. The query returns the
        relevance values and it also sorts the rows in order of
        decreasing relevance. To achieve this result, specify
        <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> twice: once in the
        <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> list and once in the
        <code class="literal">WHERE</code> clause. This causes no additional
        overhead, because the MySQL optimizer notices that the two
        <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> calls are identical and
        invokes the full-text search code only once.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, body, MATCH (title,body) AGAINST</code></strong>
    <strong class="userinput"><code>('Security implications of running MySQL as root'</code></strong>
    <strong class="userinput"><code>IN NATURAL LANGUAGE MODE) AS score</code></strong>
    <strong class="userinput"><code>FROM articles WHERE MATCH (title,body) AGAINST</code></strong>
    <strong class="userinput"><code>('Security implications of running MySQL as root'</code></strong>
    <strong class="userinput"><code>IN NATURAL LANGUAGE MODE);</code></strong>
+----+-----------------------+------------------------------------------+
| id | title                 | body                                     |
+----+-----------------------+------------------------------------------+
|  5 | MySQL vs. YourSQL     | In the following database comparison ... |
|  1 | MySQL Tutorial        | DBMS stands for DataBase ...             |
|  3 | Optimizing MySQL      | In this tutorial we will show ...        |
|  6 | MySQL Security        | When configured properly, MySQL ...      |
|  2 | How To Use MySQL Well | After you went through a ...             |
|  4 | 1001 MySQL Tricks     | 1. Never run mysqld as root. 2. ...      |
+----+-----------------------+------------------------------------------+
6 rows in set (0.00 sec)
</pre><p>
        The MySQL <code class="literal">FULLTEXT</code> implementation regards any
        sequence of true word characters (letters, digits, and
        underscores) as a word. That sequence may also contain
        apostrophes (<span class="quote">“<span class="quote"><code class="literal">'</code></span>”</span>), but not more
        than one in a row. This means that <code class="literal">aaa'bbb</code> is
        regarded as one word, but <code class="literal">aaa''bbb</code> is
        regarded as two words. Apostrophes at the beginning or the end
        of a word are stripped by the <code class="literal">FULLTEXT</code>
        parser; <code class="literal">'aaa'bbb'</code> would be parsed as
        <code class="literal">aaa'bbb</code>.
      </p><p>
        The <code class="literal">FULLTEXT</code> parser determines where words
        start and end by looking for certain delimiter characters; for
        example, <span class="quote">“<span class="quote"><code class="literal"> </code></span>”</span> (space),
        <span class="quote">“<span class="quote"><code class="literal">,</code></span>”</span> (comma), and
        <span class="quote">“<span class="quote"><code class="literal">.</code></span>”</span> (period). If words are not
        separated by delimiters (as in, for example, Chinese), the
        <code class="literal">FULLTEXT</code> parser cannot determine where a word
        begins or ends. To be able to add words or other indexed terms
        in such languages to a <code class="literal">FULLTEXT</code> index, you
        must preprocess them so that they are separated by some
        arbitrary delimiter such as <span class="quote">“<span class="quote"><code class="literal">"</code></span>”</span>.
      </p><p>
        In MySQL 5.6, it is possible to write a plugin that
        replaces the built-in full-text parser. For details, see
        <a class="xref" href="extending-mysql.html#plugin-api" title="23.2. The MySQL Plugin API">Section 23.2, “The MySQL Plugin API”</a>. For example parser plugin source
        code, see the <code class="filename">plugin/fulltext</code> directory of
        a MySQL source distribution.
      </p><p>
        Some words are ignored in full-text searches:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Any word that is too short is ignored. The default minimum
            length of words that are found by full-text searches is
            three characters for <code class="literal">InnoDB</code> search
            indexes, or four characters for <code class="literal">MyISAM</code>.
            You can control the cutoff by setting a configuration option
            before creating the index:
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a>
            configuration option for <code class="literal">InnoDB</code> search
            indexes, or <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a>
            for <code class="literal">MyISAM</code>.
          </p></li><li class="listitem"><p>
            Words in the stopword list are ignored. A stopword is a word
            such as <span class="quote">“<span class="quote">the</span>”</span> or <span class="quote">“<span class="quote">some</span>”</span> that is so
            common that it is considered to have zero semantic value.
            There is a built-in stopword list, but it can be overridden
            by a user-defined list. The stopword lists and related
            configuration options are different for
            <code class="literal">InnoDB</code> search indexes and
            <code class="literal">MyISAM</code> ones. Stopword processing is
            controlled by the configuration options
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a>,
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a>,
            and
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a>
            for <code class="literal">InnoDB</code> search indexes, and
            <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a> for
            <code class="literal">MyISAM</code> ones.
</p></li></ul>
</div>
<p>
        The default stopword lists are shown in
        <a class="xref" href="functions.html#fulltext-stopwords" title="12.9.4. Full-Text Stopwords">Section 12.9.4, “Full-Text Stopwords”</a>. The default minimum word
        length and stopword list can be changed as described in
        <a class="xref" href="functions.html#fulltext-fine-tuning" title="12.9.6. Fine-Tuning MySQL Full-Text Search">Section 12.9.6, “Fine-Tuning MySQL Full-Text Search”</a>.
      </p><p>
        Every correct word in the collection and in the query is
        weighted according to its significance in the collection or
        query. Thus, a word that is present in many documents has a
        lower weight, because it has lower semantic value in this
        particular collection. Conversely, if the word is rare, it
        receives a higher weight. The weights of the words are combined
        to compute the relevance of the row. This technique works best
        with large collections.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
MyISAM Limitation
</div>
<p xmlns="">
          For very small tables, word distribution does not adequately
          reflect their semantic value, and this model may sometimes
          produce bizarre results for search indexes on
          <code class="literal">MyISAM</code> tables. For example, although the
          word <span class="quote">“<span class="quote">MySQL</span>”</span> is present in every row of the
          <code class="literal">articles</code> table shown earlier, a search for
          the word in a <code class="literal">MyISAM</code> search index produces
          no results:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('MySQL' IN NATURAL LANGUAGE MODE);</code></strong>
Empty set (0.00 sec)
</pre><p xmlns="">
          The search result is empty because the word
          <span class="quote">“<span class="quote">MySQL</span>”</span> is present in at least 50% of the rows,
          and so is effectively treated as a stopword. This filtering
          technique is more suitable for large data sets, where you
          might not want the result set to return every second row from
          a 1GB table, than for small data sets where it might cause
          poor results for popular terms.
        </p><p xmlns="">
          The 50% threshold can surprise you when you first try
          full-text searching to see how it works, and makes
          <code class="literal">InnoDB</code> tables more suited to
          experimentation with full-text searches. If you create a
          <code class="literal">MyISAM</code> table and insert only one or two
          rows of text into it, every word in the text occurs in at
          least 50% of the rows. As a result, no search returns any
          results until the table contains more rows. Users who need to
          bypass the 50% limitation can build search indexes on
          <code class="literal">InnoDB</code> tables, or the boolean search mode
          explained in <a class="xref" href="functions.html#fulltext-boolean" title="12.9.2. Boolean Full-Text Searches">Section 12.9.2, “Boolean Full-Text Searches”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-boolean"></a>12.9.2. Boolean Full-Text Searches</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp65309440"></a><a class="indexterm" name="idp65310512"></a><p>
        MySQL can perform boolean full-text searches using the
        <code class="literal">IN BOOLEAN MODE</code> modifier. With this modifier,
        certain characters have special meaning at the beginning or end
        of words in the search string. In the following query, the
        <code class="literal">+</code> and <code class="literal">-</code> operators indicate
        that a word must be present or absent, respectively, for a match
        to occur. Thus, the query retrieves all the rows that contain
        the word <span class="quote">“<span class="quote">MySQL</span>”</span> but that do
        <span class="emphasis"><em>not</em></span> contain the word
        <span class="quote">“<span class="quote">YourSQL</span>”</span>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM articles WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('+MySQL -YourSQL' IN BOOLEAN MODE);</code></strong>
+----+-----------------------+-------------------------------------+
| id | title                 | body                                |
+----+-----------------------+-------------------------------------+
|  1 | MySQL Tutorial        | DBMS stands for DataBase ...        |
|  2 | How To Use MySQL Well | After you went through a ...        |
|  3 | Optimizing MySQL      | In this tutorial we will show ...   |
|  4 | 1001 MySQL Tricks     | 1. Never run mysqld as root. 2. ... |
|  6 | MySQL Security        | When configured properly, MySQL ... |
+----+-----------------------+-------------------------------------+
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
          In implementing this feature, MySQL uses what is sometimes
          referred to as <em class="firstterm">implied Boolean logic</em>,
          in which
</p>
<div xmlns="" class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">+</code> stands for <code class="literal">AND</code>
            </p></li><li class="listitem"><p>
              <code class="literal">-</code> stands for <code class="literal">NOT</code>
            </p></li><li class="listitem"><p>
              [<span class="emphasis"><em>no operator</em></span>] implies
              <code class="literal">OR</code>
</p></li></ul>
</div>

</div>
<p>
        Boolean full-text searches have these characteristics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            They do not use the 50% threshold that applies to
            <code class="literal">MyISAM</code> search indexes.
          </p></li><li class="listitem"><p>
            They do not automatically sort rows in order of decreasing
            relevance.
          </p></li><li class="listitem"><p>
            Boolean queries against a <code class="literal">MyISAM</code> search
            index can work even without a <code class="literal">FULLTEXT</code>
            index, although a search executed in this fashion would be
            quite slow. <code class="literal">InnoDB</code> tables require a
            <code class="literal">FULLTEXT</code> index on all columns of the
            <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> expression to perform
            boolean queries.
          </p></li><li class="listitem"><p>
            The minimum and maximum word length full-text parameters
            apply:
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a>
            and
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a>
            for <code class="literal">InnoDB</code> search indexes, and
            <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a> and
            <a class="link" href="server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a> for
            <code class="literal">MyISAM</code> ones.
          </p></li><li class="listitem"><p>
            The stopword list applies, controlled by
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a>,
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a>,
            and
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a>
            for <code class="literal">InnoDB</code> search indexes, and
            <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a> for
            <code class="literal">MyISAM</code> ones.
          </p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code> full-text search does not support
            the use of multiple operators on a single search word, as in
            this example: <code class="literal">'++apple'.</code>. MyISAM
            full-text search will successfully process the same search
            ignoring all operators except for the operator immediately
            adjacent to the search word.
</p></li></ul>
</div>
<p>
        The boolean full-text search capability supports the following
        operators:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">+</code>
          </p><p>
            A leading plus sign indicates that this word
            <span class="emphasis"><em>must</em></span> be present in each row that is
            returned.
          </p></li><li class="listitem"><p>
            <code class="literal">-</code>
          </p><p>
            A leading minus sign indicates that this word must
            <span class="emphasis"><em>not</em></span> be present in any of the rows that
            are returned.
          </p><p>
            Note: The <code class="literal">-</code> operator acts only to exclude
            rows that are otherwise matched by other search terms. Thus,
            a boolean-mode search that contains only terms preceded by
            <code class="literal">-</code> returns an empty result. It does not
            return <span class="quote">“<span class="quote">all rows except those containing any of the
            excluded terms.</span>”</span>
          </p></li><li class="listitem"><p>
            (no operator)
          </p><p>
            By default (when neither <code class="literal">+</code> nor
            <code class="literal">-</code> is specified), the word is optional,
            but the rows that contain it are rated higher. This mimics
            the behavior of <a class="link" href="functions.html#function_match"><code class="literal">MATCH() ...
            AGAINST()</code></a> without the <code class="literal">IN BOOLEAN
            MODE</code> modifier.
          </p></li><li class="listitem"><p>
            <code class="literal">@<em class="replaceable"><code>distance</code></em></code>
          </p><p>
            This operator works on <code class="literal">InnoDB</code> tables
            only. It tests whether two or more words all start within a
            specified distance from each other, measured in words.
            Specify the search words within a double-quoted string
            immediately before the
            <code class="literal">@<em class="replaceable"><code>distance</code></em></code>
            operator, for example, <code class="literal">MATCH(col1) AGAINST('"word1
            word2 word3" @8' IN BOOLEAN MODE)</code>
          </p></li><li class="listitem"><p>
            <code class="literal">&gt; &lt;</code>
          </p><p>
            These two operators are used to change a word's contribution
            to the relevance value that is assigned to a row. The
            <code class="literal">&gt;</code> operator increases the contribution
            and the <code class="literal">&lt;</code> operator decreases it. See
            the example following this list.
          </p></li><li class="listitem"><p>
            <code class="literal">( )</code>
          </p><p>
            Parentheses group words into subexpressions. Parenthesized
            groups can be nested.
          </p></li><li class="listitem"><p>
            <code class="literal">~</code>
          </p><p>
            A leading tilde acts as a negation operator, causing the
            word's contribution to the row's relevance to be negative.
            This is useful for marking <span class="quote">“<span class="quote">noise</span>”</span> words. A row
            containing such a word is rated lower than others, but is
            not excluded altogether, as it would be with the
            <code class="literal">-</code> operator.
          </p></li><li class="listitem"><p>
            <code class="literal">*</code>
          </p><p>
            The asterisk serves as the truncation (or wildcard)
            operator. Unlike the other operators, it is
            <span class="emphasis"><em>appended</em></span> to the word to be affected.
            Words match if they begin with the word preceding the
            <code class="literal">*</code> operator.
          </p><p>
            If a word is specified with the truncation operator, it is
            not stripped from a boolean query, even if it is too short
            or a stopword. Whether a word is too short is determined
            from the
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a>
            setting for <code class="literal">InnoDB</code> tables, or
            <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a> for
            <code class="literal">MyISAM</code> tables. The wildcarded word is
            considered as a prefix that must be present at the start of
            one or more words. If the minimum word length is 4, a search
            for <code class="literal">'+<em class="replaceable"><code>word</code></em>
            +the*'</code> could return fewer rows than a search for
            <code class="literal">'+<em class="replaceable"><code>word</code></em> +the'</code>,
            because the second query ignores the too-short search term
            <code class="literal">the</code>.
          </p></li><li class="listitem"><p>
            <code class="literal">"</code>
          </p><p>
            A phrase that is enclosed within double quote
            (<span class="quote">“<span class="quote"><code class="literal">"</code></span>”</span>) characters matches
            only rows that contain the phrase <span class="emphasis"><em>literally, as it
            was typed</em></span>. The full-text engine splits the phrase
            into words and performs a search in the
            <code class="literal">FULLTEXT</code> index for the words. Nonword
            characters need not be matched exactly: Phrase searching
            requires only that matches contain exactly the same words as
            the phrase and in the same order. For example,
            <code class="literal">"test phrase"</code> matches <code class="literal">"test,
            phrase"</code>.
          </p><p>
            If the phrase contains no words that are in the index, the
            result is empty. The words might not be in the index because
            of a combination of factors: if they do not exist in the
            text, are stopwords, or are shorter than the minimum length
            of indexed words.
</p></li></ul>
</div>
<p>
        The following examples demonstrate some search strings that use
        boolean full-text operators:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">'apple banana'</code>
          </p><p>
            Find rows that contain at least one of the two words.
          </p></li><li class="listitem"><p>
            <code class="literal">'+apple +juice'</code>
          </p><p>
            Find rows that contain both words.
          </p></li><li class="listitem"><p>
            <code class="literal">'+apple macintosh'</code>
          </p><p>
            Find rows that contain the word <span class="quote">“<span class="quote">apple</span>”</span>, but
            rank rows higher if they also contain
            <span class="quote">“<span class="quote">macintosh</span>”</span>.
          </p></li><li class="listitem"><p>
            <code class="literal">'+apple -macintosh'</code>
          </p><p>
            Find rows that contain the word <span class="quote">“<span class="quote">apple</span>”</span> but not
            <span class="quote">“<span class="quote">macintosh</span>”</span>.
          </p></li><li class="listitem"><p>
            <code class="literal">'+apple ~macintosh'</code>
          </p><p>
            Find rows that contain the word <span class="quote">“<span class="quote">apple</span>”</span>, but if
            the row also contains the word <span class="quote">“<span class="quote">macintosh</span>”</span>,
            rate it lower than if row does not. This is
            <span class="quote">“<span class="quote">softer</span>”</span> than a search for <code class="literal">'+apple
            -macintosh'</code>, for which the presence of
            <span class="quote">“<span class="quote">macintosh</span>”</span> causes the row not to be returned
            at all.
          </p></li><li class="listitem"><p>
            <code class="literal">'+apple +(&gt;turnover &lt;strudel)'</code>
          </p><p>
            Find rows that contain the words <span class="quote">“<span class="quote">apple</span>”</span> and
            <span class="quote">“<span class="quote">turnover</span>”</span>, or <span class="quote">“<span class="quote">apple</span>”</span> and
            <span class="quote">“<span class="quote">strudel</span>”</span> (in any order), but rank <span class="quote">“<span class="quote">apple
            turnover</span>”</span> higher than <span class="quote">“<span class="quote">apple strudel</span>”</span>.
          </p></li><li class="listitem"><p>
            <code class="literal">'apple*'</code>
          </p><p>
            Find rows that contain words such as <span class="quote">“<span class="quote">apple</span>”</span>,
            <span class="quote">“<span class="quote">apples</span>”</span>, <span class="quote">“<span class="quote">applesauce</span>”</span>, or
            <span class="quote">“<span class="quote">applet</span>”</span>.
          </p></li><li class="listitem"><p>
            <code class="literal">'"some words"'</code>
          </p><p>
            Find rows that contain the exact phrase <span class="quote">“<span class="quote">some
            words</span>”</span> (for example, rows that contain <span class="quote">“<span class="quote">some
            words of wisdom</span>”</span> but not <span class="quote">“<span class="quote">some noise
            words</span>”</span>). Note that the
            <span class="quote">“<span class="quote"><code class="literal">"</code></span>”</span> characters that enclose
            the phrase are operator characters that delimit the phrase.
            They are not the quotation marks that enclose the search
            string itself.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-query-expansion"></a>12.9.3. Full-Text Searches with Query Expansion</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp65422352"></a><a class="indexterm" name="idp65423424"></a><p>
        Full-text search supports query expansion (and in particular,
        its variant <span class="quote">“<span class="quote">blind query expansion</span>”</span>). This is
        generally useful when a search phrase is too short, which often
        means that the user is relying on implied knowledge that the
        full-text search engine lacks. For example, a user searching for
        <span class="quote">“<span class="quote">database</span>”</span> may really mean that
        <span class="quote">“<span class="quote">MySQL</span>”</span>, <span class="quote">“<span class="quote">Oracle</span>”</span>, <span class="quote">“<span class="quote">DB2</span>”</span>,
        and <span class="quote">“<span class="quote">RDBMS</span>”</span> all are phrases that should match
        <span class="quote">“<span class="quote">databases</span>”</span> and should be returned, too. This is
        implied knowledge.
      </p><p>
        Blind query expansion (also known as automatic relevance
        feedback) is enabled by adding <code class="literal">WITH QUERY
        EXPANSION</code> or <code class="literal">IN NATURAL LANGUAGE MODE WITH
        QUERY EXPANSION</code> following the search phrase. It works
        by performing the search twice, where the search phrase for the
        second search is the original search phrase concatenated with
        the few most highly relevant documents from the first search.
        Thus, if one of these documents contains the word
        <span class="quote">“<span class="quote">databases</span>”</span> and the word <span class="quote">“<span class="quote">MySQL</span>”</span>, the
        second search finds the documents that contain the word
        <span class="quote">“<span class="quote">MySQL</span>”</span> even if they do not contain the word
        <span class="quote">“<span class="quote">database</span>”</span>. The following example shows this
        difference:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' IN NATURAL LANGUAGE MODE);</code></strong>
+----+-------------------+------------------------------------------+
| id | title             | body                                     |
+----+-------------------+------------------------------------------+
|  1 | MySQL Tutorial    | DBMS stands for DataBase ...             |
|  5 | MySQL vs. YourSQL | In the following database comparison ... |
+----+-------------------+------------------------------------------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM articles</code></strong>
    <strong class="userinput"><code>WHERE MATCH (title,body)</code></strong>
    <strong class="userinput"><code>AGAINST ('database' WITH QUERY EXPANSION);</code></strong>
+----+-----------------------+------------------------------------------+
| id | title                 | body                                     |
+----+-----------------------+------------------------------------------+
|  5 | MySQL vs. YourSQL     | In the following database comparison ... |
|  1 | MySQL Tutorial        | DBMS stands for DataBase ...             |
|  3 | Optimizing MySQL      | In this tutorial we will show ...        |
|  6 | MySQL Security        | When configured properly, MySQL ...      |
|  2 | How To Use MySQL Well | After you went through a ...             |
|  4 | 1001 MySQL Tricks     | 1. Never run mysqld as root. 2. ...      |
+----+-----------------------+------------------------------------------+
6 rows in set (0.00 sec)
</pre><p>
        Another example could be searching for books by Georges Simenon
        about Maigret, when a user is not sure how to spell
        <span class="quote">“<span class="quote">Maigret</span>”</span>. A search for <span class="quote">“<span class="quote">Megre and the
        reluctant witnesses</span>”</span> finds only <span class="quote">“<span class="quote">Maigret and the
        Reluctant Witnesses</span>”</span> without query expansion. A search
        with query expansion finds all books with the word
        <span class="quote">“<span class="quote">Maigret</span>”</span> on the second pass.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
          Because blind query expansion tends to increase noise
          significantly by returning nonrelevant documents, use it only
          when a search phrase is short.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-stopwords"></a>12.9.4. Full-Text Stopwords</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp65443760"></a><p>
        The stopword list is loaded and searched for full-text queries
        using the server character set and collation (the values of the
        <code class="literal">character_set_server</code> and
        <code class="literal">collation_server</code> system variables). False
        hits or misses might occur for stopword lookups if the stopword
        file or columns used for full-text indexing or searches have a
        character set or collation different from
        <code class="literal">character_set_server</code> or
        <code class="literal">collation_server</code>.
      </p><p>
        Case sensitivity of stopword lookups depends on the server
        collation. For example, lookups are case insensitive if the
        collation is <code class="literal">latin1_swedish_ci</code>, whereas
        lookups are case sensitive if the collation is
        <code class="literal">latin1_general_cs</code> or
        <code class="literal">latin1_bin</code>.
</p>
<h4><a name="idp65451264"></a>
        Stopwords for <code class="literal">InnoDB</code> Search Indexes
</h4>
<p>
        <code class="literal">InnoDB</code> has a relatively short list of default
        stopwords, because documents from technical, literary, and so on
        sources often use short words as keywords or in significant
        phrases. For example, you might search for <span class="quote">“<span class="quote">to be or not
        to be</span>”</span> and expect to get a sensible result, rather than
        having all those words ignored.
      </p><p>
        

        To see the list, query the table
        <a class="link" href="information-schema.html#innodb-ft-default-stopword-table" title="20.30.21. The INFORMATION_SCHEMA INNODB_FT_DEFAULT_STOPWORD Table"><code class="literal">information_schema.innodb_ft_default_stopword</code></a>.
        To define your own stopword list used for all
        <code class="literal">InnoDB</code> tables, define a table with the same
        structure as
        <a class="link" href="information-schema.html#innodb-ft-default-stopword-table" title="20.30.21. The INFORMATION_SCHEMA INNODB_FT_DEFAULT_STOPWORD Table"><code class="literal">innodb_ft_default_stopword</code></a>, fill it
        with the desired stopwords, and set the value of the
        <a class="link" href="storage-engines.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a>
        option to a value of the form
        <code class="literal"><em class="replaceable"><code>db_name</code></em>/<em class="replaceable"><code>table_name</code></em></code>
        before creating the search index. To create special stopword
        lists on a table-by-table basis, define other tables to hold
        these lists and specify the appropriate one in the
        <a class="link" href="storage-engines.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a>
        option before creating the search index.
</p>
<h4><a name="idp65461536"></a>
        Stopwords for <code class="literal">MyISAM</code> Search Indexes
</h4>
<p>
        In MySQL 5.6, the stopword file is loaded and
        searched using <code class="literal">latin1</code> if
        <code class="literal">character_set_server</code> is
        <code class="literal">ucs2</code>, <code class="literal">utf16</code>,
        <code class="literal">utf16le</code>, or <code class="literal">utf32</code>.
      </p><p>
        The following table shows the default list of stopwords for
        <code class="literal">MyISAM</code> search indexes. In a MySQL source
        distribution, you can find this list in the
        <code class="filename">storage/myisam/ft_static.c</code> file.
</p>
<div class="informaltable">
<table summary="This table shows the default list of full-text
          stopwords. In a MySQL source distribution, you can find this
          list in the myisam/ft_static.c file. The
          table lists stopwords in alphabetical order when read from
left to right, row by row." border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td scope="row">a's</td><td>able</td><td>about</td><td>above</td><td>according</td></tr><tr><td scope="row">accordingly</td><td>across</td><td>actually</td><td>after</td><td>afterwards</td></tr><tr><td scope="row">again</td><td>against</td><td>ain't</td><td>all</td><td>allow</td></tr><tr><td scope="row">allows</td><td>almost</td><td>alone</td><td>along</td><td>already</td></tr><tr><td scope="row">also</td><td>although</td><td>always</td><td>am</td><td>among</td></tr><tr><td scope="row">amongst</td><td>an</td><td>and</td><td>another</td><td>any</td></tr><tr><td scope="row">anybody</td><td>anyhow</td><td>anyone</td><td>anything</td><td>anyway</td></tr><tr><td scope="row">anyways</td><td>anywhere</td><td>apart</td><td>appear</td><td>appreciate</td></tr><tr><td scope="row">appropriate</td><td>are</td><td>aren't</td><td>around</td><td>as</td></tr><tr><td scope="row">aside</td><td>ask</td><td>asking</td><td>associated</td><td>at</td></tr><tr><td scope="row">available</td><td>away</td><td>awfully</td><td>be</td><td>became</td></tr><tr><td scope="row">because</td><td>become</td><td>becomes</td><td>becoming</td><td>been</td></tr><tr><td scope="row">before</td><td>beforehand</td><td>behind</td><td>being</td><td>believe</td></tr><tr><td scope="row">below</td><td>beside</td><td>besides</td><td>best</td><td>better</td></tr><tr><td scope="row">between</td><td>beyond</td><td>both</td><td>brief</td><td>but</td></tr><tr><td scope="row">by</td><td>c'mon</td><td>c's</td><td>came</td><td>can</td></tr><tr><td scope="row">can't</td><td>cannot</td><td>cant</td><td>cause</td><td>causes</td></tr><tr><td scope="row">certain</td><td>certainly</td><td>changes</td><td>clearly</td><td>co</td></tr><tr><td scope="row">com</td><td>come</td><td>comes</td><td>concerning</td><td>consequently</td></tr><tr><td scope="row">consider</td><td>considering</td><td>contain</td><td>containing</td><td>contains</td></tr><tr><td scope="row">corresponding</td><td>could</td><td>couldn't</td><td>course</td><td>currently</td></tr><tr><td scope="row">definitely</td><td>described</td><td>despite</td><td>did</td><td>didn't</td></tr><tr><td scope="row">different</td><td>do</td><td>does</td><td>doesn't</td><td>doing</td></tr><tr><td scope="row">don't</td><td>done</td><td>down</td><td>downwards</td><td>during</td></tr><tr><td scope="row">each</td><td>edu</td><td>eg</td><td>eight</td><td>either</td></tr><tr><td scope="row">else</td><td>elsewhere</td><td>enough</td><td>entirely</td><td>especially</td></tr><tr><td scope="row">et</td><td>etc</td><td>even</td><td>ever</td><td>every</td></tr><tr><td scope="row">everybody</td><td>everyone</td><td>everything</td><td>everywhere</td><td>ex</td></tr><tr><td scope="row">exactly</td><td>example</td><td>except</td><td>far</td><td>few</td></tr><tr><td scope="row">fifth</td><td>first</td><td>five</td><td>followed</td><td>following</td></tr><tr><td scope="row">follows</td><td>for</td><td>former</td><td>formerly</td><td>forth</td></tr><tr><td scope="row">four</td><td>from</td><td>further</td><td>furthermore</td><td>get</td></tr><tr><td scope="row">gets</td><td>getting</td><td>given</td><td>gives</td><td>go</td></tr><tr><td scope="row">goes</td><td>going</td><td>gone</td><td>got</td><td>gotten</td></tr><tr><td scope="row">greetings</td><td>had</td><td>hadn't</td><td>happens</td><td>hardly</td></tr><tr><td scope="row">has</td><td>hasn't</td><td>have</td><td>haven't</td><td>having</td></tr><tr><td scope="row">he</td><td>he's</td><td>hello</td><td>help</td><td>hence</td></tr><tr><td scope="row">her</td><td>here</td><td>here's</td><td>hereafter</td><td>hereby</td></tr><tr><td scope="row">herein</td><td>hereupon</td><td>hers</td><td>herself</td><td>hi</td></tr><tr><td scope="row">him</td><td>himself</td><td>his</td><td>hither</td><td>hopefully</td></tr><tr><td scope="row">how</td><td>howbeit</td><td>however</td><td>i'd</td><td>i'll</td></tr><tr><td scope="row">i'm</td><td>i've</td><td>ie</td><td>if</td><td>ignored</td></tr><tr><td scope="row">immediate</td><td>in</td><td>inasmuch</td><td>inc</td><td>indeed</td></tr><tr><td scope="row">indicate</td><td>indicated</td><td>indicates</td><td>inner</td><td>insofar</td></tr><tr><td scope="row">instead</td><td>into</td><td>inward</td><td>is</td><td>isn't</td></tr><tr><td scope="row">it</td><td>it'd</td><td>it'll</td><td>it's</td><td>its</td></tr><tr><td scope="row">itself</td><td>just</td><td>keep</td><td>keeps</td><td>kept</td></tr><tr><td scope="row">know</td><td>known</td><td>knows</td><td>last</td><td>lately</td></tr><tr><td scope="row">later</td><td>latter</td><td>latterly</td><td>least</td><td>less</td></tr><tr><td scope="row">lest</td><td>let</td><td>let's</td><td>like</td><td>liked</td></tr><tr><td scope="row">likely</td><td>little</td><td>look</td><td>looking</td><td>looks</td></tr><tr><td scope="row">ltd</td><td>mainly</td><td>many</td><td>may</td><td>maybe</td></tr><tr><td scope="row">me</td><td>mean</td><td>meanwhile</td><td>merely</td><td>might</td></tr><tr><td scope="row">more</td><td>moreover</td><td>most</td><td>mostly</td><td>much</td></tr><tr><td scope="row">must</td><td>my</td><td>myself</td><td>name</td><td>namely</td></tr><tr><td scope="row">nd</td><td>near</td><td>nearly</td><td>necessary</td><td>need</td></tr><tr><td scope="row">needs</td><td>neither</td><td>never</td><td>nevertheless</td><td>new</td></tr><tr><td scope="row">next</td><td>nine</td><td>no</td><td>nobody</td><td>non</td></tr><tr><td scope="row">none</td><td>noone</td><td>nor</td><td>normally</td><td>not</td></tr><tr><td scope="row">nothing</td><td>novel</td><td>now</td><td>nowhere</td><td>obviously</td></tr><tr><td scope="row">of</td><td>off</td><td>often</td><td>oh</td><td>ok</td></tr><tr><td scope="row">okay</td><td>old</td><td>on</td><td>once</td><td>one</td></tr><tr><td scope="row">ones</td><td>only</td><td>onto</td><td>or</td><td>other</td></tr><tr><td scope="row">others</td><td>otherwise</td><td>ought</td><td>our</td><td>ours</td></tr><tr><td scope="row">ourselves</td><td>out</td><td>outside</td><td>over</td><td>overall</td></tr><tr><td scope="row">own</td><td>particular</td><td>particularly</td><td>per</td><td>perhaps</td></tr><tr><td scope="row">placed</td><td>please</td><td>plus</td><td>possible</td><td>presumably</td></tr><tr><td scope="row">probably</td><td>provides</td><td>que</td><td>quite</td><td>qv</td></tr><tr><td scope="row">rather</td><td>rd</td><td>re</td><td>really</td><td>reasonably</td></tr><tr><td scope="row">regarding</td><td>regardless</td><td>regards</td><td>relatively</td><td>respectively</td></tr><tr><td scope="row">right</td><td>said</td><td>same</td><td>saw</td><td>say</td></tr><tr><td scope="row">saying</td><td>says</td><td>second</td><td>secondly</td><td>see</td></tr><tr><td scope="row">seeing</td><td>seem</td><td>seemed</td><td>seeming</td><td>seems</td></tr><tr><td scope="row">seen</td><td>self</td><td>selves</td><td>sensible</td><td>sent</td></tr><tr><td scope="row">serious</td><td>seriously</td><td>seven</td><td>several</td><td>shall</td></tr><tr><td scope="row">she</td><td>should</td><td>shouldn't</td><td>since</td><td>six</td></tr><tr><td scope="row">so</td><td>some</td><td>somebody</td><td>somehow</td><td>someone</td></tr><tr><td scope="row">something</td><td>sometime</td><td>sometimes</td><td>somewhat</td><td>somewhere</td></tr><tr><td scope="row">soon</td><td>sorry</td><td>specified</td><td>specify</td><td>specifying</td></tr><tr><td scope="row">still</td><td>sub</td><td>such</td><td>sup</td><td>sure</td></tr><tr><td scope="row">t's</td><td>take</td><td>taken</td><td>tell</td><td>tends</td></tr><tr><td scope="row">th</td><td>than</td><td>thank</td><td>thanks</td><td>thanx</td></tr><tr><td scope="row">that</td><td>that's</td><td>thats</td><td>the</td><td>their</td></tr><tr><td scope="row">theirs</td><td>them</td><td>themselves</td><td>then</td><td>thence</td></tr><tr><td scope="row">there</td><td>there's</td><td>thereafter</td><td>thereby</td><td>therefore</td></tr><tr><td scope="row">therein</td><td>theres</td><td>thereupon</td><td>these</td><td>they</td></tr><tr><td scope="row">they'd</td><td>they'll</td><td>they're</td><td>they've</td><td>think</td></tr><tr><td scope="row">third</td><td>this</td><td>thorough</td><td>thoroughly</td><td>those</td></tr><tr><td scope="row">though</td><td>three</td><td>through</td><td>throughout</td><td>thru</td></tr><tr><td scope="row">thus</td><td>to</td><td>together</td><td>too</td><td>took</td></tr><tr><td scope="row">toward</td><td>towards</td><td>tried</td><td>tries</td><td>truly</td></tr><tr><td scope="row">try</td><td>trying</td><td>twice</td><td>two</td><td>un</td></tr><tr><td scope="row">under</td><td>unfortunately</td><td>unless</td><td>unlikely</td><td>until</td></tr><tr><td scope="row">unto</td><td>up</td><td>upon</td><td>us</td><td>use</td></tr><tr><td scope="row">used</td><td>useful</td><td>uses</td><td>using</td><td>usually</td></tr><tr><td scope="row">value</td><td>various</td><td>very</td><td>via</td><td>viz</td></tr><tr><td scope="row">vs</td><td>want</td><td>wants</td><td>was</td><td>wasn't</td></tr><tr><td scope="row">way</td><td>we</td><td>we'd</td><td>we'll</td><td>we're</td></tr><tr><td scope="row">we've</td><td>welcome</td><td>well</td><td>went</td><td>were</td></tr><tr><td scope="row">weren't</td><td>what</td><td>what's</td><td>whatever</td><td>when</td></tr><tr><td scope="row">whence</td><td>whenever</td><td>where</td><td>where's</td><td>whereafter</td></tr><tr><td scope="row">whereas</td><td>whereby</td><td>wherein</td><td>whereupon</td><td>wherever</td></tr><tr><td scope="row">whether</td><td>which</td><td>while</td><td>whither</td><td>who</td></tr><tr><td scope="row">who's</td><td>whoever</td><td>whole</td><td>whom</td><td>whose</td></tr><tr><td scope="row">why</td><td>will</td><td>willing</td><td>wish</td><td>with</td></tr><tr><td scope="row">within</td><td>without</td><td>won't</td><td>wonder</td><td>would</td></tr><tr><td scope="row">wouldn't</td><td>yes</td><td>yet</td><td>you</td><td>you'd</td></tr><tr><td scope="row">you'll</td><td>you're</td><td>you've</td><td>your</td><td>yours</td></tr><tr><td scope="row">yourself</td><td>yourselves</td><td>zero</td><td> </td><td> </td></tr></tbody></table>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-restrictions"></a>12.9.5. Full-Text Restrictions</h3>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Full-text searches are supported for
            <a class="link" href="storage-engines.html#innodb-storage-engine" title="14.2. The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> and
            <a class="link" href="storage-engines.html#myisam-storage-engine" title="14.3. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables only.
            <code class="literal">FULLTEXT</code> index support for
            <code class="literal">InnoDB</code> tables requires MySQL 5.6.4 or
            higher.
          </p></li><li class="listitem"><p>
            Full-text searches are not supported for partitioned tables.
            See <a class="xref" href="partitioning.html#partitioning-limitations" title="18.6. Restrictions and Limitations on Partitioning">Section 18.6, “Restrictions and Limitations on Partitioning”</a>.
          </p></li><li class="listitem"><p>
            Full-text searches can be used with most multi-byte
            character sets. The exception is that for Unicode, the
            <code class="literal">utf8</code> character set can be used, but not
            the <code class="literal">ucs2</code> character set. Although
            <code class="literal">FULLTEXT</code> indexes on
            <code class="literal">ucs2</code> columns cannot be used, you can
            perform <code class="literal">IN BOOLEAN MODE</code> searches on a
            <code class="literal">ucs2</code> column that has no such index.
          </p><p>
            The remarks for <code class="literal">utf8</code> also apply to
            <code class="literal">utf8mb4</code>, and the remarks for
            <code class="literal">ucs2</code> also apply to
            <code class="literal">utf16</code>, <code class="literal">utf16le</code>, and
            <code class="literal">utf32</code>.
          </p></li><li class="listitem"><p>
            Ideographic languages such as Chinese and Japanese do not
            have word delimiters. Therefore, the
            <code class="literal">FULLTEXT</code> parser <span class="emphasis"><em>cannot
            determine where words begin and end in these and other such
            languages</em></span>. The implications of this and some
            workarounds for the problem are described in
            <a class="xref" href="functions.html#fulltext-search" title="12.9. Full-Text Search Functions">Section 12.9, “Full-Text Search Functions”</a>.
          </p></li><li class="listitem"><p>
            Although the use of multiple character sets within a single
            table is supported, all columns in a
            <code class="literal">FULLTEXT</code> index must use the same
            character set and collation.
          </p></li><li class="listitem"><p>
            The <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> column list must
            match exactly the column list in some
            <code class="literal">FULLTEXT</code> index definition for the table,
            unless this <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a> is
            <code class="literal">IN BOOLEAN MODE</code> on a
            <code class="literal">MyISAM</code> table. For
            <code class="literal">MyISAM</code> tables, boolean-mode searches can
            be done on nonindexed columns, although they are likely to
            be slow.
          </p></li><li class="listitem"><p>
            The argument to <code class="literal">AGAINST()</code> must be a
            string value that is constant during query evaluation. This
            rules out, for example, a table column because that can
            differ for each row.
          </p></li><li class="listitem"><p>
            Index hints are more limited for <code class="literal">FULLTEXT</code>
            searches than for non-<code class="literal">FULLTEXT</code> searches.
            See <a class="xref" href="sql-syntax.html#index-hints" title="13.2.9.3. Index Hint Syntax">Section 13.2.9.3, “Index Hint Syntax”</a>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="fulltext-fine-tuning"></a>12.9.6. Fine-Tuning MySQL Full-Text Search</h3>

</div>

</div>

</div>
<p>
        MySQL's full-text search capability has few user-tunable
        parameters. You can exert more control over full-text searching
        behavior if you have a MySQL source distribution because some
        changes require source code modifications. See
        <a class="xref" href="installing.html#source-installation" title="2.9. Installing MySQL from Source">Section 2.9, “Installing MySQL from Source”</a>.
      </p><p>
        Note that full-text search is carefully tuned for effectiveness.
        Modifying the default behavior in most cases can actually
        decrease effectiveness. <span class="emphasis"><em>Do not alter the MySQL sources
        unless you know what you are doing</em></span>.
      </p><p>
        Most full-text variables described in this section must be set
        at server startup time. A server restart is required to change
        them; they cannot be modified while the server is running.
      </p><p>
        Some variable changes require that you rebuild the
        <code class="literal">FULLTEXT</code> indexes in your tables. Instructions
        for doing so are given later in this section.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The minimum and maximum lengths of words to be indexed are
            defined by the
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a>
            and
            <a class="link" href="storage-engines.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a>
            for <code class="literal">InnoDB</code> search indexes, and
            <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a> and
            <a class="link" href="server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a> for
            <code class="literal">MyISAM</code> ones. After changing any of these
            options, rebuild your <code class="literal">FULLTEXT</code> indexes
            for the change to take effect. For example, to make
            two-character words searchable, you could put the following
            lines in an option file:
          </p><pre class="programlisting">[mysqld]
innodb_ft_min_token_size=2
ft_min_word_len=2</pre><p>
            Then restart the server and rebuild your
            <code class="literal">FULLTEXT</code> indexes. For
            <code class="literal">MyISAM</code> tables, note particularly the
            remarks regarding <a class="link" href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> in the
            instructions following this list.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idp65805296"></a>

            <a class="indexterm" name="idp65806784"></a>



            To override the default stopword list, set the
            <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a> system
            variable. (See <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4. Server System Variables">Section 5.1.4, “Server System Variables”</a>.)
            The variable value should be the path name of the file
            containing the stopword list, or the empty string to disable
            stopword filtering. The server looks for the file in the
            data directory unless an absolute path name is given to
            specify a different directory. After changing the value of
            this variable or the contents of the stopword file, restart
            the server and rebuild your <code class="literal">FULLTEXT</code>
            indexes.
          </p><p>
            The stopword list is free-form, separating stopwords with
            any nonalphanumeric character such as newline, space, or
            comma. Exceptions are the underscore character
            (<span class="quote">“<span class="quote"><code class="literal">_</code></span>”</span>) and a single
            apostrophe (<span class="quote">“<span class="quote"><code class="literal">'</code></span>”</span>) which are
            treated as part of a word. The character set of the stopword
            list is the server's default character set; see
            <a class="xref" href="globalization.html#charset-server" title="10.1.3.1. Server Character Set and Collation">Section 10.1.3.1, “Server Character Set and Collation”</a>.
          </p></li><li class="listitem"><p>
            The 50% threshold for natural language searches is
            determined by the particular weighting scheme chosen. To
            disable it, look for the following line in
            <code class="filename">storage/myisam/ftdefs.h</code>:
          </p><pre class="programlisting">#define GWS_IN_USE GWS_PROB</pre><p>
            Change that line to this:
          </p><pre class="programlisting">#define GWS_IN_USE GWS_FREQ</pre><p>
            Then recompile MySQL. There is no need to rebuild the
            indexes in this case.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
              By making this change, you <span class="emphasis"><em>severely</em></span>
              decrease MySQL's ability to provide adequate relevance
              values for the <a class="link" href="functions.html#function_match"><code class="literal">MATCH()</code></a>
              function. If you really need to search for such common
              words, it would be better to search using <code class="literal">IN
              BOOLEAN MODE</code> instead, which does not observe the
              50% threshold.
</p>
</div>
</li><li class="listitem"><p>
            To change the operators used for boolean full-text searches
            on <code class="literal">MyISAM</code> tables, set the
            <a class="link" href="server-administration.html#sysvar_ft_boolean_syntax"><code class="literal">ft_boolean_syntax</code></a> system
            variable. (<code class="literal">InnoDB</code> does not have an
            equivalent setting.) This variable can be changed while the
            server is running, but you must have the
            <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege to do so. No
            rebuilding of indexes is necessary in this case. See
            <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4. Server System Variables">Section 5.1.4, “Server System Variables”</a>, which describes
            the rules governing how to set this variable.
          </p></li><li class="listitem"><p>
            You can change the set of characters that are considered
            word characters in several ways, as described in the
            following list. After making the modification, rebuild the
            indexes for each table that contains any
            <code class="literal">FULLTEXT</code> indexes. Suppose that you want
            to treat the hyphen character ('-') as a word character. Use
            one of these methods:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Modify the MySQL source: In
                <code class="filename">storage/myisam/ftdefs.h</code>, see the
                <code class="literal">true_word_char()</code> and
                <code class="literal">misc_word_char()</code> macros. Add
                <code class="literal">'-'</code> to one of those macros and
                recompile MySQL.
              </p></li><li class="listitem"><p>
                Modify a character set file: This requires no
                recompilation. The <code class="literal">true_word_char()</code>
                macro uses a <span class="quote">“<span class="quote">character type</span>”</span> table to
                distinguish letters and numbers from other characters. .
                You can edit the contents of the
                <code class="literal">&lt;ctype&gt;&lt;map&gt;</code> array in one
                of the character set XML files to specify that
                <code class="literal">'-'</code> is a <span class="quote">“<span class="quote">letter.</span>”</span> Then
                use the given character set for your
                <code class="literal">FULLTEXT</code> indexes. For information
                about the <code class="literal">&lt;ctype&gt;&lt;map&gt;</code>
                array format, see <a class="xref" href="globalization.html#character-arrays" title="10.3.1. Character Definition Arrays">Section 10.3.1, “Character Definition Arrays”</a>.
              </p></li><li class="listitem"><p>
                Add a new collation for the character set used by the
                indexed columns, and alter the columns to use that
                collation. For general information about adding
                collations, see <a class="xref" href="globalization.html#adding-collation" title="10.4. Adding a Collation to a Character Set">Section 10.4, “Adding a Collation to a Character Set”</a>. For
                an example specific to full-text indexing, see
                <a class="xref" href="functions.html#full-text-adding-collation" title="12.9.7. Adding a Collation for Full-Text Indexing">Section 12.9.7, “Adding a Collation for Full-Text Indexing”</a>.
</p></li></ul>
</div>
</li></ul>
</div>
<p>
        If you modify full-text variables that affect indexing
        (<a class="link" href="storage-engines.html#sysvar_innodb_ft_min_token_size"><code class="literal">innodb_ft_min_token_size</code></a>,
        <a class="link" href="storage-engines.html#sysvar_innodb_ft_max_token_size"><code class="literal">innodb_ft_max_token_size</code></a>,
        <a class="link" href="storage-engines.html#sysvar_innodb_ft_server_stopword_table"><code class="literal">innodb_ft_server_stopword_table</code></a>,
        <a class="link" href="storage-engines.html#sysvar_innodb_ft_user_stopword_table"><code class="literal">innodb_ft_user_stopword_table</code></a>,
        <a class="link" href="storage-engines.html#sysvar_innodb_ft_enable_stopword"><code class="literal">innodb_ft_enable_stopword</code></a>,
        <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a>,
        <a class="link" href="server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a>, or
        <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a>), or if you
        change the stopword file itself, you must rebuild your
        <code class="literal">FULLTEXT</code> indexes after making the changes and
        restarting the server.
      </p><p>
        To rebuild the <code class="literal">FULLTEXT </code> indexes for an
        <code class="literal">InnoDB</code> table, use <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> with the <code class="literal">DROP INDEX</code> and
        <code class="literal">ADD INDEX</code> options to drop and re-create each
        index.
      </p><p>
        To rebuild the <code class="literal">FULLTEXT</code> indexes for a
        <code class="literal">MyISAM</code> table, it is sufficient to do a
        <code class="literal">QUICK</code> repair operation:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>REPAIR TABLE <em class="replaceable"><code>tbl_name</code></em> QUICK;</code></strong>
</pre><p>
        Alternatively, use <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> as
        just described. In some cases, this may be faster than a repair
        operation.
      </p><p>
        Each table that contains any <code class="literal">FULLTEXT</code> index
        must be repaired as just shown. Otherwise, queries for the table
        may yield incorrect results, and modifications to the table will
        cause the server to see the table as corrupt and in need of
        repair.
      </p><p>
        Note that if you use <a class="link" href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> to perform an
        operation that modifies <code class="literal">MyISAM </code> table indexes
        (such as repair or analyze), the <code class="literal">FULLTEXT</code>
        indexes are rebuilt using the <span class="emphasis"><em>default</em></span>
        full-text parameter values for minimum word length, maximum word
        length, and stopword file unless you specify otherwise. This can
        result in queries failing.
      </p><p>
        The problem occurs because these parameters are known only by
        the server. They are not stored in <code class="literal">MyISAM</code>
        index files. To avoid the problem if you have modified the
        minimum or maximum word length or stopword file values used by
        the server, specify the same
        <a class="link" href="server-administration.html#sysvar_ft_min_word_len"><code class="literal">ft_min_word_len</code></a>,
        <a class="link" href="server-administration.html#sysvar_ft_max_word_len"><code class="literal">ft_max_word_len</code></a>, and
        <a class="link" href="server-administration.html#sysvar_ft_stopword_file"><code class="literal">ft_stopword_file</code></a> values for
        <a class="link" href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> that you use for
        <a class="link" href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>. For example, if you have set the
        minimum word length to 3, you can repair a table with
        <a class="link" href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> like this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>myisamchk --recover --ft_min_word_len=3 <em class="replaceable"><code>tbl_name</code></em>.MYI</code></strong>
</pre><p>
        To ensure that <a class="link" href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> and the server use
        the same values for full-text parameters, place each one in both
        the <code class="literal">[mysqld]</code> and
        <code class="literal">[myisamchk]</code> sections of an option file:
      </p><pre class="programlisting">[mysqld]
ft_min_word_len=3

[myisamchk]
ft_min_word_len=3</pre><p>
        An alternative to using <a class="link" href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span class="command"><strong>myisamchk</strong></span></a> for
        <code class="literal">MyISAM</code> table index modification is to use the
        <a class="link" href="sql-syntax.html#repair-table" title="13.7.2.5. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>,
        <a class="link" href="sql-syntax.html#analyze-table" title="13.7.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>,
        <a class="link" href="sql-syntax.html#optimize-table" title="13.7.2.4. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>, or
        <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statements. These
        statements are performed by the server, which knows the proper
        full-text parameter values to use.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="full-text-adding-collation"></a>12.9.7. Adding a Collation for Full-Text Indexing</h3>

</div>

</div>

</div>
<p>
        This section describes how to add a new collation for full-text
        searches. The sample collation is like
        <code class="literal">latin1_swedish_ci</code> but treats the
        <code class="literal">'-'</code> character as a letter rather than as a
        punctuation character so that it can be indexed as a word
        character. General information about adding collations is given
        in <a class="xref" href="globalization.html#adding-collation" title="10.4. Adding a Collation to a Character Set">Section 10.4, “Adding a Collation to a Character Set”</a>; it is assumed that you
        have read it and are familiar with the files involved.
      </p><p>
        To add a collation for full-text indexing, use this procedure:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Add a collation to the <code class="filename">Index.xml</code> file.
            The collation ID must be unused, so choose a value different
            from 1000 if that ID is already taken on your system.
          </p><pre class="programlisting">&lt;charset name="latin1"&gt;
...
&lt;collation name="latin1_fulltext_ci" id="1000"/&gt;
&lt;/charset&gt;</pre></li><li class="listitem"><p>
            Declare the sort order for the collation in the
            <code class="filename">latin1.xml</code> file. In this case, the
            order can be copied from
            <code class="literal">latin1_swedish_ci</code>:
          </p><pre class="programlisting">&lt;collation name="latin1_fulltext_ci"&gt;
&lt;map&gt;
00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F
20 21 22 23 24 25 26 27 28 29 2A 2B 2C 2D 2E 2F
30 31 32 33 34 35 36 37 38 39 3A 3B 3C 3D 3E 3F
40 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F
50 51 52 53 54 55 56 57 58 59 5A 5B 5C 5D 5E 5F
60 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F
50 51 52 53 54 55 56 57 58 59 5A 7B 7C 7D 7E 7F
80 81 82 83 84 85 86 87 88 89 8A 8B 8C 8D 8E 8F
90 91 92 93 94 95 96 97 98 99 9A 9B 9C 9D 9E 9F
A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE AF
B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 BA BB BC BD BE BF
41 41 41 41 5C 5B 5C 43 45 45 45 45 49 49 49 49
44 4E 4F 4F 4F 4F 5D D7 D8 55 55 55 59 59 DE DF
41 41 41 41 5C 5B 5C 43 45 45 45 45 49 49 49 49
44 4E 4F 4F 4F 4F 5D F7 D8 55 55 55 59 59 DE FF
&lt;/map&gt;
&lt;/collation&gt;</pre></li><li class="listitem"><p>
            Modify the <code class="literal">ctype</code> array in
            <code class="filename">latin1.xml</code>. Change the value
            corresponding to 0x2D (which is the code for the
            <code class="literal">'-'</code> character) from 10 (punctuation) to
            01 (small letter). In the following array, this is the
            element in the fourth row down, third value from the end.
          </p><pre class="programlisting">&lt;ctype&gt;
&lt;map&gt;
00
20 20 20 20 20 20 20 20 20 28 28 28 28 28 20 20
20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
48 10 10 10 10 10 10 10 10 10 10 10 10 <span class="bold"><strong>01</strong></span> 10 10
84 84 84 84 84 84 84 84 84 84 10 10 10 10 10 10
10 81 81 81 81 81 81 01 01 01 01 01 01 01 01 01
01 01 01 01 01 01 01 01 01 01 01 10 10 10 10 10
10 82 82 82 82 82 82 02 02 02 02 02 02 02 02 02
02 02 02 02 02 02 02 02 02 02 02 10 10 10 10 20
10 00 10 02 10 10 10 10 10 10 01 10 01 00 01 00
00 10 10 10 10 10 10 10 10 10 02 10 02 00 02 01
48 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10
10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10
01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01
01 01 01 01 01 01 01 10 01 01 01 01 01 01 01 02
02 02 02 02 02 02 02 02 02 02 02 02 02 02 02 02
02 02 02 02 02 02 02 10 02 02 02 02 02 02 02 02
&lt;/map&gt;
&lt;/ctype&gt;
</pre></li><li class="listitem"><p>
            Restart the server.
          </p></li><li class="listitem"><p>
            To employ the new collation, include it in the definition of
            columns that are to use it:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DROP TABLE IF EXISTS t1;</code></strong>
Query OK, 0 rows affected (0.13 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
    <strong class="userinput"><code>a TEXT CHARACTER SET latin1 COLLATE latin1_fulltext_ci,</code></strong>
    <strong class="userinput"><code>FULLTEXT INDEX(a)</code></strong>
    <strong class="userinput"><code>) ENGINE=InnoDB;</code></strong>
Query OK, 0 rows affected (0.47 sec)
</pre></li><li class="listitem"><p>
            Test the collation to verify that hyphen is considered as a
            word character:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUEs ('----'),('....'),('abcd');</code></strong>
Query OK, 3 rows affected (0.22 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 WHERE MATCH a AGAINST ('----' IN BOOLEAN MODE);</code></strong>
+------+
| a    |
+------+
| ---- |
+------+
1 row in set (0.00 sec)
</pre></li></ol>
</div>

</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="cast-functions"></a>12.10. Cast Functions and Operators</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp65910960"></a><a class="indexterm" name="idp65912032"></a><a class="indexterm" name="idp65913104"></a><a class="indexterm" name="idp65914592"></a><a class="indexterm" name="idp65915664"></a>
<div class="table">
<a name="idp65917152"></a><p class="title"><b>Table 12.14. Cast Functions</b></p>
<div class="table-contents">
<table summary="Cast Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a></td><td>Cast a string to a binary string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a></td><td>Cast a value as a certain type</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a></td><td>Cast a value as a certain type</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_binary"></a>
          <a class="indexterm" name="idp65928384"></a>

          <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a>
        </p><p>
          The <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a> operator casts the
          string following it to a binary string. This is an easy way to
          force a column comparison to be done byte by byte rather than
          character by character. This causes the comparison to be case
          sensitive even if the column is not defined as
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a> or
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a>.
          <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a> also causes trailing
          spaces to be significant.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 'a' = 'A';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT BINARY 'a' = 'A';</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 'a' = 'a ';</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT BINARY 'a' = 'a ';</code></strong>
        -&gt; 0
</pre><p>
          In a comparison, <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY</code></a> affects
          the entire operation; it can be given before either operand
          with the same result.
        </p><p>
          <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY
          <em class="replaceable"><code>str</code></em></code></a> is shorthand for
          <a class="link" href="functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>str</code></em> AS
          BINARY)</code></a>.
        </p><p>
          Note that in some contexts, if you cast an indexed column to
          <code class="literal">BINARY</code>, MySQL is not able to use the index
          efficiently.
        </p></li><li class="listitem"><p><a name="function_cast"></a>
          <a class="indexterm" name="idp65948592"></a>

          <a class="link" href="functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>expr</code></em> AS
          <em class="replaceable"><code>type</code></em>)</code></a>
        </p><p>
          The <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> function takes an
          expression of any type and produces a result value of a
          specified type, similar to
          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a>. See the description
          of <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> for more
          information.
        </p></li><li class="listitem"><p><a name="function_convert"></a>
          <a class="indexterm" name="idp65959168"></a>

          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT(<em class="replaceable"><code>expr</code></em>,<em class="replaceable"><code>type</code></em>)</code></a>,
          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT(<em class="replaceable"><code>expr</code></em>
          USING <em class="replaceable"><code>transcoding_name</code></em>)</code></a>
        </p><p>
          The <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> and
          <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> functions take an
          expression of any type and produce a result value of a
          specified type.
        </p><p>
          The <em class="replaceable"><code>type</code></em> for the result can be one
          of the following values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">BINARY[(<em class="replaceable"><code>N</code></em>)]</code>
            </p></li><li class="listitem"><p>
              <code class="literal">CHAR[(<em class="replaceable"><code>N</code></em>)]</code>
            </p></li><li class="listitem"><p>
              <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="data-types.html#datetime" title="11.3.1. The DATE, DATETIME, and TIMESTAMP Types"><code class="literal">DATETIME</code></a>
            </p></li><li class="listitem"><p>
              <code class="literal">DECIMAL[(<em class="replaceable"><code>M</code></em>[,<em class="replaceable"><code>D</code></em>])]</code>
            </p></li><li class="listitem"><p>
              <code class="literal">SIGNED [INTEGER]</code>
            </p></li><li class="listitem"><p>
              <a class="link" href="data-types.html#time" title="11.3.2. The TIME Type"><code class="literal">TIME</code></a>
            </p></li><li class="listitem"><p>
              <code class="literal">UNSIGNED [INTEGER]</code>
</p></li></ul>
</div>
<p>
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a> produces a string with
          the <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a> data type. See
          <a class="xref" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types">Section 11.4.2, “The <code class="literal">BINARY</code> and <code class="literal">VARBINARY</code> Types”</a> for a description of how
          this affects comparisons. If the optional length
          <em class="replaceable"><code>N</code></em> is given,
          <code class="literal">BINARY(<em class="replaceable"><code>N</code></em>)</code> causes
          the cast to use no more than <em class="replaceable"><code>N</code></em>
          bytes of the argument. Values shorter than
          <em class="replaceable"><code>N</code></em> bytes are padded with
          <code class="literal">0x00</code> bytes to a length of
          <em class="replaceable"><code>N</code></em>.
        </p><p>
          <a class="link" href="functions.html#function_char"><code class="literal">CHAR(<em class="replaceable"><code>N</code></em>)</code></a>
          causes the cast to use no more than
          <em class="replaceable"><code>N</code></em> characters of the argument.
        </p><p>
          <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> and
          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT(... USING ...)</code></a> are
          standard SQL syntax. The non-<code class="literal">USING</code> form of
          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> is ODBC syntax.
        </p><p>
          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> with
          <code class="literal">USING</code> is used to convert data between
          different character sets. In MySQL, transcoding names are the
          same as the corresponding character set names. For example,
          this statement converts the string <code class="literal">'abc'</code> in
          the default character set to the corresponding string in the
          <code class="literal">utf8</code> character set:
</p><pre class="programlisting">SELECT CONVERT('abc' USING utf8);</pre></li></ul>
</div>
<p>
      Normally, you cannot compare a <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a>
      value or other binary string in case-insensitive fashion because
      binary strings have no character set, and thus no concept of
      lettercase. To perform a case-insensitive comparison, use the
      <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> function to convert the
      value to a nonbinary string. Comparisons of the result use the
      string collation. For example, if the character set of the result
      has a case-insensitive collation, a
      <a class="link" href="functions.html#operator_like"><code class="literal">LIKE</code></a> operation is not case sensitive:
    </p><pre class="programlisting">SELECT 'A' LIKE CONVERT(<em class="replaceable"><code>blob_col</code></em> USING latin1) FROM <em class="replaceable"><code>tbl_name</code></em>;
</pre><p>
      To use a different character set, substitute its name for
      <code class="literal">latin1</code> in the preceding statement. To specify a
      particular collation for the converted string, use a
      <code class="literal">COLLATE</code> clause following the
      <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> call, as described in
      <a class="xref" href="globalization.html#charset-convert" title="10.1.9.2. CONVERT() and CAST()">Section 10.1.9.2, “<code class="literal">CONVERT()</code> and
          <code class="literal">CAST()</code>”</a>. For example, to use
      <code class="literal">latin1_german1_ci</code>:
    </p><pre class="programlisting">SELECT 'A' LIKE CONVERT(<em class="replaceable"><code>blob_col</code></em> USING latin1) COLLATE latin1_german1_ci
  FROM <em class="replaceable"><code>tbl_name</code></em>;
</pre><p>
      <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> can be used more
      generally for comparing strings that are represented in different
      character sets.
    </p><p>
      <a class="link" href="functions.html#function_lower"><code class="literal">LOWER()</code></a> (and
      <a class="link" href="functions.html#function_upper"><code class="literal">UPPER()</code></a>) are ineffective when
      applied to binary strings (<a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY</code></a>,
      <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>,
      <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a>). To perform lettercase
      conversion, convert the string to a nonbinary string:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @str = BINARY 'New York';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT LOWER(@str), LOWER(CONVERT(@str USING latin1));</code></strong>
+-------------+-----------------------------------+
| LOWER(@str) | LOWER(CONVERT(@str USING latin1)) |
+-------------+-----------------------------------+
| New York    | new york                          |
+-------------+-----------------------------------+
</pre><p>
      The cast functions are useful when you want to create a column
      with a specific type in a
      <a class="link" href="sql-syntax.html#create-table" title="13.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
      SELECT</code></a> statement:
    </p><pre class="programlisting">CREATE TABLE new_table SELECT CAST('2000-01-01' AS DATE);</pre><p>
      The functions also can be useful for sorting
      <a class="link" href="data-types.html#enum" title="11.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns in lexical order.
      Normally, sorting of <a class="link" href="data-types.html#enum" title="11.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns
      occurs using the internal numeric values. Casting the values to
      <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> results in a lexical sort:
    </p><pre class="programlisting">SELECT <em class="replaceable"><code>enum_col</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> ORDER BY CAST(<em class="replaceable"><code>enum_col</code></em> AS CHAR);
</pre><p>
      <a class="link" href="functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>str</code></em> AS
      BINARY)</code></a> is the same thing as
      <a class="link" href="functions.html#operator_binary"><code class="literal">BINARY
      <em class="replaceable"><code>str</code></em></code></a>.
      <a class="link" href="functions.html#function_cast"><code class="literal">CAST(<em class="replaceable"><code>expr</code></em> AS
      CHAR)</code></a> treats the expression as a string with the default
      character set.
    </p><p>
      <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> also changes the result if
      you use it as part of a more complex expression such as
      <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT('Date: ',CAST(NOW() AS
      DATE))</code></a>.
    </p><p>
      You should not use <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> to
      extract data in different formats but instead use string functions
      like <a class="link" href="functions.html#function_left"><code class="literal">LEFT()</code></a> or
      <a class="link" href="functions.html#function_extract"><code class="literal">EXTRACT()</code></a>. See
      <a class="xref" href="functions.html#date-and-time-functions" title="12.7. Date and Time Functions">Section 12.7, “Date and Time Functions”</a>.
    </p><p>
      To cast a string to a numeric value in numeric context, you
      normally do not have to do anything other than to use the string
      value as though it were a number:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1+'1';</code></strong>
       -&gt; 2
</pre><p>
      If you use a string in an arithmetic operation, it is converted to
      a floating-point number during expression evaluation.
    </p><p>
      If you use a number in string context, the number automatically is
      converted to a string:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CONCAT('hello you ',2);</code></strong>
        -&gt; 'hello you 2'
</pre><p>
      For information about implicit conversion of numbers to strings,
      see <a class="xref" href="functions.html#type-conversion" title="12.2. Type Conversion in Expression Evaluation">Section 12.2, “Type Conversion in Expression Evaluation”</a>.
    </p><p>
      MySQL supports arithmetic with both signed and unsigned 64-bit
      values. If you are using numeric operators (such as
      <a class="link" href="functions.html#operator_plus"><code class="literal">+</code></a> or
      <a class="link" href="functions.html#operator_minus"><code class="literal">-</code></a>) and one of the
      operands is an unsigned integer, the result is unsigned by default
      (see <a class="xref" href="functions.html#arithmetic-functions" title="12.6.1. Arithmetic Operators">Section 12.6.1, “Arithmetic Operators”</a>). You can override
      this by using the <code class="literal">SIGNED</code> or
      <code class="literal">UNSIGNED</code> cast operator to cast a value to a
      signed or unsigned 64-bit integer, respectively.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CAST(1-2 AS UNSIGNED)</code></strong>
        -&gt; 18446744073709551615
mysql&gt; <strong class="userinput"><code>SELECT CAST(CAST(1-2 AS UNSIGNED) AS SIGNED);</code></strong>
        -&gt; -1
</pre><p>
      If either operand is a floating-point value, the result is a
      floating-point value and is not affected by the preceding rule.
      (In this context, <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> column
      values are regarded as floating-point values.)
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CAST(1 AS UNSIGNED) - 2.0;</code></strong>
        -&gt; -1.0
</pre><p>
      The SQL mode affects the result of conversion operations.
      Examples:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If you convert a <span class="quote">“<span class="quote">zero</span>”</span> date string to a date,
          <a class="link" href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> and
          <a class="link" href="functions.html#function_cast"><code class="literal">CAST()</code></a> return
          <code class="literal">NULL</code> and produce a warning when the
          <a class="link" href="server-administration.html#sqlmode_no_zero_date"><code class="literal">NO_ZERO_DATE</code></a> SQL mode is
          enabled.
        </p></li><li class="listitem"><p>
          For integer subtraction, if the
          <a class="link" href="server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a> SQL
          mode is enabled, the subtraction result is signed even if any
          operand is unsigned.
</p></li></ul>
</div>
<p>
      For more information, see <a class="xref" href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
</p>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="xml-functions"></a>12.11. XML Functions</h2>

</div>

</div>

</div>

<div class="table">
<a name="idp66060496"></a><p class="title"><b>Table 12.15. XML Functions</b></p>
<div class="table-contents">
<table summary="XML Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a></td><td>Extracts a value from an XML string using XPath notation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a></td><td>Return replaced XML fragment</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      This section discusses XML and related functionality in MySQL.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
        It is possible to obtain XML-formatted output from MySQL in the
        <a class="link" href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> and <a class="link" href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span class="command"><strong>mysqldump</strong></span></a>
        clients by invoking them with the
        <a class="link" href="programs.html#option_mysql_xml"><code class="option">--xml</code></a> option. See
        <a class="xref" href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool">Section 4.5.1, “<span class="command"><strong>mysql</strong></span> — The MySQL Command-Line Tool”</a>, and <a class="xref" href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program">Section 4.5.4, “<span class="command"><strong>mysqldump</strong></span> — A Database Backup Program”</a>.
</p>
</div>
<p>
      Two functions providing basic XPath 1.0 (XML Path Language,
      version 1.0) capabilities are available. Some basic information
      about XPath syntax and usage is provided later in this section;
      however, an in-depth discussion of these topics is beyond the
      scope of this Manual, and you should refer to the
      <a class="ulink" href="http://www.w3.org/TR/xpath" target="_top">XML Path Language (XPath)
      1.0 standard</a> for definitive information. A useful resource
      for those new to XPath or who desire a refresher in the basics is
      the <a class="ulink" href="http://www.zvon.org/xxl/XPathTutorial/" target="_top">Zvon.org
      XPath Tutorial</a>, which is available in several languages.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
        These functions remain under development. We continue to improve
        these and other aspects of XML and XPath functionality in MySQL
        5.6 and onwards. You may discuss these, ask
        questions about them, and obtain help from other users with them
        in the <a class="ulink" href="http://forums.mysql.com/list.php?44" target="_top">MySQL XML User
        Forum</a>.
</p>
</div>
<p>
      XPath expressions used with these functions support user variables
      and local stored program variables. User variables are weakly
      checked; variables local to stored programs are strongly checked
      (see also Bug #26518):
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>User variables (weak checking). </b>
            Variables using the syntax
            <code class="literal">$@<em class="replaceable"><code>variable_name</code></em></code>
            (that is, user variables) are not checked. No warnings or
            errors are issued by the server if a variable has the wrong
            type or has previously not been assigned a value. This also
            means the user is fully responsible for any typographical
            errors, since no warnings will be given if (for example)
            <code class="literal">$@myvariable</code> is used where
            <code class="literal">$@myvariable</code> was intended.
          </p><p>
          Example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @xml = '&lt;a&gt;&lt;b&gt;X&lt;/b&gt;&lt;b&gt;Y&lt;/b&gt;&lt;/a&gt;';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET @i =1, @j = 2;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @i, ExtractValue(@xml, '//b[$@i]');</code></strong>
+------+--------------------------------+
| @i   | ExtractValue(@xml, '//b[$@i]') |
+------+--------------------------------+
|    1 | X                              |
+------+--------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @j, ExtractValue(@xml, '//b[$@j]');</code></strong>
+------+--------------------------------+
| @j   | ExtractValue(@xml, '//b[$@j]') |
+------+--------------------------------+
|    2 | Y                              |
+------+--------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @k, ExtractValue(@xml, '//b[$@k]');</code></strong>
+------+--------------------------------+
| @k   | ExtractValue(@xml, '//b[$@k]') |
+------+--------------------------------+
| NULL |                                |
+------+--------------------------------+
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p><b>Variables in stored programs (strong checking). </b>
            Variables using the syntax
            <code class="literal">$<em class="replaceable"><code>variable_name</code></em></code>
            can be declared and used with these functions when they are
            called inside stored programs. Such variables are local to
            the stored program in which they are defined, and are
            strongly checked for type and value.
          </p><p>
          Example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DELIMITER |</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE PROCEDURE myproc ()</code></strong>
    -&gt; <strong class="userinput"><code>BEGIN</code></strong>
    -&gt;   <strong class="userinput"><code>DECLARE i INT DEFAULT 1;</code></strong>
    -&gt;   <strong class="userinput"><code>DECLARE xml VARCHAR(25) DEFAULT '&lt;a&gt;X&lt;/a&gt;&lt;a&gt;Y&lt;/a&gt;&lt;a&gt;Z&lt;/a&gt;';</code></strong>
    -&gt;
    -&gt;   <strong class="userinput"><code>WHILE i &lt; 4 DO</code></strong>
    -&gt;     <strong class="userinput"><code>SELECT xml, i, ExtractValue(xml, '//a[$i]');</code></strong>
    -&gt;     <strong class="userinput"><code>SET i = i+1;</code></strong>
    -&gt;   <strong class="userinput"><code>END WHILE;</code></strong>
    -&gt; <strong class="userinput"><code>END |</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>DELIMITER ;</code></strong>

mysql&gt; <strong class="userinput"><code>CALL myproc;</code></strong>
+--------------------------+---+------------------------------+
| xml                      | i | ExtractValue(xml, '//a[$i]') |
+--------------------------+---+------------------------------+
| &lt;a&gt;X&lt;/a&gt;&lt;a&gt;Y&lt;/a&gt;&lt;a&gt;Z&lt;/a&gt; | 1 | X                            |
+--------------------------+---+------------------------------+
1 row in set (0.00 sec)

+--------------------------+---+------------------------------+
| xml                      | i | ExtractValue(xml, '//a[$i]') |
+--------------------------+---+------------------------------+
| &lt;a&gt;X&lt;/a&gt;&lt;a&gt;Y&lt;/a&gt;&lt;a&gt;Z&lt;/a&gt; | 2 | Y                            |
+--------------------------+---+------------------------------+
1 row in set (0.01 sec)

+--------------------------+---+------------------------------+
| xml                      | i | ExtractValue(xml, '//a[$i]') |
+--------------------------+---+------------------------------+
| &lt;a&gt;X&lt;/a&gt;&lt;a&gt;Y&lt;/a&gt;&lt;a&gt;Z&lt;/a&gt; | 3 | Z                            |
+--------------------------+---+------------------------------+
1 row in set (0.01 sec)
</pre><p><b>Parameters. </b>
            Variables used in XPath expressions inside stored routines
            that are passed in as parameters are also subject to strong
            checking.
</p></li></ul>
</div>
<p>
      Expressions containing user variables or variables local to stored
      programs must otherwise (except for notation) conform to the rules
      for XPath expressions containing variables as given in the XPath
      1.0 specification.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
        Currently, a user variable used to store an XPath expression is
        treated as an empty string. Because of this, it is not possible
        to store an XPath expression as a user variable. (Bug #32911)
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_extractvalue"></a>
          <a class="indexterm" name="idp66108192"></a>

          <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue(<em class="replaceable"><code>xml_frag</code></em>,
          <em class="replaceable"><code>xpath_expr</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> takes two string
          arguments, a fragment of XML markup
          <em class="replaceable"><code>xml_frag</code></em> and an XPath expression
          <em class="replaceable"><code>xpath_expr</code></em> (also known as a
          <em class="firstterm">locator</em>); it returns the text
          (<code class="literal">CDATA</code>) of the first text node which is a
          child of the elements or elements matched by the XPath
          expression. In MySQL 5.6.6 and earlier, the XPath expression
          could contain at most 127 characters. This limitation was
          lifted in MySQL 5.6.7. (Bug #13007062, Bug#62429)
        </p><p>
          Using this function is the equivalent of performing a match
          using the <em class="replaceable"><code>xpath_expr</code></em> after
          appending <code class="literal">/text()</code>. In other words,
          <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue('&lt;a&gt;&lt;b&gt;Sakila&lt;/b&gt;&lt;/a&gt;',
          '/a/b')</code></a> and
          <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue('&lt;a&gt;&lt;b&gt;Sakila&lt;/b&gt;&lt;/a&gt;',
          '/a/b/text()')</code></a> produce the same result.
        </p><p>
          If multiple matches are found, the content of the first child
          text node of each matching element is returned (in the order
          matched) as a single, space-delimited string.
        </p><p>
          If no matching text node is found for the expression
          (including the implicit <code class="literal">/text()</code>)—for
          whatever reason, as long as
          <em class="replaceable"><code>xpath_expr</code></em> is valid, and
          <em class="replaceable"><code>xml_frag</code></em> consists of elements which
          are properly nested and closed—an empty string is
          returned. No distinction is made between a match on an empty
          element and no match at all. This is by design.
        </p><p>
          If you need to determine whether no matching element was found
          in <em class="replaceable"><code>xml_frag</code></em> or such an element was
          found but contained no child text nodes, you should test the
          result of an expression that uses the XPath
          <code class="literal">count()</code> function. For example, both of
          these statements return an empty string, as shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b/&gt;&lt;/a&gt;', '/a/b');</code></strong>
+-------------------------------------+
| ExtractValue('&lt;a&gt;&lt;b/&gt;&lt;/a&gt;', '/a/b') |
+-------------------------------------+
|                                     |
+-------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;c/&gt;&lt;/a&gt;', '/a/b');</code></strong>
+-------------------------------------+
| ExtractValue('&lt;a&gt;&lt;c/&gt;&lt;/a&gt;', '/a/b') |
+-------------------------------------+
|                                     |
+-------------------------------------+
1 row in set (0.00 sec)
</pre><p>
          However, you can determine whether there was actually a
          matching element using the following:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b/&gt;&lt;/a&gt;', 'count(/a/b)');</code></strong>
+-------------------------------------+
| ExtractValue('&lt;a&gt;&lt;b/&gt;&lt;/a&gt;', 'count(/a/b)') |
+-------------------------------------+
| 1                                   |
+-------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;c/&gt;&lt;/a&gt;', 'count(/a/b)');</code></strong>
+-------------------------------------+
| ExtractValue('&lt;a&gt;&lt;c/&gt;&lt;/a&gt;', 'count(/a/b)') |
+-------------------------------------+
| 0                                   |
+-------------------------------------+
1 row in set (0.01 sec)
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p xmlns="">
            <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> returns only
            <code class="literal">CDATA</code>, and does not return any tags that
            might be contained within a matching tag, nor any of their
            content (see the result returned as <code class="literal">val1</code>
            in the following example).
</p>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '/a') AS val1,</code></strong>
    -&gt; <strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '/a/b') AS val2,</code></strong>
    -&gt; <strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '//b') AS val3,</code></strong>
    -&gt; <strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;/a&gt;', '/b') AS val4,</code></strong>
    -&gt; <strong class="userinput"><code>  ExtractValue('&lt;a&gt;ccc&lt;b&gt;ddd&lt;/b&gt;&lt;b&gt;eee&lt;/b&gt;&lt;/a&gt;', '//b') AS val5;</code></strong>

+------+------+------+------+---------+
| val1 | val2 | val3 | val4 | val5    |
+------+------+------+------+---------+
| ccc  | ddd  | ddd  |      | ddd eee |
+------+------+------+------+---------+
</pre><p>
          This function uses the current SQL collation for making
          comparisons with <code class="literal">contains()</code>, performing the
          same collation aggregation as other string functions (such as
          <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>), in taking into
          account the collation coercibility of their arguments; see
          <a class="xref" href="globalization.html#charset-collation-expressions" title="10.1.7.5. Collation of Expressions">Section 10.1.7.5, “Collation of Expressions”</a>, for an
          explanation of the rules governing this behavior.
        </p><p>
          (Previously, binary—that is,
          case-sensitive—comparison was always used.)
        </p><p>
          <code class="literal">NULL</code> is returned if
          <em class="replaceable"><code>xml_frag</code></em> contains elements which
          are not properly nested or closed, and a warning is generated,
          as shown in this example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b', '//a');</code></strong>
+-----------------------------------+
| ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b', '//a') |
+-----------------------------------+
| NULL                              |
+-----------------------------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+-------------------------------------------------------------------------------------------+
| Level   | Code | Message                                                                                   |
+---------+------+-------------------------------------------------------------------------------------------+
| Warning | 1523 | Incorrect XML value: 'parse error at line 1 pos 11: END-OF-INPUT unexpected ('&gt;' wanted)' |
+---------+------+-------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '//a');</code></strong>
+-------------------------------------+
| ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '//a') |
+-------------------------------------+
| c                                   |
+-------------------------------------+
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p><a name="function_updatexml"></a>
          <a class="indexterm" name="idp66153792"></a>

          <a class="link" href="functions.html#function_updatexml"><code class="literal">UpdateXML(<em class="replaceable"><code>xml_target</code></em>,
          <em class="replaceable"><code>xpath_expr</code></em>,
          <em class="replaceable"><code>new_xml</code></em>)</code></a>
        </p><p>
          This function replaces a single portion of a given fragment of
          XML markup <em class="replaceable"><code>xml_target</code></em> with a new
          XML fragment <em class="replaceable"><code>new_xml</code></em>, and then
          returns the changed XML. The portion of
          <em class="replaceable"><code>xml_target</code></em> that is replaced matches
          an XPath expression <em class="replaceable"><code>xpath_expr</code></em>
          supplied by the user. In MySQL 5.6.6 and earlier, the XPath
          expression could contain at most 127 characters. This
          limitation is lifted in MySQL 5.6.7. (Bug #13007062, Bug
          #62429)
        </p><p>
          If no expression matching
          <em class="replaceable"><code>xpath_expr</code></em> is found, or if multiple
          matches are found, the function returns the original
          <em class="replaceable"><code>xml_target</code></em> XML fragment. All three
          arguments should be strings.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/a', '&lt;e&gt;fff&lt;/e&gt;') AS val1,</code></strong>
    -&gt; <strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/b', '&lt;e&gt;fff&lt;/e&gt;') AS val2,</code></strong>
    -&gt; <strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '//b', '&lt;e&gt;fff&lt;/e&gt;') AS val3,</code></strong>
    -&gt; <strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/a/d', '&lt;e&gt;fff&lt;/e&gt;') AS val4,</code></strong>
    -&gt; <strong class="userinput"><code>  UpdateXML('&lt;a&gt;&lt;d&gt;&lt;/d&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;', '/a/d', '&lt;e&gt;fff&lt;/e&gt;') AS val5</code></strong>
    -&gt; <strong class="userinput"><code>\G</code></strong>

*************************** 1. row ***************************
val1: &lt;e&gt;fff&lt;/e&gt;
val2: &lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;
val3: &lt;a&gt;&lt;e&gt;fff&lt;/e&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;
val4: &lt;a&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;e&gt;fff&lt;/e&gt;&lt;/a&gt;
val5: &lt;a&gt;&lt;d&gt;&lt;/d&gt;&lt;b&gt;ccc&lt;/b&gt;&lt;d&gt;&lt;/d&gt;&lt;/a&gt;
</pre></li></ul>
</div>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p xmlns="">
        A discussion in depth of XPath syntax and usage are beyond the
        scope of this Manual. Please see the
        <a class="ulink" href="http://www.w3.org/TR/xpath" target="_top">XML Path Language
        (XPath) 1.0 specification</a> for definitive information. A
        useful resource for those new to XPath or who are wishing a
        refresher in the basics is the
        <a class="ulink" href="http://www.zvon.org/xxl/XPathTutorial/" target="_top">Zvon.org
        XPath Tutorial</a>, which is available in several languages.
</p>
</div>
<p>
      Descriptions and examples of some basic XPath expressions follow:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">/<em class="replaceable"><code>tag</code></em></code>
        </p><p>
          Matches
          <code class="literal">&lt;<em class="replaceable"><code>tag</code></em>/&gt;</code> if
          and only if
          <code class="literal">&lt;<em class="replaceable"><code>tag</code></em>/&gt;</code> is
          the root element.
        </p><p>
          Example: <code class="literal">/a</code> has a match in
          <code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code> because it
          matches the outermost (root) tag. It does not match the inner
          <em class="replaceable"><code>a</code></em> element in
          <code class="literal">&lt;b&gt;&lt;a/&gt;&lt;/b&gt;</code> because in
          this instance it is the child of another element.
        </p></li><li class="listitem"><p>
          <code class="literal">/<em class="replaceable"><code>tag1</code></em>/<em class="replaceable"><code>tag2</code></em></code>
        </p><p>
          Matches
          <code class="literal">&lt;<em class="replaceable"><code>tag2</code></em>/&gt;</code> if
          and only if it is a child of
          <code class="literal">&lt;<em class="replaceable"><code>tag1</code></em>/&gt;</code>,
          and
          <code class="literal">&lt;<em class="replaceable"><code>tag1</code></em>/&gt;</code> is
          the root element.
        </p><p>
          Example: <code class="literal">/a/b</code> matches the
          <em class="replaceable"><code>b</code></em> element in the XML fragment
          <code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code> because it is
          a child of the root element <em class="replaceable"><code>a</code></em>. It
          does not have a match in
          <code class="literal">&lt;b&gt;&lt;a/&gt;&lt;/b&gt;</code> because in
          this case, <em class="replaceable"><code>b</code></em> is the root element
          (and hence the child of no other element). Nor does the XPath
          expression have a match in
          <code class="literal">&lt;a&gt;&lt;c&gt;&lt;b/&gt;&lt;/c&gt;&lt;/a&gt;</code>;
          here, <em class="replaceable"><code>b</code></em> is a descendant of
          <em class="replaceable"><code>a</code></em>, but not actually a child of
          <em class="replaceable"><code>a</code></em>.
        </p><p>
          This construct is extendable to three or more elements. For
          example, the XPath expression <code class="literal">/a/b/c</code>
          matches the <em class="replaceable"><code>c</code></em> element in the
          fragment
          <code class="literal">&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;</code>.
        </p></li><li class="listitem"><p>
          <code class="literal">//<em class="replaceable"><code>tag</code></em></code>
        </p><p>
          Matches any instance of
          <code class="literal">&lt;<em class="replaceable"><code>tag</code></em>&gt;</code>.
        </p><p>
          Example: <code class="literal">//a</code> matches the
          <em class="replaceable"><code>a</code></em> element in any of the following:
          <code class="literal">&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;</code>;
          <code class="literal">&lt;c&gt;&lt;a&gt;&lt;b/&gt;&lt;/a&gt;&lt;/b&gt;</code>;
          <code class="literal">&lt;c&gt;&lt;b&gt;&lt;a/&gt;&lt;/b&gt;&lt;/c&gt;</code>.
        </p><p>
          <code class="literal">//</code> can be combined with
          <code class="literal">/</code>. For example, <code class="literal">//a/b</code>
          matches the <em class="replaceable"><code>b</code></em> element in either of
          the fragments <code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code>
          or
          <code class="literal">&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;</code>
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            <code class="literal">//<em class="replaceable"><code>tag</code></em></code> is the
            equivalent of
            <code class="literal">/descendant-or-self::*/<em class="replaceable"><code>tag</code></em></code>.
            A common error is to confuse this with
            <code class="literal">/descendant-or-self::<em class="replaceable"><code>tag</code></em></code>,
            although the latter expression can actually lead to very
            different results, as can be seen here:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @xml = '&lt;a&gt;&lt;b&gt;&lt;c&gt;w&lt;/c&gt;&lt;b&gt;x&lt;/b&gt;&lt;d&gt;y&lt;/d&gt;z&lt;/b&gt;&lt;/a&gt;';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @xml;</code></strong>
+-----------------------------------------+
| @xml                                    |
+-----------------------------------------+
| &lt;a&gt;&lt;b&gt;&lt;c&gt;w&lt;/c&gt;&lt;b&gt;x&lt;/b&gt;&lt;d&gt;y&lt;/d&gt;z&lt;/b&gt;&lt;/a&gt; |
+-----------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '//b[1]');</code></strong>
+------------------------------+
| ExtractValue(@xml, '//b[1]') |
+------------------------------+
| x z                          |
+------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '//b[2]');</code></strong>
+------------------------------+
| ExtractValue(@xml, '//b[2]') |
+------------------------------+
|                              |
+------------------------------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::*/b[1]');</code></strong>
+---------------------------------------------------+
| ExtractValue(@xml, '/descendant-or-self::*/b[1]') |
+---------------------------------------------------+
| x z                                               |
+---------------------------------------------------+
1 row in set (0.06 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::*/b[2]');</code></strong>
+---------------------------------------------------+
| ExtractValue(@xml, '/descendant-or-self::*/b[2]') |
+---------------------------------------------------+
|                                                   |
+---------------------------------------------------+
1 row in set (0.00 sec)


mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::b[1]');</code></strong>
+-------------------------------------------------+
| ExtractValue(@xml, '/descendant-or-self::b[1]') |
+-------------------------------------------------+
| z                                               |
+-------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '/descendant-or-self::b[2]');</code></strong>
+-------------------------------------------------+
| ExtractValue(@xml, '/descendant-or-self::b[2]') |
+-------------------------------------------------+
| x                                               |
+-------------------------------------------------+
1 row in set (0.00 sec)
</pre>
</div>
</li><li class="listitem"><p>
          The <code class="literal">*</code> operator acts as a
          <span class="quote">“<span class="quote">wildcard</span>”</span> that matches any element. For example,
          the expression <code class="literal">/*/b</code> matches the
          <em class="replaceable"><code>b</code></em> element in either of the XML
          fragments <code class="literal">&lt;a&gt;&lt;b/&gt;&lt;/a&gt;</code> or
          <code class="literal">&lt;c&gt;&lt;b/&gt;&lt;/c&gt;</code>. However, the
          expression does not produce a match in the fragment
          <code class="literal">&lt;b&gt;&lt;a/&gt;&lt;/b&gt;</code> because
          <em class="replaceable"><code>b</code></em> must be a child of some other
          element. The wildcard may be used in any position: The
          expression <code class="literal">/*/b/*</code> will match any child of a
          <em class="replaceable"><code>b</code></em> element that is itself not the
          root element.
        </p></li><li class="listitem"><p>
          You can match any of several locators using the
          <code class="literal">|</code> (<a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>)
          operator. For example, the expression
          <code class="literal">//b|//c</code> matches all
          <em class="replaceable"><code>b</code></em> and <em class="replaceable"><code>c</code></em>
          elements in the XML target.
        </p></li><li class="listitem"><p>
          It is also possible to match an element based on the value of
          one or more of its attributes. This done using the syntax
          <code class="literal"><em class="replaceable"><code>tag</code></em>[@<em class="replaceable"><code>attribute</code></em>="<em class="replaceable"><code>value</code></em>"]</code>.
          For example, the expression <code class="literal">//b[@id="idB"]</code>
          matches the second <em class="replaceable"><code>b</code></em> element in the
          fragment <code class="literal">&lt;a&gt;&lt;b id="idA"/&gt;&lt;c/&gt;&lt;b
          id="idB"/&gt;&lt;/a&gt;</code>. To match against
          <span class="emphasis"><em>any</em></span> element having
          <code class="literal"><em class="replaceable"><code>attribute</code></em>="<em class="replaceable"><code>value</code></em>"</code>,
          use the XPath expression
          <code class="literal">//*[<em class="replaceable"><code>attribute</code></em>="<em class="replaceable"><code>value</code></em>"]</code>.
        </p><p>
          To filter multiple attribute values, simply use multiple
          attribute-comparison clauses in succession. For example, the
          expression <code class="literal">//b[@c="x"][@d="y"]</code> matches the
          element <code class="literal">&lt;b c="x" d="y"/&gt;</code> occurring
          anywhere in a given XML fragment.
        </p><p>
          To find elements for which the same attribute matches any of
          several values, you can use multiple locators joined by the
          <code class="literal">|</code> operator. For example, to match all
          <em class="replaceable"><code>b</code></em> elements whose
          <em class="replaceable"><code>c</code></em> attributes have either of the
          values 23 or 17, use the expression
          <code class="literal">//b[@c="23"]|//b[@c="17"]</code>. You can also use
          the logical <code class="literal">or</code> operator for this purpose:
          <code class="literal">//b[@c="23" or @c="17"]</code>.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            The difference between <code class="literal">or</code> and
            <code class="literal">|</code> is that <code class="literal">or</code> joins
            conditions, while <code class="literal">|</code> joins result sets.
</p>
</div>
</li></ul>
</div>
<p><b>XPath Limitations. </b>
        The XPath syntax supported by these functions is currently
        subject to the following limitations:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Nodeset-to-nodeset comparison (such as
          <code class="literal">'/a/b[@c=@d]'</code>) is not supported.
        </p></li><li class="listitem"><p>
          All of the standard XPath comparison operators are supported.
          (Bug #22823)
        </p></li><li class="listitem"><p>
          Relative locator expressions are resolved in the context of
          the root node. For example, consider the following query and
          result:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(</code></strong>
    -&gt;   <strong class="userinput"><code>'&lt;a&gt;&lt;b c="1"&gt;X&lt;/b&gt;&lt;b c="2"&gt;Y&lt;/b&gt;&lt;/a&gt;',</code></strong>
    -&gt;    <strong class="userinput"><code>'a/b'</code></strong>
    -&gt; <strong class="userinput"><code>) AS result;</code></strong>
+--------+
| result |
+--------+
| X Y    |
+--------+
1 row in set (0.03 sec)
</pre><p>
          In this case, the locator <code class="literal">a/b</code> resolves to
          <code class="literal">/a/b</code>.
        </p><p>
          Relative locators are also supported within predicates. In the
          following example, <code class="literal">d[../@c="1"]</code> is resolved
          as <code class="literal">/a/b[@c="1"]/d</code>:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(</code></strong>
    -&gt;      <strong class="userinput"><code>'&lt;a&gt;</code></strong>
    -&gt;        <strong class="userinput"><code>&lt;b c="1"&gt;&lt;d&gt;X&lt;/d&gt;&lt;/b&gt;</code></strong>
    -&gt;        <strong class="userinput"><code>&lt;b c="2"&gt;&lt;d&gt;X&lt;/d&gt;&lt;/b&gt;</code></strong>
    -&gt;      <strong class="userinput"><code>&lt;/a&gt;',</code></strong>
    -&gt;      <strong class="userinput"><code>'a/b/d[../@c="1"]')</code></strong>
    -&gt; <strong class="userinput"><code>AS result;</code></strong>
+--------+
| result |
+--------+
| X      |
+--------+
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p>
          Locators prefixed with expressions that evaluate as scalar
          values—including variable references, literals, numbers,
          and scalar function calls—are not permitted, and their
          use results in an error.
        </p></li><li class="listitem"><p>
          The <code class="literal">::</code> operator is not supported in
          combination with node types such as the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::comment()</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::text()</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::processing-instructions()</code>
            </p></li><li class="listitem"><p>
              <code class="literal"><em class="replaceable"><code>axis</code></em>::node()</code>
</p></li></ul>
</div>
<p>
          However, name tests (such as
          <code class="literal"><em class="replaceable"><code>axis</code></em>::<em class="replaceable"><code>name</code></em></code>
          and <code class="literal"><em class="replaceable"><code>axis</code></em>::*</code>) are
          supported, as shown in these examples:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;c&gt;y&lt;/c&gt;&lt;/a&gt;','/a/child::b');</code></strong>
+-------------------------------------------------------+
| ExtractValue('&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;c&gt;y&lt;/c&gt;&lt;/a&gt;','/a/child::b') |
+-------------------------------------------------------+
| x                                                     |
+-------------------------------------------------------+
1 row in set (0.02 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;c&gt;y&lt;/c&gt;&lt;/a&gt;','/a/child::*');</code></strong>
+-------------------------------------------------------+
| ExtractValue('&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;c&gt;y&lt;/c&gt;&lt;/a&gt;','/a/child::*') |
+-------------------------------------------------------+
| x y                                                   |
+-------------------------------------------------------+
1 row in set (0.01 sec)
</pre></li><li class="listitem"><p>
          <span class="quote">“<span class="quote">Up-and-down</span>”</span> navigation is not supported in
          cases where the path would lead <span class="quote">“<span class="quote">above</span>”</span> the root
          element. That is, you cannot use expressions which match on
          descendants of ancestors of a given element, where one or more
          of the ancestors of the current element is also an ancestor of
          the root element (see Bug #16321).
        </p></li><li class="listitem"><p>
          The following XPath functions are not supported, or have known
          issues as indicated:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">id()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">lang()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">local-name()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">name()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">namespace-uri()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">normalize-space()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">starts-with()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">string()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">substring-after()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">substring-before()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">translate()</code>
</p></li></ul>
</div>
</li><li class="listitem"><p>
          The following axes are not supported:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">following-sibling</code>
            </p></li><li class="listitem"><p>
              <code class="literal">following</code>
            </p></li><li class="listitem"><p>
              <code class="literal">preceding-sibling</code>
            </p></li><li class="listitem"><p>
              <code class="literal">preceding</code>
</p></li></ul>
</div>
</li></ul>
</div>
<p>
      XPath expressions passed as arguments to
      <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
      <a class="link" href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> may contain the colon
      character (<span class="quote">“<span class="quote"><code class="literal">:</code></span>”</span>) in element
      selectors, which enables their use with markup employing XML
      namespaces notation. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @xml = '&lt;a&gt;111&lt;b:c&gt;222&lt;d&gt;333&lt;/d&gt;&lt;e:f&gt;444&lt;/e:f&gt;&lt;/b:c&gt;&lt;/a&gt;';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(@xml, '//e:f');</code></strong>
+-----------------------------+
| ExtractValue(@xml, '//e:f') |
+-----------------------------+
| 444                         |
+-----------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT UpdateXML(@xml, '//b:c', '&lt;g:h&gt;555&lt;/g:h&gt;');</code></strong>
+--------------------------------------------+
| UpdateXML(@xml, '//b:c', '&lt;g:h&gt;555&lt;/g:h&gt;') |
+--------------------------------------------+
| &lt;a&gt;111&lt;g:h&gt;555&lt;/g:h&gt;&lt;/a&gt;                   |
+--------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
      This is similar in some respects to what is permitted by
      <a class="ulink" href="http://xalan.apache.org/" target="_top">Apache Xalan</a> and
      some other parsers, and is much simpler than requiring namespace
      declarations or the use of the <code class="literal">namespace-uri()</code>
      and <code class="literal">local-name()</code> functions.
    </p><p><b>Error handling. </b>
        For both <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> and
        <a class="link" href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a>, the XPath locator
        used must be valid and the XML to be searched must consist of
        elements which are properly nested and closed. If the locator is
        invalid, an error is generated:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '/&amp;a');</code></strong>
<span class="errortext">ERROR 1105 (HY000): XPATH syntax error: '&amp;a'</span>
</pre><p>
      If <em class="replaceable"><code>xml_frag</code></em> does not consist of
      elements which are properly nested and closed,
      <code class="literal">NULL</code> is returned and a warning is generated, as
      shown in this example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b', '//a');</code></strong>
+-----------------------------------+
| ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b', '//a') |
+-----------------------------------+
| NULL                              |
+-----------------------------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+-------------------------------------------------------------------------------------------+
| Level   | Code | Message                                                                                   |
+---------+------+-------------------------------------------------------------------------------------------+
| Warning | 1523 | Incorrect XML value: 'parse error at line 1 pos 11: END-OF-INPUT unexpected ('&gt;' wanted)' |
+---------+------+-------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '//a');</code></strong>
+-------------------------------------+
| ExtractValue('&lt;a&gt;c&lt;/a&gt;&lt;b/&gt;', '//a') |
+-------------------------------------+
| c                                   |
+-------------------------------------+
1 row in set (0.00 sec)
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p xmlns="">
        The replacement XML used as the third argument to
        <a class="link" href="functions.html#function_updatexml"><code class="literal">UpdateXML()</code></a> is
        <span class="emphasis"><em>not</em></span> checked to determine whether it
        consists solely of elements which are properly nested and
        closed.
</p>
</div>
<p><b>XPath Injection. </b>
        <em class="firstterm">code injection</em> occurs when malicious code
        is introduced into the system to gain unauthorized access to
        privileges and data. It is based on exploiting assumptions made
        by developers about the type and content of data input from
        users. XPath is no exception in this regard.
      </p><p>
      A common scenario in which this can happen is the case of
      application which handles authorization by matching the
      combination of a login name and password with those found in an
      XML file, using an XPath expression like this one:
    </p><pre class="programlisting">//user[login/text()='neapolitan' and password/text()='1c3cr34m']/attribute::id</pre><p>
      This is the XPath equivalent of an SQL statement like this one:
    </p><pre class="programlisting">SELECT id FROM users WHERE login='neapolitan' AND password='1c3cr34m';</pre><p>
      A PHP application employing XPath might handle the login process
      like this:
    </p><pre class="programlisting">&lt;?php

  $file     =   "users.xml";

  $login    =   $POST["login"];
  $password =   $POST["password"];

  $xpath = "//user[login/text()=$login and password/text()=$password]/attribute::id";

  if( file_exists($file) )
  {
    $xml = simplexml_load_file($file);

    if($result = $xml-&gt;xpath($xpath))
      echo "You are now logged in as user $result[0].";
    else
      echo "Invalid login name or password.";
  }
  else
    exit("Failed to open $file.");

?&gt;</pre><p>
      No checks are performed on the input. This means that a malevolent
      user can <span class="quote">“<span class="quote">short-circuit</span>”</span> the test by entering
      <code class="literal">' or 1=1</code> for both the login name and password,
      resulting in <code class="varname">$xpath</code> being evaluated as shown
      here:
    </p><pre class="programlisting">//user[login/text()='' or 1=1 and password/text()='' or 1=1]/attribute::id</pre><p>
      Since the expression inside the square brackets always evaluates
      as <code class="literal">true</code>, it is effectively the same as this
      one, which matches the <code class="literal">id</code> attribute of every
      <code class="literal">user</code> element in the XML document:
    </p><pre class="programlisting">//user/attribute::id</pre><p>
      One way in which this particular attack can be circumvented is
      simply by quoting the variable names to be interpolated in the
      definition of <code class="literal">$xpath</code>, forcing the values passed
      from a Web form to be converted to strings:
    </p><pre class="programlisting">$xpath = "//user[login/text()='$login' and password/text()='$password']/attribute::id";</pre><p>
      This is the same strategy that is often recommended for preventing
      SQL injection attacks. In general, the practices you should follow
      for preventing XPath injection attacks are the same as for
      preventing SQL injection:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Never accepted untested data from users in your application.
        </p></li><li class="listitem"><p>
          Check all user-submitted data for type; reject or convert data
          that is of the wrong type
        </p></li><li class="listitem"><p>
          Test numeric data for out of range values; truncate, round, or
          reject values that are out of range. Test strings for illegal
          characters and either strip them out or reject input
          containing them.
        </p></li><li class="listitem"><p>
          Do not output explicit error messages that might provide an
          unauthorized user with clues that could be used to compromise
          the system; log these to a file or database table instead.
</p></li></ul>
</div>
<p>
      Just as SQL injection attacks can be used to obtain information
      about database schemas, so can XPath injection be used to traverse
      XML files to uncover their structure, as discussed in Amit
      Klein's paper
      <a class="ulink" href="http://www.packetstormsecurity.org/papers/bypass/Blind_XPath_Injection_20040518.pdf" target="_top">Blind
      XPath Injection</a> (PDF file, 46KB).
    </p><p>
      It is also important to check the output being sent back to the
      client. Consider what can happen when we use the MySQL
      <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> function:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ExtractValue(</code></strong>
    -&gt;     <strong class="userinput"><code>LOAD_FILE('users.xml'),</code></strong>
    -&gt;     <strong class="userinput"><code>'//user[login/text()="" or 1=1 and password/text()="" or 1=1]/attribute::id'</code></strong>
    -&gt; <strong class="userinput"><code>) AS id;</code></strong>
+-------------------------------+
| id                            |
+-------------------------------+
| 00327 13579 02403 42354 28570 |
+-------------------------------+
1 row in set (0.01 sec)
</pre><p>
      Because <a class="link" href="functions.html#function_extractvalue"><code class="literal">ExtractValue()</code></a> returns
      multiple matches as a single space-delimited string, this
      injection attack provides every valid ID contained within
      <code class="filename">users.xml</code> to the user as a single row of
      output. As an extra safeguard, you should also test output before
      returning it to the user. Here is a simple example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @id = ExtractValue(</code></strong>
    -&gt;     <strong class="userinput"><code>LOAD_FILE('users.xml'),</code></strong>
    -&gt;     <strong class="userinput"><code>'//user[login/text()="" or 1=1 and password/text()="" or 1=1]/attribute::id'</code></strong>
    -&gt; <strong class="userinput"><code>);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT IF(</code></strong>
    -&gt;     <strong class="userinput"><code>INSTR(@id, ' ') = 0,</code></strong>
    -&gt;     <strong class="userinput"><code>@id,</code></strong>
    -&gt;     <strong class="userinput"><code>'Unable to retrieve user ID')</code></strong>
    -&gt; <strong class="userinput"><code>AS singleID;</code></strong>
+----------------------------+
| singleID                   |
+----------------------------+
| Unable to retrieve user ID |
+----------------------------+
1 row in set (0.00 sec)
</pre><p>
      In general, the guidelines for returning data to users securely
      are the same as for accepting user input. These can be summed up
      as:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Always test outgoing data for type and permissible values.
        </p></li><li class="listitem"><p>
          Never permit unauthorized users to view error messages that
          might provide information about the application that could be
          used to exploit it.
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="bit-functions"></a>12.12. Bit Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp66374896"></a><a class="indexterm" name="idp66375968"></a><a class="indexterm" name="idp66377456"></a><a class="indexterm" name="idp66378960"></a>
<div class="table">
<a name="idp66380032"></a><p class="title"><b>Table 12.16. Bitwise Functions</b></p>
<div class="table-contents">
<table summary="Bitwise Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_bit-count"><code class="literal">BIT_COUNT()</code></a></td><td>Return the number of bits that are set</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a></td><td>Bitwise AND</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-invert"><code class="literal">~</code></a></td><td>Invert bits</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-or"><code class="literal">|</code></a></td><td>Bitwise OR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_bitwise-xor"><code class="literal">^</code></a></td><td>Bitwise XOR</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a></td><td>Left shift</td></tr><tr><td scope="row"><a class="link" href="functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a></td><td>Right shift</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      MySQL uses <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> (64-bit)
      arithmetic for bit operations, so these operators have a maximum
      range of 64 bits.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="operator_bitwise-or"></a>
          <a class="indexterm" name="idp66400304"></a>

          <a class="indexterm" name="idp66401376"></a>

          <a class="link" href="functions.html#operator_bitwise-or"><code class="literal">|</code></a>
        </p><p>
          Bitwise OR:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 29 | 15;</code></strong>
        -&gt; 31
</pre><p>
          The result is an unsigned 64-bit integer.
        </p></li><li class="listitem"><p><a name="operator_bitwise-and"></a>
          <a class="indexterm" name="idp66410400"></a>

          <a class="indexterm" name="idp66411488"></a>

          <a class="link" href="functions.html#operator_bitwise-and"><code class="literal">&amp;</code></a>
        </p><p>
          Bitwise AND:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 29 &amp; 15;</code></strong>
        -&gt; 13
</pre><p>
          The result is an unsigned 64-bit integer.
        </p></li><li class="listitem"><p><a name="operator_bitwise-xor"></a>
          <a class="indexterm" name="idp66420512"></a>

          <a class="indexterm" name="idp66421584"></a>

          <a class="link" href="functions.html#operator_bitwise-xor"><code class="literal">^</code></a>
        </p><p>
          Bitwise XOR:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 ^ 1;</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT 1 ^ 0;</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT 11 ^ 3;</code></strong>
        -&gt; 8
</pre><p>
          The result is an unsigned 64-bit integer.
        </p></li><li class="listitem"><p><a name="operator_left-shift"></a>
          <a class="indexterm" name="idp66432048"></a>

          <a class="link" href="functions.html#operator_left-shift"><code class="literal">&lt;&lt;</code></a>
        </p><p>
          Shifts a longlong (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>)
          number to the left.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 &lt;&lt; 2;</code></strong>
        -&gt; 4
</pre><p>
          The result is an unsigned 64-bit integer. The value is
          truncated to 64 bits. In particular, if the shift count is
          greater or equal to the width of an unsigned 64-bit number,
          the result is zero.
        </p></li><li class="listitem"><p><a name="operator_right-shift"></a>
          <a class="indexterm" name="idp66441792"></a>

          <a class="link" href="functions.html#operator_right-shift"><code class="literal">&gt;&gt;</code></a>
        </p><p>
          Shifts a longlong (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>)
          number to the right.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 4 &gt;&gt; 2;</code></strong>
        -&gt; 1
</pre><p>
          The result is an unsigned 64-bit integer. The value is
          truncated to 64 bits. In particular, if the shift count is
          greater or equal to the width of an unsigned 64-bit number,
          the result is zero.
        </p></li><li class="listitem"><p><a name="operator_bitwise-invert"></a>
          <a class="indexterm" name="idp66451504"></a>

          <a class="link" href="functions.html#operator_bitwise-invert"><code class="literal">~</code></a>
        </p><p>
          Invert all bits.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 5 &amp; ~1;</code></strong>
        -&gt; 4
</pre><p>
          The result is an unsigned 64-bit integer.
        </p></li><li class="listitem"><p><a name="function_bit-count"></a>
          <a class="indexterm" name="idp66460144"></a>

          <a class="link" href="functions.html#function_bit-count"><code class="literal">BIT_COUNT(<em class="replaceable"><code>N</code></em>)</code></a>
        </p><p>
          Returns the number of bits that are set in the argument
          <em class="replaceable"><code>N</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT BIT_COUNT(29), BIT_COUNT(b'101010');</code></strong>
        -&gt; 4, 3
</pre></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="encryption-functions"></a>12.13. Encryption and Compression Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp66468336"></a><a class="indexterm" name="idp66469408"></a>
<div class="table">
<a name="idp66470896"></a><p class="title"><b>Table 12.17. Encryption Functions</b></p>
<div class="table-contents">
<table summary="Encryption Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a></td><td>Decrypt using AES</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a></td><td>Encrypt using AES</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a></td><td>Return result as a binary string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_decode"><code class="literal">DECODE()</code></a></td><td>Decodes a string encrypted using ENCODE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a></td><td>Decrypt a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a></td><td>Encrypt a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_encode"><code class="literal">ENCODE()</code></a></td><td>Encode a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a></td><td>Encrypt a string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a></td><td>Calculate MD5 checksum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a></td><td>Return the value of the  pre-4.1 implementation of PASSWORD</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a></td><td>Calculate and return a password string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code>, <code class="literal">SHA()</code></a></td><td>Calculate an SHA-1 160-bit checksum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a></td><td>Calculate an SHA-2 checksum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a></td><td>Uncompress a string compressed</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uncompressed-length"><code class="literal">UNCOMPRESSED_LENGTH()</code></a></td><td>Return the length of a string before compression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a></td><td>Determine strength of password</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
      Many encryption and compression functions return strings for which
      the result might contain arbitrary byte values. If you want to
      store these results, use a column with a
      <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a> or
      <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> binary string data type. This
      will avoid potential problems with trailing space removal or
      character set conversion that would change data values, such as
      may occur if you use a nonbinary string data type
      (<a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a>,
      <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a>,
      <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">TEXT</code></a>).
    </p><p>
      Some encryption functions return strings of ASCII characters:
      <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a>,
      <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a>,
      <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>,
      <a class="link" href="functions.html#function_sha1"><code class="literal">SHA()</code></a>,
      <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a>,
      <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a>. In MySQL 5.6,
      their return value is a nonbinary string that has a character set
      and collation determined by the
      <a class="link" href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> and
      <a class="link" href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a> system
      variables.
    </p><p>
      For versions in which functions such as <code class="literal">MD5()</code>
      or <code class="literal">SHA1()</code> return a string of hex digits as a
      binary string, the return value cannot be converted to uppercase
      or compared in case-insensitive fashion as is. You must convert
      the value to a nonbinary string. See the discussion of binary
      string conversion in <a class="xref" href="functions.html#cast-functions" title="12.10. Cast Functions and Operators">Section 12.10, “Cast Functions and Operators”</a>.
    </p><p>
      If an application stores values from a function such as
      <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a> or
      <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a> that returns a string of hex
      digits, more efficient storage and comparisons can be obtained by
      converting the hex representation to binary using
      <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a> and storing the result in a
      <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY(<em class="replaceable"><code>N</code></em>)</code></a>
      column. Each pair of hex digits requires one byte in binary form,
      so the value of <em class="replaceable"><code>N</code></em> depends on the length
      of the hex string. <em class="replaceable"><code>N</code></em> is 16 for an
      <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a> value and 20 for a
      <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a> value. For
      <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a>,
      <em class="replaceable"><code>N</code></em> ranges from 28 to 32 depending on the
      argument specifying the desired bit length of the result.
    </p><p>
      The size penalty for storing the hex string in a
      <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> column is at least two times,
      up to eight times if the value is stored in a column that uses the
      <code class="literal">utf8</code> character set (where each character uses 4
      bytes). Storing the string also results in slower comparisons
      because of the larger values and the need to take character set
      collation rules into account.
    </p><p>
      Suppose that an application stores
      <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a> string values in a
      <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR(32)</code></a> column:
    </p><pre class="programlisting">CREATE TABLE md5_tbl (md5_val CHAR(32), ...);
INSERT INTO md5_tbl (md5_val, ...) VALUES(MD5('abcdef'), ...);</pre><p>
      To convert hex strings to more compact form, modify the
      application to use <a class="link" href="functions.html#function_unhex"><code class="literal">UNHEX()</code></a> and
      <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">BINARY(16)</code></a> instead as follows:
    </p><pre class="programlisting">CREATE TABLE md5_tbl (md5_val BINARY(16), ...);
INSERT INTO md5_tbl (md5_val, ...) VALUES(UNHEX(MD5('abcdef')), ...);</pre><p>
      Applications should be prepared to handle the very rare case that
      a hashing function produces the same value for two different input
      values. One way to make collisions detectable is to make the hash
      column a primary key.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
        Exploits for the MD5 and SHA-1 algorithms have become known. You
        may wish to consider using one of the other encryption functions
        described in this section instead, such as
        <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a>.
</p>
</div>
<div xmlns="http://www.w3.org/1999/xhtml" class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Caution
</div>
<p xmlns="">
        Passwords or other sensitive values supplied as arguments to
        encryption functions are sent in plaintext to the MySQL server
        unless an SSL connection is used. Also, such values will appear
        in any MySQL logs to which they are written. To avoid these
        types of exposure, applications can encrypt sensitive values on
        the client side before sending them to the server. The same
        considerations apply to encryption keys. To avoid exposing
        these, applications can use stored procedures to encrypt and
        decrypt values on the server side.
</p>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_aes-decrypt"></a>
          <a class="indexterm" name="idp66543184"></a>

          <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT(<em class="replaceable"><code>crypt_str</code></em>,<em class="replaceable"><code>key_str</code></em>)</code></a>
        </p><p>
          This function decrypts data using the official AES (Advanced
          Encryption Standard) algorithm. For more information, see the
          description of <a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a>.
        </p></li><li class="listitem"><p><a name="function_aes-encrypt"></a>
          <a class="indexterm" name="idp66551984"></a>

          <a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>key_str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a> and
          <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a> implement
          encryption and decryption of data using the official AES
          (Advanced Encryption Standard) algorithm, previously known as
          <span class="quote">“<span class="quote">Rijndael.</span>”</span> The AES standard allows various key
          sizes. These functions implement AES with a 128-bit key
          length, but you can extend them to 256 bits by modifying the
          source. The key length is a trade off between performance and
          security.
        </p><p>
          <a class="link" href="functions.html#function_aes-encrypt"><code class="literal">AES_ENCRYPT()</code></a> encrypts the
          string <em class="replaceable"><code>str</code></em> using a key
          <em class="replaceable"><code>key_str</code></em> and returns a binary string
          containing the encrypted output.
          <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a> decrypts the
          encrypted string <em class="replaceable"><code>crypt_str</code></em> using a
          key <em class="replaceable"><code>key_str</code></em> and returns the
          original plaintext string. If either argument is
          <code class="literal">NULL</code>, the results of these functions are
          also <code class="literal">NULL</code>.
        </p><p>
          The <em class="replaceable"><code>str</code></em> and
          <em class="replaceable"><code>crypt_str</code></em> arguments can be any
          length, and padding is automatically added to
          <em class="replaceable"><code>str</code></em> so it is a multiple of a block
          as required by block-based algorithms such as AES. This
          padding is automatically removed by the
          <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a> function. The
          length of <em class="replaceable"><code>crypt_str</code></em> can be
          calculated using this formula:
        </p><pre class="programlisting">16 * (trunc(<em class="replaceable"><code>string_length</code></em> / 16) + 1)
</pre><p>
          The most secure way to pass a key to the
          <em class="replaceable"><code>key_str</code></em> argument is to create a
          truly random 128-bit value and pass it as a binary value. For
          example:
        </p><pre class="programlisting">INSERT INTO t
VALUES (1,AES_ENCRYPT('text',UNHEX('F3229A0B371ED2D9441B830D21A390C3')));</pre><p>
          A passphrase can be used to generate an AES key by hashing the
          passphrase. For example:
        </p><pre class="programlisting">INSERT INTO t VALUES (1,AES_ENCRYPT('text', SHA2('My secret passphrase',512)));</pre><p>
          Do not pass a password or passphrase directly to
          <em class="replaceable"><code>crypt_str</code></em>, hash it first. Previous
          versions of this documentation suggested the former approach,
          but it is no longer recommended as the examples shown here are
          more secure.
        </p><p>
          If <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a> detects
          invalid data or incorrect padding, it returns
          <code class="literal">NULL</code>. However, it is possible for
          <a class="link" href="functions.html#function_aes-decrypt"><code class="literal">AES_DECRYPT()</code></a> to return a
          non-<code class="literal">NULL</code> value (possibly garbage) if the
          input data or the key is invalid.
        </p></li><li class="listitem"><p><a name="function_compress"></a>
          <a class="indexterm" name="idp66579328"></a>

          <a class="link" href="functions.html#function_compress"><code class="literal">COMPRESS(<em class="replaceable"><code>string_to_compress</code></em>)</code></a>
        </p><p>
          Compresses a string and returns the result as a binary string.
          This function requires MySQL to have been compiled with a
          compression library such as <code class="literal">zlib</code>.
          Otherwise, the return value is always <code class="literal">NULL</code>.
          The compressed string can be uncompressed with
          <a class="link" href="functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LENGTH(COMPRESS(REPEAT('a',1000)));</code></strong>
        -&gt; 21
mysql&gt; <strong class="userinput"><code>SELECT LENGTH(COMPRESS(''));</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT LENGTH(COMPRESS('a'));</code></strong>
        -&gt; 13
mysql&gt; <strong class="userinput"><code>SELECT LENGTH(COMPRESS(REPEAT('a',16)));</code></strong>
        -&gt; 15
</pre><p>
          The compressed string contents are stored the following way:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              Empty strings are stored as empty strings.
            </p></li><li class="listitem"><p>
              Nonempty strings are stored as a 4-byte length of the
              uncompressed string (low byte first), followed by the
              compressed string. If the string ends with space, an extra
              <span class="quote">“<span class="quote"><code class="literal">.</code></span>”</span> character is added to
              avoid problems with endspace trimming should the result be
              stored in a <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> or
              <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> column. (However,
              use of nonbinary string data types such as
              <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">CHAR</code></a> or
              <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> to store compressed
              strings is not recommended anyway because character set
              conversion may occur. Use a
              <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a> or
              <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> binary string column
              instead.)
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="function_decode"></a>
          <a class="indexterm" name="idp66601712"></a>

          <a class="link" href="functions.html#function_decode"><code class="literal">DECODE(<em class="replaceable"><code>crypt_str</code></em>,<em class="replaceable"><code>pass_str</code></em>)</code></a>
        </p><p>
          Decrypts the encrypted string
          <em class="replaceable"><code>crypt_str</code></em> using
          <em class="replaceable"><code>pass_str</code></em> as the password.
          <em class="replaceable"><code>crypt_str</code></em> should be a string
          returned from <a class="link" href="functions.html#function_encode"><code class="literal">ENCODE()</code></a>.
        </p></li><li class="listitem"><p><a name="function_des-decrypt"></a>
          <a class="indexterm" name="idp66611072"></a>

          <a class="link" href="functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT(<em class="replaceable"><code>crypt_str</code></em>[,<em class="replaceable"><code>key_str</code></em>])</code></a>
        </p><p>
          Decrypts a string encrypted with
          <a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a>. If an error
          occurs, this function returns <code class="literal">NULL</code>.
        </p><p>
          This function works only if MySQL has been configured with SSL
          support. See <a class="xref" href="security.html#ssl-connections" title="6.3.9. Using SSL for Secure Connections">Section 6.3.9, “Using SSL for Secure Connections”</a>.
        </p><p>
          If no <em class="replaceable"><code>key_str</code></em> argument is given,
          <a class="link" href="functions.html#function_des-decrypt"><code class="literal">DES_DECRYPT()</code></a> examines the
          first byte of the encrypted string to determine the DES key
          number that was used to encrypt the original string, and then
          reads the key from the DES key file to decrypt the message.
          For this to work, the user must have the
          <a class="link" href="security.html#priv_super"><code class="literal">SUPER</code></a> privilege. The key file
          can be specified with the
          <a class="link" href="server-administration.html#option_mysqld_des-key-file"><code class="option">--des-key-file</code></a> server option.
        </p><p>
          If you pass this function a <em class="replaceable"><code>key_str</code></em>
          argument, that string is used as the key for decrypting the
          message.
        </p><p>
          If the <em class="replaceable"><code>crypt_str</code></em> argument does not
          appear to be an encrypted string, MySQL returns the given
          <em class="replaceable"><code>crypt_str</code></em>.
        </p></li><li class="listitem"><p><a name="function_des-encrypt"></a>
          <a class="indexterm" name="idp66626976"></a>

          <a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT(<em class="replaceable"><code>str</code></em>[,{<em class="replaceable"><code>key_num</code></em>|<em class="replaceable"><code>key_str</code></em>}])</code></a>
        </p><p>
          Encrypts the string with the given key using the Triple-DES
          algorithm.
        </p><p>
          This function works only if MySQL has been configured with SSL
          support. See <a class="xref" href="security.html#ssl-connections" title="6.3.9. Using SSL for Secure Connections">Section 6.3.9, “Using SSL for Secure Connections”</a>.
        </p><p>
          The encryption key to use is chosen based on the second
          argument to <a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a>, if
          one was given. With no argument, the first key from the DES
          key file is used. With a <em class="replaceable"><code>key_num</code></em>
          argument, the given key number (0 to 9) from the DES key file
          is used. With a <em class="replaceable"><code>key_str</code></em> argument,
          the given key string is used to encrypt
          <em class="replaceable"><code>str</code></em>.
        </p><p>
          The key file can be specified with the
          <a class="link" href="server-administration.html#option_mysqld_des-key-file"><code class="option">--des-key-file</code></a> server option.
        </p><p>
          The return string is a binary string where the first character
          is <a class="link" href="functions.html#function_char"><code class="literal">CHAR(128 |
          <em class="replaceable"><code>key_num</code></em>)</code></a>. If an error
          occurs, <a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a> returns
          <code class="literal">NULL</code>.
        </p><p>
          The 128 is added to make it easier to recognize an encrypted
          key. If you use a string key,
          <em class="replaceable"><code>key_num</code></em> is 127.
        </p><p>
          The string length for the result is given by this formula:
        </p><pre class="programlisting"><em class="replaceable"><code>new_len</code></em> = <em class="replaceable"><code>orig_len</code></em> + (8 - (<em class="replaceable"><code>orig_len</code></em> % 8)) + 1
</pre><p>
          Each line in the DES key file has the following format:
        </p><pre class="programlisting"><em class="replaceable"><code>key_num</code></em> <em class="replaceable"><code>des_key_str</code></em>
</pre><p>
          Each <em class="replaceable"><code>key_num</code></em> value must be a number
          in the range from <code class="literal">0</code> to
          <code class="literal">9</code>. Lines in the file may be in any order.
          <em class="replaceable"><code>des_key_str</code></em> is the string that is
          used to encrypt the message. There should be at least one
          space between the number and the key. The first key is the
          default key that is used if you do not specify any key
          argument to <a class="link" href="functions.html#function_des-encrypt"><code class="literal">DES_ENCRYPT()</code></a>.
        </p><p>
          You can tell MySQL to read new key values from the key file
          with the <a class="link" href="sql-syntax.html#flush" title="13.7.6.3. FLUSH Syntax"><code class="literal">FLUSH
          DES_KEY_FILE</code></a> statement. This requires the
          <a class="link" href="security.html#priv_reload"><code class="literal">RELOAD</code></a> privilege.
        </p><p>
          One benefit of having a set of default keys is that it gives
          applications a way to check for the existence of encrypted
          column values, without giving the end user the right to
          decrypt those values.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT customer_address FROM customer_table </code></strong>
     &gt; <strong class="userinput"><code>WHERE crypted_credit_card = DES_ENCRYPT('credit_card_number');</code></strong>
</pre></li><li class="listitem"><p><a name="function_encode"></a>
          <a class="indexterm" name="idp66657680"></a>

          <a class="link" href="functions.html#function_encode"><code class="literal">ENCODE(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>pass_str</code></em>)</code></a>
        </p><p>
          Encrypt <em class="replaceable"><code>str</code></em> using
          <em class="replaceable"><code>pass_str</code></em> as the password. The
          result is a binary string of the same length as
          <em class="replaceable"><code>str</code></em>. To decrypt the result, use
          <a class="link" href="functions.html#function_decode"><code class="literal">DECODE()</code></a>.
        </p><p>
          The <a class="link" href="functions.html#function_encode"><code class="literal">ENCODE()</code></a> function should no
          longer be used. If you still need to use
          <a class="link" href="functions.html#function_encode"><code class="literal">ENCODE()</code></a>, a salt value must be
          used with it to reduce risk. For example:
        </p><pre class="programlisting">ENCODE('plaintext', CONCAT('my_random_salt','my_secret_password'))</pre><p>
          A new random salt value must be used whenever a password is
          updated.
        </p></li><li class="listitem"><p><a name="function_encrypt"></a>
          <a class="indexterm" name="idp66670432"></a>

          <a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT(<em class="replaceable"><code>str</code></em>[,<em class="replaceable"><code>salt</code></em>])</code></a>
        </p><p>
          Encrypts <em class="replaceable"><code>str</code></em> using the Unix
          <code class="function">crypt()</code> system call and returns a binary
          string. The <em class="replaceable"><code>salt</code></em> argument must be a
          string with at least two characters or the result will be
          <code class="literal">NULL</code>. If no <em class="replaceable"><code>salt</code></em>
          argument is given, a random value is used.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ENCRYPT('hello');</code></strong>
        -&gt; 'VxuFAJXVARROc'
</pre><p>
          <a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a> ignores all but the
          first eight characters of <em class="replaceable"><code>str</code></em>, at
          least on some systems. This behavior is determined by the
          implementation of the underlying <code class="function">crypt()</code>
          system call.
        </p><p>
          The use of <a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a> with the
          <code class="literal">ucs2</code>, <code class="literal">utf16</code>,
          <code class="literal">utf16le</code>, or <code class="literal">utf32</code>
          multi-byte character sets is not recommended because the
          system call expects a string terminated by a zero byte.
        </p><p>
          If <code class="function">crypt()</code> is not available on your
          system (as is the case with Windows),
          <a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a> always returns
          <code class="literal">NULL</code>.
        </p></li><li class="listitem"><p><a name="function_md5"></a>
          <a class="indexterm" name="idp66692016"></a>

          <a class="link" href="functions.html#function_md5"><code class="literal">MD5(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Calculates an MD5 128-bit checksum for the string. The value
          is returned as a string of 32 hex digits, or
          <code class="literal">NULL</code> if the argument was
          <code class="literal">NULL</code>. The return value can, for example, be
          used as a hash key. See the notes at the beginning of this
          section about storing hash values efficiently.
        </p><p>
          The return value is a nonbinary string in the connection
          character set.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MD5('testing');</code></strong>
        -&gt; 'ae2b1fca515949e5d54fb22b8ed95575'
</pre><p>
          This is the <span class="quote">“<span class="quote">RSA Data Security, Inc. MD5 Message-Digest
          Algorithm.</span>”</span>
        </p><p>
          See the note regarding the MD5 algorithm at the beginning this
          section.
        </p></li><li class="listitem"><p><a name="function_old-password"></a>
          <a class="indexterm" name="idp66704304"></a>

          <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> was added when
          the implementation of
          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> was changed in MySQL
          4.1 to improve security.
          <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> returns the
          value of the pre-4.1 implementation of
          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> as a string, and is
          intended to permit you to reset passwords for any pre-4.1
          clients that need to connect to your version 5.6
          MySQL server without locking them out. See
          <a class="xref" href="security.html#password-hashing" title="6.1.2.4. Password Hashing in MySQL">Section 6.1.2.4, “Password Hashing in MySQL”</a>.
        </p><p>
          The return value is a nonbinary string in the connection
          character set.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            Passwords that use the pre-4.1 hashing method are less
            secure than passwords that use the native password hashing
            method and should be avoided. Pre-4.1 passwords are
            deprecated and support for them will be removed in a future
            MySQL release.
</p>
</div>
</li><li class="listitem"><p><a name="function_password"></a>
          <a class="indexterm" name="idp66716816"></a>

          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Calculates and returns a hashed password string from the
          cleartext password <em class="replaceable"><code>str</code></em> and returns
          a nonbinary string in the connection character set, or
          <code class="literal">NULL</code> if the argument is
          <code class="literal">NULL</code>. This function is the SQL interface to
          the algorithm used by the server to encrypt MySQL passwords
          for storage in the <code class="literal">mysql.user</code> grant table.
        </p><p>
          The <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a> system
          variable controls the password hashing method used by
          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> (as well as for the
          <code class="literal">IDENTIFIED BY</code> clause of the
          <a class="link" href="sql-syntax.html#create-user" title="13.7.1.2. CREATE USER Syntax"><code class="literal">CREATE USER</code></a> and
          <a class="link" href="sql-syntax.html#grant" title="13.7.1.4. GRANT Syntax"><code class="literal">GRANT</code></a> statements).
        </p><p>
          The following table shows the permitted values of
          <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a>, the password
          hashing method for each value, and which authentication
          plugins use passwords hashed with each method. These values
          are permitted as of MySQL 5.6.6. Before 5.6.6, the value can
          be 0 (or <code class="literal">OFF</code>), or 1 (or
          <code class="literal">ON</code>).
</p>
<div class="informaltable">
<table summary="The following table shows the permitted values of
            old_passwords, the password
            hashing method for each value, and which authentication
            plugins use passwords hashed with each method." border="1"><colgroup><col><col><col></colgroup><thead><tr><th scope="col">Value</th><th scope="col">Password Hashing Format</th><th scope="col">Intended Use</th></tr></thead><tbody><tr><td scope="row">0</td><td>MySQL 4.1 native hashing</td><td>Accounts that authenticate with the
                  <code class="literal">mysql_native_password</code> plugin</td></tr><tr><td scope="row">1</td><td>Pre-4.1 (<span class="quote">“<span class="quote">old</span>”</span>) hashing</td><td>Accounts that authenticate with the
                  <code class="literal">mysql_old_password</code> plugin</td></tr><tr><td scope="row">2</td><td>SHA-256 hashing</td><td>Accounts that authenticate with the <code class="literal">sha256_password</code>
plugin</td></tr></tbody></table>
</div>
<p>
          If <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=1</code></a>,
          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD('<em class="replaceable"><code>str</code></em>')</code></a>
          returns the same value as
          <a class="link" href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD('<em class="replaceable"><code>str</code></em>')</code></a>.
          The latter function is not affected by the value of
          <a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords</code></a>.
        </p><p>
          Examples:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET old_passwords = 0;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT PASSWORD('mypass');</code></strong>
+-------------------------------------------+
| PASSWORD('mypass')                        |
+-------------------------------------------+
| *6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4 |
+-------------------------------------------+

mysql&gt; <strong class="userinput"><code>SET old_passwords = 1;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT PASSWORD('mypass');</code></strong>
+--------------------+
| PASSWORD('mypass') |
+--------------------+
| 6f8c114b58f2ce9e   |
+--------------------+
</pre><p>
          SHA-256 password hashing
          (<a class="link" href="server-administration.html#sysvar_old_passwords"><code class="literal">old_passwords=2</code></a>) uses a
          random salt value, which makes the result from
          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> nondeterministic.
          Consequently, statements that use this function are not safe
          for statement-based replication and cannot be stored in the
          query cache.
        </p><p>
          <a class="indexterm" name="idp66759088"></a>

          Encryption performed by
          <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> is one-way (not
          reversible). It is not the same type of encryption as used for
          Unix passwords; for that, use
          <a class="link" href="functions.html#function_encrypt"><code class="literal">ENCRYPT()</code></a>.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            The <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function is
            used by the authentication system in MySQL Server; you
            should <span class="emphasis"><em>not</em></span> use it in your own
            applications. For that purpose, consider
            <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a> or
            <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a> instead. Also see
            <a class="ulink" href="http://www.faqs.org/rfcs/rfc2195.html" target="_top">RFC 2195,
            section 2 (Challenge-Response Authentication Mechanism
            (CRAM))</a>, for more information about handling
            passwords and authentication securely in your applications.
</p>
</div>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p xmlns="">
            Passwords that use the pre-4.1 hashing method are less
            secure than passwords that use the native password hashing
            method and should be avoided. Pre-4.1 passwords are
            deprecated and support for them will be removed in a future
            MySQL release.
</p>
</div>
<div xmlns="http://www.w3.org/1999/xhtml" class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Caution
</div>
<p xmlns="">
            Statements that invoke
            <a class="link" href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> may be recorded in
            server logs or in a history file such as
            <code class="filename">~/.mysql_history</code>, which means that
            cleartext passwords may be read by anyone having read access
            to that information. See
            <a class="xref" href="security.html#password-security" title="6.1.2. Keeping Passwords Secure">Section 6.1.2, “Keeping Passwords Secure”</a>.
</p>
</div>
</li><li class="listitem"><p><a name="function_sha1"></a>
          <a class="indexterm" name="idp66774640"></a>

          <a class="indexterm" name="idp66775712"></a>

          <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1(<em class="replaceable"><code>str</code></em>)</code></a>,
          <a class="link" href="functions.html#function_sha1"><code class="literal">SHA(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Calculates an SHA-1 160-bit checksum for the string, as
          described in RFC 3174 (Secure Hash Algorithm). The value is
          returned as a string of 40 hex digits, or
          <code class="literal">NULL</code> if the argument was
          <code class="literal">NULL</code>. One of the possible uses for this
          function is as a hash key. See the notes at the beginning of
          this section about storing hash values efficiently. You can
          also use <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a> as a
          cryptographic function for storing passwords.
          <a class="link" href="functions.html#function_sha1"><code class="literal">SHA()</code></a> is
          synonymous with <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a>.
        </p><p>
          The return value is a nonbinary string in the connection
          character set.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SHA1('abc');</code></strong>
        -&gt; 'a9993e364706816aba3e25717850c26c9cd0d89d'
</pre><p>
          <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a> can be considered a
          cryptographically more secure equivalent of
          <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a>. However, see the note
          regarding the MD5 and SHA-1 algorithms at the beginning this
          section.
        </p></li><li class="listitem"><p><a name="function_sha2"></a>
          <a class="indexterm" name="idp66793520"></a>

          <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2(<em class="replaceable"><code>str</code></em>,
          <em class="replaceable"><code>hash_length</code></em>)</code></a>
        </p><p>
          Calculates the SHA-2 family of hash functions (SHA-224,
          SHA-256, SHA-384, and SHA-512). The first argument is the
          cleartext string to be hashed. The second argument indicates
          the desired bit length of the result, which must have a value
          of 224, 256, 384, 512, or 0 (which is equivalent to 256). If
          either argument is <code class="literal">NULL</code> or the hash length
          is not one of the permitted values, the return value is
          <code class="literal">NULL</code>. Otherwise, the function result is a
          hash value containing the desired number of bits. See the
          notes at the beginning of this section about storing hash
          values efficiently.
        </p><p>
          The return value is a nonbinary string in the connection
          character set.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SHA2('abc', 224);</code></strong>
        -&gt; '23097d223405d8228642a477bda255b32aadbce4bda0b3f7e36c9da7'
</pre><p>
          This function works only if MySQL has been configured with SSL
          support. See <a class="xref" href="security.html#ssl-connections" title="6.3.9. Using SSL for Secure Connections">Section 6.3.9, “Using SSL for Secure Connections”</a>.
        </p><p>
          <a class="link" href="functions.html#function_sha2"><code class="literal">SHA2()</code></a> can be considered
          cryptographically more secure than
          <a class="link" href="functions.html#function_md5"><code class="literal">MD5()</code></a> or
          <a class="link" href="functions.html#function_sha1"><code class="literal">SHA1()</code></a>.
        </p></li><li class="listitem"><p><a name="function_uncompress"></a>
          <a class="indexterm" name="idp66809328"></a>

          <a class="link" href="functions.html#function_uncompress"><code class="literal">UNCOMPRESS(<em class="replaceable"><code>string_to_uncompress</code></em>)</code></a>
        </p><p>
          Uncompresses a string compressed by the
          <a class="link" href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a> function. If the
          argument is not a compressed value, the result is
          <code class="literal">NULL</code>. This function requires MySQL to have
          been compiled with a compression library such as
          <code class="literal">zlib</code>. Otherwise, the return value is always
          <code class="literal">NULL</code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UNCOMPRESS(COMPRESS('any string'));</code></strong>
        -&gt; 'any string'
mysql&gt; <strong class="userinput"><code>SELECT UNCOMPRESS('any string');</code></strong>
        -&gt; NULL
</pre></li><li class="listitem"><p><a name="function_uncompressed-length"></a>
          <a class="indexterm" name="idp66822048"></a>

          <a class="link" href="functions.html#function_uncompressed-length"><code class="literal">UNCOMPRESSED_LENGTH(<em class="replaceable"><code>compressed_string</code></em>)</code></a>
        </p><p>
          Returns the length that the compressed string had before being
          compressed.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UNCOMPRESSED_LENGTH(COMPRESS(REPEAT('a',30)));</code></strong>
        -&gt; 30
</pre></li><li class="listitem"><p><a name="function_validate-password-strength"></a>
          <a class="indexterm" name="idp66830832"></a>

          <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Given an argument representing a cleartext password, this
          function returns an integer to indicate how strong the
          password is. The return value ranges from 0 (weak) to 100
          (strong).
        </p><p>
          The password is subjected to increasingly strict tests and the
          return value reflects which tests were satisfied, as shown in
          the following table.
</p>
<div class="informaltable">
<table summary="This table lists password tests of the
            VALIDATE_PASSWORD_STRENGTH()
            function and provides the values that are returned by each
            password test." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Password Test</th><th scope="col">Return Value</th></tr></thead><tbody><tr><td scope="row">Length &lt; 4</td><td>0</td></tr><tr><td scope="row">Length ≥ 4 and &lt;
<a class="link" href="security.html#sysvar_validate_password_length"><code class="literal">validate_password_length</code></a></td><td>25</td></tr><tr><td scope="row">Satisfies policy 1 (<code class="literal">LOW</code>)</td><td>50</td></tr><tr><td scope="row">Satisfies policy 2 (<code class="literal">MEDIUM</code>)</td><td>75</td></tr><tr><td scope="row">Satisfies policy 3 (<code class="literal">STRONG</code>)</td><td>100</td></tr></tbody></table>
</div>
<p>
          Password assessment by
          <a class="link" href="functions.html#function_validate-password-strength"><code class="literal">VALIDATE_PASSWORD_STRENGTH()</code></a> is
          done by the <code class="literal">validate_password</code> plugin. If
          that plugin is not installed, the function always returns 0.
          For information about installing the
          <code class="literal">validate_password</code> plugin, see
          <a class="xref" href="security.html#validate-password-plugin" title="6.1.2.6. The Password Validation Plugin">Section 6.1.2.6, “The Password Validation Plugin”</a>. To examine or
          configure the parameters that affect password testing, check
          or set the system variables implemented by
          <code class="literal">validate_password</code> plugin. See
          <a class="xref" href="security.html#validate-password-options-variables" title="6.1.2.6.2. Password Validation Plugin Options and Variables">Section 6.1.2.6.2, “Password Validation Plugin Options and Variables”</a>.
        </p><p>
          This function was added in MySQL 5.6.6.
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="information-functions"></a>12.14. Information Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp66857360"></a><a class="indexterm" name="idp66858432"></a>
<div class="table">
<a name="idp66859920"></a><p class="title"><b>Table 12.18. Information Functions</b></p>
<div class="table-contents">
<table summary="Information Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a></td><td>Repeatedly execute an expression</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_charset"><code class="literal">CHARSET()</code></a></td><td>Return the character set of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_coercibility"><code class="literal">COERCIBILITY()</code></a></td><td>Return the collation coercibility value of the string  argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_collation"><code class="literal">COLLATION()</code></a></td><td>Return the collation of the string argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a></td><td>Return the connection ID (thread ID)  for the connection</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code>, <code class="literal">CURRENT_USER</code></a></td><td>The authenticated user name and host name</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a></td><td>Return the default (current) database name</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a></td><td>For a SELECT with a LIMIT clause, the  number of rows that would be returned were there no LIMIT clause</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a></td><td>Value of the AUTOINCREMENT column  for the last INSERT</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a></td><td>The number of rows  updated</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_schema"><code class="literal">SCHEMA()</code></a></td><td>A synonym for DATABASE()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a></td><td>Synonym for USER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a></td><td>Synonym for USER()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a></td><td>The user name and host name provided by the client</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a></td><td>Returns a string that indicates the MySQL server version</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_benchmark"></a>
          <a class="indexterm" name="idp66894192"></a>

          <a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK(<em class="replaceable"><code>count</code></em>,<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          The <a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> function
          executes the expression <em class="replaceable"><code>expr</code></em>
          repeatedly <em class="replaceable"><code>count</code></em> times. It may be
          used to time how quickly MySQL processes the expression. The
          result value is always <code class="literal">0</code>. The intended use
          is from within the <a class="link" href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> client, which
          reports query execution times:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT BENCHMARK(1000000,ENCODE('hello','goodbye'));</code></strong>
+----------------------------------------------+
| BENCHMARK(1000000,ENCODE('hello','goodbye')) |
+----------------------------------------------+
|                                            0 |
+----------------------------------------------+
1 row in set (4.74 sec)
</pre><p>
          The time reported is elapsed time on the client end, not CPU
          time on the server end. It is advisable to execute
          <a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> several times, and
          to interpret the result with regard to how heavily loaded the
          server machine is.
        </p><p>
          <a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> is intended for
          measuring the runtime performance of scalar expressions, which
          has some significant implications for the way that you use it
          and interpret the results:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              Only scalar expressions can be used. Although the
              expression can be a subquery, it must return a single
              column and at most a single row. For example,
              <a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK(10, (SELECT * FROM
              t))</code></a> will fail if the table <code class="literal">t</code>
              has more than one column or more than one row.
            </p></li><li class="listitem"><p>
              Executing a <code class="literal">SELECT
              <em class="replaceable"><code>expr</code></em></code> statement
              <em class="replaceable"><code>N</code></em> times differs from executing
              <code class="literal">SELECT BENCHMARK(<em class="replaceable"><code>N</code></em>,
              <em class="replaceable"><code>expr</code></em>)</code> in terms of the
              amount of overhead involved. The two have very different
              execution profiles and you should not expect them to take
              the same amount of time. The former involves the parser,
              optimizer, table locking, and runtime evaluation
              <em class="replaceable"><code>N</code></em> times each. The latter
              involves only runtime evaluation
              <em class="replaceable"><code>N</code></em> times, and all the other
              components just once. Memory structures already allocated
              are reused, and runtime optimizations such as local
              caching of results already evaluated for aggregate
              functions can alter the results. Use of
              <a class="link" href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> thus measures
              performance of the runtime component by giving more weight
              to that component and removing the <span class="quote">“<span class="quote">noise</span>”</span>
              introduced by the network, parser, optimizer, and so
              forth.
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="function_charset"></a>
          <a class="indexterm" name="idp66919776"></a>

          <a class="link" href="functions.html#function_charset"><code class="literal">CHARSET(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the character set of the string argument.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CHARSET('abc');</code></strong>
        -&gt; 'latin1'
mysql&gt; <strong class="userinput"><code>SELECT CHARSET(CONVERT('abc' USING utf8));</code></strong>
        -&gt; 'utf8'
mysql&gt; <strong class="userinput"><code>SELECT CHARSET(USER());</code></strong>
        -&gt; 'utf8'
</pre></li><li class="listitem"><p><a name="function_coercibility"></a>
          <a class="indexterm" name="idp66930000"></a>

          <a class="link" href="functions.html#function_coercibility"><code class="literal">COERCIBILITY(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the collation coercibility value of the string
          argument.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY('abc' COLLATE latin1_swedish_ci);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY(USER());</code></strong>
        -&gt; 3
mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY('abc');</code></strong>
        -&gt; 4
</pre><p>
          The return values have the meanings shown in the following
          table. Lower values have higher precedence.
</p>
<div class="informaltable">
<table summary="This table lists collation coercibility return
            values, the meaning of each value, and provides an example
            of each." border="1"><colgroup><col><col><col></colgroup><thead><tr><th scope="col">Coercibility</th><th scope="col">Meaning</th><th scope="col">Example</th></tr></thead><tbody><tr><td scope="row"><code class="literal">0</code></td><td>Explicit collation</td><td>Value with <code class="literal">COLLATE</code> clause</td></tr><tr><td scope="row"><code class="literal">1</code></td><td>No collation</td><td>Concatenation of strings with different collations</td></tr><tr><td scope="row"><code class="literal">2</code></td><td>Implicit collation</td><td>Column value, stored routine parameter or local variable</td></tr><tr><td scope="row"><code class="literal">3</code></td><td>System constant</td><td><a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> return value</td></tr><tr><td scope="row"><code class="literal">4</code></td><td>Coercible</td><td>Literal string</td></tr><tr><td scope="row"><code class="literal">5</code></td><td>Ignorable</td><td><code class="literal">NULL</code> or an expression derived from
<code class="literal">NULL</code></td></tr></tbody></table>
</div>
</li><li class="listitem"><p><a name="function_collation"></a>
          <a class="indexterm" name="idp66961152"></a>

          <a class="link" href="functions.html#function_collation"><code class="literal">COLLATION(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Returns the collation of the string argument.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COLLATION('abc');</code></strong>
        -&gt; 'latin1_swedish_ci'
mysql&gt; <strong class="userinput"><code>SELECT COLLATION(_utf8'abc');</code></strong>
        -&gt; 'utf8_general_ci'
</pre></li><li class="listitem"><p><a name="function_connection-id"></a>
          <a class="indexterm" name="idp66970672"></a>

          <a class="link" href="functions.html#function_connection-id"><code class="literal">CONNECTION_ID()</code></a>
        </p><p>
          Returns the connection ID (thread ID) for the connection.
          Every connection has an ID that is unique among the set of
          currently connected clients.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CONNECTION_ID();</code></strong>
        -&gt; 23786
</pre></li><li class="listitem"><p><a name="function_current-user"></a>
          <a class="indexterm" name="idp66979040"></a>

          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>,
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>
        </p><p>
          Returns the user name and host name combination for the MySQL
          account that the server used to authenticate the current
          client. This account determines your access privileges. The
          return value is a string in the <code class="literal">utf8</code>
          character set.
        </p><p>
          The value of <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> can
          differ from the value of
          <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER();</code></strong>
        -&gt; 'davida@localhost'
mysql&gt; <strong class="userinput"><code>SELECT * FROM mysql.user;</code></strong>
ERROR 1044: Access denied for user ''@'localhost' to
database 'mysql'
mysql&gt; <strong class="userinput"><code>SELECT CURRENT_USER();</code></strong>
        -&gt; '@localhost'
</pre><p>
          The example illustrates that although the client specified a
          user name of <code class="literal">davida</code> (as indicated by the
          value of the <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> function),
          the server authenticated the client using an anonymous user
          account (as seen by the empty user name part of the
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> value). One way
          this might occur is that there is no account listed in the
          grant tables for <code class="literal">davida</code>.
        </p><p>
          Within a stored program or view,
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> returns the
          account for the user who defined the object (as given by its
          <code class="literal">DEFINER</code> value) unless defined with the
          <code class="literal">SQL SECURITY INVOKER</code> characteristic. In the
          latter case, <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>
          returns the object's invoker.
        </p><p>
          Triggers and events have no option to define the <code class="literal">SQL
          SECURITY</code> characteristic, so for these objects,
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> returns the
          account for the user who defined the object. To return the
          invoker, use <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a> or
          <a class="link" href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a>.
        </p><p>
          The following statements support use of the
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function to take
          the place of the name of (and, possibly, a host for) an
          affected user or a definer; in such cases,
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> is expanded
          where and as needed:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#drop-user" title="13.7.1.3. DROP USER Syntax"><code class="literal">DROP USER</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#rename-user" title="13.7.1.5. RENAME USER Syntax"><code class="literal">RENAME USER</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#grant" title="13.7.1.4. GRANT Syntax"><code class="literal">GRANT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#revoke" title="13.7.1.6. REVOKE Syntax"><code class="literal">REVOKE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#create-function" title="13.1.12. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#create-procedure" title="13.1.15. CREATE PROCEDURE and CREATE FUNCTION Syntax"><code class="literal">CREATE PROCEDURE</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#create-trigger" title="13.1.19. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#create-event" title="13.1.11. CREATE EVENT Syntax"><code class="literal">CREATE EVENT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#create-view" title="13.1.20. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#alter-event" title="13.1.2. ALTER EVENT Syntax"><code class="literal">ALTER EVENT</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#alter-view" title="13.1.9. ALTER VIEW Syntax"><code class="literal">ALTER VIEW</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#set-password" title="13.7.1.7. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
</p></li></ul>
</div>
<p>
          For information about the implications that this expansion of
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> has for
          replication in different releases of MySQL 5.6,
          see <a class="xref" href="replication.html#replication-features-current-user" title="16.4.1.7. Replication of CURRENT_USER()">Section 16.4.1.7, “Replication of <code class="literal">CURRENT_USER()</code>”</a>.
        </p></li><li class="listitem"><p><a name="function_database"></a>
          <a class="indexterm" name="idp67028160"></a>

          <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a>
        </p><p>
          Returns the default (current) database name as a string in the
          <code class="literal">utf8</code> character set. If there is no default
          database, <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a> returns
          <code class="literal">NULL</code>. Within a stored routine, the default
          database is the database that the routine is associated with,
          which is not necessarily the same as the database that is the
          default in the calling context.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT DATABASE();</code></strong>
        -&gt; 'test'
</pre><p>
          If there is no default database,
          <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a> returns
          <code class="literal">NULL</code>.
        </p></li><li class="listitem"><p><a name="function_found-rows"></a>
          <a class="indexterm" name="idp67040992"></a>

          <a class="indexterm" name="idp67042064"></a>

          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a>
        </p><p>
          A <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement may include
          a <code class="literal">LIMIT</code> clause to restrict the number of
          rows the server returns to the client. In some cases, it is
          desirable to know how many rows the statement would have
          returned without the <code class="literal">LIMIT</code>, but without
          running the statement again. To obtain this row count, include
          a <code class="literal">SQL_CALC_FOUND_ROWS</code> option in the
          <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement, and then
          invoke <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> afterward:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SQL_CALC_FOUND_ROWS * FROM <em class="replaceable"><code>tbl_name</code></em></code></strong>
    -&gt; <strong class="userinput"><code>WHERE id &gt; 100 LIMIT 10;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT FOUND_ROWS();</code></strong>
</pre><p>
          The second <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> returns a
          number indicating how many rows the first
          <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> would have returned had
          it been written without the <code class="literal">LIMIT</code> clause.
        </p><p>
          In the absence of the <code class="literal">SQL_CALC_FOUND_ROWS</code>
          option in the most recent successful
          <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement,
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> returns the number
          of rows in the result set returned by that statement. If the
          statement includes a <code class="literal">LIMIT</code> clause,
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> returns the number
          of rows up to the limit. For example,
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> returns 10 or 60,
          respectively, if the statement includes <code class="literal">LIMIT
          10</code> or <code class="literal">LIMIT 50, 10</code>.
        </p><p>
          The row count available through
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> is transient and
          not intended to be available past the statement following the
          <code class="literal">SELECT SQL_CALC_FOUND_ROWS</code> statement. If
          you need to refer to the value later, save it:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SQL_CALC_FOUND_ROWS * FROM ... ;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @rows = FOUND_ROWS();</code></strong>
</pre><p>
          If you are using <code class="literal">SELECT
          SQL_CALC_FOUND_ROWS</code>, MySQL must calculate how many
          rows are in the full result set. However, this is faster than
          running the query again without <code class="literal">LIMIT</code>,
          because the result set need not be sent to the client.
        </p><p>
          <code class="literal">SQL_CALC_FOUND_ROWS</code> and
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> can be useful in
          situations when you want to restrict the number of rows that a
          query returns, but also determine the number of rows in the
          full result set without running the query again. An example is
          a Web script that presents a paged display containing links to
          the pages that show other sections of a search result. Using
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> enables you to
          determine how many other pages are needed for the rest of the
          result.
        </p><p>
          The use of <code class="literal">SQL_CALC_FOUND_ROWS</code> and
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> is more complex
          for <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a> statements than for
          simple <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements,
          because <code class="literal">LIMIT</code> may occur at multiple places
          in a <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>. It may be applied
          to individual <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statements
          in the <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>, or global to the
          <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a> result as a whole.
        </p><p>
          The intent of <code class="literal">SQL_CALC_FOUND_ROWS</code> for
          <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a> is that it should return
          the row count that would be returned without a global
          <code class="literal">LIMIT</code>. The conditions for use of
          <code class="literal">SQL_CALC_FOUND_ROWS</code> with
          <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a> are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              The <code class="literal">SQL_CALC_FOUND_ROWS</code> keyword must
              appear in the first <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
              of the <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>.
            </p></li><li class="listitem"><p>
              The value of <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a>
              is exact only if
              <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION ALL</code></a>
              is used. If <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a> without
              <code class="literal">ALL</code> is used, duplicate removal occurs
              and the value of
              <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> is only
              approximate.
            </p></li><li class="listitem"><p>
              If no <code class="literal">LIMIT</code> is present in the
              <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>,
              <code class="literal">SQL_CALC_FOUND_ROWS</code> is ignored and
              returns the number of rows in the temporary table that is
              created to process the
              <a class="link" href="sql-syntax.html#union" title="13.2.9.4. UNION Syntax"><code class="literal">UNION</code></a>.
</p></li></ul>
</div>
<p>
          Beyond the cases described here, the behavior of
          <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> is undefined (for
          example, its value following a
          <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement that fails
          with an error).
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p xmlns="">
            <a class="link" href="functions.html#function_found-rows"><code class="literal">FOUND_ROWS()</code></a> is not
            replicated reliably using statement-based replication. This
            function is automatically replicated using row-based
            replication.
</p>
</div>
</li><li class="listitem"><p><a name="function_last-insert-id"></a>
          <a class="indexterm" name="idp67105728"></a>

          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>,
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> (with no
          argument) returns a <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>
          (64-bit) value representing the first automatically generated
          value successfully inserted for an
          <code class="literal">AUTO_INCREMENT</code> column as a result of the
          most recently executed <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
          statement. The value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> remains
          unchanged if no rows are successfully inserted.
        </p><p>
          For example, after inserting a row that generates an
          <code class="literal">AUTO_INCREMENT</code> value, you can get the value
          like this:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong>
        -&gt; 195
</pre><p>
          The currently executing statement does not affect the value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>. Suppose that
          you generate an <code class="literal">AUTO_INCREMENT</code> value with
          one statement, and then refer to
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> in a
          multiple-row <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement
          that inserts rows into a table with its own
          <code class="literal">AUTO_INCREMENT</code> column. The value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> will remain
          stable in the second statement; its value for the second and
          later rows is not affected by the earlier row insertions.
          (However, if you mix references to
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> and
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>,
          the effect is undefined.)
        </p><p>
          If the previous statement returned an error, the value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is undefined.
          For transactional tables, if the statement is rolled back due
          to an error, the value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is left
          undefined. For manual
          <a class="link" href="sql-syntax.html#commit" title="13.3.1. START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>,
          the value of <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
          is not restored to that before the transaction; it remains as
          it was at the point of the
          <a class="link" href="sql-syntax.html#commit" title="13.3.1. START TRANSACTION, COMMIT, and ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>.
        </p><p>
          Within the body of a stored routine (procedure or function) or
          a trigger, the value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> changes the
          same way as for statements executed outside the body of these
          kinds of objects. The effect of a stored routine or trigger
          upon the value of
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> that is seen
          by following statements depends on the kind of routine:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              If a stored procedure executes statements that change the
              value of <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>,
              the changed value is seen by statements that follow the
              procedure call.
            </p></li><li class="listitem"><p>
              For stored functions and triggers that change the value,
              the value is restored when the function or trigger ends,
              so following statements will not see a changed value.
</p></li></ul>
</div>
<p>
          The ID that was generated is maintained in the server on a
          <span class="emphasis"><em>per-connection basis</em></span>. This means that the
          value returned by the function to a given client is the first
          <code class="literal">AUTO_INCREMENT</code> value generated for most
          recent statement affecting an
          <code class="literal">AUTO_INCREMENT</code> column <span class="emphasis"><em>by that
          client</em></span>. This value cannot be affected by other
          clients, even if they generate
          <code class="literal">AUTO_INCREMENT</code> values of their own. This
          behavior ensures that each client can retrieve its own ID
          without concern for the activity of other clients, and without
          the need for locks or transactions.
        </p><p>
          The value of <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>
          is not changed if you set the
          <code class="literal">AUTO_INCREMENT</code> column of a row to a
          non-<span class="quote">“<span class="quote">magic</span>”</span> value (that is, a value that is not
          <code class="literal">NULL</code> and not <code class="literal">0</code>).
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p xmlns="">
            If you insert multiple rows using a single
            <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement,
            <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> returns the
            value generated for the <span class="emphasis"><em>first</em></span> inserted
            row <span class="emphasis"><em>only</em></span>. The reason for this is to
            make it possible to reproduce easily the same
            <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement against some
            other server.
</p>
</div>
<p>
          For example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>CREATE TABLE t (</code></strong>
    -&gt;   <strong class="userinput"><code>id INT AUTO_INCREMENT NOT NULL PRIMARY KEY,</code></strong>
    -&gt;   <strong class="userinput"><code>name VARCHAR(10) NOT NULL</code></strong>
    -&gt; <strong class="userinput"><code>);</code></strong>
Query OK, 0 rows affected (0.09 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (NULL, 'Bob');</code></strong>
Query OK, 1 row affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t;</code></strong>
+----+------+
| id | name |
+----+------+
|  1 | Bob  |
+----+------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong>
+------------------+
| LAST_INSERT_ID() |
+------------------+
|                1 |
+------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES</code></strong>
    -&gt; <strong class="userinput"><code>(NULL, 'Mary'), (NULL, 'Jane'), (NULL, 'Lisa');</code></strong>
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql&gt; SELECT * FROM t;
+----+------+
| id | name |
+----+------+
|  1 | Bob  |
|  2 | Mary |
|  3 | Jane |
|  4 | Lisa |
+----+------+
4 rows in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong>
+------------------+
| LAST_INSERT_ID() |
+------------------+
|                2 |
+------------------+
1 row in set (0.00 sec)
</pre><p>
          Although the second <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
          statement inserted three new rows into <code class="literal">t</code>,
          the ID generated for the first of these rows was
          <code class="literal">2</code>, and it is this value that is returned by
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> for the
          following <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement.
        </p><p>
          If you use <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT
          IGNORE</code></a> and the row is ignored, the
          <code class="literal">AUTO_INCREMENT</code> counter is not incremented
          and <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> returns
          <code class="literal">0</code>, which reflects that no row was inserted.
        </p><p>
          <a class="indexterm" name="idp67167824"></a>

          If <em class="replaceable"><code>expr</code></em> is given as an argument to
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, the value of
          the argument is returned by the function and is remembered as
          the next value to be returned by
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>. This can be
          used to simulate sequences:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
              Create a table to hold the sequence counter and initialize
              it:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE sequence (id INT NOT NULL);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO sequence VALUES (0);</code></strong>
</pre></li><li class="listitem"><p>
              Use the table to generate sequence numbers like this:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE sequence SET id=LAST_INSERT_ID(id+1);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT LAST_INSERT_ID();</code></strong>
</pre><p>
              The <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement
              increments the sequence counter and causes the next call
              to <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> to
              return the updated value. The
              <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement retrieves
              that value. The
              <a class="link" href="connectors-apis.html#mysql-insert-id" title="22.8.7.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> C API
              function can also be used to get the value. See
              <a class="xref" href="connectors-apis.html#mysql-insert-id" title="22.8.7.37. mysql_insert_id()">Section 22.8.7.37, “<code class="literal">mysql_insert_id()</code>”</a>.
</p></li></ol>
</div>
<p>
          You can generate sequences without calling
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a>, but the
          utility of using the function this way is that the ID value is
          maintained in the server as the last automatically generated
          value. It is multi-user safe because multiple clients can
          issue the <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement and
          get their own sequence value with the
          <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement (or
          <a class="link" href="connectors-apis.html#mysql-insert-id" title="22.8.7.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a>), without
          affecting or being affected by other clients that generate
          their own sequence values.
        </p><p>
          Note that <a class="link" href="connectors-apis.html#mysql-insert-id" title="22.8.7.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> is
          only updated after <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> and
          <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements, so you
          cannot use the C API function to retrieve the value for
          <a class="link" href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>
          after executing other SQL statements like
          <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> or
          <a class="link" href="sql-syntax.html#set-statement" title="13.7.4. SET Syntax"><code class="literal">SET</code></a>.
        </p></li><li class="listitem"><p><a name="function_row-count"></a>
          <a class="indexterm" name="idp67195520"></a>

          <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a>
        </p><p>
          In MySQL 5.6, <code class="literal">ROW_COUNT()</code>
          returns a value as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              DDL statements: 0. This applies to statements such as
              <a class="link" href="sql-syntax.html#create-table" title="13.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
              <a class="link" href="sql-syntax.html#drop-table" title="13.1.28. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>.
            </p></li><li class="listitem"><p>
              DML statements other than
              <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>: The number of
              affected rows. This applies to statements such as
              <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
              <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, or
              <a class="link" href="sql-syntax.html#delete" title="13.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> (as before), but now
              also to statements such as <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
              TABLE</code></a> and
              <a class="link" href="sql-syntax.html#load-data" title="13.2.6. LOAD DATA INFILE Syntax"><code class="literal">LOAD DATA
              INFILE</code></a>.
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>: -1 if the statement
              returns a result set, or the number of rows
              <span class="quote">“<span class="quote">affected</span>”</span> if it does not. For example, for
              <code class="literal">SELECT * FROM t1</code>,
              <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> returns -1. For
              <code class="literal">SELECT * FROM t1 INTO OUTFILE
              '<em class="replaceable"><code>file_name</code></em>'</code>,
              <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> returns the
              number of rows written to the file.
            </p></li><li class="listitem"><p>
              <a class="link" href="sql-syntax.html#signal" title="13.6.7.5. SIGNAL Syntax"><code class="literal">SIGNAL</code></a> statements: 0.
</p></li></ul>
</div>
<p>
          For <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements, the
          affected-rows value by default is the number of rows actually
          changed. If you specify the
          <code class="literal">CLIENT_FOUND_ROWS</code> flag to
          <a class="link" href="connectors-apis.html#mysql-real-connect" title="22.8.7.53. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a> when
          connecting to <a class="link" href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a>, the affected-rows
          value is the number of rows <span class="quote">“<span class="quote">found</span>”</span>; that is,
          matched by the <code class="literal">WHERE</code> clause.
        </p><p>
          For <a class="link" href="sql-syntax.html#replace" title="13.2.8. REPLACE Syntax"><code class="literal">REPLACE</code></a> statements, the
          affected-rows value is 2 if the new row replaced an old row,
          because in this case, one row was inserted after the duplicate
          was deleted.
        </p><p>
          For
          <a class="link" href="sql-syntax.html#insert-on-duplicate" title="13.2.5.3. INSERT ... ON DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT
          ... ON DUPLICATE KEY UPDATE</code></a> statements, the
          affected-rows value per row is 1 if the row is inserted as a
          new row, 2 if an existing row is updated, and 0 if an existing
          row is set to its current values. If you specify the
          <code class="literal">CLIENT_FOUND_ROWS</code> flag, the affected-rows
          value is 1 (not 0) if an existing row is set to its current
          values.
        </p><p>
          The <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> value is
          similar to the value from the
          <a class="link" href="connectors-apis.html#mysql-affected-rows" title="22.8.7.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> C API
          function and the row count that the <a class="link" href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a>
          client displays following statement execution.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES(1),(2),(3);</code></strong>
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT ROW_COUNT();</code></strong>
+-------------+
| ROW_COUNT() |
+-------------+
|           3 |
+-------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>DELETE FROM t WHERE i IN(1,2);</code></strong>
Query OK, 2 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT ROW_COUNT();</code></strong>
+-------------+
| ROW_COUNT() |
+-------------+
|           2 |
+-------------+
1 row in set (0.00 sec)
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p xmlns="">
            <a class="link" href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> is not replicated
            reliably using statement-based replication. This function is
            automatically replicated using row-based replication.
</p>
</div>
</li><li class="listitem"><p><a name="function_schema"></a>
          <a class="indexterm" name="idp67238288"></a>

          <a class="link" href="functions.html#function_schema"><code class="literal">SCHEMA()</code></a>
        </p><p>
          This function is a synonym for
          <a class="link" href="functions.html#function_database"><code class="literal">DATABASE()</code></a>.
        </p></li><li class="listitem"><p><a name="function_session-user"></a>
          <a class="indexterm" name="idp67245424"></a>

          <a class="link" href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a>
        </p><p>
          <a class="link" href="functions.html#function_session-user"><code class="literal">SESSION_USER()</code></a> is a synonym for
          <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>.
        </p></li><li class="listitem"><p><a name="function_system-user"></a>
          <a class="indexterm" name="idp67253360"></a>

          <a class="link" href="functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a>
        </p><p>
          <a class="link" href="functions.html#function_system-user"><code class="literal">SYSTEM_USER()</code></a> is a synonym for
          <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>.
        </p></li><li class="listitem"><p><a name="function_user"></a>
          <a class="indexterm" name="idp67261296"></a>

          <a class="link" href="functions.html#function_user"><code class="literal">USER()</code></a>
        </p><p>
          Returns the current MySQL user name and host name as a string
          in the <code class="literal">utf8</code> character set.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT USER();</code></strong>
        -&gt; 'davida@localhost'
</pre><p>
          The value indicates the user name you specified when
          connecting to the server, and the client host from which you
          connected. The value can be different from that of
          <a class="link" href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>.
        </p><p>
          You can extract only the user name part like this:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUBSTRING_INDEX(USER(),'@',1);</code></strong>
        -&gt; 'davida'
</pre></li><li class="listitem"><p><a name="function_version"></a>
          <a class="indexterm" name="idp67273712"></a>

          <a class="link" href="functions.html#function_version"><code class="literal">VERSION()</code></a>
        </p><p>
          Returns a string that indicates the MySQL server version. The
          string uses the <code class="literal">utf8</code> character set. The
          value might have a suffix in addition to the version number.
          See the description of the
          <a class="link" href="server-administration.html#sysvar_version"><code class="literal">version</code></a> system variable in
          <a class="xref" href="server-administration.html#server-system-variables" title="5.1.4. Server System Variables">Section 5.1.4, “Server System Variables”</a>.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION();</code></strong>
        -&gt; '5.6.14-standard'
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="gtid-functions"></a>12.15. GTID Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp67285536"></a><a class="indexterm" name="idp67286608"></a><p>
      The functions described in this section are used with GTID-based
      replication (available in MySQL 5.6.5 and later). For more
      information about GTIDs and how these functions are used, see
      <a class="xref" href="replication.html#replication-gtids" title="16.1.3. Replication with Global Transaction Identifiers">Section 16.1.3, “Replication with Global Transaction Identifiers”</a>.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
        The union of two GTID sets is simply their string
        representations joined together with an interposed comma. In
        other words, you can define a very simple function for obtaining
        the union of two GTID sets like this:
      </p><pre class="programlisting">CREATE FUNCTION GTID_UNION(g1 TEXT, g2 TEXT) 
    RETURNS TEXT DETERMINISTIC
RETURN CONCAT(g1,',',g2);  </pre>
</div>

<div class="table">
<a name="idp67291088"></a><p class="title"><b>Table 12.19. GTID Functions</b></p>
<div class="table-contents">
<table summary="GTID Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_gtid-subset"><code class="literal">GTID_SUBSET()</code></a></td><td>Return true if all GTIDs in subset are also in set; otherwise  false.</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_gtid-subtract"><code class="literal">GTID_SUBTRACT()</code></a></td><td>Return all GTIDs in set that are not in subset.</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sql-thread-wait-after-gtids"><code class="literal">SQL_THREAD_WAIT_AFTER_GTIDS()</code></a>(deprecated 5.6.9)</td><td>OBSOLETE: Replaced by WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code></a></td><td>Wait until the slave SQL thread has executed all the given  GTIDs. Returns: the number of events that were executed (or NULL, if GTID  mode is not enabled).</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_gtid-subset"></a>
          <a class="indexterm" name="idp67304544"></a>

          <a class="link" href="functions.html#function_gtid-subset"><code class="literal">GTID_SUBSET(<em class="replaceable"><code>subset</code></em>,<em class="replaceable"><code>set</code></em>)</code></a>
        </p><p>
          Given two sets of global transaction IDs
          <em class="replaceable"><code>subset</code></em> and
          <em class="replaceable"><code>set</code></em>, returns true if all GTIDs in
          <em class="replaceable"><code>subset</code></em> are also in
          <em class="replaceable"><code>set</code></em>. Returns false otherwise.
        </p><p>
          This function was added in MySQL 5.6.5.
        </p></li><li class="listitem"><p><a name="function_gtid-subtract"></a>
          <a class="indexterm" name="idp67313888"></a>

          <a class="link" href="functions.html#function_gtid-subtract"><code class="literal">GTID_SUBTRACT(<em class="replaceable"><code>set</code></em>,<em class="replaceable"><code>subset</code></em>)</code></a>
        </p><p>
          Given two sets of global transaction IDs
          <em class="replaceable"><code>subset</code></em> and
          <em class="replaceable"><code>set</code></em>, returns only those GTIDs from
          <em class="replaceable"><code>set</code></em> that are not in
          <em class="replaceable"><code>subset</code></em>.
        </p><p>
          This function was added in MySQL 5.6.5.
        </p></li><li class="listitem"><p><a name="function_sql-thread-wait-after-gtids"></a>
          <a class="indexterm" name="idp67323264"></a>

          <a class="link" href="functions.html#function_sql-thread-wait-after-gtids"><code class="literal">SQL_THREAD_WAIT_AFTER_GTIDS(<em class="replaceable"><code>gtid_set</code></em>[,
          <em class="replaceable"><code>timeout</code></em>])</code></a>
        </p><p>
          <code class="literal">SQL_THREAD_WAIT_AFTER_GTIDS()</code> was added in
          MySQL 5.6.5, and replaced by
          <a class="link" href="functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code></a>
          in MySQL 5.6.9. (Bug #14775984)
        </p><p>
          For more information, see <a class="xref" href="replication.html#replication-gtids" title="16.1.3. Replication with Global Transaction Identifiers">Section 16.1.3, “Replication with Global Transaction Identifiers”</a>.
        </p></li><li class="listitem"><p><a name="function_wait-until-sql-thread-after-gtids"></a>
          <a class="indexterm" name="idp67333152"></a>

          <a class="link" href="functions.html#function_wait-until-sql-thread-after-gtids"><code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS(<em class="replaceable"><code>gtid_set</code></em>[,
          <em class="replaceable"><code>timeout</code></em>])</code></a>
        </p><p>
          Wait until the slave SQL thread has executed all of the
          transactions whose global transaction identifiers are
          contained in <em class="replaceable"><code>gtid_set</code></em> (see
          <a class="xref" href="replication.html#replication-gtids-concepts" title="16.1.3.1. GTID Concepts">Section 16.1.3.1, “GTID Concepts”</a>, for a definition
          of <span class="quote">“<span class="quote">GTID sets</span>”</span>), or until
          <em class="replaceable"><code>timeout</code></em> seconds have elapsed,
          whichever occurs first. <em class="replaceable"><code>timeout</code></em> is
          optional; the default timeout is 0 seconds, in which case the
          master simply waits until all of the transactions in the GTID
          set have been executed.
        </p><p>
          Prior to MySQL 5.6.9,
          <code class="literal">WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS()</code> was
          named
          <a class="link" href="functions.html#function_sql-thread-wait-after-gtids"><code class="literal">SQL_THREAD_WAIT_AFTER_GTIDS()</code></a>.
          (Bug #14775984)
        </p><p>
          For more information, see <a class="xref" href="replication.html#replication-gtids" title="16.1.3. Replication with Global Transaction Identifiers">Section 16.1.3, “Replication with Global Transaction Identifiers”</a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS('3E11FA47-71CA-11E1-9E33-C80AA9429562:1-5');</code></strong>
        -&gt; 5
</pre><p>
          The return value is the number of transactional events that
          were executed. Prior to MySQL 5.6.8, this function behaved
          unpredictably if no timeout was set and it was invoked while
          GTID-based replication was not active; in MySQL 5.6.8 and
          later, the function returns <code class="literal">NULL</code> whenever
          <a class="link" href="replication.html#sysvar_gtid_mode"><code class="literal">gtid_mode</code></a> is
          <code class="literal">OFF</code>. (Bug #14640065)
</p></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="miscellaneous-functions"></a>12.16. Miscellaneous Functions</h2>

</div>

</div>

</div>
<a class="indexterm" name="idp67350256"></a><a class="indexterm" name="idp67351328"></a>
<div class="table">
<a name="idp67352816"></a><p class="title"><b>Table 12.20. Miscellaneous Functions</b></p>
<div class="table-contents">
<table summary="Miscellaneous Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_default"><code class="literal">DEFAULT()</code></a></td><td>Return the default value for a table column</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a></td><td>Get a named lock</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a></td><td>Return the numeric value of an IP address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a></td><td>Return the IP address from a numeric value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a></td><td>Return the numeric value of an IPv6 address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a></td><td>Return the IPv6 address from a numeric value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK()</code></a></td><td>Checks whether the named lock  is free</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv4-compat"><code class="literal">IS_IPV4_COMPAT()</code></a></td><td>Return true if argument is an IPv4-compatible address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv4-mapped"><code class="literal">IS_IPV4_MAPPED()</code></a></td><td>Return true if argument is an IPv4-mapped address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a></td><td>Return true if argument is an IPv4 address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-ipv6"><code class="literal">IS_IPV6()</code></a></td><td>Return true if argument is an IPv6 address</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK()</code></a></td><td>Checks whether the named lock is in use.  Return connection identifier if true.</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a></td><td>Block until the slave has read and  applied all updates up to the specified position</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a></td><td>Causes the column to have the given name</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_rand"><code class="literal">RAND()</code></a></td><td>Return a random floating-point value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a></td><td>Releases the named lock</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a></td><td>Sleep for a number of seconds</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a></td><td>Return an integer-valued universal identifier</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a></td><td>Return a Universal Unique Identifier (UUID)</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_values"><code class="literal">VALUES()</code></a></td><td>Defines the values to be used during an INSERT</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_default"></a>
          <a class="indexterm" name="idp67395344"></a>

          <a class="link" href="functions.html#function_default"><code class="literal">DEFAULT(<em class="replaceable"><code>col_name</code></em>)</code></a>
        </p><p>
          Returns the default value for a table column. An error results
          if the column has no default value.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE t SET i = DEFAULT(i)+1 WHERE id &lt; 100;</code></strong>
</pre></li><li class="listitem"><p>
          <a class="link" href="functions.html#function_format"><code class="literal">FORMAT(<em class="replaceable"><code>X</code></em>,<em class="replaceable"><code>D</code></em>)</code></a>
        </p><p>
          Formats the number <em class="replaceable"><code>X</code></em> to a format
          like <code class="literal">'#,###,###.##'</code>, rounded to
          <em class="replaceable"><code>D</code></em> decimal places, and returns the
          result as a string. For details, see
          <a class="xref" href="functions.html#string-functions" title="12.5. String Functions">Section 12.5, “String Functions”</a>.
        </p></li><li class="listitem"><p><a name="function_get-lock"></a>
          <a class="indexterm" name="idp67409904"></a>

          <a class="indexterm" name="idp67410976"></a>

          <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK(<em class="replaceable"><code>str</code></em>,<em class="replaceable"><code>timeout</code></em>)</code></a>
        </p><p>
          Tries to obtain a lock with a name given by the string
          <em class="replaceable"><code>str</code></em>, using a timeout of
          <em class="replaceable"><code>timeout</code></em> seconds. Returns
          <code class="literal">1</code> if the lock was obtained successfully,
          <code class="literal">0</code> if the attempt timed out (for example,
          because another client has previously locked the name), or
          <code class="literal">NULL</code> if an error occurred (such as running
          out of memory or the thread was killed with
          <a class="link" href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span class="command"><strong>mysqladmin kill</strong></span></a>). If you have a lock
          obtained with <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>, it is
          released when you execute
          <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>, execute a new
          <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>, or your connection
          terminates (either normally or abnormally). Locks obtained
          with <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> do not interact
          with transactions. That is, committing a transaction does not
          release any such locks obtained during the transaction.
        </p><p>
          This function can be used to implement application locks or to
          simulate record locks. Names are locked on a server-wide
          basis. If a name has been locked by one client,
          <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> blocks any request
          by another client for a lock with the same name. This enables
          clients that agree on a given lock name to use the name to
          perform cooperative advisory locking. But be aware that it
          also enables a client that is not among the set of cooperating
          clients to lock a name, either inadvertently or deliberately,
          and thus prevent any of the cooperating clients from locking
          that name. One way to reduce the likelihood of this is to use
          lock names that are database-specific or application-specific.
          For example, use lock names of the form
          <em class="replaceable"><code>db_name.str</code></em> or
          <em class="replaceable"><code>app_name.str</code></em>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT GET_LOCK('lock1',10);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT IS_FREE_LOCK('lock2');</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT GET_LOCK('lock2',10);</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT RELEASE_LOCK('lock2');</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT RELEASE_LOCK('lock1');</code></strong>
        -&gt; NULL
</pre><p>
          The second <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a> call
          returns <code class="literal">NULL</code> because the lock
          <code class="literal">'lock1'</code> was automatically released by the
          second <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> call.
        </p><p>
          If multiple clients are waiting for a lock, the order in which
          they will acquire it is undefined and depends on factors such
          as the thread library in use. In particular, applications
          should not assume that clients will acquire the lock in the
          same order that they issued the lock requests.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p></li><li class="listitem"><p><a name="function_inet-aton"></a>
          <a class="indexterm" name="idp67440240"></a>

          <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Given the dotted-quad representation of an IPv4 network
          address as a string, returns an integer that represents the
          numeric value of the address in network byte order (big
          endian). <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a> returns
          <code class="literal">NULL</code> if it does not understand its
          argument.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INET_ATON('10.0.5.9');</code></strong>
        -&gt; 167773449
</pre><p>
          For this example, the return value is calculated as
          10×256<sup>3</sup> +
          0×256<sup>2</sup> + 5×256 + 9.
        </p><p>
          <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a> may or may not
          return a non-<code class="literal">NULL</code> result for short-form IP
          addresses (such as <code class="literal">'127.1'</code> as a
          representation of <code class="literal">'127.0.0.1'</code>). Because of
          this, <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a>a should not
          be used for such addresses.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            To store values generated by
            <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a>, use an
            <code class="literal">INT UNSIGNED</code> column rather than
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a>, which is signed. If you
            use a signed column, values corresponding to IP addresses
            for which the first octet is greater than 127 cannot be
            stored correctly. See
            <a class="xref" href="data-types.html#out-of-range-and-overflow" title="11.2.6. Out-of-Range and Overflow Handling">Section 11.2.6, “Out-of-Range and Overflow Handling”</a>.
</p>
</div>
</li><li class="listitem"><p><a name="function_inet-ntoa"></a>
          <a class="indexterm" name="idp67460496"></a>

          <a class="link" href="functions.html#function_inet-ntoa"><code class="literal">INET_NTOA(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Given a numeric IPv4 network address in network byte order,
          returns the dotted-quad string representation of the address
          as a nonbinary string in the connection character set.
          <a class="link" href="functions.html#function_inet-ntoa"><code class="literal">INET_NTOA()</code></a> returns
          <code class="literal">NULL</code> if it does not understand its
          argument.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INET_NTOA(167773449);</code></strong>
        -&gt; '10.0.5.9'
</pre></li><li class="listitem"><p><a name="function_inet6-aton"></a>
          <a class="indexterm" name="idp67470944"></a>

          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Given an IPv6 or IPv4 network address as a string, returns a
          binary string that represents the numeric value of the address
          in network byte order (big endian). Because numeric-format
          IPv6 addresses require more bytes than the largest integer
          type, the representation returned by this function has the
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a> data type:
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY(16)</code></a> for IPv6
          addresses and <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY(4)</code></a> for
          IPv4 addresses. If the argument is not a valid address,
          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a> returns
          <code class="literal">NULL</code>.
        </p><p>
          The following examples use
          <code class="literal">HEX()</code> to display the
          <code class="literal">INET6_ATON()</code> result in
          printable form:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(INET6_ATON('fdfe::5a55:caff:fefa:9089'));</code></strong>
        -&gt; 'FDFE0000000000005A55CAFFFEFA9089'
mysql&gt; <strong class="userinput"><code>SELECT HEX(INET6_ATON('10.0.5.9'));</code></strong>
        -&gt; '0A000509'
</pre><p>
          <code class="literal">INET6_ATON()</code> observes several constraints
          on valid arguments. These are given in the following list
          along with examples.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              A trailing zone ID is not permitted, as in
              <code class="literal">fe80::3%1</code> or
              <code class="literal">fe80::3%eth0</code>.
            </p></li><li class="listitem"><p>
              A trailing network mask is not permitted, as in
              <code class="literal">2001:45f:3:ba::/64</code> or
              <code class="literal">192.168.1.0/24</code>.
            </p></li><li class="listitem"><p>
              For values representing IPv4 addresses, only classless
              addresses are supported. Classful addresses such as
              <code class="literal">192.168.1</code> are rejected. A trailing port
              number is not permitted, as in
              <code class="literal">192.168.1.2:8080</code>. Hexadecimal numbers
              in address components are not permitted, as in
              <code class="literal">192.0xa0.1.2</code>. Octal numbers are not
              supported: <code class="literal">192.168.010.1</code> is treated as
              <code class="literal">192.168.10.1</code>, not
              <code class="literal">192.168.8.1</code>. These IPv4 constraints
              also apply to IPv6 addresses that have IPv4 address parts,
              such as IPv4-compatible or IPv4-mapped addresses.
</p></li></ul>
</div>
<p>
          To convert an IPv4 address <em class="replaceable"><code>expr</code></em>
          represented in numeric form as an
          <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">INT</code></a> value to an IPv6 address
          represented in numeric form as a
          <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a> value, use this
          expression:
        </p><pre class="programlisting">INET6_ATON(INET_NTOA(<em class="replaceable"><code>expr</code></em>))
</pre><p>
          For example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(INET6_ATON(INET_NTOA(167773449)));</code></strong>
        -&gt; '0A000509'
</pre><p>
          This function was added in MySQL 5.6.3.
        </p></li><li class="listitem"><p><a name="function_inet6-ntoa"></a>
          <a class="indexterm" name="idp67505408"></a>

          <a class="link" href="functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Given an IPv6 or IPv4 network address represented in numeric
          form as a binary string, returns the string representation of
          the address as a nonbinary string in the connection character
          set. If the argument is not a valid address,
          <a class="link" href="functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a> returns
          <code class="literal">NULL</code>.
        </p><p>
          <a class="link" href="functions.html#function_inet6-ntoa"><code class="literal">INET6_NTOA()</code></a> has these
          properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              It does not use operating system functions to perform
              conversions, thus the output string is platform
              independent.
            </p></li><li class="listitem"><p>
              The return string has a maximum length of 39 (4 x 8 + 7).
              Given this statement:
            </p><pre class="programlisting">CREATE TABLE t AS SELECT INET6_NTOA(<em class="replaceable"><code>expr</code></em>) AS c1;
</pre><p>
              The resulting table would have this definition:
            </p><pre class="programlisting">CREATE TABLE t (c1 VARCHAR(39) CHARACTER SET utf8 DEFAULT NULL);</pre></li><li class="listitem"><p>
              The return string uses lowercase letters for IPv6
              addresses.
</p></li></ul>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(INET6_ATON('fdfe::5a55:caff:fefa:9089'));</code></strong>
        -&gt; 'fdfe::5a55:caff:fefa:9089'
mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(INET6_ATON('10.0.5.9'));</code></strong>
        -&gt; '10.0.5.9'

mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(UNHEX('FDFE0000000000005A55CAFFFEFA9089'));</code></strong>
        -&gt; 'fdfe::5a55:caff:fefa:9089'
mysql&gt; <strong class="userinput"><code>SELECT INET6_NTOA(UNHEX('0A000509'));</code></strong>
        -&gt; '10.0.5.9'
</pre><p>
          This function was added in MySQL 5.6.3.
        </p></li><li class="listitem"><p><a name="function_is-free-lock"></a>
          <a class="indexterm" name="idp67525648"></a>

          <a class="link" href="functions.html#function_is-free-lock"><code class="literal">IS_FREE_LOCK(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Checks whether the lock named <em class="replaceable"><code>str</code></em>
          is free to use (that is, not locked). Returns
          <code class="literal">1</code> if the lock is free (no one is using the
          lock), <code class="literal">0</code> if the lock is in use, and
          <code class="literal">NULL</code> if an error occurs (such as an
          incorrect argument).
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p></li><li class="listitem"><p><a name="function_is-ipv4"></a>
          <a class="indexterm" name="idp67537120"></a>

          <a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Returns 1 if the argument is a valid IPv4 address specified as
          a string, 0 otherwise.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT IS_IPV4('10.0.5.9'), IS_IPV4('10.0.5.256');</code></strong>
        -&gt; 1, 0
</pre><p>
          For a given argument, if
          <a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a> returns 1,
          <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a> (and
          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a>) will return
          non-<code class="literal">NULL</code>. The converse statement is not
          true: In some cases,
          <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a> returns
          non-<code class="literal">NULL</code> when
          <a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a> returns 0.
        </p><p>
          As implied by the preceding remarks,
          <a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a> is more strict than
          <a class="link" href="functions.html#function_inet-aton"><code class="literal">INET_ATON()</code></a> about what
          constitutes a valid IPv4 address, so it may be useful for
          applications that need to perform strong checks against
          invalid values. Alternatively, use
          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a> to convert IPv4
          addresses to internal form and check for a
          <code class="literal">NULL</code> result (which indicates an invalid
          address). <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a> is
          equally strong as <a class="link" href="functions.html#function_is-ipv4"><code class="literal">IS_IPV4()</code></a>
          about checking IPv4 addresses.
        </p><p>
          This function was added in MySQL 5.6.3.
        </p></li><li class="listitem"><p><a name="function_is-ipv4-compat"></a>
          <a class="indexterm" name="idp67558320"></a>

          <a class="link" href="functions.html#function_is-ipv4-compat"><code class="literal">IS_IPV4_COMPAT(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          This function takes an IPv6 address represented in numeric
          form as a binary string, as returned by
          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a>. It returns 1 if
          the argument is a valid IPv4-compatible IPv6 address, 0
          otherwise. IPv4-compatible addresses have the form
          <code class="literal">::<em class="replaceable"><code>ipv4_address</code></em></code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT IS_IPV4_COMPAT(INET6_ATON('::10.0.5.9'));</code></strong>
        -&gt; 1
mysql&gt; <strong class="userinput"><code>SELECT IS_IPV4_COMPAT(INET6_ATON('::ffff:10.0.5.9'));</code></strong>
        -&gt; 0
</pre><p>
          The IPv4 part of an IPv4-compatible address can also be
          represented using hexadecimal notation. For example,
          <code class="literal">192.168.0.1</code> has this raw hexadecimal value:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(INET6_ATON('192.168.0.1'));</code></strong>
        -&gt; 'C0A80001'
</pre><p>
          Expressed in IPv4-compatible form,
          <code class="literal">::192.168.0.1</code> is equivalent to
          <code class="literal">::c0a8:0001</code> or (without leading zeros)
          <code class="literal">::c0a8:1</code>
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>  IS_IPV4_COMPAT(INET6_ATON('::192.168.0.1')),</code></strong>
    -&gt; <strong class="userinput"><code>  IS_IPV4_COMPAT(INET6_ATON('::c0a8:0001')),</code></strong>
    -&gt; <strong class="userinput"><code>  IS_IPV4_COMPAT(INET6_ATON('::c0a8:1'));</code></strong>
        -&gt; 1, 1, 1
</pre><p>
          This function was added in MySQL 5.6.3.
        </p></li><li class="listitem"><p><a name="function_is-ipv4-mapped"></a>
          <a class="indexterm" name="idp67579264"></a>

          <a class="link" href="functions.html#function_is-ipv4-mapped"><code class="literal">IS_IPV4_MAPPED(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          This function takes an IPv6 address represented in numeric
          form as a binary string, as returned by
          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a>. It returns 1 if
          the argument is a valid IPv4-mapped IPv6 address, 0 otherwise.
          IPv4-mapped addresses have the form
          <code class="literal">::ffff:<em class="replaceable"><code>ipv4_address</code></em></code>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT IS_IPV4_MAPPED(INET6_ATON('::10.0.5.9'));</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT IS_IPV4_MAPPED(INET6_ATON('::ffff:10.0.5.9'));</code></strong>
        -&gt; 1
</pre><p>
          As with <code class="literal">IS_IPV4_COMPAT()</code> the IPv4 part of
          an IPv4-mapped address can also be represented using
          hexadecimal notation:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
    -&gt; <strong class="userinput"><code>  IS_IPV4_MAPPED(INET6_ATON('::ffff:192.168.0.1')),</code></strong>
    -&gt; <strong class="userinput"><code>  IS_IPV4_MAPPED(INET6_ATON('::ffff:c0a8:0001')),</code></strong>
    -&gt; <strong class="userinput"><code>  IS_IPV4_MAPPED(INET6_ATON('::ffff:c0a8:1'));</code></strong>
        -&gt; 1, 1, 1
</pre><p>
          This function was added in MySQL 5.6.3.
        </p></li><li class="listitem"><p><a name="function_is-ipv6"></a>
          <a class="indexterm" name="idp67596128"></a>

          <a class="link" href="functions.html#function_is-ipv6"><code class="literal">IS_IPV6(<em class="replaceable"><code>expr</code></em>)</code></a>
        </p><p>
          Returns 1 if the argument is a valid IPv6 address specified as
          a string, 0 otherwise. This function does not consider IPv4
          addresses to be valid IPv6 addresses.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT IS_IPV6('10.0.5.9'), IS_IPV6('::1');</code></strong>
        -&gt; 0, 1
</pre><p>
          For a given argument, if
          <a class="link" href="functions.html#function_is-ipv6"><code class="literal">IS_IPV6()</code></a> returns 1,
          <a class="link" href="functions.html#function_inet6-aton"><code class="literal">INET6_ATON()</code></a> will return
          non-<code class="literal">NULL</code>.
        </p><p>
          This function was added in MySQL 5.6.3.
        </p></li><li class="listitem"><p><a name="function_is-used-lock"></a>
          <a class="indexterm" name="idp67608304"></a>

          <a class="link" href="functions.html#function_is-used-lock"><code class="literal">IS_USED_LOCK(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Checks whether the lock named <em class="replaceable"><code>str</code></em>
          is in use (that is, locked). If so, it returns the connection
          identifier of the client that holds the lock. Otherwise, it
          returns <code class="literal">NULL</code>.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p></li><li class="listitem"><p><a name="function_master-pos-wait"></a>
          <a class="indexterm" name="idp67618400"></a>

          <a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT(<em class="replaceable"><code>log_name</code></em>,<em class="replaceable"><code>log_pos</code></em>[,<em class="replaceable"><code>timeout</code></em>])</code></a>
        </p><p>
          This function is useful for control of master/slave
          synchronization. It blocks until the slave has read and
          applied all updates up to the specified position in the master
          log. The return value is the number of log events the slave
          had to wait for to advance to the specified position. The
          function returns <code class="literal">NULL</code> if the slave SQL
          thread is not started, the slave's master information is not
          initialized, the arguments are incorrect, or an error occurs.
          It returns <code class="literal">-1</code> if the timeout has been
          exceeded. If the slave SQL thread stops while
          <a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a> is waiting,
          the function returns <code class="literal">NULL</code>. If the slave is
          past the specified position, the function returns immediately.
        </p><p>
          If a <em class="replaceable"><code>timeout</code></em> value is specified,
          <a class="link" href="functions.html#function_master-pos-wait"><code class="literal">MASTER_POS_WAIT()</code></a> stops waiting
          when <em class="replaceable"><code>timeout</code></em> seconds have elapsed.
          <em class="replaceable"><code>timeout</code></em> must be greater than 0; a
          zero or negative <em class="replaceable"><code>timeout</code></em> means no
          timeout.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p></li><li class="listitem"><p><a name="function_name-const"></a>
          <a class="indexterm" name="idp67634912"></a>

          <a class="link" href="functions.html#function_name-const"><code class="literal">NAME_CONST(<em class="replaceable"><code>name</code></em>,<em class="replaceable"><code>value</code></em>)</code></a>
        </p><p>
          Returns the given value. When used to produce a result set
          column, <a class="link" href="functions.html#function_name-const"><code class="literal">NAME_CONST()</code></a> causes the
          column to have the given name. The arguments should be
          constants.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT NAME_CONST('myname', 14);</code></strong>
+--------+
| myname |
+--------+
|     14 |
+--------+
</pre><p>
          This function is for internal use only. The server uses it
          when writing statements from stored programs that contain
          references to local program variables, as described in
          <a class="xref" href="stored-programs-views.html#stored-programs-logging" title="19.7. Binary Logging of Stored Programs">Section 19.7, “Binary Logging of Stored Programs”</a>, You might see this
          function in the output from <a class="link" href="programs.html#mysqlbinlog" title="4.6.8. mysqlbinlog — Utility for Processing Binary Log Files"><span class="command"><strong>mysqlbinlog</strong></span></a>.
        </p></li><li class="listitem"><p><a name="function_release-lock"></a>
          <a class="indexterm" name="idp67646560"></a>

          <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK(<em class="replaceable"><code>str</code></em>)</code></a>
        </p><p>
          Releases the lock named by the string
          <em class="replaceable"><code>str</code></em> that was obtained with
          <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a>. Returns
          <code class="literal">1</code> if the lock was released,
          <code class="literal">0</code> if the lock was not established by this
          thread (in which case the lock is not released), and
          <code class="literal">NULL</code> if the named lock did not exist. The
          lock does not exist if it was never obtained by a call to
          <a class="link" href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> or if it has
          previously been released.
        </p><p>
          The <a class="link" href="sql-syntax.html#do" title="13.2.3. DO Syntax"><code class="literal">DO</code></a> statement is convenient
          to use with <a class="link" href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>. See
          <a class="xref" href="sql-syntax.html#do" title="13.2.3. DO Syntax">Section 13.2.3, “<code class="literal">DO</code> Syntax”</a>.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p></li><li class="listitem"><p><a name="function_sleep"></a>
          <a class="indexterm" name="idp67662464"></a>

          <a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP(<em class="replaceable"><code>duration</code></em>)</code></a>
        </p><p>
          Sleeps (pauses) for the number of seconds given by the
          <em class="replaceable"><code>duration</code></em> argument, then returns 0.
          If <a class="link" href="functions.html#function_sleep"><code class="literal">SLEEP()</code></a> is interrupted, it
          returns 1. The duration may have a fractional part.
        </p><p>
          This function is unsafe for statement-based replication. In
          MySQL 5.6, a warning is logged if you use this
          function when <a class="link" href="replication.html#sysvar_binlog_format"><code class="literal">binlog_format</code></a>
          is set to <code class="literal">STATEMENT</code>. (Bug #47995)
        </p></li><li class="listitem"><p><a name="function_uuid"></a>
          <a class="indexterm" name="idp67672736"></a>

          <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a>
        </p><p>
          Returns a Universal Unique Identifier (UUID) generated
          according to <span class="quote">“<span class="quote">DCE 1.1: Remote Procedure Call</span>”</span>
          (Appendix A) CAE (Common Applications Environment)
          Specifications published by The Open Group in October 1997
          (Document Number C706,
          <a class="ulink" href="http://www.opengroup.org/public/pubs/catalog/c706.htm" target="_top">http://www.opengroup.org/public/pubs/catalog/c706.htm</a>).
        </p><p>
          A UUID is designed as a number that is globally unique in
          space and time. Two calls to
          <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a> are expected to generate
          two different values, even if these calls are performed on two
          separate computers that are not connected to each other.
        </p><p>
          A UUID is a 128-bit number represented by a
          <code class="literal">utf8</code> string of five hexadecimal numbers in
          <code class="literal">aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee</code>
          format:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              The first three numbers are generated from a timestamp.
            </p></li><li class="listitem"><p>
              The fourth number preserves temporal uniqueness in case
              the timestamp value loses monotonicity (for example, due
              to daylight saving time).
            </p></li><li class="listitem"><p>
              The fifth number is an IEEE 802 node number that provides
              spatial uniqueness. A random number is substituted if the
              latter is not available (for example, because the host
              computer has no Ethernet card, or we do not know how to
              find the hardware address of an interface on your
              operating system). In this case, spatial uniqueness cannot
              be guaranteed. Nevertheless, a collision should have
              <span class="emphasis"><em>very</em></span> low probability.
            </p><p>
              Currently, the MAC address of an interface is taken into
              account only on FreeBSD and Linux. On other operating
              systems, MySQL uses a randomly generated 48-bit number.
</p></li></ul>
</div>
<pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UUID();</code></strong>
        -&gt; '6ccd780c-baba-1026-9564-0040f4311e29'
</pre>
<div xmlns="http://www.w3.org/1999/xhtml" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p xmlns="">
            Although <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a> values are
            intended to be unique, they are not necessarily unguessable
            or unpredictable. If unpredictability is required, UUID
            values should be generated some other way.
</p>
</div>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p xmlns="">
            <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a> does not work with
            statement-based replication.
</p>
</div>
</li><li class="listitem"><p><a name="function_uuid-short"></a>
          <a class="indexterm" name="idp67693936"></a>

          <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a>
        </p><p>
          Returns a <span class="quote">“<span class="quote">short</span>”</span> universal identifier as a
          64-bit unsigned integer (rather than a string-form 128-bit
          identifier as returned by the
          <a class="link" href="functions.html#function_uuid"><code class="literal">UUID()</code></a> function).
        </p><p>
          The value of <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a> is
          guaranteed to be unique if the following conditions hold:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              The <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> of the
              current host is unique among your set of master and slave
              servers
            </p></li><li class="listitem"><p>
              <a class="link" href="server-administration.html#sysvar_server_id"><code class="literal">server_id</code></a> is between 0
              and 255
            </p></li><li class="listitem"><p>
              You do not set back your system time for your server
              between <a class="link" href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> restarts
            </p></li><li class="listitem"><p>
              You do not invoke
              <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a> on average
              more than 16 million times per second between
              <a class="link" href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span class="command"><strong>mysqld</strong></span></a> restarts
</p></li></ul>
</div>
<p>
          The <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a> return value
          is constructed this way:
        </p><pre class="programlisting">  (server_id &amp; 255) &lt;&lt; 56
+ (server_startup_time_in_seconds &lt;&lt; 24)
+ incremented_variable++;</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT UUID_SHORT();</code></strong>
        -&gt; 92395783831158784
</pre><p>
          Note that <a class="link" href="functions.html#function_uuid-short"><code class="literal">UUID_SHORT()</code></a> does not
          work with statement-based replication.
        </p></li><li class="listitem"><p><a name="function_values"></a>
          <a class="indexterm" name="idp67716480"></a>

          <a class="link" href="functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        </p><p>
          In an
          <a class="link" href="sql-syntax.html#insert-on-duplicate" title="13.2.5.3. INSERT ... ON DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT
          ... ON DUPLICATE KEY UPDATE</code></a> statement, you can use
          the
          <code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code>
          function in the <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> clause
          to refer to column values from the
          <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> portion of the
          statement. In other words,
          <code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code>
          in the <a class="link" href="sql-syntax.html#update" title="13.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> clause refers to
          the value of <em class="replaceable"><code>col_name</code></em> that would be
          inserted, had no duplicate-key conflict occurred. This
          function is especially useful in multiple-row inserts. The
          <a class="link" href="functions.html#function_values"><code class="literal">VALUES()</code></a> function is meaningful
          only in the <code class="literal">ON DUPLICATE KEY UPDATE</code> clause
          of <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements and
          returns <code class="literal">NULL</code> otherwise. See
          <a class="xref" href="sql-syntax.html#insert-on-duplicate" title="13.2.5.3. INSERT ... ON DUPLICATE KEY UPDATE Syntax">Section 13.2.5.3, “<code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code> Syntax”</a>.
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6)</code></strong>
    -&gt; <strong class="userinput"><code>ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b);</code></strong>
</pre></li></ul>
</div>

</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="group-by-functions-and-modifiers"></a>12.17. Functions and Modifiers for Use with <code class="literal">GROUP BY</code> Clauses</h2>

</div>

</div>

</div>

<div class="toc">
<dl><dt><span class="section"><a href="functions.html#group-by-functions">12.17.1. <code class="literal">GROUP BY</code> (Aggregate) Functions</a></span></dt><dt><span class="section"><a href="functions.html#group-by-modifiers">12.17.2. <code class="literal">GROUP BY</code> Modifiers</a></span></dt><dt><span class="section"><a href="functions.html#group-by-extensions">12.17.3. MySQL Extensions to <code class="literal">GROUP BY</code></a></span></dt></dl>
</div>

<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-functions"></a>12.17.1. <code class="literal">GROUP BY</code> (Aggregate) Functions</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp67737424"></a><a class="indexterm" name="idp67738496"></a><a class="indexterm" name="idp67739984"></a>
<div class="table">
<a name="idp67741488"></a><p class="title"><b>Table 12.21. Aggregate (<code class="literal">GROUP BY</code>)
Functions</b></p>
<div class="table-contents">
<table summary="Aggregate (GROUP BY)
Functions" border="1"><colgroup><col class="name"><col class="description"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="functions.html#function_avg"><code class="literal">AVG()</code></a></td><td>Return the average value of the argument</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-and"><code class="literal">BIT_AND()</code></a></td><td>Return bitwise and</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-or"><code class="literal">BIT_OR()</code></a></td><td>Return bitwise or</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_bit-xor"><code class="literal">BIT_XOR()</code></a></td><td>Return bitwise xor</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_count-distinct"><code class="literal">COUNT(DISTINCT)</code></a></td><td>Return the count of a number of different values</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a></td><td>Return a count of the number of rows returned</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT()</code></a></td><td>Return a concatenated string</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_max"><code class="literal">MAX()</code></a></td><td>Return the maximum value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_min"><code class="literal">MIN()</code></a></td><td>Return the minimum value</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_std"><code class="literal">STD()</code></a></td><td>Return the population standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a></td><td>Return the population standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP()</code></a></td><td>Return the sample standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_stddev"><code class="literal">STDDEV()</code></a></td><td>Return the population standard deviation</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a></td><td>Return the sum</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a></td><td>Return the population standard variance</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a></td><td>Return the sample variance</td></tr><tr><td scope="row"><a class="link" href="functions.html#function_variance"><code class="literal">VARIANCE()</code></a></td><td>Return the population standard variance</td></tr></tbody></table>
</div>

</div>
<br class="table-break"><p>
        This section describes group (aggregate) functions that operate
        on sets of values. Unless otherwise stated, group functions
        ignore <code class="literal">NULL</code> values.
      </p><p>
        If you use a group function in a statement containing no
        <code class="literal">GROUP BY</code> clause, it is equivalent to grouping
        on all rows. For more information, see
        <a class="xref" href="functions.html#group-by-extensions" title="12.17.3. MySQL Extensions to GROUP BY">Section 12.17.3, “MySQL Extensions to <code class="literal">GROUP BY</code>”</a>.
      </p><p>
        For numeric arguments, the variance and standard deviation
        functions return a <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a> value.
        The <a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a> and
        <a class="link" href="functions.html#function_avg"><code class="literal">AVG()</code></a> functions return a
        <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> value for exact-value
        arguments (integer or <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a>),
        and a <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a> value for
        approximate-value arguments
        (<a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a> or
        <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a>).
      </p><p>
        The <a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a> and
        <a class="link" href="functions.html#function_avg"><code class="literal">AVG()</code></a> aggregate functions do not
        work with temporal values. (They convert the values to numbers,
        losing everything after the first nonnumeric character.) To work
        around this problem, convert to numeric units, perform the
        aggregate operation, and convert back to a temporal value.
        Examples:
      </p><pre class="programlisting">SELECT SEC_TO_TIME(SUM(TIME_TO_SEC(<em class="replaceable"><code>time_col</code></em>))) FROM <em class="replaceable"><code>tbl_name</code></em>;
SELECT FROM_DAYS(SUM(TO_DAYS(<em class="replaceable"><code>date_col</code></em>))) FROM <em class="replaceable"><code>tbl_name</code></em>;
</pre><p>
        Functions such as <a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a> or
        <a class="link" href="functions.html#function_avg"><code class="literal">AVG()</code></a> that expect a numeric
        argument cast the argument to a number if necessary. For
        <a class="link" href="data-types.html#set" title="11.4.5. The SET Type"><code class="literal">SET</code></a> or
        <a class="link" href="data-types.html#enum" title="11.4.4. The ENUM Type"><code class="literal">ENUM</code></a> values, the cast operation
        causes the underlying numeric value to be used.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_avg"></a>
            <a class="indexterm" name="idp67799168"></a>

            <a class="indexterm" name="idp67800240"></a>

            <a class="indexterm" name="idp67801312"></a>

            <a class="link" href="functions.html#function_avg"><code class="literal">AVG([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the average value of
            <code class="literal"><em class="replaceable"><code>expr</code></em></code>. The
            <code class="literal">DISTINCT</code> option can be used to return the
            average of the distinct values of
            <em class="replaceable"><code>expr</code></em>.
          </p><p>
            <a class="link" href="functions.html#function_avg"><code class="literal">AVG()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT student_name, AVG(test_score)</code></strong>
    -&gt;        <strong class="userinput"><code>FROM student</code></strong>
    -&gt;        <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre></li><li class="listitem"><p><a name="function_bit-and"></a>
            <a class="indexterm" name="idp67815888"></a>

            <a class="link" href="functions.html#function_bit-and"><code class="literal">BIT_AND(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the bitwise <code class="literal">AND</code> of all bits in
            <em class="replaceable"><code>expr</code></em>. The calculation is
            performed with 64-bit
            (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>) precision.
          </p><p>
            This function returns
            <code class="literal">18446744073709551615</code> if there were no
            matching rows. (This is the value of an unsigned
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> value with all bits
            set to 1.)
          </p></li><li class="listitem"><p><a name="function_bit-or"></a>
            <a class="indexterm" name="idp67826752"></a>

            <a class="link" href="functions.html#function_bit-or"><code class="literal">BIT_OR(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the bitwise <code class="literal">OR</code> of all bits in
            <em class="replaceable"><code>expr</code></em>. The calculation is
            performed with 64-bit
            (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>) precision.
          </p><p>
            This function returns <code class="literal">0</code> if there were no
            matching rows.
          </p></li><li class="listitem"><p><a name="function_bit-xor"></a>
            <a class="indexterm" name="idp67836640"></a>

            <a class="link" href="functions.html#function_bit-xor"><code class="literal">BIT_XOR(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the bitwise <a class="link" href="functions.html#operator_xor"><code class="literal">XOR</code></a> of all
            bits in <em class="replaceable"><code>expr</code></em>. The calculation is
            performed with 64-bit
            (<a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a>) precision.
          </p><p>
            This function returns <code class="literal">0</code> if there were no
            matching rows.
          </p></li><li class="listitem"><p><a name="function_count"></a>
            <a class="indexterm" name="idp67846656"></a>

            <a class="link" href="functions.html#function_count"><code class="literal">COUNT(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns a count of the number of non-<code class="literal">NULL</code>
            values of <em class="replaceable"><code>expr</code></em> in the rows
            retrieved by a <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a>
            statement. The result is a
            <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> value.
          </p><p>
            <a class="link" href="functions.html#function_count"><code class="literal">COUNT()</code></a> returns
            <code class="literal">0</code> if there were no matching rows.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT student.student_name,COUNT(*)</code></strong>
    -&gt;        <strong class="userinput"><code>FROM student,course</code></strong>
    -&gt;        <strong class="userinput"><code>WHERE student.student_id=course.student_id</code></strong>
    -&gt;        <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p>
            <a class="link" href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> is somewhat
            different in that it returns a count of the number of rows
            retrieved, whether or not they contain
            <code class="literal">NULL</code> values.
          </p><p>
            <a class="link" href="functions.html#function_count"><code class="literal">COUNT(*)</code></a> is optimized to
            return very quickly if the
            <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> retrieves from one
            table, no other columns are retrieved, and there is no
            <code class="literal">WHERE</code> clause. For example:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM student;</code></strong>
</pre><p>
            This optimization applies only to <code class="literal">MyISAM</code>
            tables only, because an exact row count is stored for this
            storage engine and can be accessed very quickly. For
            transactional storage engines such as
            <code class="literal">InnoDB</code>, storing an exact row count is
            more problematic because multiple transactions may be
            occurring, each of which may affect the count.
          </p></li><li class="listitem"><p><a name="function_count-distinct"></a>
            <a class="indexterm" name="idp67871680"></a>

            <a class="indexterm" name="idp67872752"></a>

            <a class="link" href="functions.html#function_count"><code class="literal">COUNT(DISTINCT
            <em class="replaceable"><code>expr</code></em>,[<em class="replaceable"><code>expr</code></em>...])</code></a>
          </p><p>
            Returns a count of the number of rows with different
            non-<code class="literal">NULL</code> <em class="replaceable"><code>expr</code></em>
            values.
          </p><p>
            <a class="link" href="functions.html#function_count"><code class="literal">COUNT(DISTINCT)</code></a> returns
            <code class="literal">0</code> if there were no matching rows.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COUNT(DISTINCT results) FROM student;</code></strong>
</pre><p>
            In MySQL, you can obtain the number of distinct expression
            combinations that do not contain <code class="literal">NULL</code> by
            giving a list of expressions. In standard SQL, you would
            have to do a concatenation of all expressions inside
            <a class="link" href="functions.html#function_count"><code class="literal">COUNT(DISTINCT ...)</code></a>.
          </p></li><li class="listitem"><p><a name="function_group-concat"></a>
            <a class="indexterm" name="idp67888352"></a>

            <a class="link" href="functions.html#function_group-concat"><code class="literal">GROUP_CONCAT(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            This function returns a string result with the concatenated
            non-<code class="literal">NULL</code> values from a group. It returns
            <code class="literal">NULL</code> if there are no
            non-<code class="literal">NULL</code> values. The full syntax is as
            follows:
          </p><pre class="programlisting">GROUP_CONCAT([DISTINCT] <em class="replaceable"><code>expr</code></em> [,<em class="replaceable"><code>expr</code></em> ...]
             [ORDER BY {<em class="replaceable"><code>unsigned_integer</code></em> | <em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>expr</code></em>}
                 [ASC | DESC] [,<em class="replaceable"><code>col_name</code></em> ...]]
             [SEPARATOR <em class="replaceable"><code>str_val</code></em>])
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT student_name,</code></strong>
    -&gt;     <strong class="userinput"><code>GROUP_CONCAT(test_score)</code></strong>
    -&gt;     <strong class="userinput"><code>FROM student</code></strong>
    -&gt;     <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p>
            Or:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT student_name,</code></strong>
    -&gt;     <strong class="userinput"><code>GROUP_CONCAT(DISTINCT test_score</code></strong>
    -&gt;               <strong class="userinput"><code>ORDER BY test_score DESC SEPARATOR ' ')</code></strong>
    -&gt;     <strong class="userinput"><code>FROM student</code></strong>
    -&gt;     <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p>
            In MySQL, you can get the concatenated values of expression
            combinations. To eliminate duplicate values, use the
            <code class="literal">DISTINCT</code> clause. To sort values in the
            result, use the <code class="literal">ORDER BY</code> clause. To sort
            in reverse order, add the <code class="literal">DESC</code>
            (descending) keyword to the name of the column you are
            sorting by in the <code class="literal">ORDER BY</code> clause. The
            default is ascending order; this may be specified explicitly
            using the <code class="literal">ASC</code> keyword. The default
            separator between values in a group is comma
            (<span class="quote">“<span class="quote"><code class="literal">,</code></span>”</span>). To specify a
            separator explicitly, use <code class="literal">SEPARATOR</code>
            followed by the string literal value that should be inserted
            between group values. To eliminate the separator altogether,
            specify <code class="literal">SEPARATOR ''</code>.
          </p><p>
            The result is truncated to the maximum length that is given
            by the <a class="link" href="server-administration.html#sysvar_group_concat_max_len"><code class="literal">group_concat_max_len</code></a>
            system variable, which has a default value of 1024. The
            value can be set higher, although the effective maximum
            length of the return value is constrained by the value of
            <a class="link" href="server-administration.html#sysvar_max_allowed_packet"><code class="literal">max_allowed_packet</code></a>. The
            syntax to change the value of
            <a class="link" href="server-administration.html#sysvar_group_concat_max_len"><code class="literal">group_concat_max_len</code></a> at
            runtime is as follows, where <em class="replaceable"><code>val</code></em>
            is an unsigned integer:
          </p><pre class="programlisting">SET [GLOBAL | SESSION] group_concat_max_len = <em class="replaceable"><code>val</code></em>;
</pre><p>
            The return value is a nonbinary or binary string, depending
            on whether the arguments are nonbinary or binary strings.
            The result type is <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">TEXT</code></a> or
            <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> unless
            <a class="link" href="server-administration.html#sysvar_group_concat_max_len"><code class="literal">group_concat_max_len</code></a> is
            less than or equal to 512, in which case the result type is
            <a class="link" href="data-types.html#char" title="11.4.1. The CHAR and VARCHAR Types"><code class="literal">VARCHAR</code></a> or
            <a class="link" href="data-types.html#binary-varbinary" title="11.4.2. The BINARY and VARBINARY Types"><code class="literal">VARBINARY</code></a>.
          </p><p>
            See also <a class="link" href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> and
            <a class="link" href="functions.html#function_concat-ws"><code class="literal">CONCAT_WS()</code></a>:
            <a class="xref" href="functions.html#string-functions" title="12.5. String Functions">Section 12.5, “String Functions”</a>.
          </p></li><li class="listitem"><p><a name="function_max"></a>
            <a class="indexterm" name="idp67930032"></a>

            <a class="indexterm" name="idp67931104"></a>

            <a class="indexterm" name="idp67932176"></a>

            <a class="link" href="functions.html#function_max"><code class="literal">MAX([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the maximum value of
            <em class="replaceable"><code>expr</code></em>.
            <a class="link" href="functions.html#function_max"><code class="literal">MAX()</code></a> may take a string
            argument; in such cases, it returns the maximum string
            value. See <a class="xref" href="optimization.html#mysql-indexes" title="8.3.1. How MySQL Uses Indexes">Section 8.3.1, “How MySQL Uses Indexes”</a>. The
            <code class="literal">DISTINCT</code> keyword can be used to find the
            maximum of the distinct values of
            <em class="replaceable"><code>expr</code></em>, however, this produces the
            same result as omitting <code class="literal">DISTINCT</code>.
          </p><p>
            <a class="link" href="functions.html#function_max"><code class="literal">MAX()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT student_name, MIN(test_score), MAX(test_score)</code></strong>
    -&gt;        <strong class="userinput"><code>FROM student</code></strong>
    -&gt;        <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p>
            For <a class="link" href="functions.html#function_max"><code class="literal">MAX()</code></a>, MySQL currently
            compares <a class="link" href="data-types.html#enum" title="11.4.4. The ENUM Type"><code class="literal">ENUM</code></a> and
            <a class="link" href="data-types.html#set" title="11.4.5. The SET Type"><code class="literal">SET</code></a> columns by their string
            value rather than by the string's relative position in the
            set. This differs from how <code class="literal">ORDER BY</code>
            compares them. This is expected to be rectified in a future
            MySQL release.
          </p></li><li class="listitem"><p><a name="function_min"></a>
            <a class="indexterm" name="idp67953152"></a>

            <a class="indexterm" name="idp67954224"></a>

            <a class="indexterm" name="idp67955296"></a>

            <a class="link" href="functions.html#function_min"><code class="literal">MIN([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the minimum value of
            <em class="replaceable"><code>expr</code></em>.
            <a class="link" href="functions.html#function_min"><code class="literal">MIN()</code></a> may take a string
            argument; in such cases, it returns the minimum string
            value. See <a class="xref" href="optimization.html#mysql-indexes" title="8.3.1. How MySQL Uses Indexes">Section 8.3.1, “How MySQL Uses Indexes”</a>. The
            <code class="literal">DISTINCT</code> keyword can be used to find the
            minimum of the distinct values of
            <em class="replaceable"><code>expr</code></em>, however, this produces the
            same result as omitting <code class="literal">DISTINCT</code>.
          </p><p>
            <a class="link" href="functions.html#function_min"><code class="literal">MIN()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT student_name, MIN(test_score), MAX(test_score)</code></strong>
    -&gt;        <strong class="userinput"><code>FROM student</code></strong>
    -&gt;        <strong class="userinput"><code>GROUP BY student_name;</code></strong>
</pre><p>
            For <a class="link" href="functions.html#function_min"><code class="literal">MIN()</code></a>, MySQL currently
            compares <a class="link" href="data-types.html#enum" title="11.4.4. The ENUM Type"><code class="literal">ENUM</code></a> and
            <a class="link" href="data-types.html#set" title="11.4.5. The SET Type"><code class="literal">SET</code></a> columns by their string
            value rather than by the string's relative position in the
            set. This differs from how <code class="literal">ORDER BY</code>
            compares them. This is expected to be rectified in a future
            MySQL release.
          </p></li><li class="listitem"><p><a name="function_std"></a>
            <a class="indexterm" name="idp67976272"></a>

            <a class="link" href="functions.html#function_std"><code class="literal">STD(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the population standard deviation of
            <em class="replaceable"><code>expr</code></em>. This is an extension to
            standard SQL. The standard SQL function
            <a class="link" href="functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a> can be used
            instead.
          </p><p>
            This function returns <code class="literal">NULL</code> if there were
            no matching rows.
          </p></li><li class="listitem"><p><a name="function_stddev"></a>
            <a class="indexterm" name="idp67986288"></a>

            <a class="indexterm" name="idp67987360"></a>

            <a class="indexterm" name="idp67988432"></a>

            <a class="link" href="functions.html#function_stddev"><code class="literal">STDDEV(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the population standard deviation of
            <em class="replaceable"><code>expr</code></em>. This function is provided
            for compatibility with Oracle. The standard SQL function
            <a class="link" href="functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a> can be used
            instead.
          </p><p>
            This function returns <code class="literal">NULL</code> if there were
            no matching rows.
          </p></li><li class="listitem"><p><a name="function_stddev-pop"></a>
            <a class="indexterm" name="idp67998176"></a>

            <a class="link" href="functions.html#function_stddev-pop"><code class="literal">STDDEV_POP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the population standard deviation of
            <em class="replaceable"><code>expr</code></em> (the square root of
            <a class="link" href="functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a>). You can also use
            <a class="link" href="functions.html#function_std"><code class="literal">STD()</code></a> or
            <a class="link" href="functions.html#function_stddev"><code class="literal">STDDEV()</code></a>, which are
            equivalent but not standard SQL.
          </p><p>
            <a class="link" href="functions.html#function_stddev-pop"><code class="literal">STDDEV_POP()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p></li><li class="listitem"><p><a name="function_stddev-samp"></a>
            <a class="indexterm" name="idp68009952"></a>

            <a class="link" href="functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the sample standard deviation of
            <em class="replaceable"><code>expr</code></em> (the square root of
            <a class="link" href="functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a>.
          </p><p>
            <a class="link" href="functions.html#function_stddev-samp"><code class="literal">STDDEV_SAMP()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p></li><li class="listitem"><p><a name="function_sum"></a>
            <a class="indexterm" name="idp68020640"></a>

            <a class="indexterm" name="idp68021712"></a>

            <a class="indexterm" name="idp68022784"></a>

            <a class="link" href="functions.html#function_sum"><code class="literal">SUM([DISTINCT]
            <em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the sum of <em class="replaceable"><code>expr</code></em>. If the
            return set has no rows, <a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a>
            returns <code class="literal">NULL</code>. The
            <code class="literal">DISTINCT</code> keyword can be used to sum only
            the distinct values of <em class="replaceable"><code>expr</code></em>.
          </p><p>
            <a class="link" href="functions.html#function_sum"><code class="literal">SUM()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p></li><li class="listitem"><p><a name="function_var-pop"></a>
            <a class="indexterm" name="idp68035152"></a>

            <a class="link" href="functions.html#function_var-pop"><code class="literal">VAR_POP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the population standard variance of
            <em class="replaceable"><code>expr</code></em>. It considers rows as the
            whole population, not as a sample, so it has the number of
            rows as the denominator. You can also use
            <a class="link" href="functions.html#function_variance"><code class="literal">VARIANCE()</code></a>, which is
            equivalent but is not standard SQL.
          </p><p>
            <a class="link" href="functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p></li><li class="listitem"><p><a name="function_var-samp"></a>
            <a class="indexterm" name="idp68045344"></a>

            <a class="link" href="functions.html#function_var-samp"><code class="literal">VAR_SAMP(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the sample variance of
            <em class="replaceable"><code>expr</code></em>. That is, the denominator is
            the number of rows minus one.
          </p><p>
            <a class="link" href="functions.html#function_var-samp"><code class="literal">VAR_SAMP()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
          </p></li><li class="listitem"><p><a name="function_variance"></a>
            <a class="indexterm" name="idp68054560"></a>

            <a class="link" href="functions.html#function_variance"><code class="literal">VARIANCE(<em class="replaceable"><code>expr</code></em>)</code></a>
          </p><p>
            Returns the population standard variance of
            <em class="replaceable"><code>expr</code></em>. This is an extension to
            standard SQL. The standard SQL function
            <a class="link" href="functions.html#function_var-pop"><code class="literal">VAR_POP()</code></a> can be used
            instead.
          </p><p>
            <a class="link" href="functions.html#function_variance"><code class="literal">VARIANCE()</code></a> returns
            <code class="literal">NULL</code> if there were no matching rows.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-modifiers"></a>12.17.2. <code class="literal">GROUP BY</code> Modifiers</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp68064320"></a><a class="indexterm" name="idp68065392"></a><p>
        The <code class="literal">GROUP BY</code> clause permits a <code class="literal">WITH
        ROLLUP</code> modifier that causes extra rows to be added to
        the summary output. These rows represent higher-level (or
        super-aggregate) summary operations. <code class="literal">ROLLUP</code>
        thus enables you to answer questions at multiple levels of
        analysis with a single query. It can be used, for example, to
        provide support for OLAP (Online Analytical Processing)
        operations.
      </p><p>
        Suppose that a table named <code class="literal">sales</code> has
        <code class="literal">year</code>, <code class="literal">country</code>,
        <code class="literal">product</code>, and <code class="literal">profit</code>
        columns for recording sales profitability:
      </p><pre class="programlisting">CREATE TABLE sales
(
    year    INT NOT NULL,
    country VARCHAR(20) NOT NULL,
    product VARCHAR(32) NOT NULL,
    profit  INT
);</pre><p>
        The table's contents can be summarized per year with a simple
        <code class="literal">GROUP BY</code> like this:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT year, SUM(profit) FROM sales GROUP BY year;</code></strong>
+------+-------------+
| year | SUM(profit) |
+------+-------------+
| 2000 |        4525 |
| 2001 |        3010 |
+------+-------------+
</pre><p>
        This output shows the total profit for each year, but if you
        also want to determine the total profit summed over all years,
        you must add up the individual values yourself or run an
        additional query.
      </p><p>
        Or you can use <code class="literal">ROLLUP</code>, which provides both
        levels of analysis with a single query. Adding a <code class="literal">WITH
        ROLLUP</code> modifier to the <code class="literal">GROUP BY</code>
        clause causes the query to produce another row that shows the
        grand total over all year values:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT year, SUM(profit) FROM sales GROUP BY year WITH ROLLUP;</code></strong>
+------+-------------+
| year | SUM(profit) |
+------+-------------+
| 2000 |        4525 |
| 2001 |        3010 |
| NULL |        7535 |
+------+-------------+
</pre><p>
        The grand total super-aggregate line is identified by the value
        <code class="literal">NULL</code> in the <code class="literal">year</code> column.
      </p><p>
        <code class="literal">ROLLUP</code> has a more complex effect when there
        are multiple <code class="literal">GROUP BY</code> columns. In this case,
        each time there is a <span class="quote">“<span class="quote">break</span>”</span> (change in value) in
        any but the last grouping column, the query produces an extra
        super-aggregate summary row.
      </p><p>
        For example, without <code class="literal">ROLLUP</code>, a summary on the
        <code class="literal">sales</code> table based on <code class="literal">year</code>,
        <code class="literal">country</code>, and <code class="literal">product</code> might
        look like this:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT year, country, product, SUM(profit)</code></strong>
    -&gt; <strong class="userinput"><code>FROM sales</code></strong>
    -&gt; <strong class="userinput"><code>GROUP BY year, country, product;</code></strong>
+------+---------+------------+-------------+
| year | country | product    | SUM(profit) |
+------+---------+------------+-------------+
| 2000 | Finland | Computer   |        1500 |
| 2000 | Finland | Phone      |         100 |
| 2000 | India   | Calculator |         150 |
| 2000 | India   | Computer   |        1200 |
| 2000 | USA     | Calculator |          75 |
| 2000 | USA     | Computer   |        1500 |
| 2001 | Finland | Phone      |          10 |
| 2001 | USA     | Calculator |          50 |
| 2001 | USA     | Computer   |        2700 |
| 2001 | USA     | TV         |         250 |
+------+---------+------------+-------------+
</pre><p>
        The output indicates summary values only at the
        year/country/product level of analysis. When
        <code class="literal">ROLLUP</code> is added, the query produces several
        extra rows:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT year, country, product, SUM(profit)</code></strong>
    -&gt; <strong class="userinput"><code>FROM sales</code></strong>
    -&gt; <strong class="userinput"><code>GROUP BY year, country, product WITH ROLLUP;</code></strong>
+------+---------+------------+-------------+
| year | country | product    | SUM(profit) |
+------+---------+------------+-------------+
| 2000 | Finland | Computer   |        1500 |
| 2000 | Finland | Phone      |         100 |
| 2000 | Finland | NULL       |        1600 |
| 2000 | India   | Calculator |         150 |
| 2000 | India   | Computer   |        1200 |
| 2000 | India   | NULL       |        1350 |
| 2000 | USA     | Calculator |          75 |
| 2000 | USA     | Computer   |        1500 |
| 2000 | USA     | NULL       |        1575 |
| 2000 | NULL    | NULL       |        4525 |
| 2001 | Finland | Phone      |          10 |
| 2001 | Finland | NULL       |          10 |
| 2001 | USA     | Calculator |          50 |
| 2001 | USA     | Computer   |        2700 |
| 2001 | USA     | TV         |         250 |
| 2001 | USA     | NULL       |        3000 |
| 2001 | NULL    | NULL       |        3010 |
| NULL | NULL    | NULL       |        7535 |
+------+---------+------------+-------------+
</pre><p>
        For this query, adding <code class="literal">ROLLUP</code> causes the
        output to include summary information at four levels of
        analysis, not just one. Here is how to interpret the
        <code class="literal">ROLLUP</code> output:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Following each set of product rows for a given year and
            country, an extra summary row is produced showing the total
            for all products. These rows have the
            <code class="literal">product</code> column set to
            <code class="literal">NULL</code>.
          </p></li><li class="listitem"><p>
            Following each set of rows for a given year, an extra
            summary row is produced showing the total for all countries
            and products. These rows have the <code class="literal">country</code>
            and <code class="literal">products</code> columns set to
            <code class="literal">NULL</code>.
          </p></li><li class="listitem"><p>
            Finally, following all other rows, an extra summary row is
            produced showing the grand total for all years, countries,
            and products. This row has the <code class="literal">year</code>,
            <code class="literal">country</code>, and <code class="literal">products</code>
            columns set to <code class="literal">NULL</code>.
</p></li></ul>
</div>
<h4><a name="idp68112624"></a>
        Other Considerations When using <code class="literal">ROLLUP</code>
</h4>
<p>
        The following items list some behaviors specific to the MySQL
        implementation of <code class="literal">ROLLUP</code>.
      </p><p>
        When you use <code class="literal">ROLLUP</code>, you cannot also use an
        <code class="literal">ORDER BY</code> clause to sort the results. In other
        words, <code class="literal">ROLLUP</code> and <code class="literal">ORDER BY</code>
        are mutually exclusive. However, you still have some control
        over sort order. <code class="literal">GROUP BY</code> in MySQL sorts
        results, and you can use explicit <code class="literal">ASC</code> and
        <code class="literal">DESC</code> keywords with columns named in the
        <code class="literal">GROUP BY</code> list to specify sort order for
        individual columns. (The higher-level summary rows added by
        <code class="literal">ROLLUP</code> still appear after the rows from which
        they are calculated, regardless of the sort order.)
      </p><p>
        <code class="literal">LIMIT</code> can be used to restrict the number of
        rows returned to the client. <code class="literal">LIMIT</code> is applied
        after <code class="literal">ROLLUP</code>, so the limit applies against
        the extra rows added by <code class="literal">ROLLUP</code>. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT year, country, product, SUM(profit)</code></strong>
    -&gt; <strong class="userinput"><code>FROM sales</code></strong>
    -&gt; <strong class="userinput"><code>GROUP BY year, country, product WITH ROLLUP</code></strong>
    -&gt; <strong class="userinput"><code>LIMIT 5;</code></strong>
+------+---------+------------+-------------+
| year | country | product    | SUM(profit) |
+------+---------+------------+-------------+
| 2000 | Finland | Computer   |        1500 |
| 2000 | Finland | Phone      |         100 |
| 2000 | Finland | NULL       |        1600 |
| 2000 | India   | Calculator |         150 |
| 2000 | India   | Computer   |        1200 |
+------+---------+------------+-------------+
</pre><p>
        Using <code class="literal">LIMIT</code> with <code class="literal">ROLLUP</code>
        may produce results that are more difficult to interpret,
        because you have less context for understanding the
        super-aggregate rows.
      </p><p>
        The <code class="literal">NULL</code> indicators in each super-aggregate
        row are produced when the row is sent to the client. The server
        looks at the columns named in the <code class="literal">GROUP BY</code>
        clause following the leftmost one that has changed value. For
        any column in the result set with a name that is a lexical match
        to any of those names, its value is set to
        <code class="literal">NULL</code>. (If you specify grouping columns by
        column number, the server identifies which columns to set to
        <code class="literal">NULL</code> by number.)
      </p><p>
        Because the <code class="literal">NULL</code> values in the
        super-aggregate rows are placed into the result set at such a
        late stage in query processing, you cannot test them as
        <code class="literal">NULL</code> values within the query itself. For
        example, you cannot add <code class="literal">HAVING product IS
        NULL</code> to the query to eliminate from the output all but
        the super-aggregate rows.
      </p><p>
        On the other hand, the <code class="literal">NULL</code> values do appear
        as <code class="literal">NULL</code> on the client side and can be tested
        as such using any MySQL client programming interface.
      </p><p>
        MySQL permits a column that does not appear in the
        <code class="literal">GROUP BY</code> list to be named in the select list.
        In this case, the server is free to choose any value from this
        nonaggregated column in summary rows, and this includes the
        extra rows added by <code class="literal">WITH ROLLUP</code>. For example,
        in the following query, <code class="literal">country</code> is a
        nonaggregated column that does not appear in the <code class="literal">GROUP
        BY</code> list and values chosen for this column are
        indeterminate:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT year, country, SUM(profit)</code></strong>
    -&gt; <strong class="userinput"><code>FROM sales GROUP BY year WITH ROLLUP;</code></strong>
+------+---------+-------------+
| year | country | SUM(profit) |
+------+---------+-------------+
| 2000 | India   |        4525 |
| 2001 | USA     |        3010 |
| NULL | USA     |        7535 |
+------+---------+-------------+
</pre><p>
        This behavior occurs if the
        <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a> SQL mode is
        not enabled. If that mode is enabled, the server rejects the
        query as illegal because <code class="literal">country</code> is not
        listed in the <code class="literal">GROUP BY</code> clause. For more
        information about nonaggregated columns and <code class="literal">GROUP
        BY</code>, see <a class="xref" href="functions.html#group-by-extensions" title="12.17.3. MySQL Extensions to GROUP BY">Section 12.17.3, “MySQL Extensions to <code class="literal">GROUP BY</code>”</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="group-by-extensions"></a>12.17.3. MySQL Extensions to <code class="literal">GROUP BY</code></h3>

</div>

</div>

</div>
<a class="indexterm" name="idp68152112"></a><a class="indexterm" name="idp68153616"></a><a class="indexterm" name="idp68155104"></a><p>
        In standard SQL, a query that includes a <code class="literal">GROUP
        BY</code> clause cannot refer to nonaggregated columns in the
        select list that are not named in the <code class="literal">GROUP
        BY</code> clause. For example, this query is illegal in
        standard SQL because the <code class="literal">name</code> column in the
        select list does not appear in the <code class="literal">GROUP BY</code>:
      </p><pre class="programlisting">SELECT o.custid, c.name, MAX(o.payment)
  FROM orders AS o, customers AS c
  WHERE o.custid = c.custid
  GROUP BY o.custid;</pre><p>
        For the query to be legal, the <code class="literal">name</code> column
        must be omitted from the select list or named in the
        <code class="literal">GROUP BY</code> clause.
      </p><p>
        MySQL extends the use of <code class="literal">GROUP BY</code> so that the
        select list can refer to nonaggregated columns not named in the
        <code class="literal">GROUP BY</code> clause. This means that the
        preceding query is legal in MySQL. You can use this feature to
        get better performance by avoiding unnecessary column sorting
        and grouping. However, this is useful primarily when all values
        in each nonaggregated column not named in the <code class="literal">GROUP
        BY</code> are the same for each group. The server is free to
        choose any value from each group, so unless they are the same,
        the values chosen are indeterminate. Furthermore, the selection
        of values from each group cannot be influenced by adding an
        <code class="literal">ORDER BY</code> clause. Sorting of the result set
        occurs after values have been chosen, and <code class="literal">ORDER
        BY</code> does not affect which values within each group the
        server chooses.
      </p><p>
        A similar MySQL extension applies to the
        <code class="literal">HAVING</code> clause. In standard SQL, a query that
        includes a <code class="literal">GROUP BY</code> clause cannot refer to
        nonaggregated columns in the <code class="literal">HAVING</code> clause
        that are not named in the <code class="literal">GROUP BY</code> clause. A
        MySQL extension permits references to such columns to simplify
        calculations. This extension assumes that the nongrouped columns
        will have the same group-wise values. Otherwise, the result is
        indeterminate.
      </p><p>
        To disable the MySQL <code class="literal">GROUP BY</code> extension,
        enable the <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a>
        SQL mode. This enables standard SQL behavior: Columns not named
        in the <code class="literal">GROUP BY</code> clause cannot be used in the
        select list or <code class="literal">HAVING</code> clause unless enclosed
        in an aggregate function.
      </p><p>
        <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a> also
        affects use of aliases in the <code class="literal">HAVING</code> clauses.
        For example, the following query returns <code class="literal">name</code>
        values that occur only once in table <code class="literal">orders</code>:
      </p><pre class="programlisting">SELECT name, COUNT(name) FROM orders
  GROUP BY name
  HAVING COUNT(name) = 1;</pre><p>
        MySQL extends this behavior to permit the use of an alias in the
        <code class="literal">HAVING</code> clause for the aggregated column:
      </p><pre class="programlisting">SELECT name, COUNT(name) AS c FROM orders
  GROUP BY name
  HAVING c = 1;</pre><p>
        Enabling <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a>
        disables this MySQL extension and a <code class="literal">non-grouping field
        'c' is used in HAVING clause</code> error occurs because the
        column <code class="literal">c</code> in the <code class="literal">HAVING</code>
        clause is not enclosed in an aggregate function (instead, it
        <span class="emphasis"><em>is</em></span> an aggregate function).
      </p><p>
        The select list extension also applies to <code class="literal">ORDER
        BY</code>. That is, you can refer to nonaggregated columns in
        the <code class="literal">ORDER BY</code> clause that do not appear in the
        <code class="literal">GROUP BY</code> clause. (However, as mentioned
        previously, <code class="literal">ORDER BY</code> does not affect which
        values are chosen from nonaggregated columns; it only sorts them
        after they have been chosen.) This extension does not apply if
        the <a class="link" href="server-administration.html#sqlmode_only_full_group_by"><code class="literal">ONLY_FULL_GROUP_BY</code></a> SQL
        mode is enabled.
      </p><p>
        In some cases, you can use <a class="link" href="functions.html#function_min"><code class="literal">MIN()</code></a>
        and <a class="link" href="functions.html#function_max"><code class="literal">MAX()</code></a> to obtain a specific
        column value even if it is not unique. If the
        <code class="literal">sort</code> column contains integers no larger than
        6 digits, the following query gives the value of
        <code class="literal">column</code> from the row containing the smallest
        <code class="literal">sort</code> value:
      </p><pre class="programlisting">SUBSTR(MIN(CONCAT(LPAD(sort,6,'0'),column)),7)</pre><p>
        See <a class="xref" href="tutorial.html#example-maximum-column-group-row" title="3.6.4. The Rows Holding the Group-wise Maximum of a Certain Column">Section 3.6.4, “The Rows Holding the Group-wise Maximum of a Certain Column”</a>.
      </p><a class="indexterm" name="idp68195920"></a><a class="indexterm" name="idp68197408"></a><a class="indexterm" name="idp68198896"></a><a class="indexterm" name="idp68199968"></a><p>
        If you are trying to follow standard SQL, you cannot use
        expressions in <code class="literal">GROUP BY</code> clauses. As a
        workaround, use an alias for the expression:
      </p><pre class="programlisting">SELECT id, FLOOR(value/100) AS val
  FROM <em class="replaceable"><code>tbl_name</code></em>
  GROUP BY id, val;
</pre><p>
        MySQL permits expressions in <code class="literal">GROUP BY</code>
        clauses, so the alias is unnecessary:
      </p><pre class="programlisting">SELECT id, FLOOR(value/100)
  FROM <em class="replaceable"><code>tbl_name</code></em>
  GROUP BY id, FLOOR(value/100);
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="spatial-extensions"></a>12.18. Spatial Extensions</h2>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#gis-introduction">12.18.1. Introduction to MySQL Spatial Support</a></span></dt><dt><span class="section"><a href="functions.html#opengis-geometry-model">12.18.2. The OpenGIS Geometry Model</a></span></dt><dt><span class="section"><a href="functions.html#supported-spatial-data-formats">12.18.3. Supported Spatial Data Formats</a></span></dt><dt><span class="section"><a href="functions.html#creating-a-spatially-enabled-mysql-database">12.18.4. Creating a Spatially Enabled MySQL Database</a></span></dt><dt><span class="section"><a href="functions.html#spatial-analysis-functions">12.18.5. Spatial Analysis Functions</a></span></dt><dt><span class="section"><a href="functions.html#optimizing-spatial-analysis">12.18.6. Optimizing Spatial Analysis</a></span></dt><dt><span class="section"><a href="functions.html#mysql-gis-conformance-and-compatibility">12.18.7. MySQL Conformance and Compatibility</a></span></dt></dl>
</div>
<a class="indexterm" name="idp68207456"></a><p>
    MySQL supports spatial extensions to enable the generation, storage,
    and analysis of geographic features. These features are available
    for <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>,
    <a class="link" href="mysql-cluster.html" title="Chapter 17. MySQL Cluster NDB 7.3"><code class="literal">NDB</code></a>, and <code class="literal">ARCHIVE</code>
    tables.
  </p><p>
    For spatial columns, <code class="literal">MyISAM</code> supports both
    <code class="literal">SPATIAL</code> and non-<code class="literal">SPATIAL</code>
    indexes. Other storage engines support
    non-<code class="literal">SPATIAL</code> indexes, as described in
    <a class="xref" href="sql-syntax.html#create-index" title="13.1.13. CREATE INDEX Syntax">Section 13.1.13, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
  </p><p>
    This chapter covers the following topics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        The basis of these spatial extensions in the OpenGIS geometry
        model
      </p></li><li class="listitem"><p>
        Data formats for representing spatial data
      </p></li><li class="listitem"><p>
        How to use spatial data in MySQL
      </p></li><li class="listitem"><p>
        Use of indexing for spatial data
      </p></li><li class="listitem"><p>
        MySQL differences from the OpenGIS specification
</p></li></ul>
</div>
<h3><a name="idp68221792"></a>
    Additional Resources
</h3>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        The Open Geospatial Consortium publishes the
        <em class="citetitle">OpenGIS® Simple Features Specifications For
        SQL</em>, a document that proposes several conceptual
        ways for extending an SQL RDBMS to support spatial data. This
        specification is available from the OGC Web site at
        <a class="ulink" href="http://www.opengis.org/docs/99-049.pdf" target="_top">http://www.opengis.org/docs/99-049.pdf</a>.
      </p></li><li class="listitem"><p>
        If you have questions or concerns about the use of the spatial
        extensions to MySQL, you can discuss them in the GIS forum:
        <a class="ulink" href="http://forums.mysql.com/list.php?23" target="_top">http://forums.mysql.com/list.php?23</a>.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="gis-introduction"></a>12.18.1. Introduction to MySQL Spatial Support</h3>

</div>

</div>

</div>
<a class="indexterm" name="idp68227216"></a><a class="indexterm" name="idp68228304"></a><a class="indexterm" name="idp68229344"></a><p>
      MySQL implements spatial extensions following the specification of
      the Open Geospatial Consortium (OGC). This is an international
      consortium of more than 250 companies, agencies, and universities
      participating in the development of publicly available conceptual
      solutions that can be useful with all kinds of applications that
      manage spatial data. The OGC maintains a Web site at
      <a class="ulink" href="http://www.opengis.org/" target="_top">http://www.opengis.org/</a>.
    </p><p>
      In 1997, the Open Geospatial Consortium published the
      <em class="citetitle">OpenGIS® Simple Features Specifications For
      SQL</em>, a document that proposes several conceptual ways
      for extending an SQL RDBMS to support spatial data. This
      specification is available from the OGC Web site at
      <a class="ulink" href="http://www.opengis.org/docs/99-049.pdf" target="_top">http://www.opengis.org/docs/99-049.pdf</a>. It contains
      additional information relevant to this chapter.
    </p><p>
      MySQL implements a subset of the <span class="bold"><strong>SQL with
      Geometry Types</strong></span> environment proposed by OGC. This term
      refers to an SQL environment that has been extended with a set of
      geometry types. A geometry-valued SQL column is implemented as a
      column that has a geometry type. The specification describe a set
      of SQL geometry types, as well as functions on those types to
      create and analyze geometry values.
    </p><a class="indexterm" name="idp68235136"></a><p>
      A <span class="bold"><strong>geographic feature</strong></span> is anything
      in the world that has a location. A feature can be:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          An entity. For example, a mountain, a pond, a city.
        </p></li><li class="listitem"><p>
          A space. For example, town district, the tropics.
        </p></li><li class="listitem"><p>
          A definable location. For example, a crossroad, as a
          particular place where two streets intersect.
</p></li></ul>
</div>
<a class="indexterm" name="idp68240400"></a><p>
      Some documents use the term <span class="bold"><strong>geospatial
      feature</strong></span> to refer to geographic features.
    </p><a class="indexterm" name="idp68242656"></a><p>
      <span class="bold"><strong>Geometry</strong></span> is another word that
      denotes a geographic feature. Originally the word
      <span class="bold"><strong>geometry</strong></span> meant measurement of the
      earth. Another meaning comes from cartography, referring to the
      geometric features that cartographers use to map the world.
    </p><p>
      This chapter uses all of these terms synonymously:
      <span class="bold"><strong>geographic feature</strong></span>,
      <span class="bold"><strong>geospatial feature</strong></span>,
      <span class="bold"><strong>feature</strong></span>, or
      <span class="bold"><strong>geometry</strong></span>. Here, the term most
      commonly used is <span class="bold"><strong>geometry</strong></span>,
      defined as <span class="emphasis"><em>a point or an aggregate of points
      representing anything in the world that has a location</em></span>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="opengis-geometry-model"></a>12.18.2. The OpenGIS Geometry Model</h3>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#gis-geometry-class-hierarchy">12.18.2.1. The Geometry Class Hierarchy</a></span></dt><dt><span class="section"><a href="functions.html#gis-class-geometry">12.18.2.2. Class <code class="literal">Geometry</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-point">12.18.2.3. Class <code class="literal">Point</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-curve">12.18.2.4. Class <code class="literal">Curve</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-linestring">12.18.2.5. Class <code class="literal">LineString</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-surface">12.18.2.6. Class <code class="literal">Surface</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-polygon">12.18.2.7. Class <code class="literal">Polygon</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-geometrycollection">12.18.2.8. Class <code class="literal">GeometryCollection</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-multipoint">12.18.2.9. Class <code class="literal">MultiPoint</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-multicurve">12.18.2.10. Class <code class="literal">MultiCurve</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-multilinestring">12.18.2.11. Class <code class="literal">MultiLineString</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-multisurface">12.18.2.12. Class <code class="literal">MultiSurface</code></a></span></dt><dt><span class="section"><a href="functions.html#gis-class-multipolygon">12.18.2.13. Class <code class="literal">MultiPolygon</code></a></span></dt></dl>
</div>
<p>
      The set of geometry types proposed by OGC's
      <span class="bold"><strong>SQL with Geometry Types</strong></span>
      environment is based on the <span class="bold"><strong>OpenGIS Geometry
      Model</strong></span>. In this model, each geometric object has the
      following general properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          It is associated with a Spatial Reference System, which
          describes the coordinate space in which the object is defined.
        </p></li><li class="listitem"><p>
          It belongs to some geometry class.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-geometry-class-hierarchy"></a>12.18.2.1. The Geometry Class Hierarchy</h4>

</div>

</div>

</div>
<p>
        The geometry classes define a hierarchy as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">Geometry</code> (noninstantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">Point</code> (instantiable)
              </p></li><li class="listitem"><p>
                <code class="literal">Curve</code> (noninstantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">LineString</code> (instantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">Line</code>
                      </p></li><li class="listitem"><p>
                        <code class="literal">LinearRing</code>
</p></li></ul>
</div>
</li></ul>
</div>
</li><li class="listitem"><p>
                <code class="literal">Surface</code> (noninstantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">Polygon</code> (instantiable)
</p></li></ul>
</div>
</li><li class="listitem"><p>
                <code class="literal">GeometryCollection</code> (instantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">MultiPoint</code> (instantiable)
                  </p></li><li class="listitem"><p>
                    <code class="literal">MultiCurve</code> (noninstantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">MultiLineString</code>
                        (instantiable)
</p></li></ul>
</div>
</li><li class="listitem"><p>
                    <code class="literal">MultiSurface</code> (noninstantiable)
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <code class="literal">MultiPolygon</code> (instantiable)
</p></li></ul>
</div>
</li></ul>
</div>
</li></ul>
</div>
</li></ul>
</div>
<p>
        It is not possible to create objects in noninstantiable classes.
        It is possible to create objects in instantiable classes. All
        classes have properties, and instantiable classes may also have
        assertions (rules that define valid class instances).
      </p><p>
        <code class="literal">Geometry</code> is the base class. It is an abstract
        class. The instantiable subclasses of
        <code class="literal">Geometry</code> are restricted to zero-, one-, and
        two-dimensional geometric objects that exist in two-dimensional
        coordinate space. All instantiable geometry classes are defined
        so that valid instances of a geometry class are topologically
        closed (that is, all defined geometries include their boundary).
      </p><p>
        The base <code class="literal">Geometry</code> class has subclasses for
        <code class="literal">Point</code>, <code class="literal">Curve</code>,
        <code class="literal">Surface</code>, and
        <code class="literal">GeometryCollection</code>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">Point</code> represents zero-dimensional
            objects.
          </p></li><li class="listitem"><p>
            <code class="literal">Curve</code> represents one-dimensional objects,
            and has subclass <code class="literal">LineString</code>, with
            sub-subclasses <code class="literal">Line</code> and
            <code class="literal">LinearRing</code>.
          </p></li><li class="listitem"><p>
            <code class="literal">Surface</code> is designed for two-dimensional
            objects and has subclass <code class="literal">Polygon</code>.
          </p></li><li class="listitem"><p>
            <code class="literal">GeometryCollection</code> has specialized zero-,
            one-, and two-dimensional collection classes named
            <code class="literal">MultiPoint</code>,
            <code class="literal">MultiLineString</code>, and
            <code class="literal">MultiPolygon</code> for modeling geometries
            corresponding to collections of <code class="literal">Points</code>,
            <code class="literal">LineStrings</code>, and
            <code class="literal">Polygons</code>, respectively.
            <code class="literal">MultiCurve</code> and
            <code class="literal">MultiSurface</code> are introduced as abstract
            superclasses that generalize the collection interfaces to
            handle <code class="literal">Curves</code> and
            <code class="literal">Surfaces</code>.
</p></li></ul>
</div>
<p>
        <code class="literal">Geometry</code>, <code class="literal">Curve</code>,
        <code class="literal">Surface</code>, <code class="literal">MultiCurve</code>, and
        <code class="literal">MultiSurface</code> are defined as noninstantiable
        classes. They define a common set of methods for their
        subclasses and are included for extensibility.
      </p><p>
        <code class="literal">Point</code>, <code class="literal">LineString</code>,
        <code class="literal">Polygon</code>,
        <code class="literal">GeometryCollection</code>,
        <code class="literal">MultiPoint</code>,
        <code class="literal">MultiLineString</code>, and
        <code class="literal">MultiPolygon</code> are instantiable classes.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-geometry"></a>12.18.2.2. Class <code class="literal">Geometry</code></h4>

</div>

</div>

</div>
<p>
        <code class="literal">Geometry</code> is the root class of the hierarchy.
        It is a noninstantiable class but has a number of properties
        that are common to all geometry values created from any of the
        <code class="literal">Geometry</code> subclasses. These properties are
        described in the following list. Particular subclasses have
        their own specific properties, described later.
      </p><p>
        <span class="bold"><strong>Geometry Properties</strong></span>
      </p><p>
        A geometry value has the following properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Its <span class="bold"><strong>type</strong></span>. Each geometry
            belongs to one of the instantiable classes in the hierarchy.
          </p></li><li class="listitem"><p>
            Its <span class="bold"><strong>SRID</strong></span>, or Spatial
            Reference Identifier. This value identifies the geometry's
            associated Spatial Reference System that describes the
            coordinate space in which the geometry object is defined.
          </p><p>
            In MySQL, the SRID value is just an integer associated with
            the geometry value. All calculations are done assuming
            Euclidean (planar) geometry.
          </p></li><li class="listitem"><p>
            Its <span class="bold"><strong>coordinates</strong></span> in its
            Spatial Reference System, represented as double-precision
            (8-byte) numbers. All nonempty geometries include at least
            one pair of (X,Y) coordinates. Empty geometries contain no
            coordinates.
          </p><p>
            Coordinates are related to the SRID. For example, in
            different coordinate systems, the distance between two
            objects may differ even when objects have the same
            coordinates, because the distance on the
            <span class="bold"><strong>planar</strong></span> coordinate system
            and the distance on the
            <span class="bold"><strong>geocentric</strong></span> system
            (coordinates on the Earth's surface) are different things.
          </p></li><li class="listitem"><p>
            Its <span class="bold"><strong>interior</strong></span>,
            <span class="bold"><strong>boundary</strong></span>, and
            <span class="bold"><strong>exterior</strong></span>.
          </p><p>
            Every geometry occupies some position in space. The exterior
            of a geometry is all space not occupied by the geometry. The
            interior is the space occupied by the geometry. The boundary
            is the interface between the geometry's interior and
            exterior.
          </p></li><li class="listitem"><p>
            Its <span class="bold"><strong>MBR</strong></span> (Minimum Bounding
            Rectangle), or Envelope. This is the bounding geometry,
            formed by the minimum and maximum (X,Y) coordinates:
          </p><pre class="programlisting">((MINX MINY, MAXX MINY, MAXX MAXY, MINX MAXY, MINX MINY))</pre></li><li class="listitem"><p>
            Whether the value is <span class="bold"><strong>simple</strong></span>
            or <span class="bold"><strong>nonsimple</strong></span>. Geometry
            values of types (<code class="literal">LineString</code>,
            <code class="literal">MultiPoint</code>,
            <code class="literal">MultiLineString</code>) are either simple or
            nonsimple. Each type determines its own assertions for being
            simple or nonsimple.
          </p></li><li class="listitem"><p>
            Whether the value is <span class="bold"><strong>closed</strong></span>
            or <span class="bold"><strong>not closed</strong></span>. Geometry
            values of types (<code class="literal">LineString</code>,
            <code class="literal">MultiString</code>) are either closed or not
            closed. Each type determines its own assertions for being
            closed or not closed.
          </p></li><li class="listitem"><p>
            Whether the value is <span class="bold"><strong>empty</strong></span>
            or <span class="bold"><strong>nonempty</strong></span> A geometry is
            empty if it does not have any points. Exterior, interior,
            and boundary of an empty geometry are not defined (that is,
            they are represented by a <code class="literal">NULL</code> value). An
            empty geometry is defined to be always simple and has an
            area of 0.
          </p></li><li class="listitem"><p>
            Its <span class="bold"><strong>dimension</strong></span>. A geometry
            can have a dimension of –1, 0, 1, or 2:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                –1 for an empty geometry.
              </p></li><li class="listitem"><p>
                0 for a geometry with no length and no area.
              </p></li><li class="listitem"><p>
                1 for a geometry with nonzero length and zero area.
              </p></li><li class="listitem"><p>
                2 for a geometry with nonzero area.
</p></li></ul>
</div>
<p>
            <code class="literal">Point</code> objects have a dimension of zero.
            <code class="literal">LineString</code> objects have a dimension of 1.
            <code class="literal">Polygon</code> objects have a dimension of 2.
            The dimensions of <code class="literal">MultiPoint</code>,
            <code class="literal">MultiLineString</code>, and
            <code class="literal">MultiPolygon</code> objects are the same as the
            dimensions of the elements they consist of.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-point"></a>12.18.2.3. Class <code class="literal">Point</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">Point</code> is a geometry that represents a
        single location in coordinate space.
      </p><p>
        <span class="bold"><strong><code class="literal">Point</code>
        Examples</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Imagine a large-scale map of the world with many cities. A
            <code class="literal">Point</code> object could represent each city.
          </p></li><li class="listitem"><p>
            On a city map, a <code class="literal">Point</code> object could
            represent a bus stop.
</p></li></ul>
</div>
<p>
        <span class="bold"><strong><code class="literal">Point</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            X-coordinate value.
          </p></li><li class="listitem"><p>
            Y-coordinate value.
          </p></li><li class="listitem"><p>
            <code class="literal">Point</code> is defined as a zero-dimensional
            geometry.
          </p></li><li class="listitem"><p>
            The boundary of a <code class="literal">Point</code> is the empty set.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-curve"></a>12.18.2.4. Class <code class="literal">Curve</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">Curve</code> is a one-dimensional geometry,
        usually represented by a sequence of points. Particular
        subclasses of <code class="literal">Curve</code> define the type of
        interpolation between points. <code class="literal">Curve</code> is a
        noninstantiable class.
      </p><p>
        <span class="bold"><strong><code class="literal">Curve</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">Curve</code> has the coordinates of its
            points.
          </p></li><li class="listitem"><p>
            A <code class="literal">Curve</code> is defined as a one-dimensional
            geometry.
          </p></li><li class="listitem"><p>
            A <code class="literal">Curve</code> is simple if it does not pass
            through the same point twice.
          </p></li><li class="listitem"><p>
            A <code class="literal">Curve</code> is closed if its start point is
            equal to its endpoint.
          </p></li><li class="listitem"><p>
            The boundary of a closed <code class="literal">Curve</code> is empty.
          </p></li><li class="listitem"><p>
            The boundary of a nonclosed <code class="literal">Curve</code>
            consists of its two endpoints.
          </p></li><li class="listitem"><p>
            A <code class="literal">Curve</code> that is simple and closed is a
            <code class="literal">LinearRing</code>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-linestring"></a>12.18.2.5. Class <code class="literal">LineString</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">LineString</code> is a <code class="literal">Curve</code>
        with linear interpolation between points.
      </p><p>
        <span class="bold"><strong><code class="literal">LineString</code>
        Examples</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            On a world map, <code class="literal">LineString</code> objects could
            represent rivers.
          </p></li><li class="listitem"><p>
            In a city map, <code class="literal">LineString</code> objects could
            represent streets.
</p></li></ul>
</div>
<p>
        <span class="bold"><strong><code class="literal">LineString</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">LineString</code> has coordinates of segments,
            defined by each consecutive pair of points.
          </p></li><li class="listitem"><p>
            A <code class="literal">LineString</code> is a <code class="literal">Line</code>
            if it consists of exactly two points.
          </p></li><li class="listitem"><p>
            A <code class="literal">LineString</code> is a
            <code class="literal">LinearRing</code> if it is both closed and
            simple.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-surface"></a>12.18.2.6. Class <code class="literal">Surface</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">Surface</code> is a two-dimensional geometry. It
        is a noninstantiable class. Its only instantiable subclass is
        <code class="literal">Polygon</code>.
      </p><p>
        <span class="bold"><strong><code class="literal">Surface</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">Surface</code> is defined as a two-dimensional
            geometry.
          </p></li><li class="listitem"><p>
            The OpenGIS specification defines a simple
            <code class="literal">Surface</code> as a geometry that consists of a
            single <span class="quote">“<span class="quote">patch</span>”</span> that is associated with a single
            exterior boundary and zero or more interior boundaries.
          </p></li><li class="listitem"><p>
            The boundary of a simple <code class="literal">Surface</code> is the
            set of closed curves corresponding to its exterior and
            interior boundaries.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-polygon"></a>12.18.2.7. Class <code class="literal">Polygon</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">Polygon</code> is a planar
        <code class="literal">Surface</code> representing a multisided geometry.
        It is defined by a single exterior boundary and zero or more
        interior boundaries, where each interior boundary defines a hole
        in the <code class="literal">Polygon</code>.
      </p><p>
        <span class="bold"><strong><code class="literal">Polygon</code>
        Examples</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            On a region map, <code class="literal">Polygon</code> objects could
            represent forests, districts, and so on.
</p></li></ul>
</div>
<p>
        <span class="bold"><strong><code class="literal">Polygon</code>
        Assertions</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The boundary of a <code class="literal">Polygon</code> consists of a
            set of <code class="literal">LinearRing</code> objects (that is,
            <code class="literal">LineString</code> objects that are both simple
            and closed) that make up its exterior and interior
            boundaries.
          </p></li><li class="listitem"><p>
            A <code class="literal">Polygon</code> has no rings that cross. The
            rings in the boundary of a <code class="literal">Polygon</code> may
            intersect at a <code class="literal">Point</code>, but only as a
            tangent.
          </p></li><li class="listitem"><p>
            A <code class="literal">Polygon</code> has no lines, spikes, or
            punctures.
          </p></li><li class="listitem"><p>
            A <code class="literal">Polygon</code> has an interior that is a
            connected point set.
          </p></li><li class="listitem"><p>
            A <code class="literal">Polygon</code> may have holes. The exterior of
            a <code class="literal">Polygon</code> with holes is not connected.
            Each hole defines a connected component of the exterior.
</p></li></ul>
</div>
<p>
        The preceding assertions make a <code class="literal">Polygon</code> a
        simple geometry.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-geometrycollection"></a>12.18.2.8. Class <code class="literal">GeometryCollection</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">GeometryCollection</code> is a geometry that is a
        collection of one or more geometries of any class.
      </p><p>
        All the elements in a <code class="literal">GeometryCollection</code> must
        be in the same Spatial Reference System (that is, in the same
        coordinate system). There are no other constraints on the
        elements of a <code class="literal">GeometryCollection</code>, although
        the subclasses of <code class="literal">GeometryCollection</code>
        described in the following sections may restrict membership.
        Restrictions may be based on:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Element type (for example, a <code class="literal">MultiPoint</code>
            may contain only <code class="literal">Point</code> elements)
          </p></li><li class="listitem"><p>
            Dimension
          </p></li><li class="listitem"><p>
            Constraints on the degree of spatial overlap between
            elements
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multipoint"></a>12.18.2.9. Class <code class="literal">MultiPoint</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">MultiPoint</code> is a geometry collection
        composed of <code class="literal">Point</code> elements. The points are
        not connected or ordered in any way.
      </p><p>
        <span class="bold"><strong><code class="literal">MultiPoint</code>
        Examples</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            On a world map, a <code class="literal">MultiPoint</code> could
            represent a chain of small islands.
          </p></li><li class="listitem"><p>
            On a city map, a <code class="literal">MultiPoint</code> could
            represent the outlets for a ticket office.
</p></li></ul>
</div>
<p>
        <span class="bold"><strong><code class="literal">MultiPoint</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">MultiPoint</code> is a zero-dimensional
            geometry.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiPoint</code> is simple if no two of its
            <code class="literal">Point</code> values are equal (have identical
            coordinate values).
          </p></li><li class="listitem"><p>
            The boundary of a <code class="literal">MultiPoint</code> is the empty
            set.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multicurve"></a>12.18.2.10. Class <code class="literal">MultiCurve</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">MultiCurve</code> is a geometry collection
        composed of <code class="literal">Curve</code> elements.
        <code class="literal">MultiCurve</code> is a noninstantiable class.
      </p><p>
        <span class="bold"><strong><code class="literal">MultiCurve</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">MultiCurve</code> is a one-dimensional
            geometry.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiCurve</code> is simple if and only if all
            of its elements are simple; the only intersections between
            any two elements occur at points that are on the boundaries
            of both elements.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiCurve</code> boundary is obtained by
            applying the <span class="quote">“<span class="quote">mod 2 union rule</span>”</span> (also known as
            the <span class="quote">“<span class="quote">odd-even rule</span>”</span>): A point is in the
            boundary of a <code class="literal">MultiCurve</code> if it is in the
            boundaries of an odd number of <code class="literal">MultiCurve</code>
            elements.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiCurve</code> is closed if all of its
            elements are closed.
          </p></li><li class="listitem"><p>
            The boundary of a closed <code class="literal">MultiCurve</code> is
            always empty.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multilinestring"></a>12.18.2.11. Class <code class="literal">MultiLineString</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">MultiLineString</code> is a
        <code class="literal">MultiCurve</code> geometry collection composed of
        <code class="literal">LineString</code> elements.
      </p><p>
        <span class="bold"><strong><code class="literal">MultiLineString</code>
        Examples</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            On a region map, a <code class="literal">MultiLineString</code> could
            represent a river system or a highway system.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multisurface"></a>12.18.2.12. Class <code class="literal">MultiSurface</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">MultiSurface</code> is a geometry collection
        composed of surface elements. <code class="literal">MultiSurface</code> is
        a noninstantiable class. Its only instantiable subclass is
        <code class="literal">MultiPolygon</code>.
      </p><p>
        <span class="bold"><strong><code class="literal">MultiSurface</code>
        Assertions</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Two <code class="literal">MultiSurface</code> surfaces have no
            interiors that intersect.
          </p></li><li class="listitem"><p>
            Two <code class="literal">MultiSurface</code> elements have boundaries
            that intersect at most at a finite number of points.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-class-multipolygon"></a>12.18.2.13. Class <code class="literal">MultiPolygon</code></h4>

</div>

</div>

</div>
<p>
        A <code class="literal">MultiPolygon</code> is a
        <code class="literal">MultiSurface</code> object composed of
        <code class="literal">Polygon</code> elements.
      </p><p>
        <span class="bold"><strong><code class="literal">MultiPolygon</code>
        Examples</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            On a region map, a <code class="literal">MultiPolygon</code> could
            represent a system of lakes.
</p></li></ul>
</div>
<p>
        <span class="bold"><strong><code class="literal">MultiPolygon</code>
        Assertions</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> has no two
            <code class="literal">Polygon</code> elements with interiors that
            intersect.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> has no two
            <code class="literal">Polygon</code> elements that cross (crossing is
            also forbidden by the previous assertion), or that touch at
            an infinite number of points.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> may not have cut lines,
            spikes, or punctures. A <code class="literal">MultiPolygon</code> is a
            regular, closed point set.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> that has more than one
            <code class="literal">Polygon</code> has an interior that is not
            connected. The number of connected components of the
            interior of a <code class="literal">MultiPolygon</code> is equal to
            the number of <code class="literal">Polygon</code> values in the
            <code class="literal">MultiPolygon</code>.
</p></li></ul>
</div>
<p>
        <span class="bold"><strong><code class="literal">MultiPolygon</code>
        Properties</strong></span>
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> is a two-dimensional
            geometry.
          </p></li><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> boundary is a set of
            closed curves (<code class="literal">LineString</code> values)
            corresponding to the boundaries of its
            <code class="literal">Polygon</code> elements.
          </p></li><li class="listitem"><p>
            Each <code class="literal">Curve</code> in the boundary of the
            <code class="literal">MultiPolygon</code> is in the boundary of
            exactly one <code class="literal">Polygon</code> element.
          </p></li><li class="listitem"><p>
            Every <code class="literal">Curve</code> in the boundary of an
            <code class="literal">Polygon</code> element is in the boundary of the
            <code class="literal">MultiPolygon</code>.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="supported-spatial-data-formats"></a>12.18.3. Supported Spatial Data Formats</h3>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#gis-wkt-format">12.18.3.1. Well-Known Text (WKT) Format</a></span></dt><dt><span class="section"><a href="functions.html#gis-wkb-format">12.18.3.2. Well-Known Binary (WKB) Format</a></span></dt></dl>
</div>
<p>
      This section describes the standard spatial data formats that are
      used to represent geometry objects in queries. They are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Well-Known Text (WKT) format
        </p></li><li class="listitem"><p>
          Well-Known Binary (WKB) format
</p></li></ul>
</div>
<p>
      Internally, MySQL stores geometry values in a format that is not
      identical to either WKT or WKB format.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-wkt-format"></a>12.18.3.1. Well-Known Text (WKT) Format</h4>
</div>
</div>
</div>
<a class="indexterm" name="idp68547456"></a><a class="indexterm" name="idp68548528"></a><p>
        The Well-Known Text (WKT) representation of Geometry is designed
        to exchange geometry data in ASCII form. For a Backus-Naur
        grammar that specifies the formal production rules for writing
        WKT values, see the OpenGIS specification document referenced in
        <a class="xref" href="functions.html#spatial-extensions" title="12.18. Spatial Extensions">Section 12.18, “Spatial Extensions”</a>.
      </p><p>
        Examples of WKT representations of geometry objects:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A <code class="literal">Point</code>:
          </p><pre class="programlisting">POINT(15 20)</pre><p>
            Note that point coordinates are specified with no separating
            comma. This differs from the syntax for the SQL
            <a class="link" href="functions.html#function_point"><code class="literal">POINT()</code></a> function, which
            requires a comma between the coordinates. Take care to use
            the syntax appropriate to the context of a given spatial
            operation. For example, the following statements both
            extract the X-coordinate from a <code class="literal">Point</code>
            object. The first produces the object directly using the
            <a class="link" href="functions.html#function_point"><code class="literal">POINT()</code></a> function. The second
            uses a WKT representation converted to a
            <code class="literal">Point</code> with
            <code class="literal">GeomFromText()</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT X(POINT(15, 20));</code></strong>
+------------------+
| X(POINT(15, 20)) |
+------------------+
|               15 |
+------------------+

mysql&gt; <strong class="userinput"><code>SELECT X(GeomFromText('POINT(15 20)'));</code></strong>
+---------------------------------+
| X(GeomFromText('POINT(15 20)')) |
+---------------------------------+
|                              15 |
+---------------------------------+
</pre></li><li class="listitem"><p>
            A <code class="literal">LineString</code> with four points:
          </p><pre class="programlisting">LINESTRING(0 0, 10 10, 20 25, 50 60)</pre><p>
            Note that point coordinate pairs are separated by commas.
          </p></li><li class="listitem"><p>
            A <code class="literal">Polygon</code> with one exterior ring and one
            interior ring:
          </p><pre class="programlisting">POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7, 5 5))</pre></li><li class="listitem"><p>
            A <code class="literal">MultiPoint</code> with three
            <code class="literal">Point</code> values:
          </p><pre class="programlisting">MULTIPOINT(0 0, 20 20, 60 60)</pre></li><li class="listitem"><p>
            A <code class="literal">MultiLineString</code> with two
            <code class="literal">LineString</code> values:
          </p><pre class="programlisting">MULTILINESTRING((10 10, 20 20), (15 15, 30 15))</pre></li><li class="listitem"><p>
            A <code class="literal">MultiPolygon</code> with two
            <code class="literal">Polygon</code> values:
          </p><pre class="programlisting">MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7, 5 5)))</pre></li><li class="listitem"><p>
            A <code class="literal">GeometryCollection</code> consisting of two
            <code class="literal">Point</code> values and one
            <code class="literal">LineString</code>:
</p><pre class="programlisting">GEOMETRYCOLLECTION(POINT(10 10), POINT(30 30), LINESTRING(15 15, 20 20))</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="gis-wkb-format"></a>12.18.3.2. Well-Known Binary (WKB) Format</h4>

</div>

</div>

</div>
<a class="indexterm" name="idp68582624"></a><a class="indexterm" name="idp68583696"></a><p>
        The Well-Known Binary (WKB) representation for geometric values
        is defined by the OpenGIS specification. It is also defined in
        the ISO <em class="citetitle">SQL/MM Part 3: Spatial</em> standard.
      </p><p>
        WKB is used to exchange geometry data as binary streams
        represented by <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> values
        containing geometric WKB information.
      </p><p>
        WKB uses 1-byte unsigned integers, 4-byte unsigned integers, and
        8-byte double-precision numbers (IEEE 754 format). A byte is
        eight bits.
      </p><p>
        For example, a WKB value that corresponds to <code class="literal">POINT(1
        1)</code> consists of this sequence of 21 bytes (each
        represented here by two hex digits):
      </p><pre class="programlisting">0101000000000000000000F03F000000000000F03F</pre><p>
        The sequence may be broken down into these components:
      </p><pre class="programlisting">Byte order : 01
WKB type   : 01000000
X          : 000000000000F03F
Y          : 000000000000F03F</pre><p>
        Component representation is as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            The byte order may be either 1 or 0 to indicate
            little-endian or big-endian storage. The little-endian and
            big-endian byte orders are also known as Network Data
            Representation (NDR) and External Data Representation (XDR),
            respectively.
          </p></li><li class="listitem"><p>
            The WKB type is a code that indicates the geometry type.
            Values from 1 through 7 indicate <code class="literal">Point</code>,
            <code class="literal">LineString</code>, <code class="literal">Polygon</code>,
            <code class="literal">MultiPoint</code>,
            <code class="literal">MultiLineString</code>,
            <code class="literal">MultiPolygon</code>, and
            <code class="literal">GeometryCollection</code>.
          </p></li><li class="listitem"><p>
            A <code class="literal">Point</code> value has X and Y coordinates,
            each represented as a double-precision value.
</p></li></ul>
</div>
<p>
        WKB values for more complex geometry values are represented by
        more complex data structures, as detailed in the OpenGIS
        specification.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="creating-a-spatially-enabled-mysql-database"></a>12.18.4. Creating a Spatially Enabled MySQL Database</h3>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#mysql-spatial-datatypes">12.18.4.1. MySQL Spatial Data Types</a></span></dt><dt><span class="section"><a href="functions.html#creating-spatial-values">12.18.4.2. Creating Spatial Values</a></span></dt><dt><span class="section"><a href="functions.html#creating-spatial-columns">12.18.4.3. Creating Spatial Columns</a></span></dt><dt><span class="section"><a href="functions.html#populating-spatial-columns">12.18.4.4. Populating Spatial Columns</a></span></dt><dt><span class="section"><a href="functions.html#fetching-spatial-data">12.18.4.5. Fetching Spatial Data</a></span></dt></dl>
</div>
<p>
      This section describes the data types you can use for representing
      spatial data in MySQL, and the functions available for creating
      and retrieving spatial values.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-spatial-datatypes"></a>12.18.4.1. MySQL Spatial Data Types</h4>
</div>
</div>
</div>
<a class="indexterm" name="idp68603760"></a><a class="indexterm" name="idp68604832"></a><a class="indexterm" name="idp68605904"></a><a class="indexterm" name="idp68606976"></a><a class="indexterm" name="idp68608048"></a><a class="indexterm" name="idp68609120"></a><a class="indexterm" name="idp68610208"></a><a class="indexterm" name="idp68611280"></a><a class="indexterm" name="idp68612368"></a><a class="indexterm" name="idp68613856"></a><a class="indexterm" name="idp68615344"></a><a class="indexterm" name="idp68616832"></a><a class="indexterm" name="idp68618320"></a><a class="indexterm" name="idp68619808"></a><a class="indexterm" name="idp68621296"></a><a class="indexterm" name="idp68622784"></a><p>
        MySQL has data types that correspond to OpenGIS classes. Some of
        these types hold single geometry values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">GEOMETRY</code>
          </p></li><li class="listitem"><p>
            <code class="literal">POINT</code>
          </p></li><li class="listitem"><p>
            <code class="literal">LINESTRING</code>
          </p></li><li class="listitem"><p>
            <code class="literal">POLYGON</code>
</p></li></ul>
</div>
<p>
        <code class="literal">GEOMETRY</code> can store geometry values of any
        type. The other single-value types (<code class="literal">POINT</code>,
        <code class="literal">LINESTRING</code>, and <code class="literal">POLYGON</code>)
        restrict their values to a particular geometry type.
      </p><p>
        The other data types hold collections of values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MULTIPOINT</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MULTILINESTRING</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MULTIPOLYGON</code>
          </p></li><li class="listitem"><p>
            <code class="literal">GEOMETRYCOLLECTION</code>
</p></li></ul>
</div>
<p>
        <code class="literal">GEOMETRYCOLLECTION</code> can store a collection of
        objects of any type. The other collection types
        (<code class="literal">MULTIPOINT</code>,
        <code class="literal">MULTILINESTRING</code>,
        <code class="literal">MULTIPOLYGON</code>, and
        <code class="literal">GEOMETRYCOLLECTION</code>) restrict collection
        members to those having a particular geometry type.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="creating-spatial-values"></a>12.18.4.2. Creating Spatial Values</h4>

</div>

</div>

</div>
<p>
        This section describes how to create spatial values using
        Well-Known Text and Well-Known Binary functions that are defined
        in the OpenGIS standard, and using MySQL-specific functions.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="gis-wkt-functions"></a>12.18.4.2.1. Creating Geometry Values Using WKT Functions</h5>
</div>
</div>
</div>
<p>
          MySQL provides a number of functions that take as arguments a
          Well-Known Text representation and, optionally, a spatial
          reference system identifier (SRID). They return the
          corresponding geometry.
        </p><p>
          <a class="link" href="functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code></a> accepts a WKT of
          any geometry type as its first argument. An implementation
          also provides type-specific construction functions for
          construction of geometry values of each geometry type.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_geomcollfromtext"></a>
              <a class="indexterm" name="idp68653840"></a>

              <a class="indexterm" name="idp68654912"></a>

              <a class="link" href="functions.html#function_geomcollfromtext"><code class="literal">GeomCollFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_geomcollfromtext"><code class="literal">GeometryCollectionFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">GEOMETRYCOLLECTION</code> value
              using its WKT representation and SRID.
            </p></li><li class="listitem"><p><a name="function_geomfromtext"></a>
              <a class="indexterm" name="idp68664144"></a>

              <a class="indexterm" name="idp68665216"></a>

              <a class="link" href="functions.html#function_geomfromtext"><code class="literal">GeomFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_geomfromtext"><code class="literal">GeometryFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a geometry value of any type using its WKT
              representation and SRID.
            </p></li><li class="listitem"><p><a name="function_linefromtext"></a>
              <a class="indexterm" name="idp68673696"></a>

              <a class="indexterm" name="idp68674768"></a>

              <a class="link" href="functions.html#function_linefromtext"><code class="literal">LineFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_linefromtext"><code class="literal">LineStringFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">LINESTRING</code> value using its
              WKT representation and SRID.
            </p></li><li class="listitem"><p><a name="function_mlinefromtext"></a>
              <a class="indexterm" name="idp68683936"></a>

              <a class="indexterm" name="idp68685008"></a>

              <a class="link" href="functions.html#function_mlinefromtext"><code class="literal">MLineFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_mlinefromtext"><code class="literal">MultiLineStringFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">MULTILINESTRING</code> value
              using its WKT representation and SRID.
            </p></li><li class="listitem"><p><a name="function_mpointfromtext"></a>
              <a class="indexterm" name="idp68694208"></a>

              <a class="indexterm" name="idp68695280"></a>

              <a class="link" href="functions.html#function_mpointfromtext"><code class="literal">MPointFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_mpointfromtext"><code class="literal">MultiPointFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">MULTIPOINT</code> value using its
              WKT representation and SRID.
            </p></li><li class="listitem"><p><a name="function_mpolyfromtext"></a>
              <a class="indexterm" name="idp68704448"></a>

              <a class="indexterm" name="idp68705520"></a>

              <a class="link" href="functions.html#function_mpolyfromtext"><code class="literal">MPolyFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_mpolyfromtext"><code class="literal">MultiPolygonFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">MULTIPOLYGON</code> value using
              its WKT representation and SRID.
            </p></li><li class="listitem"><p><a name="function_pointfromtext"></a>
              <a class="indexterm" name="idp68713968"></a>

              <a class="link" href="functions.html#function_pointfromtext"><code class="literal">PointFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">POINT</code> value using its WKT
              representation and SRID.
            </p></li><li class="listitem"><p><a name="function_polyfromtext"></a>
              <a class="indexterm" name="idp68721488"></a>

              <a class="indexterm" name="idp68722560"></a>

              <a class="link" href="functions.html#function_polyfromtext"><code class="literal">PolyFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_polyfromtext"><code class="literal">PolygonFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">POLYGON</code> value using its
              WKT representation and SRID.
</p></li></ul>
</div>
<p>
          The OpenGIS specification also defines the following optional
          functions, which MySQL does not implement. These functions
          construct <code class="literal">Polygon</code> or
          <code class="literal">MultiPolygon</code> values based on the WKT
          representation of a collection of rings or closed
          <code class="literal">LineString</code> values. These values may
          intersect.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_bdmpolyfromtext"></a>
              <a class="indexterm" name="idp68732912"></a>

              <a class="link" href="functions.html#function_bdmpolyfromtext"><code class="literal">BdMPolyFromText(<em class="replaceable"><code>wkt</code></em>,<em class="replaceable"><code>srid</code></em>)</code></a>
            </p><p>
              Constructs a <code class="literal">MultiPolygon</code> value from a
              <code class="literal">MultiLineString</code> value in WKT format
              containing an arbitrary collection of closed
              <code class="literal">LineString</code> values.
            </p></li><li class="listitem"><p><a name="function_bdpolyfromtext"></a>
              <a class="indexterm" name="idp68739344"></a>

              <a class="link" href="functions.html#function_bdpolyfromtext"><code class="literal">BdPolyFromText(<em class="replaceable"><code>wkt</code></em>,<em class="replaceable"><code>srid</code></em>)</code></a>
            </p><p>
              Constructs a <code class="literal">Polygon</code> value from a
              <code class="literal">MultiLineString</code> value in WKT format
              containing an arbitrary collection of closed
              <code class="literal">LineString</code> values.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="gis-wkb-functions"></a>12.18.4.2.2. Creating Geometry Values Using WKB Functions</h5>

</div>

</div>

</div>
<p>
          MySQL provides a number of functions that take as arguments a
          <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> containing a Well-Known
          Binary representation and, optionally, a spatial reference
          system identifier (SRID). They return the corresponding
          geometry.
        </p><p>
          These functions also accept geometry objects for compatibility
          with the return value of the functions in
          <a class="xref" href="functions.html#gis-mysql-specific-functions" title="12.18.4.2.3. Creating Geometry Values Using MySQL-Specific Functions">Section 12.18.4.2.3, “Creating Geometry Values Using MySQL-Specific Functions”</a>. Thus, those
          functions may be used to provide the first argument to the
          functions in this section.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_geomcollfromwkb"></a>
              <a class="indexterm" name="idp68752848"></a>

              <a class="indexterm" name="idp68753920"></a>

              <a class="link" href="functions.html#function_geomcollfromwkb"><code class="literal">GeomCollFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_geomcollfromwkb"><code class="literal">GeometryCollectionFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">GEOMETRYCOLLECTION</code> value
              using its WKB representation and SRID.
            </p></li><li class="listitem"><p><a name="function_geomfromwkb"></a>
              <a class="indexterm" name="idp68763152"></a>

              <a class="indexterm" name="idp68764224"></a>

              <a class="link" href="functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_geomfromwkb"><code class="literal">GeometryFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a geometry value of any type using its WKB
              representation and SRID.
            </p></li><li class="listitem"><p><a name="function_linefromwkb"></a>
              <a class="indexterm" name="idp68772704"></a>

              <a class="indexterm" name="idp68773776"></a>

              <a class="link" href="functions.html#function_linefromwkb"><code class="literal">LineFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_linefromwkb"><code class="literal">LineStringFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">LINESTRING</code> value using its
              WKB representation and SRID.
            </p></li><li class="listitem"><p><a name="function_mlinefromwkb"></a>
              <a class="indexterm" name="idp68782944"></a>

              <a class="indexterm" name="idp68784016"></a>

              <a class="link" href="functions.html#function_mlinefromwkb"><code class="literal">MLineFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_mlinefromwkb"><code class="literal">MultiLineStringFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">MULTILINESTRING</code> value
              using its WKB representation and SRID.
            </p></li><li class="listitem"><p><a name="function_mpointfromwkb"></a>
              <a class="indexterm" name="idp68793200"></a>

              <a class="indexterm" name="idp68794272"></a>

              <a class="link" href="functions.html#function_mpointfromwkb"><code class="literal">MPointFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_mpointfromwkb"><code class="literal">MultiPointFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">MULTIPOINT</code> value using its
              WKB representation and SRID.
            </p></li><li class="listitem"><p><a name="function_mpolyfromwkb"></a>
              <a class="indexterm" name="idp68803440"></a>

              <a class="indexterm" name="idp68804512"></a>

              <a class="link" href="functions.html#function_mpolyfromwkb"><code class="literal">MPolyFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_mpolyfromwkb"><code class="literal">MultiPolygonFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">MULTIPOLYGON</code> value using
              its WKB representation and SRID.
            </p></li><li class="listitem"><p><a name="function_pointfromwkb"></a>
              <a class="indexterm" name="idp68813680"></a>

              <a class="link" href="functions.html#function_pointfromwkb"><code class="literal">PointFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">POINT</code> value using its WKB
              representation and SRID.
            </p></li><li class="listitem"><p><a name="function_polyfromwkb"></a>
              <a class="indexterm" name="idp68821200"></a>

              <a class="indexterm" name="idp68822272"></a>

              <a class="link" href="functions.html#function_polyfromwkb"><code class="literal">PolyFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>,
              <a class="link" href="functions.html#function_polyfromwkb"><code class="literal">PolygonFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
            </p><p>
              Constructs a <code class="literal">POLYGON</code> value using its
              WKB representation and SRID.
</p></li></ul>
</div>
<p>
          The OpenGIS specification also describes optional functions
          for constructing <code class="literal">Polygon</code> or
          <code class="literal">MultiPolygon</code> values based on the WKB
          representation of a collection of rings or closed
          <code class="literal">LineString</code> values. These values may
          intersect. MySQL does not implement these functions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_bdmpolyfromwkb"></a>
              <a class="indexterm" name="idp68832592"></a>

              <a class="link" href="functions.html#function_bdmpolyfromwkb"><code class="literal">BdMPolyFromWKB(<em class="replaceable"><code>wkb</code></em>,<em class="replaceable"><code>srid</code></em>)</code></a>
            </p><p>
              Constructs a <code class="literal">MultiPolygon</code> value from a
              <code class="literal">MultiLineString</code> value in WKB format
              containing an arbitrary collection of closed
              <code class="literal">LineString</code> values.
            </p></li><li class="listitem"><p><a name="function_bdpolyfromwkb"></a>
              <a class="indexterm" name="idp68839008"></a>

              <a class="link" href="functions.html#function_bdpolyfromwkb"><code class="literal">BdPolyFromWKB(<em class="replaceable"><code>wkb</code></em>,<em class="replaceable"><code>srid</code></em>)</code></a>
            </p><p>
              Constructs a <code class="literal">Polygon</code> value from a
              <code class="literal">MultiLineString</code> value in WKB format
              containing an arbitrary collection of closed
              <code class="literal">LineString</code> values.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="gis-mysql-specific-functions"></a>12.18.4.2.3. Creating Geometry Values Using MySQL-Specific Functions</h5>

</div>

</div>

</div>
<p>
          MySQL provides a set of useful nonstandard functions for
          creating geometry values. The functions described in this
          section are MySQL extensions to the OpenGIS specification.
        </p><p>
          These functions produce geometry objects from either WKB
          values or geometry objects as arguments. If any argument is
          not a proper WKB or geometry representation of the proper
          object type, the return value is <code class="literal">NULL</code>.
        </p><p>
          For example, you can insert the geometry return value from
          <a class="link" href="functions.html#function_point"><code class="literal">Point()</code></a> directly into a
          <code class="literal">Point</code> column:
</p><pre class="programlisting">INSERT INTO t1 (pt_col) VALUES(Point(1,2));</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_geometrycollection"></a>
              <a class="indexterm" name="idp68853872"></a>

              <a class="link" href="functions.html#function_geometrycollection"><code class="literal">GeometryCollection(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>,...)</code></a>
            </p><p>
              Constructs a <code class="literal">GeometryCollection</code>.
            </p></li><li class="listitem"><p><a name="function_linestring"></a>
              <a class="indexterm" name="idp68860624"></a>

              <a class="link" href="functions.html#function_linestring"><code class="literal">LineString(<em class="replaceable"><code>pt1</code></em>,<em class="replaceable"><code>pt2</code></em>,...)</code></a>
            </p><p>
              Constructs a <code class="literal">LineString</code> value from a
              number of <code class="literal">Point</code> or WKB
              <code class="literal">Point</code> arguments. If the number of
              arguments is less than two, the return value is
              <code class="literal">NULL</code>.
            </p></li><li class="listitem"><p><a name="function_multilinestring"></a>
              <a class="indexterm" name="idp68869648"></a>

              <a class="link" href="functions.html#function_multilinestring"><code class="literal">MultiLineString(<em class="replaceable"><code>ls1</code></em>,<em class="replaceable"><code>ls2</code></em>,...)</code></a>
            </p><p>
              Constructs a <code class="literal">MultiLineString</code> value
              using <code class="literal">LineString</code> or WKB
              <code class="literal">LineString</code> arguments.
            </p></li><li class="listitem"><p><a name="function_multipoint"></a>
              <a class="indexterm" name="idp68877872"></a>

              <a class="link" href="functions.html#function_multipoint"><code class="literal">MultiPoint(<em class="replaceable"><code>pt1</code></em>,<em class="replaceable"><code>pt2</code></em>,...)</code></a>
            </p><p>
              Constructs a <code class="literal">MultiPoint</code> value using
              <code class="literal">Point</code> or WKB <code class="literal">Point</code>
              arguments.
            </p></li><li class="listitem"><p><a name="function_multipolygon"></a>
              <a class="indexterm" name="idp68886080"></a>

              <a class="link" href="functions.html#function_multipolygon"><code class="literal">MultiPolygon(<em class="replaceable"><code>poly1</code></em>,<em class="replaceable"><code>poly2</code></em>,...)</code></a>
            </p><p>
              Constructs a <code class="literal">MultiPolygon</code> value from a
              set of <code class="literal">Polygon</code> or WKB
              <code class="literal">Polygon</code> arguments.
            </p></li><li class="listitem"><p><a name="function_point"></a>
              <a class="indexterm" name="idp68894352"></a>

              <a class="link" href="functions.html#function_point"><code class="literal">Point(<em class="replaceable"><code>x</code></em>,<em class="replaceable"><code>y</code></em>)</code></a>
            </p><p>
              Constructs a <code class="literal">Point</code> using its
              coordinates.
            </p></li><li class="listitem"><p><a name="function_polygon"></a>
              <a class="indexterm" name="idp68901088"></a>

              <a class="link" href="functions.html#function_polygon"><code class="literal">Polygon(<em class="replaceable"><code>ls1</code></em>,<em class="replaceable"><code>ls2</code></em>,...)</code></a>
            </p><p>
              Constructs a <code class="literal">Polygon</code> value from a
              number of <code class="literal">LineString</code> or WKB
              <code class="literal">LineString</code> arguments. If any argument
              does not represent a <code class="literal">LinearRing</code> (that
              is, not a closed and simple
              <code class="literal">LineString</code>), the return value is
              <code class="literal">NULL</code>.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="creating-spatial-columns"></a>12.18.4.3. Creating Spatial Columns</h4>

</div>

</div>

</div>
<p>
        MySQL provides a standard way of creating spatial columns for
        geometry types, for example, with <a class="link" href="sql-syntax.html#create-table" title="13.1.17. CREATE TABLE Syntax"><code class="literal">CREATE
        TABLE</code></a> or <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>.
        Currently, spatial columns are supported for
        <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>,
        <a class="link" href="mysql-cluster.html" title="Chapter 17. MySQL Cluster NDB 7.3"><code class="literal">NDB</code></a>, and <code class="literal">ARCHIVE</code>
        tables. See also the annotations about spatial indexes under
        <a class="xref" href="functions.html#creating-spatial-indexes" title="12.18.6.1. Creating Spatial Indexes">Section 12.18.6.1, “Creating Spatial Indexes”</a>.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Use the <a class="link" href="sql-syntax.html#create-table" title="13.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
            statement to create a table with a spatial column:
          </p><pre class="programlisting">CREATE TABLE geom (g GEOMETRY);</pre></li><li class="listitem"><p>
            Use the <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement
            to add or drop a spatial column to or from an existing
            table:
          </p><pre class="programlisting">ALTER TABLE geom ADD pt POINT;
ALTER TABLE geom DROP pt;</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="populating-spatial-columns"></a>12.18.4.4. Populating Spatial Columns</h4>

</div>

</div>

</div>
<p>
        After you have created spatial columns, you can populate them
        with spatial data.
      </p><p>
        Values should be stored in internal geometry format, but you can
        convert them to that format from either Well-Known Text (WKT) or
        Well-Known Binary (WKB) format. The following examples
        demonstrate how to insert geometry values into a table by
        converting WKT values into internal geometry format:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Perform the conversion directly in the
            <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement:
          </p><pre class="programlisting">INSERT INTO geom VALUES (GeomFromText('POINT(1 1)'));

SET @g = 'POINT(1 1)';
INSERT INTO geom VALUES (GeomFromText(@g));</pre></li><li class="listitem"><p>
            Perform the conversion prior to the
            <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>:
          </p><pre class="programlisting">SET @g = GeomFromText('POINT(1 1)');
INSERT INTO geom VALUES (@g);</pre></li></ul>
</div>
<p>
        The following examples insert more complex geometries into the
        table:
      </p><pre class="programlisting">SET @g = 'LINESTRING(0 0,1 1,2 2)';
INSERT INTO geom VALUES (GeomFromText(@g));

SET @g = 'POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7, 5 5))';
INSERT INTO geom VALUES (GeomFromText(@g));

SET @g =
'GEOMETRYCOLLECTION(POINT(1 1),LINESTRING(0 0,1 1,2 2,3 3,4 4))';
INSERT INTO geom VALUES (GeomFromText(@g));</pre><p>
        The preceding examples all use
        <a class="link" href="functions.html#function_geomfromtext"><code class="literal">GeomFromText()</code></a> to create geometry
        values. You can also use type-specific functions:
      </p><pre class="programlisting">SET @g = 'POINT(1 1)';
INSERT INTO geom VALUES (PointFromText(@g));

SET @g = 'LINESTRING(0 0,1 1,2 2)';
INSERT INTO geom VALUES (LineStringFromText(@g));

SET @g = 'POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7, 5 5))';
INSERT INTO geom VALUES (PolygonFromText(@g));

SET @g =
'GEOMETRYCOLLECTION(POINT(1 1),LINESTRING(0 0,1 1,2 2,3 3,4 4))';
INSERT INTO geom VALUES (GeomCollFromText(@g));</pre><p>
        Note that if a client application program wants to use WKB
        representations of geometry values, it is responsible for
        sending correctly formed WKB in queries to the server. However,
        there are several ways of satisfying this requirement. For
        example:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Inserting a <code class="literal">POINT(1 1)</code> value with hex
            literal syntax:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO geom VALUES</code></strong>
    -&gt; <strong class="userinput"><code>(GeomFromWKB(0x0101000000000000000000F03F000000000000F03F));</code></strong>
</pre></li><li class="listitem"><p>
            An ODBC application can send a WKB representation, binding
            it to a placeholder using an argument of
            <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> type:
          </p><pre class="programlisting">INSERT INTO geom VALUES (GeomFromWKB(?))</pre><p>
            Other programming interfaces may support a similar
            placeholder mechanism.
          </p></li><li class="listitem"><p>
            In a C program, you can escape a binary value using
            <a class="link" href="connectors-apis.html#mysql-real-escape-string" title="22.8.7.54. mysql_real_escape_string()"><code class="literal">mysql_real_escape_string()</code></a>
            and include the result in a query string that is sent to the
            server. See <a class="xref" href="connectors-apis.html#mysql-real-escape-string" title="22.8.7.54. mysql_real_escape_string()">Section 22.8.7.54, “<code class="literal">mysql_real_escape_string()</code>”</a>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="fetching-spatial-data"></a>12.18.4.5. Fetching Spatial Data</h4>

</div>

</div>

</div>
<p>
        Geometry values stored in a table can be fetched in internal
        format. You can also convert them into WKT or WKB format.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Fetching spatial data in internal format:
          </p><p>
            Fetching geometry values using internal format can be useful
            in table-to-table transfers:
          </p><pre class="programlisting">CREATE TABLE geom2 (g GEOMETRY) SELECT g FROM geom;</pre></li><li class="listitem"><p>
            Fetching spatial data in WKT format:
          </p><p>
            The <a class="link" href="functions.html#function_astext"><code class="literal">AsText()</code></a> function
            converts a geometry from internal format into a WKT string.
          </p><pre class="programlisting">SELECT AsText(g) FROM geom;</pre></li><li class="listitem"><p>
            Fetching spatial data in WKB format:
          </p><p>
            The <a class="link" href="functions.html#function_asbinary"><code class="literal">AsBinary()</code></a> function
            converts a geometry from internal format into a
            <a class="link" href="data-types.html#blob" title="11.4.3. The BLOB and TEXT Types"><code class="literal">BLOB</code></a> containing the WKB
            value.
</p><pre class="programlisting">SELECT AsBinary(g) FROM geom;</pre></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="spatial-analysis-functions"></a>12.18.5. Spatial Analysis Functions</h3>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#functions-to-convert-geometries-between-formats">12.18.5.1. Geometry Format Conversion Functions</a></span></dt><dt><span class="section"><a href="functions.html#geometry-property-functions">12.18.5.2. <code class="literal">Geometry</code> Property Functions</a></span></dt><dt><span class="section"><a href="functions.html#functions-that-create-new-geometries-from-existing-ones">12.18.5.3. Functions That Create New Geometries from Existing Ones</a></span></dt><dt><span class="section"><a href="functions.html#functions-for-testing-spatial-relations-between-geometric-objects">12.18.5.4. Functions for Testing Spatial Relations Between Geometric Objects</a></span></dt></dl>
</div>
<p>
      After populating spatial columns with values, you are ready to
      query and analyze them. MySQL provides a set of functions to
      perform various operations on spatial data. These functions can be
      grouped into four major categories according to the type of
      operation they perform:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Functions that convert geometries between various formats
        </p></li><li class="listitem"><p>
          Functions that provide access to qualitative or quantitative
          properties of a geometry
        </p></li><li class="listitem"><p>
          Functions that describe relations between two geometries
        </p></li><li class="listitem"><p>
          Functions that create new geometries from existing ones
</p></li></ul>
</div>
<p>
      Spatial analysis functions can be used in many contexts, such as:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Any interactive SQL program, such as <a class="link" href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a>.
        </p></li><li class="listitem"><p>
          Application programs written in any language that supports a
          MySQL client API
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="functions-to-convert-geometries-between-formats"></a>12.18.5.1. Geometry Format Conversion Functions</h4>

</div>

</div>

</div>
<p>
        MySQL supports the following functions for converting geometry
        values between internal format and either WKT or WKB format:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_asbinary"></a>
            <a class="indexterm" name="idp68971600"></a>

            <a class="link" href="functions.html#function_asbinary"><code class="literal">AsBinary(<em class="replaceable"><code>g</code></em>)</code></a>,
            <a class="link" href="functions.html#function_asbinary"><code class="literal">AsWKB(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><p>
            Converts a value in internal geometry format to its WKB
            representation and returns the binary result.
          </p><pre class="programlisting">SELECT AsBinary(g) FROM geom;</pre></li><li class="listitem"><p><a name="function_astext"></a>
            <a class="indexterm" name="idp68980576"></a>

            <a class="link" href="functions.html#function_astext"><code class="literal">AsText(<em class="replaceable"><code>g</code></em>)</code></a>,
            <a class="link" href="functions.html#function_astext"><code class="literal">AsWKT(<em class="replaceable"><code>g</code></em>)</code></a>
          </p><p>
            Converts a value in internal geometry format to its WKT
            representation and returns the string result.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @g = 'LineString(1 1,2 2,3 3)';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(GeomFromText(@g));</code></strong>
+--------------------------+
| AsText(GeomFromText(@g)) |
+--------------------------+
| LINESTRING(1 1,2 2,3 3)  |
+--------------------------+
</pre></li><li class="listitem"><p>
            <a class="indexterm" name="idp68988736"></a>

            <a class="link" href="functions.html#function_geomfromtext"><code class="literal">GeomFromText(<em class="replaceable"><code>wkt</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
          </p><p>
            Converts a string value from its WKT representation into
            internal geometry format and returns the result. A number of
            type-specific functions are also supported, such as
            <a class="link" href="functions.html#function_pointfromtext"><code class="literal">PointFromText()</code></a> and
            <a class="link" href="functions.html#function_linefromtext"><code class="literal">LineFromText()</code></a>. See
            <a class="xref" href="functions.html#gis-wkt-functions" title="12.18.4.2.1. Creating Geometry Values Using WKT Functions">Section 12.18.4.2.1, “Creating Geometry Values Using WKT Functions”</a>.
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idp68995072"></a>

            <a class="link" href="functions.html#function_geomfromwkb"><code class="literal">GeomFromWKB(<em class="replaceable"><code>wkb</code></em>[,<em class="replaceable"><code>srid</code></em>])</code></a>
          </p><p>
            Converts a binary value from its WKB representation into
            internal geometry format and returns the result. A number of
            type-specific functions are also supported, such as
            <a class="link" href="functions.html#function_pointfromwkb"><code class="literal">PointFromWKB()</code></a> and
            <a class="link" href="functions.html#function_linefromwkb"><code class="literal">LineFromWKB()</code></a>. See
            <a class="xref" href="functions.html#gis-wkb-functions" title="12.18.4.2.2. Creating Geometry Values Using WKB Functions">Section 12.18.4.2.2, “Creating Geometry Values Using WKB Functions”</a>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="geometry-property-functions"></a>12.18.5.2. <code class="literal">Geometry</code> Property Functions</h4>

</div>

</div>

</div>
<p>
        Each function that belongs to this group takes a geometry value
        as its argument and returns some quantitative or qualitative
        property of the geometry. Some functions restrict their argument
        type. Such functions return <code class="literal">NULL</code> if the
        argument is of an incorrect geometry type. For example,
        <a class="link" href="functions.html#function_area"><code class="literal">Area()</code></a> returns
        <code class="literal">NULL</code> if the object type is neither
        <code class="literal">Polygon</code> nor <code class="literal">MultiPolygon</code>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="general-geometry-property-functions"></a>12.18.5.2.1. General Geometry Functions</h5>
</div>
</div>
</div>
<p>
          The functions listed in this section do not restrict their
          argument and accept a geometry value of any type.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_dimension"></a>
              <a class="indexterm" name="idp69011840"></a>

              <a class="link" href="functions.html#function_dimension"><code class="literal">Dimension(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns the inherent dimension of the geometry value
              <em class="replaceable"><code>g</code></em>. The result can be –1,
              0, 1, or 2. The meaning of these values is given in
              <a class="xref" href="functions.html#gis-class-geometry" title="12.18.2.2. Class Geometry">Section 12.18.2.2, “Class <code class="literal">Geometry</code>”</a>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT Dimension(GeomFromText('LineString(1 1,2 2)'));</code></strong>
+------------------------------------------------+
| Dimension(GeomFromText('LineString(1 1,2 2)')) |
+------------------------------------------------+
|                                              1 |
+------------------------------------------------+
</pre></li><li class="listitem"><p><a name="function_envelope"></a>
              <a class="indexterm" name="idp69020864"></a>

              <a class="link" href="functions.html#function_envelope"><code class="literal">Envelope(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns the Minimum Bounding Rectangle (MBR) for the
              geometry value <em class="replaceable"><code>g</code></em>. The result is
              returned as a <code class="literal">Polygon</code> value.
            </p><p>
              The polygon is defined by the corner points of the
              bounding box:
            </p><pre class="programlisting">POLYGON((MINX MINY, MAXX MINY, MAXX MAXY, MINX MAXY, MINX MINY))</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT AsText(Envelope(GeomFromText('LineString(1 1,2 2)')));</code></strong>
+-------------------------------------------------------+
| AsText(Envelope(GeomFromText('LineString(1 1,2 2)'))) |
+-------------------------------------------------------+
| POLYGON((1 1,2 1,2 2,1 2,1 1))                        |
+-------------------------------------------------------+
</pre></li><li class="listitem"><p><a name="function_geometrytype"></a>
              <a class="indexterm" name="idp69031200"></a>

              <a class="link" href="functions.html#function_geometrytype"><code class="literal">GeometryType(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns as a binary string the name of the geometry type
              of which the geometry instance
              <em class="replaceable"><code>g</code></em> is a member. The name
              corresponds to one of the instantiable
              <code class="literal">Geometry</code> subclasses.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT GeometryType(GeomFromText('POINT(1 1)'));</code></strong>
+------------------------------------------+
| GeometryType(GeomFromText('POINT(1 1)')) |
+------------------------------------------+
| POINT                                    |
+------------------------------------------+
</pre></li><li class="listitem"><p><a name="function_issimple"></a>
              <a class="indexterm" name="idp69040304"></a>

              <a class="link" href="functions.html#function_issimple"><code class="literal">IsSimple(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns 1 if the geometry value
              <em class="replaceable"><code>g</code></em> has no anomalous geometric
              points, such as self-intersection or self-tangency.
              <a class="link" href="functions.html#function_issimple"><code class="literal">IsSimple()</code></a> returns 0 if the
              argument is not simple, and <code class="literal">NULL</code> if it
              is <code class="literal">NULL</code>.
            </p><p>
              The description of each instantiable geometric class given
              earlier in the chapter includes the specific conditions
              that cause an instance of that class to be classified as
              not simple. (See
              <a class="xref" href="functions.html#gis-geometry-class-hierarchy" title="12.18.2.1. The Geometry Class Hierarchy">Section 12.18.2.1, “The Geometry Class Hierarchy”</a>.)
            </p><p>
              Prior to MySQL 5.6.1, this function always returns 0.
            </p></li><li class="listitem"><p><a name="function_srid"></a>
              <a class="indexterm" name="idp69050512"></a>

              <a class="link" href="functions.html#function_srid"><code class="literal">SRID(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns an integer indicating the Spatial Reference System
              ID for the geometry value <em class="replaceable"><code>g</code></em>.
            </p><p>
              In MySQL, the SRID value is just an integer associated
              with the geometry value. All calculations are done
              assuming Euclidean (planar) geometry.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SRID(GeomFromText('LineString(1 1,2 2)',101));</code></strong>
+-----------------------------------------------+
| SRID(GeomFromText('LineString(1 1,2 2)',101)) |
+-----------------------------------------------+
|                                           101 |
+-----------------------------------------------+
</pre></li></ul>
</div>
<p>
          The OpenGIS specification also defines the following
          functions, which MySQL does not implement:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_boundary"></a>
              <a class="indexterm" name="idp69060320"></a>

              <a class="link" href="functions.html#function_boundary"><code class="literal">Boundary(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns a geometry that is the closure of the
              combinatorial boundary of the geometry value
              <em class="replaceable"><code>g</code></em>.
            </p></li><li class="listitem"><p><a name="function_isempty"></a>
              <a class="indexterm" name="idp69066432"></a>

              <a class="link" href="functions.html#function_isempty"><code class="literal">IsEmpty(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              This function is a placeholder that returns 0 for any
              valid geometry value, 1 for any invalid geometry value or
              <code class="literal">NULL</code>.
            </p><p>
              MySQL does not support GIS <code class="literal">EMPTY</code> values
              such as <code class="literal">POINT EMPTY</code>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="point-property-functions"></a>12.18.5.2.2. <code class="literal">Point</code> Functions</h5>

</div>

</div>

</div>
<p>
          A <code class="literal">Point</code> consists of X and Y coordinates,
          which may be obtained using the following functions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_x"></a>
              <a class="indexterm" name="idp69078832"></a>

              <a class="link" href="functions.html#function_x"><code class="literal">X(<em class="replaceable"><code>p</code></em>)</code></a>
            </p><p>
              Returns the X-coordinate value for the
              <code class="literal">Point</code> object
              <em class="replaceable"><code>p</code></em> as a double-precision number.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT X(POINT(56.7, 53.34));</code></strong>
+-----------------------+
| X(POINT(56.7, 53.34)) |
+-----------------------+
|                  56.7 |
+-----------------------+
</pre></li><li class="listitem"><p><a name="function_y"></a>
              <a class="indexterm" name="idp69087600"></a>

              <a class="link" href="functions.html#function_y"><code class="literal">Y(<em class="replaceable"><code>p</code></em>)</code></a>
            </p><p>
              Returns the Y-coordinate value for the
              <code class="literal">Point</code> object
              <em class="replaceable"><code>p</code></em> as a double-precision number.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT Y(POINT(56.7, 53.34));</code></strong>
+-----------------------+
| Y(POINT(56.7, 53.34)) |
+-----------------------+
|                 53.34 |
+-----------------------+
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="linestring-property-functions"></a>12.18.5.2.3. <code class="literal">LineString</code> Functions</h5>

</div>

</div>

</div>
<p>
          A <code class="literal">LineString</code> consists of
          <code class="literal">Point</code> values. You can extract particular
          points of a <code class="literal">LineString</code>, count the number of
          points that it contains, or obtain its length.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_endpoint"></a>
              <a class="indexterm" name="idp69102000"></a>

              <a class="link" href="functions.html#function_endpoint"><code class="literal">EndPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p><p>
              Returns the <code class="literal">Point</code> that is the endpoint
              of the <code class="literal">LineString</code> value
              <em class="replaceable"><code>ls</code></em>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(EndPoint(GeomFromText(@ls)));</code></strong>
+-------------------------------------+
| AsText(EndPoint(GeomFromText(@ls))) |
+-------------------------------------+
| POINT(3 3)                          |
+-------------------------------------+
</pre></li><li class="listitem"><p><a name="function_glength"></a>
              <a class="indexterm" name="idp69112384"></a>

              <a class="link" href="functions.html#function_glength"><code class="literal">GLength(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p><p>
              Returns as a double-precision number the length of the
              <code class="literal">LineString</code> value
              <em class="replaceable"><code>ls</code></em> in its associated spatial
              reference.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT GLength(GeomFromText(@ls));</code></strong>
+----------------------------+
| GLength(GeomFromText(@ls)) |
+----------------------------+
|            2.8284271247462 |
+----------------------------+
</pre><p>
              <a class="link" href="functions.html#function_glength"><code class="literal">GLength()</code></a> is a nonstandard
              name. It corresponds to the OpenGIS
              <a class="link" href="functions.html#function_length"><code class="literal">Length()</code></a> function.
            </p></li><li class="listitem"><p><a name="function_isclosed"></a>
              <a class="indexterm" name="idp69124192"></a>

              <a class="link" href="functions.html#function_isclosed"><code class="literal">IsClosed(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p><p>
              Returns 1 if the <code class="literal">LineString</code> value
              <em class="replaceable"><code>ls</code></em> is closed (that is, its
              <a class="link" href="functions.html#function_startpoint"><code class="literal">StartPoint()</code></a> and
              <a class="link" href="functions.html#function_endpoint"><code class="literal">EndPoint()</code></a> values are the
              same) and is simple (does not pass through the same point
              more than once). Returns 0 if
              <em class="replaceable"><code>ls</code></em> is not closed, and –1
              if it is <code class="literal">NULL</code>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ls1 = '<a class="link" href="functions.html#function_linestring"><code class="literal">LineString</code></a>(1 1,2 2,3 3,2 2)';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET @ls2 = 'LineString(1 1,2 2,3 3,1 1)';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT IsClosed(<a class="link" href="functions.html#function_geomfromtext"><code class="literal">GeomFromText</code></a>(@ls1));</code></strong>
+------------------------------+
| IsClosed(GeomFromText(@ls1)) |
+------------------------------+
|                            0 |
+------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT IsClosed(GeomFromText(@ls2));</code></strong>
+------------------------------+
| IsClosed(GeomFromText(@ls2)) |
+------------------------------+
|                            1 |
+------------------------------+
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p><a name="function_numpoints"></a>
              <a class="indexterm" name="idp69140544"></a>

              <a class="link" href="functions.html#function_numpoints"><code class="literal">NumPoints(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p><p>
              Returns the number of <code class="literal">Point</code> objects in
              the <code class="literal">LineString</code> value
              <em class="replaceable"><code>ls</code></em>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT NumPoints(GeomFromText(@ls));</code></strong>
+------------------------------+
| NumPoints(GeomFromText(@ls)) |
+------------------------------+
|                            3 |
+------------------------------+
</pre></li><li class="listitem"><p><a name="function_pointn"></a>
              <a class="indexterm" name="idp69150848"></a>

              <a class="link" href="functions.html#function_pointn"><code class="literal">PointN(<em class="replaceable"><code>ls</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
            </p><p>
              Returns the <em class="replaceable"><code>N</code></em>-th
              <code class="literal">Point</code> in the
              <code class="literal">Linestring</code> value
              <em class="replaceable"><code>ls</code></em>. Points are numbered
              beginning with 1.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(PointN(GeomFromText(@ls),2));</code></strong>
+-------------------------------------+
| AsText(PointN(GeomFromText(@ls),2)) |
+-------------------------------------+
| POINT(2 2)                          |
+-------------------------------------+
</pre></li><li class="listitem"><p><a name="function_startpoint"></a>
              <a class="indexterm" name="idp69162048"></a>

              <a class="link" href="functions.html#function_startpoint"><code class="literal">StartPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p><p>
              Returns the <code class="literal">Point</code> that is the start
              point of the <code class="literal">LineString</code> value
              <em class="replaceable"><code>ls</code></em>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @ls = 'LineString(1 1,2 2,3 3)';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(StartPoint(GeomFromText(@ls)));</code></strong>
+---------------------------------------+
| AsText(StartPoint(GeomFromText(@ls))) |
+---------------------------------------+
| POINT(1 1)                            |
+---------------------------------------+
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="multilinestring-property-functions"></a>12.18.5.2.4. <code class="literal">MultiLineString</code> Functions</h5>

</div>

</div>

</div>
<p>
          These functions return properties of
          <code class="literal">MultiLineString</code> values.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="indexterm" name="idp69175920"></a>

              <a class="link" href="functions.html#function_glength"><code class="literal">GLength(<em class="replaceable"><code>mls</code></em>)</code></a>
            </p><p>
              Returns as a double-precision number the length of the
              <code class="literal">MultiLineString</code> value
              <em class="replaceable"><code>mls</code></em>. The length of
              <em class="replaceable"><code>mls</code></em> is equal to the sum of the
              lengths of its elements.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @mls = 'MultiLineString((1 1,2 2,3 3),(4 4,5 5))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT GLength(GeomFromText(@mls));</code></strong>
+-----------------------------+
| GLength(GeomFromText(@mls)) |
+-----------------------------+
|             4.2426406871193 |
+-----------------------------+
</pre><p>
              <a class="link" href="functions.html#function_glength"><code class="literal">GLength()</code></a> is a nonstandard
              name. It corresponds to the OpenGIS
              <a class="link" href="functions.html#function_length"><code class="literal">Length()</code></a> function.
            </p></li><li class="listitem"><p>
              <a class="indexterm" name="idp69186432"></a>

              <a class="link" href="functions.html#function_isclosed"><code class="literal">IsClosed(<em class="replaceable"><code>mls</code></em>)</code></a>
            </p><p>
              Returns 1 if the <code class="literal">MultiLineString</code> value
              <em class="replaceable"><code>mls</code></em> is closed (that is, the
              <a class="link" href="functions.html#function_startpoint"><code class="literal">StartPoint()</code></a> and
              <a class="link" href="functions.html#function_endpoint"><code class="literal">EndPoint()</code></a> values are the
              same for each <code class="literal">LineString</code> in
              <em class="replaceable"><code>mls</code></em>). Returns 0 if
              <em class="replaceable"><code>mls</code></em> is not closed, and –1
              if it is <code class="literal">NULL</code>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @mls = 'MultiLineString((1 1,2 2,3 3),(4 4,5 5))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT IsClosed(GeomFromText(@mls));</code></strong>
+------------------------------+
| IsClosed(GeomFromText(@mls)) |
+------------------------------+
|                            0 |
+------------------------------+
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="polygon-property-functions"></a>12.18.5.2.5. <code class="literal">Polygon</code> Functions</h5>

</div>

</div>

</div>
<p>
          These functions return properties of
          <code class="literal">Polygon</code> values.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_area"></a>
              <a class="indexterm" name="idp69203104"></a>

              <a class="link" href="functions.html#function_area"><code class="literal">Area(<em class="replaceable"><code>poly</code></em>)</code></a>
            </p><p>
              Returns as a double-precision number the area of the
              <code class="literal">Polygon</code> value
              <em class="replaceable"><code>poly</code></em>, as measured in its
              spatial reference system.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly = 'Polygon((0 0,0 3,3 0,0 0),(1 1,1 2,2 1,1 1))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT Area(GeomFromText(@poly));</code></strong>
+---------------------------+
| Area(GeomFromText(@poly)) |
+---------------------------+
|                         4 |
+---------------------------+
</pre></li><li class="listitem"><p><a name="function_exteriorring"></a>
              <a class="indexterm" name="idp69212864"></a>

              <a class="link" href="functions.html#function_exteriorring"><code class="literal">ExteriorRing(<em class="replaceable"><code>poly</code></em>)</code></a>
            </p><p>
              Returns the exterior ring of the
              <code class="literal">Polygon</code> value
              <em class="replaceable"><code>poly</code></em> as a
              <code class="literal">LineString</code>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(ExteriorRing(GeomFromText(@poly)));</code></strong>
+-------------------------------------------+
| AsText(ExteriorRing(GeomFromText(@poly))) |
+-------------------------------------------+
| LINESTRING(0 0,0 3,3 3,3 0,0 0)           |
+-------------------------------------------+
</pre></li><li class="listitem"><p><a name="function_interiorringn"></a>
              <a class="indexterm" name="idp69224064"></a>

              <a class="link" href="functions.html#function_interiorringn"><code class="literal">InteriorRingN(<em class="replaceable"><code>poly</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
            </p><p>
              Returns the <em class="replaceable"><code>N</code></em>-th interior ring
              for the <code class="literal">Polygon</code> value
              <em class="replaceable"><code>poly</code></em> as a
              <code class="literal">LineString</code>. Rings are numbered
              beginning with 1.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(InteriorRingN(GeomFromText(@poly),1));</code></strong>
+----------------------------------------------+
| AsText(InteriorRingN(GeomFromText(@poly),1)) |
+----------------------------------------------+
| LINESTRING(1 1,1 2,2 2,2 1,1 1)              |
+----------------------------------------------+
</pre></li><li class="listitem"><p><a name="function_numinteriorrings"></a>
              <a class="indexterm" name="idp69236144"></a>

              <a class="link" href="functions.html#function_numinteriorrings"><code class="literal">NumInteriorRings(<em class="replaceable"><code>poly</code></em>)</code></a>
            </p><p>
              Returns the number of interior rings in the
              <code class="literal">Polygon</code> value
              <em class="replaceable"><code>poly</code></em>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT NumInteriorRings(GeomFromText(@poly));</code></strong>
+---------------------------------------+
| NumInteriorRings(GeomFromText(@poly)) |
+---------------------------------------+
|                                     1 |
+---------------------------------------+
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="multipolygon-property-functions"></a>12.18.5.2.6. <code class="literal">MultiPolygon</code> Functions</h5>

</div>

</div>

</div>
<p>
          These functions return properties of
          <code class="literal">MultiPolygon</code> values.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="indexterm" name="idp69248256"></a>

              <a class="link" href="functions.html#function_area"><code class="literal">Area(<em class="replaceable"><code>mpoly</code></em>)</code></a>
            </p><p>
              Returns as a double-precision number the area of the
              <code class="literal">MultiPolygon</code> value
              <em class="replaceable"><code>mpoly</code></em>, as measured in its
              spatial reference system.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @mpoly =</code></strong>
    -&gt; <strong class="userinput"><code>'MultiPolygon(((0 0,0 3,3 3,3 0,0 0),(1 1,1 2,2 2,2 1,1 1)))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT Area(GeomFromText(@mpoly));</code></strong>
+----------------------------+
| Area(GeomFromText(@mpoly)) |
+----------------------------+
|                          8 |
+----------------------------+
</pre></li><li class="listitem"><p><a name="function_centroid"></a>
              <a class="indexterm" name="idp69256368"></a>

              <a class="link" href="functions.html#function_centroid"><code class="literal">Centroid(<em class="replaceable"><code>mpoly</code></em>)</code></a>
            </p><p>
              Returns the mathematical centroid for the
              <code class="literal">MultiPolygon</code> value
              <em class="replaceable"><code>mpoly</code></em> as a
              <code class="literal">Point</code>. The result is not guaranteed to
              be on the <code class="literal">MultiPolygon</code>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>GeomFromText('POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))');</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT GeometryType(@poly),AsText(Centroid(@poly));</code></strong>
+---------------------+--------------------------------------------+
| GeometryType(@poly) | AsText(Centroid(@poly))                    |
+---------------------+--------------------------------------------+
| POLYGON             | POINT(4.958333333333333 4.958333333333333) |
+---------------------+--------------------------------------------+
</pre></li></ul>
</div>
<p>
          The OpenGIS specification also defines the following function,
          which MySQL does not implement:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="indexterm" name="idp69266752"></a>

              <code class="literal">PointOnSurface(<em class="replaceable"><code>mpoly</code></em>)</code>
            </p><p>
              Returns a <code class="literal">Point</code> value that is
              guaranteed to be on the <code class="literal">MultiPolygon</code>
              value <em class="replaceable"><code>mpoly</code></em>.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="geometrycollection-property-functions"></a>12.18.5.2.7. <code class="literal">GeometryCollection</code> Functions</h5>

</div>

</div>

</div>
<p>
          These functions return properties of
          <code class="literal">GeometryCollection</code> values.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_geometryn"></a>
              <a class="indexterm" name="idp69277696"></a>

              <a class="link" href="functions.html#function_geometryn"><code class="literal">GeometryN(<em class="replaceable"><code>gc</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
            </p><p>
              Returns the <em class="replaceable"><code>N</code></em>-th geometry in
              the <code class="literal">GeometryCollection</code> value
              <em class="replaceable"><code>gc</code></em>. Geometries are numbered
              beginning with 1.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @gc = 'GeometryCollection(Point(1 1),LineString(2 2, 3 3))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT AsText(GeometryN(GeomFromText(@gc),1));</code></strong>
+----------------------------------------+
| AsText(GeometryN(GeomFromText(@gc),1)) |
+----------------------------------------+
| POINT(1 1)                             |
+----------------------------------------+
</pre></li><li class="listitem"><p><a name="function_numgeometries"></a>
              <a class="indexterm" name="idp69288240"></a>

              <a class="link" href="functions.html#function_numgeometries"><code class="literal">NumGeometries(<em class="replaceable"><code>gc</code></em>)</code></a>
            </p><p>
              Returns the number of geometries in the
              <code class="literal">GeometryCollection</code> value
              <em class="replaceable"><code>gc</code></em>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @gc = 'GeometryCollection(Point(1 1),LineString(2 2, 3 3))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT NumGeometries(GeomFromText(@gc));</code></strong>
+----------------------------------+
| NumGeometries(GeomFromText(@gc)) |
+----------------------------------+
|                                2 |
+----------------------------------+
</pre></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="functions-that-create-new-geometries-from-existing-ones"></a>12.18.5.3. Functions That Create New Geometries from Existing Ones</h4>

</div>

</div>

</div>
<p>
        The following sections describe functions that take geometry
        values as arguments and return new geometry values.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="functions-that-produce-new-geometries"></a>12.18.5.3.1. Geometry Functions That Produce New Geometries</h5>
</div>
</div>
</div>
<p>
          <a class="xref" href="functions.html#geometry-property-functions" title="12.18.5.2. Geometry Property Functions">Section 12.18.5.2, “<code class="literal">Geometry</code> Property Functions”</a>, discusses
          several functions that construct new geometries from existing
          ones. See that section for descriptions of these functions:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <a class="link" href="functions.html#function_envelope"><code class="literal">Envelope(<em class="replaceable"><code>g</code></em>)</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="functions.html#function_startpoint"><code class="literal">StartPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="functions.html#function_endpoint"><code class="literal">EndPoint(<em class="replaceable"><code>ls</code></em>)</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="functions.html#function_pointn"><code class="literal">PointN(<em class="replaceable"><code>ls</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="functions.html#function_exteriorring"><code class="literal">ExteriorRing(<em class="replaceable"><code>poly</code></em>)</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="functions.html#function_interiorringn"><code class="literal">InteriorRingN(<em class="replaceable"><code>poly</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
            </p></li><li class="listitem"><p>
              <a class="link" href="functions.html#function_geometryn"><code class="literal">GeometryN(<em class="replaceable"><code>gc</code></em>,<em class="replaceable"><code>N</code></em>)</code></a>
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="spatial-operators"></a>12.18.5.3.2. Spatial Operators</h5>

</div>

</div>

</div>
<p>
          OpenGIS proposes a number of other functions that can produce
          geometries. They are designed to implement spatial operators.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_buffer"></a>
              <a class="indexterm" name="idp69319216"></a>

              <a class="link" href="functions.html#function_buffer"><code class="literal">Buffer(<em class="replaceable"><code>g</code></em>,<em class="replaceable"><code>d</code></em>)</code></a>
            </p><p>
              Returns a geometry that represents all points whose
              distance from the geometry value
              <em class="replaceable"><code>g</code></em> is less than or equal to a
              distance of <em class="replaceable"><code>d</code></em>.
            </p><p>
              <a class="link" href="functions.html#function_buffer"><code class="literal">Buffer()</code></a> supports negative
              distances for polygons, multipolygons, and geometry
              collections containing polygons or multipolygons. For
              point, multipoint, linestring, multilinestring, and
              geometry collections not containing any polygons or
              multipolygons, <a class="link" href="functions.html#function_buffer"><code class="literal">Buffer()</code></a>
              with a negative distance returns <code class="literal">NULL</code>.
            </p><p>
              Prior to MySQL 5.6.1, this function is unimplemented.
</p></li></ul>
</div>
<p>
          The OpenGIS specification also defines the following
          functions, which MySQL does not implement:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_convexhull"></a>
              <a class="indexterm" name="idp69330144"></a>

              <a class="link" href="functions.html#function_convexhull"><code class="literal">ConvexHull(<em class="replaceable"><code>g</code></em>)</code></a>
            </p><p>
              Returns a geometry that represents the convex hull of the
              geometry value <em class="replaceable"><code>g</code></em>.
            </p></li><li class="listitem"><p><a name="function_difference"></a>
              <a class="indexterm" name="idp69335152"></a>

              <a class="link" href="functions.html#function_difference"><code class="literal">Difference(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns a geometry that represents the point set
              difference of the geometry value
              <em class="replaceable"><code>g1</code></em> with
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_intersection"></a>
              <a class="indexterm" name="idp69340992"></a>

              <a class="link" href="functions.html#function_intersection"><code class="literal">Intersection(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns a geometry that represents the point set
              intersection of the geometry values
              <em class="replaceable"><code>g1</code></em> with
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_symdifference"></a>
              <a class="indexterm" name="idp69346832"></a>

              <a class="link" href="functions.html#function_symdifference"><code class="literal">SymDifference(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns a geometry that represents the point set symmetric
              difference of the geometry value
              <em class="replaceable"><code>g1</code></em> with
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_union"></a>
              <a class="indexterm" name="idp69352672"></a>

              <a class="link" href="functions.html#function_union"><code class="literal">Union(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns a geometry that represents the point set union of
              the geometry values <em class="replaceable"><code>g1</code></em> and
              <em class="replaceable"><code>g2</code></em>.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="functions-for-testing-spatial-relations-between-geometric-objects"></a>12.18.5.4. Functions for Testing Spatial Relations Between Geometric Objects</h4>

</div>

</div>

</div>
<p>
        The functions described in these sections take two geometries as
        input parameters and return a qualitative or quantitative
        relation between them.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="relations-on-geometry-mbr"></a>12.18.5.4.1. Relations on Geometry Minimal Bounding Rectangles (MBRs)</h5>
</div>
</div>
</div>
<a class="indexterm" name="idp69359936"></a><a class="indexterm" name="idp69360976"></a><p>
          MySQL provides several functions that test relations between
          minimal bounding rectangles of two geometries
          <code class="literal">g1</code> and <code class="literal">g2</code>. The return
          values 1 and 0 indicate true and false, respectively.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_mbrcontains"></a>
              <a class="indexterm" name="idp69367216"></a>

              <a class="link" href="functions.html#function_mbrcontains"><code class="literal">MBRContains(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangle of <em class="replaceable"><code>g1</code></em> contains the
              Minimum Bounding Rectangle of
              <em class="replaceable"><code>g2</code></em>. This tests the opposite
              relationship as
              <a class="link" href="functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @g1 = GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))');</code></strong>
mysql&gt; <strong class="userinput"><code>SET @g2 = GeomFromText('Point(1 1)');</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT MBRContains(@g1,@g2), MBRContains(@g2,@g1);</code></strong>
----------------------+----------------------+
| MBRContains(@g1,@g2) | MBRContains(@g2,@g1) |
+----------------------+----------------------+
|                    1 |                    0 |
+----------------------+----------------------+
</pre></li><li class="listitem"><p><a name="function_mbrdisjoint"></a>
              <a class="indexterm" name="idp69378752"></a>

              <a class="link" href="functions.html#function_mbrdisjoint"><code class="literal">MBRDisjoint(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangles of the two geometries
              <em class="replaceable"><code>g1</code></em> and
              <em class="replaceable"><code>g2</code></em> are disjoint (do not
              intersect).
            </p></li><li class="listitem"><p><a name="function_mbrequal"></a>
              <a class="indexterm" name="idp69385712"></a>

              <a class="link" href="functions.html#function_mbrequal"><code class="literal">MBREqual(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangles of the two geometries
              <em class="replaceable"><code>g1</code></em> and
              <em class="replaceable"><code>g2</code></em> are the same.
            </p></li><li class="listitem"><p><a name="function_mbrintersects"></a>
              <a class="indexterm" name="idp69392640"></a>

              <a class="link" href="functions.html#function_mbrintersects"><code class="literal">MBRIntersects(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangles of the two geometries
              <em class="replaceable"><code>g1</code></em> and
              <em class="replaceable"><code>g2</code></em> intersect.
            </p></li><li class="listitem"><p><a name="function_mbroverlaps"></a>
              <a class="indexterm" name="idp69399568"></a>

              <a class="link" href="functions.html#function_mbroverlaps"><code class="literal">MBROverlaps(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangles of the two geometries
              <em class="replaceable"><code>g1</code></em> and
              <em class="replaceable"><code>g2</code></em> overlap. The term
              <span class="emphasis"><em>spatially overlaps</em></span> is used if two
              geometries intersect and their intersection results in a
              geometry of the same dimension but not equal to either of
              the given geometries.
            </p></li><li class="listitem"><p><a name="function_mbrtouches"></a>
              <a class="indexterm" name="idp69407136"></a>

              <a class="link" href="functions.html#function_mbrtouches"><code class="literal">MBRTouches(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangles of the two geometries
              <em class="replaceable"><code>g1</code></em> and
              <em class="replaceable"><code>g2</code></em> touch. Two geometries
              <span class="emphasis"><em>spatially touch</em></span> if the interiors of
              the geometries do not intersect, but the boundary of one
              of the geometries intersects either the boundary or the
              interior of the other.
            </p></li><li class="listitem"><p><a name="function_mbrwithin"></a>
              <a class="indexterm" name="idp69414704"></a>

              <a class="link" href="functions.html#function_mbrwithin"><code class="literal">MBRWithin(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether the Minimum Bounding
              Rectangle of <em class="replaceable"><code>g1</code></em> is within the
              Minimum Bounding Rectangle of
              <em class="replaceable"><code>g2</code></em>. This tests the opposite
              relationship as
              <a class="link" href="functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a>.
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @g1 = GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))');</code></strong>
mysql&gt; <strong class="userinput"><code>SET @g2 = GeomFromText('Polygon((0 0,0 5,5 5,5 0,0 0))');</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT MBRWithin(@g1,@g2), MBRWithin(@g2,@g1);</code></strong>
+--------------------+--------------------+
| MBRWithin(@g1,@g2) | MBRWithin(@g2,@g1) |
+--------------------+--------------------+
|                  1 |                  0 |
+--------------------+--------------------+
</pre></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="functions-that-test-spatial-relationships-between-geometries"></a>12.18.5.4.2. Functions That Test Spatial Relationships Between Geometries</h5>

</div>

</div>

</div>
<p>
          The OpenGIS specification defines the following functions.
          They test the relationship between two geometry values
          <code class="literal">g1</code> and <code class="literal">g2</code>.
        </p><p>
          The return values 1 and 0 indicate true and false,
          respectively.
</p>
<div xmlns="http://www.w3.org/1999/xhtml" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p xmlns="">
            MySQL originally implemented these functions such that they
            used object bounding rectangles and returned the same result
            as the corresponding MBR-based functions. As of MySQL 5.6.1,
            corresponding versions are available that use precise object
            shapes. These versions are named with an
            <code class="literal">ST_</code> prefix. For example,
            <a class="link" href="functions.html#function_contains"><code class="literal">Contains()</code></a> uses object
            bounding rectangles, whereas
            <a class="link" href="functions.html#function_st-contains"><code class="literal">ST_Contains()</code></a> uses object
            shapes.
          </p><p xmlns="">
            As of MySQL 5.6.1, there are also <code class="literal">ST_</code>
            aliases for existing spatial functions that were already
            exact. For example, <code class="literal">ST_IsEmpty()</code> is an
            alias for <a class="link" href="functions.html#function_isempty"><code class="literal">IsEmpty()</code></a>
</p>
</div>
<h6><a name="idp69435840"></a>
          Functions That Use Object Shapes
</h6>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_st-contains"></a>
              <a class="indexterm" name="idp69438656"></a>

              <a class="link" href="functions.html#function_st-contains"><code class="literal">ST_Contains(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> completely contains
              <em class="replaceable"><code>g2</code></em>. This tests the opposite
              relationship as
              <a class="link" href="functions.html#function_st-within"><code class="literal">ST_Within()</code></a>.
            </p></li><li class="listitem"><p><a name="function_st-crosses"></a>
              <a class="indexterm" name="idp69446416"></a>

              <a class="link" href="functions.html#function_st-crosses"><code class="literal">ST_Crosses(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 if <em class="replaceable"><code>g1</code></em> spatially
              crosses <em class="replaceable"><code>g2</code></em>. Returns
              <code class="literal">NULL</code> if <code class="literal">g1</code> is a
              <code class="literal">Polygon</code> or a
              <code class="literal">MultiPolygon</code>, or if
              <em class="replaceable"><code>g2</code></em> is a
              <code class="literal">Point</code> or a
              <code class="literal">MultiPoint</code>. Otherwise, returns 0.
            </p><p>
              The term <span class="emphasis"><em>spatially crosses</em></span> denotes a
              spatial relation between two given geometries that has the
              following properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  The two geometries intersect
                </p></li><li class="listitem"><p>
                  Their intersection results in a geometry that has a
                  dimension that is one less than the maximum dimension
                  of the two given geometries
                </p></li><li class="listitem"><p>
                  Their intersection is not equal to either of the two
                  given geometries
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="function_st-disjoint"></a>
              <a class="indexterm" name="idp69462112"></a>

              <a class="link" href="functions.html#function_st-disjoint"><code class="literal">ST_Disjoint(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> is spatially disjoint from
              (does not intersect) <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_st-equals"></a>
              <a class="indexterm" name="idp69469008"></a>

              <a class="link" href="functions.html#function_st-equals"><code class="literal">ST_Equals(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> is spatially equal to
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_st-intersects"></a>
              <a class="indexterm" name="idp69475872"></a>

              <a class="link" href="functions.html#function_st-intersects"><code class="literal">ST_Intersects(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> spatially intersects
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_st-overlaps"></a>
              <a class="indexterm" name="idp69482736"></a>

              <a class="link" href="functions.html#function_st-overlaps"><code class="literal">ST_Overlaps(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> spatially overlaps
              <em class="replaceable"><code>g2</code></em>. The term
              <span class="emphasis"><em>spatially overlaps</em></span> is used if two
              geometries intersect and their intersection results in a
              geometry of the same dimension but not equal to either of
              the given geometries.
            </p></li><li class="listitem"><p><a name="function_st-touches"></a>
              <a class="indexterm" name="idp69490256"></a>

              <a class="link" href="functions.html#function_st-touches"><code class="literal">ST_Touches(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> spatially touches
              <em class="replaceable"><code>g2</code></em>. Two geometries
              <span class="emphasis"><em>spatially touch</em></span> if the interiors of
              the geometries do not intersect, but the boundary of one
              of the geometries intersects either the boundary or the
              interior of the other.
            </p></li><li class="listitem"><p><a name="function_st-within"></a>
              <a class="indexterm" name="idp69497776"></a>

              <a class="link" href="functions.html#function_st-within"><code class="literal">ST_Within(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> is spatially within
              <em class="replaceable"><code>g2</code></em>. This tests the opposite
              relationship as
              <a class="link" href="functions.html#function_st-contains"><code class="literal">ST_Contains()</code></a>.
</p></li></ul>
</div>
<h6><a name="idp69503552"></a>
          Functions That Use Bounding Rectangles
</h6>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="function_contains"></a>
              <a class="indexterm" name="idp69506384"></a>

              <a class="link" href="functions.html#function_contains"><code class="literal">Contains(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> completely contains
              <em class="replaceable"><code>g2</code></em>. This tests the opposite
              relationship as <a class="link" href="functions.html#function_within"><code class="literal">Within()</code></a>.
            </p></li><li class="listitem"><p><a name="function_crosses"></a>
              <a class="indexterm" name="idp69514144"></a>

              <a class="link" href="functions.html#function_crosses"><code class="literal">Crosses(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 if <em class="replaceable"><code>g1</code></em> spatially
              crosses <em class="replaceable"><code>g2</code></em>. Returns
              <code class="literal">NULL</code> if <code class="literal">g1</code> is a
              <code class="literal">Polygon</code> or a
              <code class="literal">MultiPolygon</code>, or if
              <em class="replaceable"><code>g2</code></em> is a
              <code class="literal">Point</code> or a
              <code class="literal">MultiPoint</code>. Otherwise, returns 0.
            </p><p>
              The term <span class="emphasis"><em>spatially crosses</em></span> denotes a
              spatial relation between two given geometries that has the
              following properties:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  The two geometries intersect
                </p></li><li class="listitem"><p>
                  Their intersection results in a geometry that has a
                  dimension that is one less than the maximum dimension
                  of the two given geometries
                </p></li><li class="listitem"><p>
                  Their intersection is not equal to either of the two
                  given geometries
</p></li></ul>
</div>
</li><li class="listitem"><p><a name="function_disjoint"></a>
              <a class="indexterm" name="idp69529840"></a>

              <a class="link" href="functions.html#function_disjoint"><code class="literal">Disjoint(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> is spatially disjoint from
              (does not intersect) <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_equals"></a>
              <a class="indexterm" name="idp69536736"></a>

              <a class="link" href="functions.html#function_equals"><code class="literal">Equals(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> is spatially equal to
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_intersects"></a>
              <a class="indexterm" name="idp69543600"></a>

              <a class="link" href="functions.html#function_intersects"><code class="literal">Intersects(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> spatially intersects
              <em class="replaceable"><code>g2</code></em>.
            </p></li><li class="listitem"><p><a name="function_overlaps"></a>
              <a class="indexterm" name="idp69550464"></a>

              <a class="link" href="functions.html#function_overlaps"><code class="literal">Overlaps(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> spatially overlaps
              <em class="replaceable"><code>g2</code></em>. The term
              <span class="emphasis"><em>spatially overlaps</em></span> is used if two
              geometries intersect and their intersection results in a
              geometry of the same dimension but not equal to either of
              the given geometries.
            </p></li><li class="listitem"><p><a name="function_touches"></a>
              <a class="indexterm" name="idp69557984"></a>

              <a class="link" href="functions.html#function_touches"><code class="literal">Touches(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> spatially touches
              <em class="replaceable"><code>g2</code></em>. Two geometries
              <span class="emphasis"><em>spatially touch</em></span> if the interiors of
              the geometries do not intersect, but the boundary of one
              of the geometries intersects either the boundary or the
              interior of the other.
            </p></li><li class="listitem"><p><a name="function_within"></a>
              <a class="indexterm" name="idp69565504"></a>

              <a class="link" href="functions.html#function_within"><code class="literal">Within(<em class="replaceable"><code>g1</code></em>,<em class="replaceable"><code>g2</code></em>)</code></a>
            </p><p>
              Returns 1 or 0 to indicate whether
              <em class="replaceable"><code>g1</code></em> is spatially within
              <em class="replaceable"><code>g2</code></em>. This tests the opposite
              relationship as <a class="link" href="functions.html#function_contains"><code class="literal">Contains()</code></a>.
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="optimizing-spatial-analysis"></a>12.18.6. Optimizing Spatial Analysis</h3>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#creating-spatial-indexes">12.18.6.1. Creating Spatial Indexes</a></span></dt><dt><span class="section"><a href="functions.html#using-a-spatial-index">12.18.6.2. Using a Spatial Index</a></span></dt></dl>
</div>
<p>
      For <a class="link" href="storage-engines.html#myisam-storage-engine" title="14.3. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables, Search operations
      in nonspatial databases can be optimized using
      <code class="literal">SPATIAL</code> indexes. This is true for spatial
      databases as well. With the help of a great variety of
      multi-dimensional indexing methods that have previously been
      designed, it is possible to optimize spatial searches. The most
      typical of these are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Point queries that search for all objects that contain a given
          point
        </p></li><li class="listitem"><p>
          Region queries that search for all objects that overlap a
          given region
</p></li></ul>
</div>
<p>
      MySQL uses <span class="bold"><strong>R-Trees with quadratic
      splitting</strong></span> for <code class="literal">SPATIAL</code> indexes on
      spatial columns. A <code class="literal">SPATIAL</code> index is built using
      the MBR of a geometry. For most geometries, the MBR is a minimum
      rectangle that surrounds the geometries. For a horizontal or a
      vertical linestring, the MBR is a rectangle degenerated into the
      linestring. For a point, the MBR is a rectangle degenerated into
      the point.
    </p><p>
      It is also possible to create normal indexes on spatial columns.
      In a non-<code class="literal">SPATIAL</code> index, you must declare a
      prefix for any spatial column except for <code class="literal">POINT</code>
      columns.
    </p><p>
      <code class="literal">MyISAM</code> supports both <code class="literal">SPATIAL</code>
      and non-<code class="literal">SPATIAL</code> indexes. Other storage engines
      support non-<code class="literal">SPATIAL</code> indexes, as described in
      <a class="xref" href="sql-syntax.html#create-index" title="13.1.13. CREATE INDEX Syntax">Section 13.1.13, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="creating-spatial-indexes"></a>12.18.6.1. Creating Spatial Indexes</h4>
</div>
</div>
</div>
<p>
        For <a class="link" href="storage-engines.html#myisam-storage-engine" title="14.3. The MyISAM Storage Engine"><code class="literal">MyISAM</code></a> tables, MySQL can create
        spatial indexes using syntax similar to that for creating
        regular indexes, but extended with the
        <code class="literal">SPATIAL</code> keyword. Currently, columns in
        spatial indexes must be declared <code class="literal">NOT NULL</code>.
        The following examples demonstrate how to create spatial
        indexes:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            With <a class="link" href="sql-syntax.html#create-table" title="13.1.17. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>:
          </p><pre class="programlisting">CREATE TABLE geom (g GEOMETRY NOT NULL, SPATIAL INDEX(g)) ENGINE=MyISAM;</pre></li><li class="listitem"><p>
            With <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>:
          </p><pre class="programlisting">ALTER TABLE geom ADD SPATIAL INDEX(g);</pre></li><li class="listitem"><p>
            With <a class="link" href="sql-syntax.html#create-index" title="13.1.13. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>:
</p><pre class="programlisting">CREATE SPATIAL INDEX sp_index ON geom (g);</pre></li></ul>
</div>
<p>
        For <code class="literal">MyISAM</code> tables, <code class="literal">SPATIAL
        INDEX</code> creates an R-tree index. For storage engines
        that support nonspatial indexing of spatial columns, the engine
        creates a B-tree index. A B-tree index on spatial values will be
        useful for exact-value lookups, but not for range scans.
      </p><p>
        For more information on indexing spatial columns, see
        <a class="xref" href="sql-syntax.html#create-index" title="13.1.13. CREATE INDEX Syntax">Section 13.1.13, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
      </p><p>
        To drop spatial indexes, use <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> or <a class="link" href="sql-syntax.html#drop-index" title="13.1.24. DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            With <a class="link" href="sql-syntax.html#alter-table" title="13.1.7. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>:
          </p><pre class="programlisting">ALTER TABLE geom DROP INDEX g;</pre></li><li class="listitem"><p>
            With <a class="link" href="sql-syntax.html#drop-index" title="13.1.24. DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a>:
</p><pre class="programlisting">DROP INDEX sp_index ON geom;</pre></li></ul>
</div>
<p>
        Example: Suppose that a table <code class="literal">geom</code> contains
        more than 32,000 geometries, which are stored in the column
        <code class="literal">g</code> of type <code class="literal">GEOMETRY</code>. The
        table also has an <code class="literal">AUTO_INCREMENT</code> column
        <code class="literal">fid</code> for storing object ID values.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE geom;</code></strong>
+-------+----------+------+-----+---------+----------------+
| Field | Type     | Null | Key | Default | Extra          |
+-------+----------+------+-----+---------+----------------+
| fid   | int(11)  |      | PRI | NULL    | auto_increment |
| g     | geometry |      |     |         |                |
+-------+----------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM geom;</code></strong>
+----------+
| count(*) |
+----------+
|    32376 |
+----------+
1 row in set (0.00 sec)
</pre><p>
        To add a spatial index on the column <code class="literal">g</code>, use
        this statement:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE geom ADD SPATIAL INDEX(g);</code></strong>
Query OK, 32376 rows affected (4.05 sec)
Records: 32376  Duplicates: 0  Warnings: 0
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="using-a-spatial-index"></a>12.18.6.2. Using a Spatial Index</h4>

</div>

</div>

</div>
<p>
        The optimizer investigates whether available spatial indexes can
        be involved in the search for queries that use a function such
        as <a class="link" href="functions.html#function_mbrcontains"><code class="literal">MBRContains()</code></a> or
        <a class="link" href="functions.html#function_mbrwithin"><code class="literal">MBRWithin()</code></a> in the
        <code class="literal">WHERE</code> clause. The following query finds all
        objects that are in the given rectangle:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((30000 15000,
                               31000 15000,
                               31000 16000,
                               30000 16000,
                               30000 15000))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT fid,AsText(g) FROM geom WHERE</code></strong>
    -&gt; <strong class="userinput"><code>MBRContains(GeomFromText(@poly),g);</code></strong>
+-----+---------------------------------------------------------------+
| fid | AsText(g)                                                     |
+-----+---------------------------------------------------------------+
|  21 | LINESTRING(30350.4 15828.8,30350.6 15845,30333.8 15845,30 ... |
|  22 | LINESTRING(30350.6 15871.4,30350.6 15887.8,30334 15887.8, ... |
|  23 | LINESTRING(30350.6 15914.2,30350.6 15930.4,30334 15930.4, ... |
|  24 | LINESTRING(30290.2 15823,30290.2 15839.4,30273.4 15839.4, ... |
|  25 | LINESTRING(30291.4 15866.2,30291.6 15882.4,30274.8 15882. ... |
|  26 | LINESTRING(30291.6 15918.2,30291.6 15934.4,30275 15934.4, ... |
| 249 | LINESTRING(30337.8 15938.6,30337.8 15946.8,30320.4 15946. ... |
|   1 | LINESTRING(30250.4 15129.2,30248.8 15138.4,30238.2 15136. ... |
|   2 | LINESTRING(30220.2 15122.8,30217.2 15137.8,30207.6 15136, ... |
|   3 | LINESTRING(30179 15114.4,30176.6 15129.4,30167 15128,3016 ... |
|   4 | LINESTRING(30155.2 15121.4,30140.4 15118.6,30142 15109,30 ... |
|   5 | LINESTRING(30192.4 15085,30177.6 15082.2,30179.2 15072.4, ... |
|   6 | LINESTRING(30244 15087,30229 15086.2,30229.4 15076.4,3024 ... |
|   7 | LINESTRING(30200.6 15059.4,30185.6 15058.6,30186 15048.8, ... |
|  10 | LINESTRING(30179.6 15017.8,30181 15002.8,30190.8 15003.6, ... |
|  11 | LINESTRING(30154.2 15000.4,30168.6 15004.8,30166 15014.2, ... |
|  13 | LINESTRING(30105 15065.8,30108.4 15050.8,30118 15053,3011 ... |
| 154 | LINESTRING(30276.2 15143.8,30261.4 15141,30263 15131.4,30 ... |
| 155 | LINESTRING(30269.8 15084,30269.4 15093.4,30258.6 15093,30 ... |
| 157 | LINESTRING(30128.2 15011,30113.2 15010.2,30113.6 15000.4, ... |
+-----+---------------------------------------------------------------+
20 rows in set (0.00 sec)
</pre><p>
        Use <a class="link" href="sql-syntax.html#explain" title="13.8.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> to check the way this
        query is executed:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((30000 15000,
                               31000 15000,
                               31000 16000,
                               30000 16000,
                               30000 15000))';</code></strong>
mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT fid,AsText(g) FROM geom WHERE</code></strong>
    -&gt; <strong class="userinput"><code>MBRContains(GeomFromText(@poly),g)\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: geom
         type: range
possible_keys: g
          key: g
      key_len: 32
          ref: NULL
         rows: 50
        Extra: Using where
1 row in set (0.00 sec)
</pre><p>
        Check what would happen without a spatial index:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((30000 15000,
                               31000 15000,
                               31000 16000,
                               30000 16000,
                               30000 15000))';</code></strong>
mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT fid,AsText(g) FROM g IGNORE INDEX (g) WHERE</code></strong>
    -&gt; <strong class="userinput"><code>MBRContains(GeomFromText(@poly),g)\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: geom
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 32376
        Extra: Using where
1 row in set (0.00 sec)
</pre><p>
        Executing the <a class="link" href="sql-syntax.html#select" title="13.2.9. SELECT Syntax"><code class="literal">SELECT</code></a> statement
        without the spatial index yields the same result but causes the
        execution time to rise from 0.00 seconds to 0.46 seconds:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @poly =</code></strong>
    -&gt; <strong class="userinput"><code>'Polygon((30000 15000,
                               31000 15000,
                               31000 16000,
                               30000 16000,
                               30000 15000))';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT fid,AsText(g) FROM geom IGNORE INDEX (g) WHERE</code></strong>
    -&gt; <strong class="userinput"><code>MBRContains(GeomFromText(@poly),g);</code></strong>
+-----+---------------------------------------------------------------+
| fid | AsText(g)                                                     |
+-----+---------------------------------------------------------------+
|   1 | LINESTRING(30250.4 15129.2,30248.8 15138.4,30238.2 15136. ... |
|   2 | LINESTRING(30220.2 15122.8,30217.2 15137.8,30207.6 15136, ... |
|   3 | LINESTRING(30179 15114.4,30176.6 15129.4,30167 15128,3016 ... |
|   4 | LINESTRING(30155.2 15121.4,30140.4 15118.6,30142 15109,30 ... |
|   5 | LINESTRING(30192.4 15085,30177.6 15082.2,30179.2 15072.4, ... |
|   6 | LINESTRING(30244 15087,30229 15086.2,30229.4 15076.4,3024 ... |
|   7 | LINESTRING(30200.6 15059.4,30185.6 15058.6,30186 15048.8, ... |
|  10 | LINESTRING(30179.6 15017.8,30181 15002.8,30190.8 15003.6, ... |
|  11 | LINESTRING(30154.2 15000.4,30168.6 15004.8,30166 15014.2, ... |
|  13 | LINESTRING(30105 15065.8,30108.4 15050.8,30118 15053,3011 ... |
|  21 | LINESTRING(30350.4 15828.8,30350.6 15845,30333.8 15845,30 ... |
|  22 | LINESTRING(30350.6 15871.4,30350.6 15887.8,30334 15887.8, ... |
|  23 | LINESTRING(30350.6 15914.2,30350.6 15930.4,30334 15930.4, ... |
|  24 | LINESTRING(30290.2 15823,30290.2 15839.4,30273.4 15839.4, ... |
|  25 | LINESTRING(30291.4 15866.2,30291.6 15882.4,30274.8 15882. ... |
|  26 | LINESTRING(30291.6 15918.2,30291.6 15934.4,30275 15934.4, ... |
| 154 | LINESTRING(30276.2 15143.8,30261.4 15141,30263 15131.4,30 ... |
| 155 | LINESTRING(30269.8 15084,30269.4 15093.4,30258.6 15093,30 ... |
| 157 | LINESTRING(30128.2 15011,30113.2 15010.2,30113.6 15000.4, ... |
| 249 | LINESTRING(30337.8 15938.6,30337.8 15946.8,30320.4 15946. ... |
+-----+---------------------------------------------------------------+
20 rows in set (0.46 sec)
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-gis-conformance-and-compatibility"></a>12.18.7. MySQL Conformance and Compatibility</h3>

</div>

</div>

</div>
<p>
      MySQL does not yet implement the following GIS features:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Additional Metadata Views
        </p><p>
          OpenGIS specifications propose several additional metadata
          views. For example, a system view named
          <code class="literal">GEOMETRY_COLUMNS</code> contains a description of
          geometry columns, one row for each geometry column in the
          database.
        </p></li><li class="listitem"><p>
          The OpenGIS function <a class="link" href="functions.html#function_length"><code class="literal">Length()</code></a>
          on <code class="literal">LineString</code> and
          <code class="literal">MultiLineString</code> currently should be called
          in MySQL as <a class="link" href="functions.html#function_glength"><code class="literal">GLength()</code></a>
        </p><p>
          The problem is that there is an existing SQL function
          <a class="link" href="functions.html#function_length"><code class="literal">Length()</code></a> that calculates the
          length of string values, and sometimes it is not possible to
          distinguish whether the function is called in a textual or
          spatial context. We need either to solve this somehow, or
          decide on another function name.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="precision-math"></a>12.19. Precision Math</h2>

</div>

</div>

</div>
<div class="toc">
<dl><dt><span class="section"><a href="functions.html#precision-math-numbers">12.19.1. Types of Numeric Values</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-decimal-changes">12.19.2. <code class="literal">DECIMAL</code> Data Type Changes</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-expressions">12.19.3. Expression Handling</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-rounding">12.19.4. Rounding Behavior</a></span></dt><dt><span class="section"><a href="functions.html#precision-math-examples">12.19.5. Precision Math Examples</a></span></dt></dl>
</div>
<a class="indexterm" name="idp69661728"></a><a class="indexterm" name="idp69662800"></a><a class="indexterm" name="idp69663872"></a><a class="indexterm" name="idp69664944"></a><a class="indexterm" name="idp69666016"></a><a class="indexterm" name="idp69667088"></a><a class="indexterm" name="idp69668160"></a><a class="indexterm" name="idp69669648"></a><a class="indexterm" name="idp69671136"></a><a class="indexterm" name="idp69672208"></a><a class="indexterm" name="idp69673296"></a><a class="indexterm" name="idp69674368"></a><p>
    MySQL 5.6 provides support for precision math: numeric
    value handling that results in extremely accurate results and a high
    degree control over invalid values. Precision math is based on these
    two features:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        SQL modes that control how strict the server is about accepting
        or rejecting invalid data.
      </p></li><li class="listitem"><p>
        The MySQL library for fixed-point arithmetic.
</p></li></ul>
</div>
<p>
    These features have several implications for numeric operations and
    provide a high degree of compliance with standard SQL:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <span class="bold"><strong>Precise calculations</strong></span>: For
        exact-value numbers, calculations do not introduce
        floating-point errors. Instead, exact precision is used. For
        example, MySQL treats a number such as <code class="literal">.0001</code>
        as an exact value rather than as an approximation, and summing
        it 10,000 times produces a result of exactly
        <code class="literal">1</code>, not a value that is merely
        <span class="quote">“<span class="quote">close</span>”</span> to 1.
      </p></li><li class="listitem"><p>
        <span class="bold"><strong>Well-defined rounding behavior</strong></span>:
        For exact-value numbers, the result of
        <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> depends on its argument,
        not on environmental factors such as how the underlying C
        library works.
      </p></li><li class="listitem"><p>
        <span class="bold"><strong>Platform independence</strong></span>:
        Operations on exact numeric values are the same across different
        platforms such as Windows and Unix.
      </p></li><li class="listitem"><p>
        <span class="bold"><strong>Control over handling of invalid
        values</strong></span>: Overflow and division by zero are detectable
        and can be treated as errors. For example, you can treat a value
        that is too large for a column as an error rather than having
        the value truncated to lie within the range of the column's data
        type. Similarly, you can treat division by zero as an error
        rather than as an operation that produces a result of
        <code class="literal">NULL</code>. The choice of which approach to take is
        determined by the setting of the server SQL mode.
</p></li></ul>
</div>
<p>
    The following discussion covers several aspects of how precision
    math works, including possible incompatibilities with older
    applications. At the end, some examples are given that demonstrate
    how MySQL 5.6 handles numeric operations precisely. For
    information about controlling the SQL mode, see
    <a class="xref" href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-numbers"></a>12.19.1. Types of Numeric Values</h3>
</div>
</div>
</div>
<p>
      The scope of precision math for exact-value operations includes
      the exact-value data types (<a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a>
      and integer types) and exact-value numeric literals.
      Approximate-value data types and numeric literals are handled as
      floating-point numbers.
    </p><p>
      Exact-value numeric literals have an integer part or fractional
      part, or both. They may be signed. Examples: <code class="literal">1</code>,
      <code class="literal">.2</code>, <code class="literal">3.4</code>,
      <code class="literal">-5</code>, <code class="literal">-6.78</code>,
      <code class="literal">+9.10</code>.
    </p><p>
      Approximate-value numeric literals are represented in scientific
      notation with a mantissa and exponent. Either or both parts may be
      signed. Examples: <code class="literal">1.2E3</code>,
      <code class="literal">1.2E-3</code>, <code class="literal">-1.2E3</code>,
      <code class="literal">-1.2E-3</code>.
    </p><p>
      Two numbers that look similar may be treated differently. For
      example, <code class="literal">2.34</code> is an exact-value (fixed-point)
      number, whereas <code class="literal">2.34E0</code> is an approximate-value
      (floating-point) number.
    </p><p>
      The <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> data type is a
      fixed-point type and calculations are exact. In MySQL, the
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> type has several synonyms:
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">NUMERIC</code></a>,
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DEC</code></a>,
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">FIXED</code></a>. The integer types also are
      exact-value types.
    </p><p>
      The <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a> and
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a> data types are
      floating-point types and calculations are approximate. In MySQL,
      types that are synonymous with
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">FLOAT</code></a> or
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE</code></a> are
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">DOUBLE PRECISION</code></a> and
      <a class="link" href="data-types.html#floating-point-types" title="11.2.3. Floating-Point Types (Approximate Value) - FLOAT, DOUBLE"><code class="literal">REAL</code></a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-decimal-changes"></a>12.19.2. <code class="literal">DECIMAL</code> Data Type Changes</h3>

</div>

</div>

</div>
<p>
      This section discusses the characteristics of the
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> data type (and its
      synonyms) in MySQL 5.6, with particular regard to the
      following topics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Maximum number of digits
        </p></li><li class="listitem"><p>
          Storage format
        </p></li><li class="listitem"><p>
          Storage requirements
        </p></li><li class="listitem"><p>
          The nonstandard MySQL extension to the upper range of
          <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> columns
</p></li></ul>
</div>
<p>
      Possible incompatibilities with applications that are written for
      older versions of MySQL (prior to 5.0.3) are noted throughout this
      section.
    </p><p>
      The declaration syntax for a
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> column is
      <code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>.
      The ranges of values for the arguments in MySQL 5.6
      are as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <em class="replaceable"><code>M</code></em> is the maximum number of digits
          (the precision). It has a range of 1 to 65. (Older versions of
          MySQL permitted a range of 1 to 254.)
        </p></li><li class="listitem"><p>
          <em class="replaceable"><code>D</code></em> is the number of digits to the
          right of the decimal point (the scale). It has a range of 0 to
          30 and must be no larger than <em class="replaceable"><code>M</code></em>.
</p></li></ul>
</div>
<p>
      The maximum value of 65 for <em class="replaceable"><code>M</code></em> means
      that calculations on <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> values
      are accurate up to 65 digits. This limit of 65 digits of precision
      also applies to exact-value numeric literals, so the maximum range
      of such literals differs from before. (In older versions of MySQL,
      decimal values could have up to 254 digits. However, calculations
      were done using floating-point and thus were approximate, not
      exact.)
    </p><p>
      Values for <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> columns in MySQL
      5.6 are stored using a binary format that packs nine
      decimal digits into 4 bytes. The storage requirements for the
      integer and fractional parts of each value are determined
      separately. Each multiple of nine digits requires 4 bytes, and any
      remaining digits left over require some fraction of 4 bytes. The
      storage required for remaining digits is given by the following
      table.
</p>
<div class="informaltable">
<table summary="This table lists the number of bytes required for
remaining/leftover digits." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Leftover Digits</th><th scope="col">Number of Bytes</th></tr></thead><tbody><tr><td scope="row">0</td><td>0</td></tr><tr><td scope="row">1–2</td><td>1</td></tr><tr><td scope="row">3–4</td><td>2</td></tr><tr><td scope="row">5–6</td><td>3</td></tr><tr><td scope="row">7–9</td><td>4</td></tr></tbody></table>
</div>
<p>
      For example, a <code class="literal">DECIMAL(18,9)</code> column has nine
      digits on either side of the decimal point, so the integer part
      and the fractional part each require 4 bytes. A
      <code class="literal">DECIMAL(20,6)</code> column has fourteen integer
      digits and six fractional digits. The integer digits require four
      bytes for nine of the digits and 3 bytes for the remaining five
      digits. The six fractional digits require 3 bytes.
    </p><p>
      Unlike some older versions of MySQL,
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> columns in MySQL
      5.6 do not store a leading <code class="literal">+</code>
      character or <code class="literal">-</code> character or leading
      <code class="literal">0</code> digits. If you insert
      <code class="literal">+0003.1</code> into a <code class="literal">DECIMAL(5,1)</code>
      column, it is stored as <code class="literal">3.1</code>. For negative
      numbers, a literal <code class="literal">-</code> character is not stored.
      Applications that rely on the older behavior must be modified to
      account for this change.
    </p><p>
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> columns in MySQL
      5.6 do not permit values larger than the range
      implied by the column definition. For example, a
      <code class="literal">DECIMAL(3,0)</code> column supports a range of
      <code class="literal">-999</code> to <code class="literal">999</code>. A
      <code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>
      column permits at most <em class="replaceable"><code>M</code></em> -
      <em class="replaceable"><code>D</code></em> digits to the left of the decimal
      point. This is not compatible with applications relying on older
      versions of MySQL that permitted storing an extra digit in lieu of
      a <code class="literal">+</code> sign.
    </p><p>
      The SQL standard requires that the precision of
      <code class="literal">NUMERIC(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>
      be <span class="emphasis"><em>exactly</em></span> <em class="replaceable"><code>M</code></em>
      digits. For
      <code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>,
      the standard requires a precision of at least
      <em class="replaceable"><code>M</code></em> digits but permits more. In MySQL,
      <code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>
      and
      <code class="literal">NUMERIC(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>
      are the same, and both have a precision of exactly
      <em class="replaceable"><code>M</code></em> digits.
    </p><p>
      For more detailed information about porting applications that rely
      on the old treatment of the <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a>
      data type, see the <em class="citetitle">MySQL 5.0 Reference
      Manual</em>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-expressions"></a>12.19.3. Expression Handling</h3>

</div>

</div>

</div>
<p>
      With precision math, exact-value numbers are used as given
      whenever possible. For example, numbers in comparisons are used
      exactly as given without a change in value. In strict SQL mode,
      for <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> into a column with an
      exact data type (<a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> or
      integer), a number is inserted with its exact value if it is
      within the column range. When retrieved, the value should be the
      same as what was inserted. (Without strict mode, truncation for
      <a class="link" href="sql-syntax.html#insert" title="13.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> is permissible.)
    </p><p>
      Handling of a numeric expression depends on what kind of values
      the expression contains:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If any approximate values are present, the expression is
          approximate and is evaluated using floating-point arithmetic.
        </p></li><li class="listitem"><p>
          If no approximate values are present, the expression contains
          only exact values. If any exact value contains a fractional
          part (a value following the decimal point), the expression is
          evaluated using <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> exact
          arithmetic and has a precision of 65 digits. The term
          <span class="quote">“<span class="quote">exact</span>”</span> is subject to the limits of what can be
          represented in binary. For example, <code class="literal">1.0/3.0</code>
          can be approximated in decimal notation as
          <code class="literal">.333...</code>, but not written as an exact
          number, so <code class="literal">(1.0/3.0)*3.0</code> does not evaluate
          to exactly <code class="literal">1.0</code>.
        </p></li><li class="listitem"><p>
          Otherwise, the expression contains only integer values. The
          expression is exact and is evaluated using integer arithmetic
          and has a precision the same as
          <a class="link" href="data-types.html#integer-types" title="11.2.1. Integer Types (Exact Value) - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"><code class="literal">BIGINT</code></a> (64 bits).
</p></li></ul>
</div>
<p>
      If a numeric expression contains any strings, they are converted
      to double-precision floating-point values and the expression is
      approximate.
    </p><p>
      Inserts into numeric columns are affected by the SQL mode, which
      is controlled by the <a class="link" href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a>
      system variable. (See <a class="xref" href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.) The
      following discussion mentions strict mode (selected by the
      <a class="link" href="server-administration.html#sqlmode_strict_all_tables"><code class="literal">STRICT_ALL_TABLES</code></a> or
      <a class="link" href="server-administration.html#sqlmode_strict_trans_tables"><code class="literal">STRICT_TRANS_TABLES</code></a> mode values)
      and <a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a>.
      To turn on all restrictions, you can simply use
      <a class="link" href="server-administration.html#sqlmode_traditional"><code class="literal">TRADITIONAL</code></a> mode, which includes
      both strict mode values and
      <a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a>:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode='TRADITIONAL';</code></strong>
</pre><p>
      If a number is inserted into an exact type column
      (<a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> or integer), it is
      inserted with its exact value if it is within the column range.
    </p><p>
      If the value has too many digits in the fractional part, rounding
      occurs and a warning is generated. Rounding is done as described
      in <a class="xref" href="functions.html#precision-math-rounding" title="12.19.4. Rounding Behavior">Section 12.19.4, “Rounding Behavior”</a>.
    </p><p>
      If the value has too many digits in the integer part, it is too
      large and is handled as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If strict mode is not enabled, the value is truncated to the
          nearest legal value and a warning is generated.
        </p></li><li class="listitem"><p>
          If strict mode is enabled, an overflow error occurs.
</p></li></ul>
</div>
<p>
      Underflow is not detected, so underflow handling is undefined.
    </p><p>
      By default, division by zero produces a result of
      <code class="literal">NULL</code> and no warning. With the
      <a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a> SQL
      mode enabled, MySQL handles division by zero differently:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If strict mode is not enabled, a warning occurs.
        </p></li><li class="listitem"><p>
          If strict mode is enabled, inserts and updates involving
          division by zero are prohibited, and an error occurs.
</p></li></ul>
</div>
<p>
      In other words, inserts and updates involving expressions that
      perform division by zero can be treated as errors, but this
      requires
      <a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a> in
      addition to strict mode.
    </p><p>
      Suppose that we have this statement:
    </p><pre class="programlisting">INSERT INTO t SET i = 1/0;</pre><p>
      This is what happens for combinations of strict and
      <a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a>
      modes.
</p>
<div class="informaltable">
<table summary="This table shows what happens for combinations of strict
        and
        ERROR_FOR_DIVISION_BY_ZERO
        modes." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col"><a class="link" href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> Value</th><th scope="col">Result</th></tr></thead><tbody><tr><td scope="row"><code class="literal">''</code> (Default)</td><td>No warning, no error; <code class="literal">i</code> is set to
              <code class="literal">NULL</code>.</td></tr><tr><td scope="row">strict</td><td>No warning, no error; <code class="literal">i</code> is set to
              <code class="literal">NULL</code>.</td></tr><tr><td scope="row"><a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a></td><td>Warning, no error; <code class="literal">i</code> is set to
<code class="literal">NULL</code>.</td></tr><tr><td scope="row">strict,<a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a></td><td>Error condition; no row is inserted.</td></tr></tbody></table>
</div>
<p>
      For inserts of strings into numeric columns, conversion from
      string to number is handled as follows if the string has
      nonnumeric contents:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A string that does not begin with a number cannot be used as a
          number and produces an error in strict mode, or a warning
          otherwise. This includes the empty string.
        </p></li><li class="listitem"><p>
          A string that begins with a number can be converted, but the
          trailing nonnumeric portion is truncated. If the truncated
          portion contains anything other than spaces, this produces an
          error in strict mode, or a warning otherwise.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-rounding"></a>12.19.4. Rounding Behavior</h3>

</div>

</div>

</div>
<p>
      This section discusses precision math rounding for the
      <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> function and for inserts
      into columns with exact-value types
      (<a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> and integer).
    </p><p>
      The <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> function rounds
      differently depending on whether its argument is exact or
      approximate:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          For exact-value numbers,
          <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> uses the <span class="quote">“<span class="quote">round
          half up</span>”</span> rule: A value with a fractional part of .5 or
          greater is rounded up to the next integer if positive or down
          to the next integer if negative. (In other words, it is
          rounded away from zero.) A value with a fractional part less
          than .5 is rounded down to the next integer if positive or up
          to the next integer if negative.
        </p></li><li class="listitem"><p>
          For approximate-value numbers, the result depends on the C
          library. On many systems, this means that
          <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> uses the <span class="quote">“<span class="quote">round
          to nearest even</span>”</span> rule: A value with any fractional part
          is rounded to the nearest even integer.
</p></li></ul>
</div>
<p>
      The following example shows how rounding differs for exact and
      approximate values:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ROUND(2.5), ROUND(25E-1);</code></strong>
+------------+--------------+
| ROUND(2.5) | ROUND(25E-1) |
+------------+--------------+
| 3          |            2 |
+------------+--------------+
</pre><p>
      For inserts into a <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> or
      integer column, the target is an exact data type, so rounding uses
      <span class="quote">“<span class="quote">round half away from zero,</span>”</span> regardless of whether
      the value to be inserted is exact or approximate:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t (d DECIMAL(10,0));</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES(2.5),(2.5E0);</code></strong>
Query OK, 2 rows affected, 2 warnings (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 2

mysql&gt; <strong class="userinput"><code>SELECT d FROM t;</code></strong>
+------+
| d    |
+------+
| 3    |
| 3    |
+------+
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="precision-math-examples"></a>12.19.5. Precision Math Examples</h3>

</div>

</div>

</div>
<p>
      This section provides some examples that show precision math query
      results in MySQL 5.6. These examples demonstrate the
      principles described in
      <a class="xref" href="functions.html#precision-math-expressions" title="12.19.3. Expression Handling">Section 12.19.3, “Expression Handling”</a>, and
      <a class="xref" href="functions.html#precision-math-rounding" title="12.19.4. Rounding Behavior">Section 12.19.4, “Rounding Behavior”</a>.
    </p><p>
      <span class="bold"><strong>Example 1</strong></span>. Numbers are used with
      their exact value as given when possible:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT (.1 + .2) = .3;</code></strong>
+----------------+
| (.1 + .2) = .3 |
+----------------+
|              1 |
+----------------+
</pre><p>
      For floating-point values, results are inexact:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT (.1E0 + .2E0) = .3E0;</code></strong>
+----------------------+
| (.1E0 + .2E0) = .3E0 |
+----------------------+
|                    0 |
+----------------------+
</pre><p>
      Another way to see the difference in exact and approximate value
      handling is to add a small number to a sum many times. Consider
      the following stored procedure, which adds
      <code class="literal">.0001</code> to a variable 1,000 times.
    </p><pre class="programlisting">CREATE PROCEDURE p ()
BEGIN
  DECLARE i INT DEFAULT 0;
  DECLARE d DECIMAL(10,4) DEFAULT 0;
  DECLARE f FLOAT DEFAULT 0;
  WHILE i &lt; 10000 DO
    SET d = d + .0001;
    SET f = f + .0001E0;
    SET i = i + 1;
  END WHILE;
  SELECT d, f;
END;</pre><p>
      The sum for both <code class="literal">d</code> and <code class="literal">f</code>
      logically should be 1, but that is true only for the decimal
      calculation. The floating-point calculation introduces small
      errors:
    </p><pre class="programlisting">+--------+------------------+
| d      | f                |
+--------+------------------+
| 1.0000 | 0.99999999999991 |
+--------+------------------+</pre><p>
      <span class="bold"><strong>Example 2</strong></span>. Multiplication is
      performed with the scale required by standard SQL. That is, for
      two numbers <em class="replaceable"><code>X1</code></em> and
      <em class="replaceable"><code>X2</code></em> that have scale
      <em class="replaceable"><code>S1</code></em> and <em class="replaceable"><code>S2</code></em>,
      the scale of the result is <code class="literal"><em class="replaceable"><code>S1</code></em>
      + <em class="replaceable"><code>S2</code></em></code>:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT .01 * .01;</code></strong>
+-----------+
| .01 * .01 |
+-----------+
| 0.0001    |
+-----------+
</pre><p>
      <span class="bold"><strong>Example 3</strong></span>. Rounding behavior for
      exact-value numbers is well-defined:
    </p><p>
      Rounding behavior (for example, with the
      <a class="link" href="functions.html#function_round"><code class="literal">ROUND()</code></a> function) is independent of
      the implementation of the underlying C library, which means that
      results are consistent from platform to platform.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Rounding for exact-value columns
          (<a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a> and integer) and
          exact-valued numbers uses the <span class="quote">“<span class="quote">round half away from
          zero</span>”</span> rule. Values with a fractional part of .5 or
          greater are rounded away from zero to the nearest integer, as
          shown here:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ROUND(2.5), ROUND(-2.5);</code></strong>
+------------+-------------+
| ROUND(2.5) | ROUND(-2.5) |
+------------+-------------+
| 3          | -3          |
+------------+-------------+
</pre></li><li class="listitem"><p>
          Rounding for floating-point values uses the C library, which
          on many systems uses the <span class="quote">“<span class="quote">round to nearest even</span>”</span>
          rule. Values with any fractional part on such systems are
          rounded to the nearest even integer:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ROUND(2.5E0), ROUND(-2.5E0);</code></strong>
+--------------+---------------+
| ROUND(2.5E0) | ROUND(-2.5E0) |
+--------------+---------------+
|            2 |            -2 |
+--------------+---------------+
</pre></li></ul>
</div>
<p>
      <span class="bold"><strong>Example 4</strong></span>. In strict mode,
      inserting a value that is out of range for a column causes an
      error, rather than truncation to a legal value.
    </p><p>
      When MySQL is not running in strict mode, truncation to a legal
      value occurs:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode='';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t SET i = 128;</code></strong>
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT i FROM t;</code></strong>
+------+
| i    |
+------+
|  127 |
+------+
1 row in set (0.00 sec)
</pre><p>
      However, an error occurs if strict mode is in effect:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode='STRICT_ALL_TABLES';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t SET i = 128;</code></strong>
ERROR 1264 (22003): Out of range value adjusted for column 'i' at row 1

mysql&gt; <strong class="userinput"><code>SELECT i FROM t;</code></strong>
Empty set (0.00 sec)
</pre><p>
      <span class="bold"><strong>Example 5</strong></span>: In strict mode and
      with <a class="link" href="server-administration.html#sqlmode_error_for_division_by_zero"><code class="literal">ERROR_FOR_DIVISION_BY_ZERO</code></a>
      set, division by zero causes an error, not a result of
      <code class="literal">NULL</code>.
    </p><p>
      In nonstrict mode, division by zero has a result of
      <code class="literal">NULL</code>:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode='';</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t SET i = 1 / 0;</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT i FROM t;</code></strong>
+------+
| i    |
+------+
| NULL |
+------+
1 row in set (0.03 sec)
</pre><p>
      However, division by zero is an error if the proper SQL modes are
      in effect:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode='STRICT_ALL_TABLES,ERROR_FOR_DIVISION_BY_ZERO';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t (i TINYINT);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t SET i = 1 / 0;</code></strong>
ERROR 1365 (22012): Division by 0

mysql&gt; <strong class="userinput"><code>SELECT i FROM t;</code></strong>
Empty set (0.01 sec)
</pre><p>
      <span class="bold"><strong>Example 6</strong></span>. Exact-value literals
      are evaluated as exact values.
    </p><p>
      Prior to MySQL 5.0.3, exact-value and approximate-value literals
      both are evaluated as double-precision floating-point values:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION();</code></strong>
+------------+
| VERSION()  |
+------------+
| 4.1.18-log |
+------------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t SELECT 2.5 AS a, 25E-1 AS b;</code></strong>
Query OK, 1 row affected (0.07 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>DESCRIBE t;</code></strong>
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| a     | double(3,1) |      |     | 0.0     |       |
| b     | double      |      |     | 0       |       |
+-------+-------------+------+-----+---------+-------+
2 rows in set (0.04 sec)
</pre><p>
      As of MySQL 5.0.3, the approximate-value literal is evaluated
      using floating point, but the exact-value literal is handled as
      <a class="link" href="data-types.html#fixed-point-types" title="11.2.2. Fixed-Point Types (Exact Value) - DECIMAL, NUMERIC"><code class="literal">DECIMAL</code></a>:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION();</code></strong>
+-----------------+
| VERSION()       |
+-----------------+
| 5.1.6-alpha-log |
+-----------------+
1 row in set (0.11 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t SELECT 2.5 AS a, 25E-1 AS b;</code></strong>
Query OK, 1 row affected (0.01 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>DESCRIBE t;</code></strong>
+-------+-----------------------+------+-----+---------+-------+
| Field | Type                  | Null | Key | Default | Extra |
+-------+-----------------------+------+-----+---------+-------+
| a     | decimal(2,1) unsigned | NO   |     | 0.0     |       |
| b     | double                | NO   |     | 0       |       |
+-------+-----------------------+------+-----+---------+-------+
2 rows in set (0.01 sec)
</pre><p>
      <span class="bold"><strong>Example 7</strong></span>. If the argument to an
      aggregate function is an exact numeric type, the result is also an
      exact numeric type, with a scale at least that of the argument.
    </p><p>
      Consider these statements:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t (i INT, d DECIMAL, f FLOAT);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES(1,1,1);</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE y SELECT AVG(i), AVG(d), AVG(f) FROM t;</code></strong>
</pre><p>
      Before MySQL 5.0.3, the result is a double no matter the argument
      type:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE y;</code></strong>
+--------+--------------+------+-----+---------+-------+
| Field  | Type         | Null | Key | Default | Extra |
+--------+--------------+------+-----+---------+-------+
| AVG(i) | double(17,4) | YES  |     | NULL    |       |
| AVG(d) | double(17,4) | YES  |     | NULL    |       |
| AVG(f) | double       | YES  |     | NULL    |       |
+--------+--------------+------+-----+---------+-------+
</pre><p>
      As of MySQL 5.0.3, the result is a double only for the
      floating-point argument. For exact type arguments, the result is
      also an exact type:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE y;</code></strong>
+--------+---------------+------+-----+---------+-------+
| Field  | Type          | Null | Key | Default | Extra |
+--------+---------------+------+-----+---------+-------+
| AVG(i) | decimal(14,4) | YES  |     | NULL    |       |
| AVG(d) | decimal(14,4) | YES  |     | NULL    |       |
| AVG(f) | double        | YES  |     | NULL    |       |
+--------+---------------+------+-----+---------+-------+
</pre><p>
      The result is a double only for the floating-point argument. For
      exact type arguments, the result is also an exact type.
</p>
</div>

</div>

</div>
<div class="copyright-footer">
    Copyright © 1997, 2013, Oracle and/or its affiliates. All
    rights reserved.
<a href="preface.html#legalnotice">Legal Notices</a>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left"><a accesskey="p" href="data-types.html">Prev</a></td>
<td width="20%" align="center"><a accesskey="u" href="">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="sql-syntax.html">Next</a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 11. Data Types</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top">Chapter 13. SQL Statement Syntax</td>
</tr>
</table>
</div>
</body>
</html>
